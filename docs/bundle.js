/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t,e,n,r,i={94:t=>{"use strict";t.exports=n,t.exports.default=n;var e=1e20;function n(t,e,n,r,i,s){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=s||"normal",this.radius=n||8;var o=this.size=this.fontSize+2*this.buffer,a=o+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=o,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(o/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function r(t,e,n,r,s,o){for(var a=0;a<e;a++)i(t,a,e,n,r,s,o);for(var l=0;l<n;l++)i(t,l*e,1,e,r,s,o)}function i(t,n,r,i,s,o,a){var l,u,c,h;for(o[0]=0,a[0]=-e,a[1]=e,l=0;l<i;l++)s[l]=t[n+l*r];for(l=1,u=0,c=0;l<i;l++){do{h=o[u],c=(s[l]-s[h]+l*l-h*h)/(l-h)/2}while(c<=a[u]&&--u>-1);o[++u]=l,a[u]=c,a[u+1]=e}for(l=0,u=0;l<i;l++){for(;a[u+1]<l;)u++;h=o[u],t[n+l*r]=s[h]+(l-h)*(l-h)}}n.prototype._draw=function(t,n){var i,s,o,a,l,u,c,h,d,f=this.ctx.measureText(t),p=f.width,g=2*this.buffer;n&&this.useMetrics?(l=Math.floor(f.actualBoundingBoxAscent),h=this.buffer+Math.ceil(f.actualBoundingBoxAscent),u=this.buffer,c=this.buffer,i=(s=Math.min(this.size,Math.ceil(f.actualBoundingBoxRight-f.actualBoundingBoxLeft)))+g,o=(a=Math.min(this.size-u,Math.ceil(f.actualBoundingBoxAscent+f.actualBoundingBoxDescent)))+g,this.ctx.textBaseline="alphabetic"):(i=s=this.size,o=a=this.size,l=19*this.fontSize/24,u=c=0,h=this.middle,this.ctx.textBaseline="middle"),s&&a&&(this.ctx.clearRect(c,u,s,a),this.ctx.fillText(t,this.buffer,h),d=this.ctx.getImageData(c,u,s,a));var m=new Uint8ClampedArray(i*o);return function(t,n,r,i,s,o,a){o.fill(e,0,n*r),a.fill(0,0,n*r);for(var l=(n-i)/2,u=0;u<s;u++)for(var c=0;c<i;c++){var h=(u+l)*n+c+l,d=t.data[4*(u*i+c)+3]/255;if(1===d)o[h]=0,a[h]=e;else if(0===d)o[h]=e,a[h]=0;else{var f=Math.max(0,.5-d),p=Math.max(0,d-.5);o[h]=f*f,a[h]=p*p}}}(d,i,o,s,a,this.gridOuter,this.gridInner),r(this.gridOuter,i,o,this.f,this.v,this.z),r(this.gridInner,i,o,this.f,this.v,this.z),function(t,e,n,r,i,s,o){for(var a=0;a<e*n;a++){var l=Math.sqrt(r[a])-Math.sqrt(i[a]);t[a]=Math.round(255-255*(l/s+o))}}(m,i,o,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:m,metrics:{width:s,height:a,sdfWidth:i,sdfHeight:o,top:l,left:0,advance:p}}},n.prototype.draw=function(t){return this._draw(t,!1).data},n.prototype.drawWithMetrics=function(t){return this._draw(t,!0)}},705:(t,e,n)=>{"use strict";var r=n(540);function i(t){var e=[1/0,1/0,-1/0,-1/0];return r.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}i.default=i,e.Z=i},102:(t,e)=>{"use strict";function n(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function r(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!f(t[0])||!f(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,r)}function i(t,e,r){void 0===r&&(r={});for(var i=0,s=t;i<s.length;i++){var o=s[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function s(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,r)}function o(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function a(t,e,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:t},e,r)}function l(t,e,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:t},e,r)}function u(t,e,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:t},e,r)}function c(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function h(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function d(t){return t%(2*Math.PI)*180/Math.PI}function f(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return r(e).geometry;case"LineString":return s(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return l(e).geometry;case"MultiLineString":return a(e).geometry;case"MultiPolygon":return u(e).geometry;default:throw new Error(t+" is invalid")}},e.point=r,e.points=function(t,e,n){return void 0===n&&(n={}),o(t.map((function(t){return r(t,e)})),n)},e.polygon=i,e.polygons=function(t,e,n){return void 0===n&&(n={}),o(t.map((function(t){return i(t,e)})),n)},e.lineString=s,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),o(t.map((function(t){return s(t,e)})),n)},e.featureCollection=o,e.multiLineString=a,e.multiPoint=l,e.multiPolygon=u,e.geometryCollection=function(t,e,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:t},e,r)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=c,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return d(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=d,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return c(h(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var s=e.areaFactors[r];if(!s)throw new Error("invalid final units");return t/i*s},e.isNumber=f,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!f(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},540:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(102);function i(t,e,n){if(null!==t)for(var r,s,o,a,l,u,c,h,d=0,f=0,p=t.type,g="FeatureCollection"===p,m="Feature"===p,v=g?t.features.length:1,y=0;y<v;y++){l=(h=!!(c=g?t.features[y].geometry:m?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var b=0;b<l;b++){var _=0,w=0;if(null!==(a=h?c.geometries[b]:c)){u=a.coordinates;var x=a.type;switch(d=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(u,f,y,_,w))return!1;f++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],f,y,_,w))return!1;f++,"MultiPoint"===x&&_++}"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(s=0;s<u[r].length-d;s++){if(!1===e(u[r][s],f,y,_,w))return!1;f++}"MultiLineString"===x&&_++,"Polygon"===x&&w++}"Polygon"===x&&_++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(w=0,s=0;s<u[r].length;s++){for(o=0;o<u[r][s].length-d;o++){if(!1===e(u[r][s][o],f,y,_,w))return!1;f++}w++}_++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===i(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function s(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function o(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function a(t,e){var n,r,i,s,o,a,l,u,c,h,d=0,f="FeatureCollection"===t.type,p="Feature"===t.type,g=f?t.features.length:1;for(n=0;n<g;n++){for(a=f?t.features[n].geometry:p?t.geometry:t,u=f?t.features[n].properties:p?t.properties:{},c=f?t.features[n].bbox:p?t.bbox:void 0,h=f?t.features[n].id:p?t.id:void 0,o=(l=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<o;i++)if(null!==(s=l?a.geometries[i]:a))switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(s,d,u,c,h))return!1;break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===e(s.geometries[r],d,u,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,d,u,c,h))return!1;d++}}function l(t,e){a(t,(function(t,n,i,s,o){var a,l=null===t?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==e(r.feature(t,i,{bbox:s,id:o}),n,0)&&void 0}switch(l){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var u=0;u<t.coordinates.length;u++){var c={type:a,coordinates:t.coordinates[u]};if(!1===e(r.feature(c,i),n,u))return!1}}))}function u(t,e){l(t,(function(t,n,s){var o=0;if(t.geometry){var a=t.geometry.type;if("Point"!==a&&"MultiPoint"!==a){var l,u=0,c=0,h=0;return!1!==i(t,(function(i,a,d,f,p){if(void 0===l||n>u||f>c||p>h)return l=i,u=n,c=f,h=p,void(o=0);var g=r.lineString([l,i],t.properties);if(!1===e(g,n,s,p,o))return!1;o++,l=i}))&&void 0}}}))}function c(t,e){if(!t)throw new Error("geojson is required");l(t,(function(t,n,i){if(null!==t.geometry){var s=t.geometry.type,o=t.geometry.coordinates;switch(s){case"LineString":if(!1===e(t,n,i,0,0))return!1;break;case"Polygon":for(var a=0;a<o.length;a++)if(!1===e(r.lineString(o[a],t.properties),n,i,a))return!1}}}))}e.coordAll=function(t){var e=[];return i(t,(function(t){e.push(t)})),e},e.coordEach=i,e.coordReduce=function(t,e,n,r){var s=n;return i(t,(function(t,r,i,o,a){s=0===r&&void 0===n?t:e(s,t,r,i,o,a)}),r),s},e.featureEach=o,e.featureReduce=function(t,e,n){var r=n;return o(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.findPoint=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,s=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.coordIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),l=l||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return r.point(u,l,e);case"MultiPoint":return s<0&&(s=u.length+s),r.point(u[s],l,e);case"LineString":return a<0&&(a=u.length+a),r.point(u[a],l,e);case"Polygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a),r.point(u[o][a],l,e);case"MultiLineString":return s<0&&(s=u.length+s),a<0&&(a=u[s].length+a),r.point(u[s][a],l,e);case"MultiPolygon":return s<0&&(s=u.length+s),o<0&&(o=u[s].length+o),a<0&&(a=u[s][o].length-a),r.point(u[s][o][a],l,e)}throw new Error("geojson is invalid")},e.findSegment=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,s=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.segmentIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),l=l||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=u.length+a-1),r.lineString([u[a],u[a+1]],l,e);case"Polygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a-1),r.lineString([u[o][a],u[o][a+1]],l,e);case"MultiLineString":return s<0&&(s=u.length+s),a<0&&(a=u[s].length+a-1),r.lineString([u[s][a],u[s][a+1]],l,e);case"MultiPolygon":return s<0&&(s=u.length+s),o<0&&(o=u[s].length+o),a<0&&(a=u[s][o].length-a-1),r.lineString([u[s][o][a],u[s][o][a+1]],l,e)}throw new Error("geojson is invalid")},e.flattenEach=l,e.flattenReduce=function(t,e,n){var r=n;return l(t,(function(t,i,s){r=0===i&&0===s&&void 0===n?t:e(r,t,i,s)})),r},e.geomEach=a,e.geomReduce=function(t,e,n){var r=n;return a(t,(function(t,i,s,o,a){r=0===i&&void 0===n?t:e(r,t,i,s,o,a)})),r},e.lineEach=c,e.lineReduce=function(t,e,n){var r=n;return c(t,(function(t,i,s,o){r=0===i&&void 0===n?t:e(r,t,i,s,o)})),r},e.propEach=s,e.propReduce=function(t,e,n){var r=n;return s(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.segmentEach=u,e.segmentReduce=function(t,e,n){var r=n,i=!1;return u(t,(function(t,s,o,a,l){r=!1===i&&void 0===n?t:e(r,t,s,o,a,l),i=!0})),r}},830:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([t.id,"html,body{margin:0;height:100%;font-size:12px}.react-grid-item{pointer-events:auto;overflow:hidden}.react-grid-layout{overflow:hidden;position:absolute;pointer-events:none;top:0;right:0;left:0;bottom:10px}#dark-mode-toggle{position:fixed;right:10px;top:5px}#dark-mode-toggle .checkbox{opacity:0;position:absolute}#dark-mode-toggle .checkbox-label{width:30px;height:10px;background:gray;border-radius:10px;position:relative;padding:5px 4px;cursor:pointer;display:flex;justify-content:space-between;align-items:center}#dark-mode-toggle .fa-moon{color:#f1c40f}#dark-mode-toggle .fa-sun{color:#f39c12}#dark-mode-toggle .checkbox-label .ball{opacity:.9;width:19px;height:18px;position:absolute;left:1px;top:.9px;border-radius:50%;transition:transform .2s linear}#dark-mode-toggle .checkbox:checked+.checkbox-label .ball{transform:translateX(17px)}#layout{margin:0;height:100vh;overflow:hidden}#attribution-text{margin:0;position:fixed;bottom:1px;right:1px;font-size:10px}",""]);const a=o},632:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([t.id,".legend{position:fixed;top:5px;padding:5px;left:5px;border:1px solid #d3d3d3;background-color:rgba(255,255,255,.8);color:#222}.legend h3{margin:0;text-align:center;color:#555}.legend a{text-decoration:none}.legend table{border-collapse:collapse}.legend table td{border-top:1px solid #d3d3d3;border-bottom:1px solid #d3d3d3}.mapboxgl-ctrl-icon{padding:0 !important}.cc a{color:#46468c !important}.mapboxgl-marker{cursor:pointer}",""]);const a=o},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,s){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(r)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var u=0;u<t.length;u++){var c=[].concat(t[u]);r&&o[c[0]]||(void 0!==s&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=s),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),e.push(c))}},e}},81:t=>{"use strict";t.exports=function(t){return t[1]}},187:t=>{"use strict";function e(t,e,r){r=r||2;var s,o,a,l,h,d,p,g=e&&e.length,m=g?e[0]*r:t.length,v=n(t,0,m,r,!0),y=[];if(!v||v.next===v.prev)return y;if(g&&(v=function(t,e,r,i){var s,o,a,l=[];for(s=0,o=e.length;s<o;s++)(a=n(t,e[s]*i,s<o-1?e[s+1]*i:t.length,i,!1))===a.next&&(a.steiner=!0),l.push(f(a));for(l.sort(u),s=0;s<l.length;s++)r=c(l[s],r);return r}(t,e,v,r)),t.length>80*r){s=a=t[0],o=l=t[1];for(var b=r;b<m;b+=r)(h=t[b])<s&&(s=h),(d=t[b+1])<o&&(o=d),h>a&&(a=h),d>l&&(l=d);p=0!==(p=Math.max(a-s,l-o))?32767/p:0}return i(v,y,r,s,o,p,0),y}function n(t,e,n,r,i){var s,o;if(i===E(t,e,n,r)>0)for(s=e;s<n;s+=r)o=M(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=M(s,t[s],t[s+1],o);return o&&v(o,o.next)&&(S(o),o=o.next),o}function r(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!v(r,r.next)&&0!==m(r.prev,r,r.next))r=r.next;else{if(S(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function i(t,e,n,u,c,h,f){if(t){!f&&h&&function(t,e,n,r){var i=t;do{0===i.z&&(i.z=d(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,s,o,a,l,u=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<u&&(a++,r=r.nextZ);e++);for(l=u;a>0||l>0&&r;)0!==a&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,u*=2}while(o>1)}(i)}(t,u,c,h);for(var p,g,m=t;t.prev!==t.next;)if(p=t.prev,g=t.next,h?o(t,u,c,h):s(t))e.push(p.i/n|0),e.push(t.i/n|0),e.push(g.i/n|0),S(t),t=g.next,m=g.next;else if((t=g)===m){f?1===f?i(t=a(r(t),e,n),e,n,u,c,h,2):2===f&&l(t,e,n,u,c,h):i(r(t),e,n,u,c,h,1);break}}}function s(t){var e=t.prev,n=t,r=t.next;if(m(e,n,r)>=0)return!1;for(var i=e.x,s=n.x,o=r.x,a=e.y,l=n.y,u=r.y,c=i<s?i<o?i:o:s<o?s:o,h=a<l?a<u?a:u:l<u?l:u,d=i>s?i>o?i:o:s>o?s:o,f=a>l?a>u?a:u:l>u?l:u,g=r.next;g!==e;){if(g.x>=c&&g.x<=d&&g.y>=h&&g.y<=f&&p(i,a,s,l,o,u,g.x,g.y)&&m(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function o(t,e,n,r){var i=t.prev,s=t,o=t.next;if(m(i,s,o)>=0)return!1;for(var a=i.x,l=s.x,u=o.x,c=i.y,h=s.y,f=o.y,g=a<l?a<u?a:u:l<u?l:u,v=c<h?c<f?c:f:h<f?h:f,y=a>l?a>u?a:u:l>u?l:u,b=c>h?c>f?c:f:h>f?h:f,_=d(g,v,e,n,r),w=d(y,b,e,n,r),x=t.prevZ,M=t.nextZ;x&&x.z>=_&&M&&M.z<=w;){if(x.x>=g&&x.x<=y&&x.y>=v&&x.y<=b&&x!==i&&x!==o&&p(a,c,l,h,u,f,x.x,x.y)&&m(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,M.x>=g&&M.x<=y&&M.y>=v&&M.y<=b&&M!==i&&M!==o&&p(a,c,l,h,u,f,M.x,M.y)&&m(M.prev,M,M.next)>=0)return!1;M=M.nextZ}for(;x&&x.z>=_;){if(x.x>=g&&x.x<=y&&x.y>=v&&x.y<=b&&x!==i&&x!==o&&p(a,c,l,h,u,f,x.x,x.y)&&m(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;M&&M.z<=w;){if(M.x>=g&&M.x<=y&&M.y>=v&&M.y<=b&&M!==i&&M!==o&&p(a,c,l,h,u,f,M.x,M.y)&&m(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function a(t,e,n){var i=t;do{var s=i.prev,o=i.next.next;!v(s,o)&&y(s,i,i.next,o)&&w(s,o)&&w(o,s)&&(e.push(s.i/n|0),e.push(i.i/n|0),e.push(o.i/n|0),S(i),S(i.next),i=t=o),i=i.next}while(i!==t);return r(i)}function l(t,e,n,s,o,a){var l=t;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&g(l,u)){var c=x(l,u);return l=r(l,l.next),c=r(c,c.next),i(l,e,n,s,o,a,0),void i(c,e,n,s,o,a,0)}u=u.next}l=l.next}while(l!==t)}function u(t,e){return t.x-e.x}function c(t,e){var n=function(t,e){var n,r=e,i=t.x,s=t.y,o=-1/0;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var a=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>o&&(o=a,n=r.x<r.next.x?r:r.next,a===i))return n}r=r.next}while(r!==e);if(!n)return null;var l,u=n,c=n.x,d=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&p(s<d?i:o,s,c,d,s<d?o:i,s,r.x,r.y)&&(l=Math.abs(s-r.y)/(i-r.x),w(r,t)&&(l<f||l===f&&(r.x>n.x||r.x===n.x&&h(n,r)))&&(n=r,f=l)),r=r.next}while(r!==u);return n}(t,e);if(!n)return e;var i=x(n,t);return r(i,i.next),r(n,n.next)}function h(t,e){return m(t.prev,t,e.prev)<0&&m(e.next,t,t.next)<0}function d(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function p(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function g(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&y(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(w(t,e)&&w(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(m(t.prev,t,e.prev)||m(t,e.prev,e))||v(t,e)&&m(t.prev,t,t.next)>0&&m(e.prev,e,e.next)>0)}function m(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function v(t,e){return t.x===e.x&&t.y===e.y}function y(t,e,n,r){var i=_(m(t,e,n)),s=_(m(t,e,r)),o=_(m(n,r,t)),a=_(m(n,r,e));return i!==s&&o!==a||!(0!==i||!b(t,n,e))||!(0!==s||!b(t,r,e))||!(0!==o||!b(n,t,r))||!(0!==a||!b(n,e,r))}function b(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function _(t){return t>0?1:t<0?-1:0}function w(t,e){return m(t.prev,t,t.next)<0?m(t,e,t.next)>=0&&m(t,t.prev,e)>=0:m(t,e,t.prev)<0||m(t,t.next,e)<0}function x(t,e){var n=new P(t.i,t.x,t.y),r=new P(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function M(t,e,n,r){var i=new P(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function S(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function P(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function E(t,e,n,r){for(var i=0,s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}t.exports=e,t.exports.default=e,e.deviation=function(t,e,n,r){var i=e&&e.length,s=i?e[0]*n:t.length,o=Math.abs(E(t,0,s,n));if(i)for(var a=0,l=e.length;a<l;a++){var u=e[a]*n,c=a<l-1?e[a+1]*n:t.length;o-=Math.abs(E(t,u,c,n))}var h=0;for(a=0;a<r.length;a+=3){var d=r[a]*n,f=r[a+1]*n,p=r[a+2]*n;h+=Math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return 0===o&&0===h?0:Math.abs((h-o)/o)},e.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var o=0;o<e;o++)n.vertices.push(t[i][s][o]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},787:(t,e,n)=>{var r=n(582),i=n(102),s=n(540),o=n(705).Z,a=s.featureEach,l=(s.coordEach,i.polygon,i.featureCollection);function u(t){var e=new r(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:o(t),r.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:o(t),e.push(t)})):a(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:o(t),e.push(t)})),r.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:o(t),r.prototype.remove.call(this,t,e)},e.clear=function(){return r.prototype.clear.call(this)},e.search=function(t){var e=r.prototype.search.call(this,this.toBBox(t));return l(e)},e.collides=function(t){return r.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=r.prototype.all.call(this);return l(t)},e.toJSON=function(){return r.prototype.toJSON.call(this)},e.fromJSON=function(t){return r.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=o(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=o(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}t.exports=u,t.exports.default=u},144:(t,e,n)=>{var r,i=void 0!==n.g?n.g:"undefined"!=typeof window?window:{},s=n(893);"undefined"!=typeof document?r=document:(r=i["__GLOBAL_DOCUMENT_CACHE@4"])||(r=i["__GLOBAL_DOCUMENT_CACHE@4"]=s),t.exports=r},797:(t,e,n)=>{var r;!function(i,s,o,a){"use strict";var l,u=["","webkit","Moz","MS","ms","o"],c=s.createElement("div"),h=Math.round,d=Math.abs,f=Date.now;function p(t,e,n){return setTimeout(w(t,n),e)}function g(t,e,n){return!!Array.isArray(t)&&(m(t,n[e],n),!0)}function m(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==a)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function v(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=i.console&&(i.console.warn||i.console.log);return s&&s.call(i.console,r,n),t.apply(this,arguments)}}l="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==a&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var y=v((function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===a)&&(t[r[i]]=e[r[i]]),i++;return t}),"extend","Use `assign`."),b=v((function(t,e){return y(t,e,!0)}),"merge","Use `assign`.");function _(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&l(r,n)}function w(t,e){return function(){return t.apply(e,arguments)}}function x(t,e){return"function"==typeof t?t.apply(e&&e[0]||a,e):t}function M(t,e){return t===a?e:t}function S(t,e,n){m(k(e),(function(e){t.addEventListener(e,n,!1)}))}function P(t,e,n){m(k(e),(function(e){t.removeEventListener(e,n,!1)}))}function E(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function C(t,e){return t.indexOf(e)>-1}function k(t){return t.trim().split(/\s+/g)}function T(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function A(t){return Array.prototype.slice.call(t,0)}function L(t,e,n){for(var r=[],i=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];T(i,o)<0&&r.push(t[s]),i[s]=o,s++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}function O(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),s=0;s<u.length;){if((r=(n=u[s])?n+i:e)in t)return r;s++}return a}var I=1;function R(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}var z="ontouchstart"in i,F=O(i,"PointerEvent")!==a,N=z&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),j="touch",D="mouse",B=["x","y"],U=["clientX","clientY"];function V(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){x(t.options.enable,[t])&&n.handler(e)},this.init()}function W(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,s=1&e&&r-i==0,o=12&e&&r-i==0;n.isFirst=!!s,n.isFinal=!!o,s&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=G(e)),i>1&&!n.firstMultiple?n.firstMultiple=G(e):1===i&&(n.firstMultiple=!1);var s=n.firstInput,o=n.firstMultiple,l=o?o.center:s.center,u=e.center=H(r);e.timeStamp=f(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=Y(l,u),e.distance=Z(l,u),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},s=t.prevInput||{};1!==e.eventType&&4!==s.eventType||(i=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=X(e.deltaX,e.deltaY);var c,h,p=q(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=p.x,e.overallVelocityY=p.y,e.overallVelocity=d(p.x)>d(p.y)?p.x:p.y,e.scale=o?(c=o.pointers,Z((h=r)[0],h[1],U)/Z(c[0],c[1],U)):1,e.rotation=o?function(t,e){return Y(e[1],e[0],U)+Y(t[1],t[0],U)}(o.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,i,s,o=t.lastInterval||e,l=e.timeStamp-o.timeStamp;if(8!=e.eventType&&(l>25||o.velocity===a)){var u=e.deltaX-o.deltaX,c=e.deltaY-o.deltaY,h=q(l,u,c);r=h.x,i=h.y,n=d(h.x)>d(h.y)?h.x:h.y,s=X(u,c),t.lastInterval=e}else n=o.velocity,r=o.velocityX,i=o.velocityY,s=o.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=s}(n,e);var g=t.element;E(e.srcEvent.target,g)&&(g=e.srcEvent.target),e.target=g}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function G(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:h(t.pointers[n].clientX),clientY:h(t.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:e,center:H(e),deltaX:t.deltaX,deltaY:t.deltaY}}function H(t){var e=t.length;if(1===e)return{x:h(t[0].clientX),y:h(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:h(n/e),y:h(r/e)}}function q(t,e,n){return{x:e/t||0,y:n/t||0}}function X(t,e){return t===e?1:d(t)>=d(e)?t<0?2:4:e<0?8:16}function Z(t,e,n){n||(n=B);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function Y(t,e,n){n||(n=B);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}V.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&P(this.element,this.evEl,this.domHandler),this.evTarget&&P(this.target,this.evTarget,this.domHandler),this.evWin&&P(R(this.element),this.evWin,this.domHandler)}};var $={mousedown:1,mousemove:2,mouseup:4},Q="mousedown",K="mousemove mouseup";function J(){this.evEl=Q,this.evWin=K,this.pressed=!1,V.apply(this,arguments)}_(J,V,{handler:function(t){var e=$[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:D,srcEvent:t}))}});var tt={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},et={2:j,3:"pen",4:D,5:"kinect"},nt="pointerdown",rt="pointermove pointerup pointercancel";function it(){this.evEl=nt,this.evWin=rt,V.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(nt="MSPointerDown",rt="MSPointerMove MSPointerUp MSPointerCancel"),_(it,V,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=tt[r],s=et[t.pointerType]||t.pointerType,o=s==j,a=T(e,t.pointerId,"pointerId");1&i&&(0===t.button||o)?a<0&&(e.push(t),a=e.length-1):12&i&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),n&&e.splice(a,1))}});var st={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ot="touchstart",at="touchstart touchmove touchend touchcancel";function lt(){this.evTarget=ot,this.evWin=at,this.started=!1,V.apply(this,arguments)}function ut(t,e){var n=A(t.touches),r=A(t.changedTouches);return 12&e&&(n=L(n.concat(r),"identifier",!0)),[n,r]}_(lt,V,{handler:function(t){var e=st[t.type];if(1===e&&(this.started=!0),this.started){var n=ut.call(this,t,e);12&e&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:j,srcEvent:t})}}});var ct={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ht="touchstart touchmove touchend touchcancel";function dt(){this.evTarget=ht,this.targetIds={},V.apply(this,arguments)}function ft(t,e){var n=A(t.touches),r=this.targetIds;if(3&e&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,s,o=A(t.changedTouches),a=[],l=this.target;if(s=n.filter((function(t){return E(t.target,l)})),1===e)for(i=0;i<s.length;)r[s[i].identifier]=!0,i++;for(i=0;i<o.length;)r[o[i].identifier]&&a.push(o[i]),12&e&&delete r[o[i].identifier],i++;return a.length?[L(s.concat(a),"identifier",!0),a]:void 0}function pt(){V.apply(this,arguments);var t=w(this.handler,this);this.touch=new dt(this.manager,t),this.mouse=new J(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function gt(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,mt.call(this,e)):12&t&&mt.call(this,e)}function mt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)}),2500)}}function vt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],s=Math.abs(e-i.x),o=Math.abs(n-i.y);if(s<=25&&o<=25)return!0}return!1}_(dt,V,{handler:function(t){var e=ct[t.type],n=ft.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:j,srcEvent:t})}}),_(pt,V,{handler:function(t,e,n){var r=n.pointerType==j,i=n.pointerType==D;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)gt.call(this,e,n);else if(i&&vt.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var yt=O(c.style,"touchAction"),bt=yt!==a,_t="compute",wt="auto",xt="manipulation",Mt="none",St="pan-x",Pt="pan-y",Et=function(){if(!bt)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!e||i.CSS.supports("touch-action",n)})),t}();function Ct(t,e){this.manager=t,this.set(e)}Ct.prototype={set:function(t){t==_t&&(t=this.compute()),bt&&this.manager.element.style&&Et[t]&&(this.manager.element.style[yt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return m(this.manager.recognizers,(function(e){x(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(C(t,Mt))return Mt;var e=C(t,St),n=C(t,Pt);return e&&n?Mt:e||n?e?St:Pt:C(t,xt)?xt:wt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=C(r,Mt)&&!Et.none,s=C(r,Pt)&&!Et["pan-y"],o=C(r,St)&&!Et["pan-x"];if(i){var a=1===t.pointers.length,l=t.distance<2,u=t.deltaTime<250;if(a&&l&&u)return}if(!o||!s)return i||s&&6&n||o&&24&n?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var kt=32;function Tt(t){this.options=l({},this.defaults,t||{}),this.id=I++,this.manager=null,this.options.enable=M(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function At(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function Lt(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function Ot(t,e){var n=e.manager;return n?n.get(t):t}function It(){Tt.apply(this,arguments)}function Rt(){It.apply(this,arguments),this.pX=null,this.pY=null}function zt(){It.apply(this,arguments)}function Ft(){Tt.apply(this,arguments),this._timer=null,this._input=null}function Nt(){It.apply(this,arguments)}function jt(){It.apply(this,arguments)}function Dt(){Tt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Bt(t,e){return(e=e||{}).recognizers=M(e.recognizers,Bt.defaults.preset),new Ut(t,e)}function Ut(t,e){this.options=l({},Bt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new(this.options.inputClass||(F?it:N?dt:z?pt:J))(this,W),this.touchAction=new Ct(this,this.options.touchAction),Vt(this,!0),m(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Vt(t,e){var n,r=t.element;r.style&&(m(t.options.cssProps,(function(i,s){n=O(r.style,s),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}Tt.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(g(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Ot(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return g(t,"dropRecognizeWith",this)||(t=Ot(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(g(t,"requireFailure",this))return this;var e=this.requireFail;return-1===T(e,t=Ot(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(g(t,"dropRequireFailure",this))return this;t=Ot(t,this);var e=T(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<8&&r(e.options.event+At(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=8&&r(e.options.event+At(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=kt},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=l({},t);if(!x(this.options.enable,[this,e]))return this.reset(),void(this.state=kt);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},_(It,Tt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,i=this.attrTest(t);return r&&(8&n||!i)?16|e:r||i?4&n?8|e:2&e?4|e:2:kt}}),_(Rt,It,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(Pt),24&t&&e.push(St),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,s=t.deltaX,o=t.deltaY;return i&e.direction||(6&e.direction?(i=0===s?1:s<0?2:4,n=s!=this.pX,r=Math.abs(t.deltaX)):(i=0===o?1:o<0?8:16,n=o!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return It.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Lt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),_(zt,It,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Mt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),_(Ft,Tt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[wt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||12&t.eventType&&!i)this.reset();else if(1&t.eventType)this.reset(),this._timer=p((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return kt},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),_(Nt,It,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Mt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),_(jt,It,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Rt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:24&n&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&d(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=Lt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),_(Dt,Tt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[xt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=t.eventType)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<e.interval,o=!this.pCenter||Z(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,o&&s?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=p((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return kt},failTimeout:function(){return this._timer=p((function(){this.state=kt}),this.options.interval,this),kt},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Bt.VERSION="2.0.7",Bt.defaults={domEvents:!1,touchAction:_t,enable:!0,inputTarget:null,inputClass:null,preset:[[Nt,{enable:!1}],[zt,{enable:!1},["rotate"]],[jt,{direction:6}],[Rt,{direction:6},["swipe"]],[Dt],[Dt,{event:"doubletap",taps:2},["tap"]],[Ft]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Ut.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&8&i.state)&&(i=e.curRecognizer=null);for(var s=0;s<r.length;)n=r[s],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&14&n.state&&(i=e.curRecognizer=n),s++}},get:function(t){if(t instanceof Tt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(g(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(g(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=T(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var n=this.handlers;return m(k(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==a){var n=this.handlers;return m(k(t),(function(t){e?n[t]&&n[t].splice(T(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=s.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&Vt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(Bt,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:kt,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Ut,Input:V,TouchAction:Ct,TouchInput:dt,MouseInput:J,PointerEventInput:it,TouchMouseInput:pt,SingleTouchInput:lt,Recognizer:Tt,AttrRecognizer:It,Tap:Dt,Pan:Rt,Swipe:jt,Pinch:zt,Rotate:Nt,Press:Ft,on:S,off:P,each:m,merge:b,extend:y,assign:l,inherit:_,bindFn:w,prefixed:O}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=Bt,(r=function(){return Bt}.call(e,n,e,t))===a||(t.exports=r)}(window,document)},679:(t,e,n)=>{"use strict";var r=n(296),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(t){return r.isMemo(t)?o:a[t.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=o;var u=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;t.exports=function t(e,n,r){if("string"!=typeof n){if(p){var i=f(n);i&&i!==p&&t(e,i,r)}var o=c(n);h&&(o=o.concat(h(n)));for(var a=l(e),g=l(n),m=0;m<o.length;++m){var v=o[m];if(!(s[v]||r&&r[v]||g&&g[v]||a&&a[v])){var y=d(n,v);try{u(e,v,y)}catch(t){}}}}return e}},103:(t,e)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function w(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case c:case h:case s:case a:case o:case f:return t;default:switch(t=t&&t.$$typeof){case u:case d:case m:case g:case l:return t;default:return e}}case i:return e}}}function x(t){return w(t)===h}e.AsyncMode=c,e.ConcurrentMode=h,e.ContextConsumer=u,e.ContextProvider=l,e.Element=r,e.ForwardRef=d,e.Fragment=s,e.Lazy=m,e.Memo=g,e.Portal=i,e.Profiler=a,e.StrictMode=o,e.Suspense=f,e.isAsyncMode=function(t){return x(t)||w(t)===c},e.isConcurrentMode=x,e.isContextConsumer=function(t){return w(t)===u},e.isContextProvider=function(t){return w(t)===l},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return w(t)===d},e.isFragment=function(t){return w(t)===s},e.isLazy=function(t){return w(t)===m},e.isMemo=function(t){return w(t)===g},e.isPortal=function(t){return w(t)===i},e.isProfiler=function(t){return w(t)===a},e.isStrictMode=function(t){return w(t)===o},e.isSuspense=function(t){return w(t)===f},e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===s||t===h||t===a||t===o||t===f||t===p||"object"==typeof t&&null!==t&&(t.$$typeof===m||t.$$typeof===g||t.$$typeof===l||t.$$typeof===u||t.$$typeof===d||t.$$typeof===y||t.$$typeof===b||t.$$typeof===_||t.$$typeof===v)},e.typeOf=w},296:(t,e,n)=>{"use strict";t.exports=n(103)},671:function(t,e){var n,r;void 0===(r="function"==typeof(n=function(){var t=function(){},e={},n={},r={};function i(t,e){if(t){var i=r[t];if(n[t]=e,i)for(;i.length;)i[0](t,e),i.splice(0,1)}}function s(e,n){e.call&&(e={success:e}),n.length?(e.error||t)(n):(e.success||t)(e)}function o(e,n,r,i){var s,a,l=document,u=r.async,c=(r.numRetries||0)+1,h=r.before||t,d=e.replace(/[\?|#].*$/,""),f=e.replace(/^(css|img)!/,"");i=i||0,/(^css!|\.css$)/.test(d)?((a=l.createElement("link")).rel="stylesheet",a.href=f,(s="hideFocus"in a)&&a.relList&&(s=0,a.rel="preload",a.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(d)?(a=l.createElement("img")).src=f:((a=l.createElement("script")).src=e,a.async=void 0===u||u),a.onload=a.onerror=a.onbeforeload=function(t){var l=t.type[0];if(s)try{a.sheet.cssText.length||(l="e")}catch(t){18!=t.code&&(l="e")}if("e"==l){if((i+=1)<c)return o(e,n,r,i)}else if("preload"==a.rel&&"style"==a.as)return a.rel="stylesheet";n(e,l,t.defaultPrevented)},!1!==h(e,a)&&l.head.appendChild(a)}function a(t,n,r){var a,l;if(n&&n.trim&&(a=n),l=(a?r:n)||{},a){if(a in e)throw"LoadJS";e[a]=!0}function u(e,n){!function(t,e,n){var r,i,s=(t=t.push?t:[t]).length,a=s,l=[];for(r=function(t,n,r){if("e"==n&&l.push(t),"b"==n){if(!r)return;l.push(t)}--s||e(l)},i=0;i<a;i++)o(t[i],r,n)}(t,(function(t){s(l,t),e&&s({success:e,error:n},t),i(a,t)}),l)}if(l.returnPromise)return new Promise(u);u()}return a.ready=function(t,e){return function(t,e){t=t.push?t:[t];var i,s,o,a=[],l=t.length,u=l;for(i=function(t,n){n.length&&a.push(t),--u||e(a)};l--;)s=t[l],(o=n[s])?i(s,o):(r[s]=r[s]||[]).push(i)}(t,(function(t){s(e,t)})),a},a.done=function(t){i(t,[])},a.reset=function(){e={},n={},r={}},a.isDefined=function(t){return t in e},a})?n.apply(e,[]):n)||(t.exports=r)},486:function(t,e,n){var r;t=n.nmd(t),function(){var i,s="Expected a function",o="__lodash_hash_undefined__",a="__lodash_placeholder__",l=32,u=128,c=1/0,h=9007199254740991,d=NaN,f=4294967295,p=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",l],["partialRight",64],["rearg",256]],g="[object Arguments]",m="[object Array]",v="[object Boolean]",y="[object Date]",b="[object Error]",_="[object Function]",w="[object GeneratorFunction]",x="[object Map]",M="[object Number]",S="[object Object]",P="[object Promise]",E="[object RegExp]",C="[object Set]",k="[object String]",T="[object Symbol]",A="[object WeakMap]",L="[object ArrayBuffer]",O="[object DataView]",I="[object Float32Array]",R="[object Float64Array]",z="[object Int8Array]",F="[object Int16Array]",N="[object Int32Array]",j="[object Uint8Array]",D="[object Uint8ClampedArray]",B="[object Uint16Array]",U="[object Uint32Array]",V=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,G=/(__e\(.*?\)|\b__t\)) \+\n'';/g,H=/&(?:amp|lt|gt|quot|#39);/g,q=/[&<>"']/g,X=RegExp(H.source),Z=RegExp(q.source),Y=/<%-([\s\S]+?)%>/g,$=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,K=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),rt=/^\s+/,it=/\s/,st=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ot=/\{\n\/\* \[wrapped with (.+)\] \*/,at=/,? & /,lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ut=/[()=,{}\[\]\/\s]/,ct=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dt=/\w*$/,ft=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,mt=/^0o[0-7]+$/i,vt=/^(?:0|[1-9]\d*)$/,yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bt=/($^)/,_t=/['\n\r\u2028\u2029\\]/g,wt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",xt="a-z\\xdf-\\xf6\\xf8-\\xff",Mt="A-Z\\xc0-\\xd6\\xd8-\\xde",St="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pt="["+St+"]",Et="["+wt+"]",Ct="\\d+",kt="["+xt+"]",Tt="[^\\ud800-\\udfff"+St+Ct+"\\u2700-\\u27bf"+xt+Mt+"]",At="\\ud83c[\\udffb-\\udfff]",Lt="[^\\ud800-\\udfff]",Ot="(?:\\ud83c[\\udde6-\\uddff]){2}",It="[\\ud800-\\udbff][\\udc00-\\udfff]",Rt="["+Mt+"]",zt="(?:"+kt+"|"+Tt+")",Ft="(?:"+Rt+"|"+Tt+")",Nt="(?:['’](?:d|ll|m|re|s|t|ve))?",jt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Dt="(?:"+Et+"|"+At+")?",Bt="[\\ufe0e\\ufe0f]?",Ut=Bt+Dt+"(?:\\u200d(?:"+[Lt,Ot,It].join("|")+")"+Bt+Dt+")*",Vt="(?:"+["[\\u2700-\\u27bf]",Ot,It].join("|")+")"+Ut,Wt="(?:"+[Lt+Et+"?",Et,Ot,It,"[\\ud800-\\udfff]"].join("|")+")",Gt=RegExp("['’]","g"),Ht=RegExp(Et,"g"),qt=RegExp(At+"(?="+At+")|"+Wt+Ut,"g"),Xt=RegExp([Rt+"?"+kt+"+"+Nt+"(?="+[Pt,Rt,"$"].join("|")+")",Ft+"+"+jt+"(?="+[Pt,Rt+zt,"$"].join("|")+")",Rt+"?"+zt+"+"+Nt,Rt+"+"+jt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ct,Vt].join("|"),"g"),Zt=RegExp("[\\u200d\\ud800-\\udfff"+wt+"\\ufe0e\\ufe0f]"),Yt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$t=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Qt=-1,Kt={};Kt[I]=Kt[R]=Kt[z]=Kt[F]=Kt[N]=Kt[j]=Kt[D]=Kt[B]=Kt[U]=!0,Kt[g]=Kt[m]=Kt[L]=Kt[v]=Kt[O]=Kt[y]=Kt[b]=Kt[_]=Kt[x]=Kt[M]=Kt[S]=Kt[E]=Kt[C]=Kt[k]=Kt[A]=!1;var Jt={};Jt[g]=Jt[m]=Jt[L]=Jt[O]=Jt[v]=Jt[y]=Jt[I]=Jt[R]=Jt[z]=Jt[F]=Jt[N]=Jt[x]=Jt[M]=Jt[S]=Jt[E]=Jt[C]=Jt[k]=Jt[T]=Jt[j]=Jt[D]=Jt[B]=Jt[U]=!0,Jt[b]=Jt[_]=Jt[A]=!1;var te={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ee=parseFloat,ne=parseInt,re="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ie="object"==typeof self&&self&&self.Object===Object&&self,se=re||ie||Function("return this")(),oe=e&&!e.nodeType&&e,ae=oe&&t&&!t.nodeType&&t,le=ae&&ae.exports===oe,ue=le&&re.process,ce=function(){try{return ae&&ae.require&&ae.require("util").types||ue&&ue.binding&&ue.binding("util")}catch(t){}}(),he=ce&&ce.isArrayBuffer,de=ce&&ce.isDate,fe=ce&&ce.isMap,pe=ce&&ce.isRegExp,ge=ce&&ce.isSet,me=ce&&ce.isTypedArray;function ve(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ye(t,e,n,r){for(var i=-1,s=null==t?0:t.length;++i<s;){var o=t[i];e(r,o,n(o),t)}return r}function be(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function _e(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function we(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function xe(t,e){for(var n=-1,r=null==t?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}function Me(t,e){return!(null==t||!t.length)&&Ie(t,e,0)>-1}function Se(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Pe(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Ee(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Ce(t,e,n,r){var i=-1,s=null==t?0:t.length;for(r&&s&&(n=t[++i]);++i<s;)n=e(n,t[i],i,t);return n}function ke(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Te(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Ae=Ne("length");function Le(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Oe(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}function Ie(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Oe(t,ze,n)}function Re(t,e,n,r){for(var i=n-1,s=t.length;++i<s;)if(r(t[i],e))return i;return-1}function ze(t){return t!=t}function Fe(t,e){var n=null==t?0:t.length;return n?Be(t,e)/n:d}function Ne(t){return function(e){return null==e?i:e[t]}}function je(t){return function(e){return null==t?i:t[e]}}function De(t,e,n,r,i){return i(t,(function(t,i,s){n=r?(r=!1,t):e(n,t,i,s)})),n}function Be(t,e){for(var n,r=-1,s=t.length;++r<s;){var o=e(t[r]);o!==i&&(n=n===i?o:n+o)}return n}function Ue(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Ve(t){return t?t.slice(0,an(t)+1).replace(rt,""):t}function We(t){return function(e){return t(e)}}function Ge(t,e){return Pe(e,(function(e){return t[e]}))}function He(t,e){return t.has(e)}function qe(t,e){for(var n=-1,r=t.length;++n<r&&Ie(e,t[n],0)>-1;);return n}function Xe(t,e){for(var n=t.length;n--&&Ie(e,t[n],0)>-1;);return n}function Ze(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var Ye=je({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),$e=je({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Qe(t){return"\\"+te[t]}function Ke(t){return Zt.test(t)}function Je(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function tn(t,e){return function(n){return t(e(n))}}function en(t,e){for(var n=-1,r=t.length,i=0,s=[];++n<r;){var o=t[n];o!==e&&o!==a||(t[n]=a,s[i++]=n)}return s}function nn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function rn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function sn(t){return Ke(t)?function(t){for(var e=qt.lastIndex=0;qt.test(t);)++e;return e}(t):Ae(t)}function on(t){return Ke(t)?function(t){return t.match(qt)||[]}(t):function(t){return t.split("")}(t)}function an(t){for(var e=t.length;e--&&it.test(t.charAt(e)););return e}var ln=je({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),un=function t(e){var n,r=(e=null==e?se:un.defaults(se.Object(),e,un.pick(se,$t))).Array,it=e.Date,wt=e.Error,xt=e.Function,Mt=e.Math,St=e.Object,Pt=e.RegExp,Et=e.String,Ct=e.TypeError,kt=r.prototype,Tt=xt.prototype,At=St.prototype,Lt=e["__core-js_shared__"],Ot=Tt.toString,It=At.hasOwnProperty,Rt=0,zt=(n=/[^.]+$/.exec(Lt&&Lt.keys&&Lt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ft=At.toString,Nt=Ot.call(St),jt=se._,Dt=Pt("^"+Ot.call(It).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Bt=le?e.Buffer:i,Ut=e.Symbol,Vt=e.Uint8Array,Wt=Bt?Bt.allocUnsafe:i,qt=tn(St.getPrototypeOf,St),Zt=St.create,te=At.propertyIsEnumerable,re=kt.splice,ie=Ut?Ut.isConcatSpreadable:i,oe=Ut?Ut.iterator:i,ae=Ut?Ut.toStringTag:i,ue=function(){try{var t=us(St,"defineProperty");return t({},"",{}),t}catch(t){}}(),ce=e.clearTimeout!==se.clearTimeout&&e.clearTimeout,Ae=it&&it.now!==se.Date.now&&it.now,je=e.setTimeout!==se.setTimeout&&e.setTimeout,cn=Mt.ceil,hn=Mt.floor,dn=St.getOwnPropertySymbols,fn=Bt?Bt.isBuffer:i,pn=e.isFinite,gn=kt.join,mn=tn(St.keys,St),vn=Mt.max,yn=Mt.min,bn=it.now,_n=e.parseInt,wn=Mt.random,xn=kt.reverse,Mn=us(e,"DataView"),Sn=us(e,"Map"),Pn=us(e,"Promise"),En=us(e,"Set"),Cn=us(e,"WeakMap"),kn=us(St,"create"),Tn=Cn&&new Cn,An={},Ln=js(Mn),On=js(Sn),In=js(Pn),Rn=js(En),zn=js(Cn),Fn=Ut?Ut.prototype:i,Nn=Fn?Fn.valueOf:i,jn=Fn?Fn.toString:i;function Dn(t){if(na(t)&&!Ho(t)&&!(t instanceof Wn)){if(t instanceof Vn)return t;if(It.call(t,"__wrapped__"))return Ds(t)}return new Vn(t)}var Bn=function(){function t(){}return function(e){if(!ea(e))return{};if(Zt)return Zt(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function Un(){}function Vn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Wn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function qn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Xn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new qn;++e<n;)this.add(t[e])}function Zn(t){var e=this.__data__=new Hn(t);this.size=e.size}function Yn(t,e){var n=Ho(t),r=!n&&Go(t),i=!n&&!r&&Yo(t),s=!n&&!r&&!i&&ca(t),o=n||r||i||s,a=o?Ue(t.length,Et):[],l=a.length;for(var u in t)!e&&!It.call(t,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||s&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ms(u,l))||a.push(u);return a}function $n(t){var e=t.length;return e?t[qr(0,e-1)]:i}function Qn(t,e){return Is(Ci(t),or(e,0,t.length))}function Kn(t){return Is(Ci(t))}function Jn(t,e,n){(n!==i&&!Uo(t[e],n)||n===i&&!(e in t))&&ir(t,e,n)}function tr(t,e,n){var r=t[e];It.call(t,e)&&Uo(r,n)&&(n!==i||e in t)||ir(t,e,n)}function er(t,e){for(var n=t.length;n--;)if(Uo(t[n][0],e))return n;return-1}function nr(t,e,n,r){return hr(t,(function(t,i,s){e(r,t,n(t),s)})),r}function rr(t,e){return t&&ki(e,Oa(e),t)}function ir(t,e,n){"__proto__"==e&&ue?ue(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function sr(t,e){for(var n=-1,s=e.length,o=r(s),a=null==t;++n<s;)o[n]=a?i:Ca(t,e[n]);return o}function or(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function ar(t,e,n,r,s,o){var a,l=1&e,u=2&e,c=4&e;if(n&&(a=s?n(t,r,s,o):n(t)),a!==i)return a;if(!ea(t))return t;var h=Ho(t);if(h){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&It.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!l)return Ci(t,a)}else{var d=ds(t),f=d==_||d==w;if(Yo(t))return wi(t,l);if(d==S||d==g||f&&!s){if(a=u||f?{}:ps(t),!l)return u?function(t,e){return ki(t,hs(t),e)}(t,function(t,e){return t&&ki(e,Ia(e),t)}(a,t)):function(t,e){return ki(t,cs(t),e)}(t,rr(a,t))}else{if(!Jt[d])return s?t:{};a=function(t,e,n){var r,i=t.constructor;switch(e){case L:return xi(t);case v:case y:return new i(+t);case O:return function(t,e){var n=e?xi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case I:case R:case z:case F:case N:case j:case D:case B:case U:return Mi(t,n);case x:return new i;case M:case k:return new i(t);case E:return function(t){var e=new t.constructor(t.source,dt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case C:return new i;case T:return r=t,Nn?St(Nn.call(r)):{}}}(t,d,l)}}o||(o=new Zn);var p=o.get(t);if(p)return p;o.set(t,a),aa(t)?t.forEach((function(r){a.add(ar(r,e,n,r,t,o))})):ra(t)&&t.forEach((function(r,i){a.set(i,ar(r,e,n,i,t,o))}));var m=h?i:(c?u?ns:es:u?Ia:Oa)(t);return be(m||t,(function(r,i){m&&(r=t[i=r]),tr(a,i,ar(r,e,n,i,t,o))})),a}function lr(t,e,n){var r=n.length;if(null==t)return!r;for(t=St(t);r--;){var s=n[r],o=e[s],a=t[s];if(a===i&&!(s in t)||!o(a))return!1}return!0}function ur(t,e,n){if("function"!=typeof t)throw new Ct(s);return Ts((function(){t.apply(i,n)}),e)}function cr(t,e,n,r){var i=-1,s=Me,o=!0,a=t.length,l=[],u=e.length;if(!a)return l;n&&(e=Pe(e,We(n))),r?(s=Se,o=!1):e.length>=200&&(s=He,o=!1,e=new Xn(e));t:for(;++i<a;){var c=t[i],h=null==n?c:n(c);if(c=r||0!==c?c:0,o&&h==h){for(var d=u;d--;)if(e[d]===h)continue t;l.push(c)}else s(e,h,r)||l.push(c)}return l}Dn.templateSettings={escape:Y,evaluate:$,interpolate:Q,variable:"",imports:{_:Dn}},Dn.prototype=Un.prototype,Dn.prototype.constructor=Dn,Vn.prototype=Bn(Un.prototype),Vn.prototype.constructor=Vn,Wn.prototype=Bn(Un.prototype),Wn.prototype.constructor=Wn,Gn.prototype.clear=function(){this.__data__=kn?kn(null):{},this.size=0},Gn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Gn.prototype.get=function(t){var e=this.__data__;if(kn){var n=e[t];return n===o?i:n}return It.call(e,t)?e[t]:i},Gn.prototype.has=function(t){var e=this.__data__;return kn?e[t]!==i:It.call(e,t)},Gn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=kn&&e===i?o:e,this},Hn.prototype.clear=function(){this.__data__=[],this.size=0},Hn.prototype.delete=function(t){var e=this.__data__,n=er(e,t);return!(n<0||(n==e.length-1?e.pop():re.call(e,n,1),--this.size,0))},Hn.prototype.get=function(t){var e=this.__data__,n=er(e,t);return n<0?i:e[n][1]},Hn.prototype.has=function(t){return er(this.__data__,t)>-1},Hn.prototype.set=function(t,e){var n=this.__data__,r=er(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Gn,map:new(Sn||Hn),string:new Gn}},qn.prototype.delete=function(t){var e=as(this,t).delete(t);return this.size-=e?1:0,e},qn.prototype.get=function(t){return as(this,t).get(t)},qn.prototype.has=function(t){return as(this,t).has(t)},qn.prototype.set=function(t,e){var n=as(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Xn.prototype.add=Xn.prototype.push=function(t){return this.__data__.set(t,o),this},Xn.prototype.has=function(t){return this.__data__.has(t)},Zn.prototype.clear=function(){this.__data__=new Hn,this.size=0},Zn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Zn.prototype.get=function(t){return this.__data__.get(t)},Zn.prototype.has=function(t){return this.__data__.has(t)},Zn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Hn){var r=n.__data__;if(!Sn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new qn(r)}return n.set(t,e),this.size=n.size,this};var hr=Li(br),dr=Li(_r,!0);function fr(t,e){var n=!0;return hr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function pr(t,e,n){for(var r=-1,s=t.length;++r<s;){var o=t[r],a=e(o);if(null!=a&&(l===i?a==a&&!ua(a):n(a,l)))var l=a,u=o}return u}function gr(t,e){var n=[];return hr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function mr(t,e,n,r,i){var s=-1,o=t.length;for(n||(n=gs),i||(i=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?mr(a,e-1,n,r,i):Ee(i,a):r||(i[i.length]=a)}return i}var vr=Oi(),yr=Oi(!0);function br(t,e){return t&&vr(t,e,Oa)}function _r(t,e){return t&&yr(t,e,Oa)}function wr(t,e){return xe(e,(function(e){return Ko(t[e])}))}function xr(t,e){for(var n=0,r=(e=vi(e,t)).length;null!=t&&n<r;)t=t[Ns(e[n++])];return n&&n==r?t:i}function Mr(t,e,n){var r=e(t);return Ho(t)?r:Ee(r,n(t))}function Sr(t){return null==t?t===i?"[object Undefined]":"[object Null]":ae&&ae in St(t)?function(t){var e=It.call(t,ae),n=t[ae];try{t[ae]=i;var r=!0}catch(t){}var s=Ft.call(t);return r&&(e?t[ae]=n:delete t[ae]),s}(t):function(t){return Ft.call(t)}(t)}function Pr(t,e){return t>e}function Er(t,e){return null!=t&&It.call(t,e)}function Cr(t,e){return null!=t&&e in St(t)}function kr(t,e,n){for(var s=n?Se:Me,o=t[0].length,a=t.length,l=a,u=r(a),c=1/0,h=[];l--;){var d=t[l];l&&e&&(d=Pe(d,We(e))),c=yn(d.length,c),u[l]=!n&&(e||o>=120&&d.length>=120)?new Xn(l&&d):i}d=t[0];var f=-1,p=u[0];t:for(;++f<o&&h.length<c;){var g=d[f],m=e?e(g):g;if(g=n||0!==g?g:0,!(p?He(p,m):s(h,m,n))){for(l=a;--l;){var v=u[l];if(!(v?He(v,m):s(t[l],m,n)))continue t}p&&p.push(m),h.push(g)}}return h}function Tr(t,e,n){var r=null==(t=Ps(t,e=vi(e,t)))?t:t[Ns($s(e))];return null==r?i:ve(r,t,n)}function Ar(t){return na(t)&&Sr(t)==g}function Lr(t,e,n,r,s){return t===e||(null==t||null==e||!na(t)&&!na(e)?t!=t&&e!=e:function(t,e,n,r,s,o){var a=Ho(t),l=Ho(e),u=a?m:ds(t),c=l?m:ds(e),h=(u=u==g?S:u)==S,d=(c=c==g?S:c)==S,f=u==c;if(f&&Yo(t)){if(!Yo(e))return!1;a=!0,h=!1}if(f&&!h)return o||(o=new Zn),a||ca(t)?Ji(t,e,n,r,s,o):function(t,e,n,r,i,s,o){switch(n){case O:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case L:return!(t.byteLength!=e.byteLength||!s(new Vt(t),new Vt(e)));case v:case y:case M:return Uo(+t,+e);case b:return t.name==e.name&&t.message==e.message;case E:case k:return t==e+"";case x:var a=Je;case C:var l=1&r;if(a||(a=nn),t.size!=e.size&&!l)return!1;var u=o.get(t);if(u)return u==e;r|=2,o.set(t,e);var c=Ji(a(t),a(e),r,i,s,o);return o.delete(t),c;case T:if(Nn)return Nn.call(t)==Nn.call(e)}return!1}(t,e,u,n,r,s,o);if(!(1&n)){var p=h&&It.call(t,"__wrapped__"),_=d&&It.call(e,"__wrapped__");if(p||_){var w=p?t.value():t,P=_?e.value():e;return o||(o=new Zn),s(w,P,n,r,o)}}return!!f&&(o||(o=new Zn),function(t,e,n,r,s,o){var a=1&n,l=es(t),u=l.length;if(u!=es(e).length&&!a)return!1;for(var c=u;c--;){var h=l[c];if(!(a?h in e:It.call(e,h)))return!1}var d=o.get(t),f=o.get(e);if(d&&f)return d==e&&f==t;var p=!0;o.set(t,e),o.set(e,t);for(var g=a;++c<u;){var m=t[h=l[c]],v=e[h];if(r)var y=a?r(v,m,h,e,t,o):r(m,v,h,t,e,o);if(!(y===i?m===v||s(m,v,n,r,o):y)){p=!1;break}g||(g="constructor"==h)}if(p&&!g){var b=t.constructor,_=e.constructor;b==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _||(p=!1)}return o.delete(t),o.delete(e),p}(t,e,n,r,s,o))}(t,e,n,r,Lr,s))}function Or(t,e,n,r){var s=n.length,o=s,a=!r;if(null==t)return!o;for(t=St(t);s--;){var l=n[s];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++s<o;){var u=(l=n[s])[0],c=t[u],h=l[1];if(a&&l[2]){if(c===i&&!(u in t))return!1}else{var d=new Zn;if(r)var f=r(c,h,u,t,e,d);if(!(f===i?Lr(h,c,3,r,d):f))return!1}}return!0}function Ir(t){return!(!ea(t)||(e=t,zt&&zt in e))&&(Ko(t)?Dt:gt).test(js(t));var e}function Rr(t){return"function"==typeof t?t:null==t?il:"object"==typeof t?Ho(t)?Dr(t[0],t[1]):jr(t):fl(t)}function zr(t){if(!ws(t))return mn(t);var e=[];for(var n in St(t))It.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Fr(t,e){return t<e}function Nr(t,e){var n=-1,i=Xo(t)?r(t.length):[];return hr(t,(function(t,r,s){i[++n]=e(t,r,s)})),i}function jr(t){var e=ls(t);return 1==e.length&&e[0][2]?Ms(e[0][0],e[0][1]):function(n){return n===t||Or(n,t,e)}}function Dr(t,e){return ys(t)&&xs(e)?Ms(Ns(t),e):function(n){var r=Ca(n,t);return r===i&&r===e?ka(n,t):Lr(e,r,3)}}function Br(t,e,n,r,s){t!==e&&vr(e,(function(o,a){if(s||(s=new Zn),ea(o))!function(t,e,n,r,s,o,a){var l=Cs(t,n),u=Cs(e,n),c=a.get(u);if(c)Jn(t,n,c);else{var h=o?o(l,u,n+"",t,e,a):i,d=h===i;if(d){var f=Ho(u),p=!f&&Yo(u),g=!f&&!p&&ca(u);h=u,f||p||g?Ho(l)?h=l:Zo(l)?h=Ci(l):p?(d=!1,h=wi(u,!0)):g?(d=!1,h=Mi(u,!0)):h=[]:sa(u)||Go(u)?(h=l,Go(l)?h=ya(l):ea(l)&&!Ko(l)||(h=ps(u))):d=!1}d&&(a.set(u,h),s(h,u,r,o,a),a.delete(u)),Jn(t,n,h)}}(t,e,a,n,Br,r,s);else{var l=r?r(Cs(t,a),o,a+"",t,e,s):i;l===i&&(l=o),Jn(t,a,l)}}),Ia)}function Ur(t,e){var n=t.length;if(n)return ms(e+=e<0?n:0,n)?t[e]:i}function Vr(t,e,n){e=e.length?Pe(e,(function(t){return Ho(t)?function(e){return xr(e,1===t.length?t[0]:t)}:t})):[il];var r=-1;e=Pe(e,We(os()));var i=Nr(t,(function(t,n,i){var s=Pe(e,(function(e){return e(t)}));return{criteria:s,index:++r,value:t}}));return function(t,e){var r=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,s=e.criteria,o=i.length,a=n.length;++r<o;){var l=Si(i[r],s[r]);if(l)return r>=a?l:l*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}));r--;)t[r]=t[r].value;return t}(i)}function Wr(t,e,n){for(var r=-1,i=e.length,s={};++r<i;){var o=e[r],a=xr(t,o);n(a,o)&&Qr(s,vi(o,t),a)}return s}function Gr(t,e,n,r){var i=r?Re:Ie,s=-1,o=e.length,a=t;for(t===e&&(e=Ci(e)),n&&(a=Pe(t,We(n)));++s<o;)for(var l=0,u=e[s],c=n?n(u):u;(l=i(a,c,l,r))>-1;)a!==t&&re.call(a,l,1),re.call(t,l,1);return t}function Hr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==s){var s=i;ms(i)?re.call(t,i,1):ui(t,i)}}return t}function qr(t,e){return t+hn(wn()*(e-t+1))}function Xr(t,e){var n="";if(!t||e<1||e>h)return n;do{e%2&&(n+=t),(e=hn(e/2))&&(t+=t)}while(e);return n}function Zr(t,e){return As(Ss(t,e,il),t+"")}function Yr(t){return $n(Ua(t))}function $r(t,e){var n=Ua(t);return Is(n,or(e,0,n.length))}function Qr(t,e,n,r){if(!ea(t))return t;for(var s=-1,o=(e=vi(e,t)).length,a=o-1,l=t;null!=l&&++s<o;){var u=Ns(e[s]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(s!=a){var h=l[u];(c=r?r(h,u,l):i)===i&&(c=ea(h)?h:ms(e[s+1])?[]:{})}tr(l,u,c),l=l[u]}return t}var Kr=Tn?function(t,e){return Tn.set(t,e),t}:il,Jr=ue?function(t,e){return ue(t,"toString",{configurable:!0,enumerable:!1,value:el(e),writable:!0})}:il;function ti(t){return Is(Ua(t))}function ei(t,e,n){var i=-1,s=t.length;e<0&&(e=-e>s?0:s+e),(n=n>s?s:n)<0&&(n+=s),s=e>n?0:n-e>>>0,e>>>=0;for(var o=r(s);++i<s;)o[i]=t[i+e];return o}function ni(t,e){var n;return hr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ri(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var s=r+i>>>1,o=t[s];null!==o&&!ua(o)&&(n?o<=e:o<e)?r=s+1:i=s}return i}return ii(t,e,il,n)}function ii(t,e,n,r){var s=0,o=null==t?0:t.length;if(0===o)return 0;for(var a=(e=n(e))!=e,l=null===e,u=ua(e),c=e===i;s<o;){var h=hn((s+o)/2),d=n(t[h]),f=d!==i,p=null===d,g=d==d,m=ua(d);if(a)var v=r||g;else v=c?g&&(r||f):l?g&&f&&(r||!p):u?g&&f&&!p&&(r||!m):!p&&!m&&(r?d<=e:d<e);v?s=h+1:o=h}return yn(o,4294967294)}function si(t,e){for(var n=-1,r=t.length,i=0,s=[];++n<r;){var o=t[n],a=e?e(o):o;if(!n||!Uo(a,l)){var l=a;s[i++]=0===o?0:o}}return s}function oi(t){return"number"==typeof t?t:ua(t)?d:+t}function ai(t){if("string"==typeof t)return t;if(Ho(t))return Pe(t,ai)+"";if(ua(t))return jn?jn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function li(t,e,n){var r=-1,i=Me,s=t.length,o=!0,a=[],l=a;if(n)o=!1,i=Se;else if(s>=200){var u=e?null:Xi(t);if(u)return nn(u);o=!1,i=He,l=new Xn}else l=e?[]:a;t:for(;++r<s;){var c=t[r],h=e?e(c):c;if(c=n||0!==c?c:0,o&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue t;e&&l.push(h),a.push(c)}else i(l,h,n)||(l!==a&&l.push(h),a.push(c))}return a}function ui(t,e){return null==(t=Ps(t,e=vi(e,t)))||delete t[Ns($s(e))]}function ci(t,e,n,r){return Qr(t,e,n(xr(t,e)),r)}function hi(t,e,n,r){for(var i=t.length,s=r?i:-1;(r?s--:++s<i)&&e(t[s],s,t););return n?ei(t,r?0:s,r?s+1:i):ei(t,r?s+1:0,r?i:s)}function di(t,e){var n=t;return n instanceof Wn&&(n=n.value()),Ce(e,(function(t,e){return e.func.apply(e.thisArg,Ee([t],e.args))}),n)}function fi(t,e,n){var i=t.length;if(i<2)return i?li(t[0]):[];for(var s=-1,o=r(i);++s<i;)for(var a=t[s],l=-1;++l<i;)l!=s&&(o[s]=cr(o[s]||a,t[l],e,n));return li(mr(o,1),e,n)}function pi(t,e,n){for(var r=-1,s=t.length,o=e.length,a={};++r<s;){var l=r<o?e[r]:i;n(a,t[r],l)}return a}function gi(t){return Zo(t)?t:[]}function mi(t){return"function"==typeof t?t:il}function vi(t,e){return Ho(t)?t:ys(t,e)?[t]:Fs(ba(t))}var yi=Zr;function bi(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ei(t,e,n)}var _i=ce||function(t){return se.clearTimeout(t)};function wi(t,e){if(e)return t.slice();var n=t.length,r=Wt?Wt(n):new t.constructor(n);return t.copy(r),r}function xi(t){var e=new t.constructor(t.byteLength);return new Vt(e).set(new Vt(t)),e}function Mi(t,e){var n=e?xi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Si(t,e){if(t!==e){var n=t!==i,r=null===t,s=t==t,o=ua(t),a=e!==i,l=null===e,u=e==e,c=ua(e);if(!l&&!c&&!o&&t>e||o&&a&&u&&!l&&!c||r&&a&&u||!n&&u||!s)return 1;if(!r&&!o&&!c&&t<e||c&&n&&s&&!r&&!o||l&&n&&s||!a&&s||!u)return-1}return 0}function Pi(t,e,n,i){for(var s=-1,o=t.length,a=n.length,l=-1,u=e.length,c=vn(o-a,0),h=r(u+c),d=!i;++l<u;)h[l]=e[l];for(;++s<a;)(d||s<o)&&(h[n[s]]=t[s]);for(;c--;)h[l++]=t[s++];return h}function Ei(t,e,n,i){for(var s=-1,o=t.length,a=-1,l=n.length,u=-1,c=e.length,h=vn(o-l,0),d=r(h+c),f=!i;++s<h;)d[s]=t[s];for(var p=s;++u<c;)d[p+u]=e[u];for(;++a<l;)(f||s<o)&&(d[p+n[a]]=t[s++]);return d}function Ci(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function ki(t,e,n,r){var s=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var l=e[o],u=r?r(n[l],t[l],l,n,t):i;u===i&&(u=t[l]),s?ir(n,l,u):tr(n,l,u)}return n}function Ti(t,e){return function(n,r){var i=Ho(n)?ye:nr,s=e?e():{};return i(n,t,os(r,2),s)}}function Ai(t){return Zr((function(e,n){var r=-1,s=n.length,o=s>1?n[s-1]:i,a=s>2?n[2]:i;for(o=t.length>3&&"function"==typeof o?(s--,o):i,a&&vs(n[0],n[1],a)&&(o=s<3?i:o,s=1),e=St(e);++r<s;){var l=n[r];l&&t(e,l,r,o)}return e}))}function Li(t,e){return function(n,r){if(null==n)return n;if(!Xo(n))return t(n,r);for(var i=n.length,s=e?i:-1,o=St(n);(e?s--:++s<i)&&!1!==r(o[s],s,o););return n}}function Oi(t){return function(e,n,r){for(var i=-1,s=St(e),o=r(e),a=o.length;a--;){var l=o[t?a:++i];if(!1===n(s[l],l,s))break}return e}}function Ii(t){return function(e){var n=Ke(e=ba(e))?on(e):i,r=n?n[0]:e.charAt(0),s=n?bi(n,1).join(""):e.slice(1);return r[t]()+s}}function Ri(t){return function(e){return Ce(Ka(Ga(e).replace(Gt,"")),t,"")}}function zi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Bn(t.prototype),r=t.apply(n,e);return ea(r)?r:n}}function Fi(t){return function(e,n,r){var s=St(e);if(!Xo(e)){var o=os(n,3);e=Oa(e),n=function(t){return o(s[t],t,s)}}var a=t(e,n,r);return a>-1?s[o?e[a]:a]:i}}function Ni(t){return ts((function(e){var n=e.length,r=n,o=Vn.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new Ct(s);if(o&&!l&&"wrapper"==is(a))var l=new Vn([],!0)}for(r=l?r:n;++r<n;){var u=is(a=e[r]),c="wrapper"==u?rs(a):i;l=c&&bs(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[is(c[0])].apply(l,c[3]):1==a.length&&bs(a)?l[u]():l.thru(a)}return function(){var t=arguments,r=t[0];if(l&&1==t.length&&Ho(r))return l.plant(r).value();for(var i=0,s=n?e[i].apply(this,t):r;++i<n;)s=e[i].call(this,s);return s}}))}function ji(t,e,n,s,o,a,l,c,h,d){var f=e&u,p=1&e,g=2&e,m=24&e,v=512&e,y=g?i:zi(t);return function i(){for(var u=arguments.length,b=r(u),_=u;_--;)b[_]=arguments[_];if(m)var w=ss(i),x=Ze(b,w);if(s&&(b=Pi(b,s,o,m)),a&&(b=Ei(b,a,l,m)),u-=x,m&&u<d){var M=en(b,w);return Hi(t,e,ji,i.placeholder,n,b,M,c,h,d-u)}var S=p?n:this,P=g?S[t]:t;return u=b.length,c?b=Es(b,c):v&&u>1&&b.reverse(),f&&h<u&&(b.length=h),this&&this!==se&&this instanceof i&&(P=y||zi(P)),P.apply(S,b)}}function Di(t,e){return function(n,r){return function(t,e,n,r){return br(t,(function(t,i,s){e(r,n(t),i,s)})),r}(n,t,e(r),{})}}function Bi(t,e){return function(n,r){var s;if(n===i&&r===i)return e;if(n!==i&&(s=n),r!==i){if(s===i)return r;"string"==typeof n||"string"==typeof r?(n=ai(n),r=ai(r)):(n=oi(n),r=oi(r)),s=t(n,r)}return s}}function Ui(t){return ts((function(e){return e=Pe(e,We(os())),Zr((function(n){var r=this;return t(e,(function(t){return ve(t,r,n)}))}))}))}function Vi(t,e){var n=(e=e===i?" ":ai(e)).length;if(n<2)return n?Xr(e,t):e;var r=Xr(e,cn(t/sn(e)));return Ke(e)?bi(on(r),0,t).join(""):r.slice(0,t)}function Wi(t){return function(e,n,s){return s&&"number"!=typeof s&&vs(e,n,s)&&(n=s=i),e=pa(e),n===i?(n=e,e=0):n=pa(n),function(t,e,n,i){for(var s=-1,o=vn(cn((e-t)/(n||1)),0),a=r(o);o--;)a[i?o:++s]=t,t+=n;return a}(e,n,s=s===i?e<n?1:-1:pa(s),t)}}function Gi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=va(e),n=va(n)),t(e,n)}}function Hi(t,e,n,r,s,o,a,u,c,h){var d=8&e;e|=d?l:64,4&(e&=~(d?64:l))||(e&=-4);var f=[t,e,s,d?o:i,d?a:i,d?i:o,d?i:a,u,c,h],p=n.apply(i,f);return bs(t)&&ks(p,f),p.placeholder=r,Ls(p,t,e)}function qi(t){var e=Mt[t];return function(t,n){if(t=va(t),(n=null==n?0:yn(ga(n),292))&&pn(t)){var r=(ba(t)+"e").split("e");return+((r=(ba(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Xi=En&&1/nn(new En([,-0]))[1]==c?function(t){return new En(t)}:ul;function Zi(t){return function(e){var n=ds(e);return n==x?Je(e):n==C?rn(e):function(t,e){return Pe(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Yi(t,e,n,o,c,h,d,f){var p=2&e;if(!p&&"function"!=typeof t)throw new Ct(s);var g=o?o.length:0;if(g||(e&=-97,o=c=i),d=d===i?d:vn(ga(d),0),f=f===i?f:ga(f),g-=c?c.length:0,64&e){var m=o,v=c;o=c=i}var y=p?i:rs(t),b=[t,e,n,o,c,m,v,h,d,f];if(y&&function(t,e){var n=t[1],r=e[1],i=n|r,s=i<131,o=r==u&&8==n||r==u&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!s&&!o)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var l=e[3];if(l){var c=t[3];t[3]=c?Pi(c,l,e[4]):l,t[4]=c?en(t[3],a):e[4]}(l=e[5])&&(c=t[5],t[5]=c?Ei(c,l,e[6]):l,t[6]=c?en(t[5],a):e[6]),(l=e[7])&&(t[7]=l),r&u&&(t[8]=null==t[8]?e[8]:yn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(b,y),t=b[0],e=b[1],n=b[2],o=b[3],c=b[4],!(f=b[9]=b[9]===i?p?0:t.length:vn(b[9]-g,0))&&24&e&&(e&=-25),e&&1!=e)_=8==e||16==e?function(t,e,n){var s=zi(t);return function o(){for(var a=arguments.length,l=r(a),u=a,c=ss(o);u--;)l[u]=arguments[u];var h=a<3&&l[0]!==c&&l[a-1]!==c?[]:en(l,c);return(a-=h.length)<n?Hi(t,e,ji,o.placeholder,i,l,h,i,i,n-a):ve(this&&this!==se&&this instanceof o?s:t,this,l)}}(t,e,f):e!=l&&33!=e||c.length?ji.apply(i,b):function(t,e,n,i){var s=1&e,o=zi(t);return function e(){for(var a=-1,l=arguments.length,u=-1,c=i.length,h=r(c+l),d=this&&this!==se&&this instanceof e?o:t;++u<c;)h[u]=i[u];for(;l--;)h[u++]=arguments[++a];return ve(d,s?n:this,h)}}(t,e,n,o);else var _=function(t,e,n){var r=1&e,i=zi(t);return function e(){return(this&&this!==se&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return Ls((y?Kr:ks)(_,b),t,e)}function $i(t,e,n,r){return t===i||Uo(t,At[n])&&!It.call(r,n)?e:t}function Qi(t,e,n,r,s,o){return ea(t)&&ea(e)&&(o.set(e,t),Br(t,e,i,Qi,o),o.delete(e)),t}function Ki(t){return sa(t)?i:t}function Ji(t,e,n,r,s,o){var a=1&n,l=t.length,u=e.length;if(l!=u&&!(a&&u>l))return!1;var c=o.get(t),h=o.get(e);if(c&&h)return c==e&&h==t;var d=-1,f=!0,p=2&n?new Xn:i;for(o.set(t,e),o.set(e,t);++d<l;){var g=t[d],m=e[d];if(r)var v=a?r(m,g,d,e,t,o):r(g,m,d,t,e,o);if(v!==i){if(v)continue;f=!1;break}if(p){if(!Te(e,(function(t,e){if(!He(p,e)&&(g===t||s(g,t,n,r,o)))return p.push(e)}))){f=!1;break}}else if(g!==m&&!s(g,m,n,r,o)){f=!1;break}}return o.delete(t),o.delete(e),f}function ts(t){return As(Ss(t,i,Hs),t+"")}function es(t){return Mr(t,Oa,cs)}function ns(t){return Mr(t,Ia,hs)}var rs=Tn?function(t){return Tn.get(t)}:ul;function is(t){for(var e=t.name+"",n=An[e],r=It.call(An,e)?n.length:0;r--;){var i=n[r],s=i.func;if(null==s||s==t)return i.name}return e}function ss(t){return(It.call(Dn,"placeholder")?Dn:t).placeholder}function os(){var t=Dn.iteratee||sl;return t=t===sl?Rr:t,arguments.length?t(arguments[0],arguments[1]):t}function as(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function ls(t){for(var e=Oa(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,xs(i)]}return e}function us(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Ir(n)?n:i}var cs=dn?function(t){return null==t?[]:(t=St(t),xe(dn(t),(function(e){return te.call(t,e)})))}:ml,hs=dn?function(t){for(var e=[];t;)Ee(e,cs(t)),t=qt(t);return e}:ml,ds=Sr;function fs(t,e,n){for(var r=-1,i=(e=vi(e,t)).length,s=!1;++r<i;){var o=Ns(e[r]);if(!(s=null!=t&&n(t,o)))break;t=t[o]}return s||++r!=i?s:!!(i=null==t?0:t.length)&&ta(i)&&ms(o,i)&&(Ho(t)||Go(t))}function ps(t){return"function"!=typeof t.constructor||ws(t)?{}:Bn(qt(t))}function gs(t){return Ho(t)||Go(t)||!!(ie&&t&&t[ie])}function ms(t,e){var n=typeof t;return!!(e=null==e?h:e)&&("number"==n||"symbol"!=n&&vt.test(t))&&t>-1&&t%1==0&&t<e}function vs(t,e,n){if(!ea(n))return!1;var r=typeof e;return!!("number"==r?Xo(n)&&ms(e,n.length):"string"==r&&e in n)&&Uo(n[e],t)}function ys(t,e){if(Ho(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ua(t))||J.test(t)||!K.test(t)||null!=e&&t in St(e)}function bs(t){var e=is(t),n=Dn[e];if("function"!=typeof n||!(e in Wn.prototype))return!1;if(t===n)return!0;var r=rs(n);return!!r&&t===r[0]}(Mn&&ds(new Mn(new ArrayBuffer(1)))!=O||Sn&&ds(new Sn)!=x||Pn&&ds(Pn.resolve())!=P||En&&ds(new En)!=C||Cn&&ds(new Cn)!=A)&&(ds=function(t){var e=Sr(t),n=e==S?t.constructor:i,r=n?js(n):"";if(r)switch(r){case Ln:return O;case On:return x;case In:return P;case Rn:return C;case zn:return A}return e});var _s=Lt?Ko:vl;function ws(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||At)}function xs(t){return t==t&&!ea(t)}function Ms(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in St(n))}}function Ss(t,e,n){return e=vn(e===i?t.length-1:e,0),function(){for(var i=arguments,s=-1,o=vn(i.length-e,0),a=r(o);++s<o;)a[s]=i[e+s];s=-1;for(var l=r(e+1);++s<e;)l[s]=i[s];return l[e]=n(a),ve(t,this,l)}}function Ps(t,e){return e.length<2?t:xr(t,ei(e,0,-1))}function Es(t,e){for(var n=t.length,r=yn(e.length,n),s=Ci(t);r--;){var o=e[r];t[r]=ms(o,n)?s[o]:i}return t}function Cs(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var ks=Os(Kr),Ts=je||function(t,e){return se.setTimeout(t,e)},As=Os(Jr);function Ls(t,e,n){var r=e+"";return As(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(st,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return be(p,(function(n){var r="_."+n[0];e&n[1]&&!Me(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(ot);return e?e[1].split(at):[]}(r),n)))}function Os(t){var e=0,n=0;return function(){var r=bn(),s=16-(r-n);if(n=r,s>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Is(t,e){var n=-1,r=t.length,s=r-1;for(e=e===i?r:e;++n<e;){var o=qr(n,s),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}var Rs,zs,Fs=(Rs=zo((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,r,i){e.push(r?i.replace(ct,"$1"):n||t)})),e}),(function(t){return 500===zs.size&&zs.clear(),t})),zs=Rs.cache,Rs);function Ns(t){if("string"==typeof t||ua(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function js(t){if(null!=t){try{return Ot.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ds(t){if(t instanceof Wn)return t.clone();var e=new Vn(t.__wrapped__,t.__chain__);return e.__actions__=Ci(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Bs=Zr((function(t,e){return Zo(t)?cr(t,mr(e,1,Zo,!0)):[]})),Us=Zr((function(t,e){var n=$s(e);return Zo(n)&&(n=i),Zo(t)?cr(t,mr(e,1,Zo,!0),os(n,2)):[]})),Vs=Zr((function(t,e){var n=$s(e);return Zo(n)&&(n=i),Zo(t)?cr(t,mr(e,1,Zo,!0),i,n):[]}));function Ws(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ga(n);return i<0&&(i=vn(r+i,0)),Oe(t,os(e,3),i)}function Gs(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var s=r-1;return n!==i&&(s=ga(n),s=n<0?vn(r+s,0):yn(s,r-1)),Oe(t,os(e,3),s,!0)}function Hs(t){return null!=t&&t.length?mr(t,1):[]}function qs(t){return t&&t.length?t[0]:i}var Xs=Zr((function(t){var e=Pe(t,gi);return e.length&&e[0]===t[0]?kr(e):[]})),Zs=Zr((function(t){var e=$s(t),n=Pe(t,gi);return e===$s(n)?e=i:n.pop(),n.length&&n[0]===t[0]?kr(n,os(e,2)):[]})),Ys=Zr((function(t){var e=$s(t),n=Pe(t,gi);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?kr(n,i,e):[]}));function $s(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Qs=Zr(Ks);function Ks(t,e){return t&&t.length&&e&&e.length?Gr(t,e):t}var Js=ts((function(t,e){var n=null==t?0:t.length,r=sr(t,e);return Hr(t,Pe(e,(function(t){return ms(t,n)?+t:t})).sort(Si)),r}));function to(t){return null==t?t:xn.call(t)}var eo=Zr((function(t){return li(mr(t,1,Zo,!0))})),no=Zr((function(t){var e=$s(t);return Zo(e)&&(e=i),li(mr(t,1,Zo,!0),os(e,2))})),ro=Zr((function(t){var e=$s(t);return e="function"==typeof e?e:i,li(mr(t,1,Zo,!0),i,e)}));function io(t){if(!t||!t.length)return[];var e=0;return t=xe(t,(function(t){if(Zo(t))return e=vn(t.length,e),!0})),Ue(e,(function(e){return Pe(t,Ne(e))}))}function so(t,e){if(!t||!t.length)return[];var n=io(t);return null==e?n:Pe(n,(function(t){return ve(e,i,t)}))}var oo=Zr((function(t,e){return Zo(t)?cr(t,e):[]})),ao=Zr((function(t){return fi(xe(t,Zo))})),lo=Zr((function(t){var e=$s(t);return Zo(e)&&(e=i),fi(xe(t,Zo),os(e,2))})),uo=Zr((function(t){var e=$s(t);return e="function"==typeof e?e:i,fi(xe(t,Zo),i,e)})),co=Zr(io),ho=Zr((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,so(t,n)}));function fo(t){var e=Dn(t);return e.__chain__=!0,e}function po(t,e){return e(t)}var go=ts((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,s=function(e){return sr(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Wn&&ms(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:po,args:[s],thisArg:i}),new Vn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(s)})),mo=Ti((function(t,e,n){It.call(t,n)?++t[n]:ir(t,n,1)})),vo=Fi(Ws),yo=Fi(Gs);function bo(t,e){return(Ho(t)?be:hr)(t,os(e,3))}function _o(t,e){return(Ho(t)?_e:dr)(t,os(e,3))}var wo=Ti((function(t,e,n){It.call(t,n)?t[n].push(e):ir(t,n,[e])})),xo=Zr((function(t,e,n){var i=-1,s="function"==typeof e,o=Xo(t)?r(t.length):[];return hr(t,(function(t){o[++i]=s?ve(e,t,n):Tr(t,e,n)})),o})),Mo=Ti((function(t,e,n){ir(t,n,e)}));function So(t,e){return(Ho(t)?Pe:Nr)(t,os(e,3))}var Po=Ti((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Eo=Zr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&vs(t,e[0],e[1])?e=[]:n>2&&vs(e[0],e[1],e[2])&&(e=[e[0]]),Vr(t,mr(e,1),[])})),Co=Ae||function(){return se.Date.now()};function ko(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Yi(t,u,i,i,i,i,e)}function To(t,e){var n;if("function"!=typeof e)throw new Ct(s);return t=ga(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Ao=Zr((function(t,e,n){var r=1;if(n.length){var i=en(n,ss(Ao));r|=l}return Yi(t,r,e,n,i)})),Lo=Zr((function(t,e,n){var r=3;if(n.length){var i=en(n,ss(Lo));r|=l}return Yi(e,r,t,n,i)}));function Oo(t,e,n){var r,o,a,l,u,c,h=0,d=!1,f=!1,p=!0;if("function"!=typeof t)throw new Ct(s);function g(e){var n=r,s=o;return r=o=i,h=e,l=t.apply(s,n)}function m(t){return h=t,u=Ts(y,e),d?g(t):l}function v(t){var n=t-c;return c===i||n>=e||n<0||f&&t-h>=a}function y(){var t=Co();if(v(t))return b(t);u=Ts(y,function(t){var n=e-(t-c);return f?yn(n,a-(t-h)):n}(t))}function b(t){return u=i,p&&r?g(t):(r=o=i,l)}function _(){var t=Co(),n=v(t);if(r=arguments,o=this,c=t,n){if(u===i)return m(c);if(f)return _i(u),u=Ts(y,e),g(c)}return u===i&&(u=Ts(y,e)),l}return e=va(e)||0,ea(n)&&(d=!!n.leading,a=(f="maxWait"in n)?vn(va(n.maxWait)||0,e):a,p="trailing"in n?!!n.trailing:p),_.cancel=function(){u!==i&&_i(u),h=0,r=c=o=u=i},_.flush=function(){return u===i?l:b(Co())},_}var Io=Zr((function(t,e){return ur(t,1,e)})),Ro=Zr((function(t,e,n){return ur(t,va(e)||0,n)}));function zo(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Ct(s);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(zo.Cache||qn),n}function Fo(t){if("function"!=typeof t)throw new Ct(s);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}zo.Cache=qn;var No=yi((function(t,e){var n=(e=1==e.length&&Ho(e[0])?Pe(e[0],We(os())):Pe(mr(e,1),We(os()))).length;return Zr((function(r){for(var i=-1,s=yn(r.length,n);++i<s;)r[i]=e[i].call(this,r[i]);return ve(t,this,r)}))})),jo=Zr((function(t,e){var n=en(e,ss(jo));return Yi(t,l,i,e,n)})),Do=Zr((function(t,e){var n=en(e,ss(Do));return Yi(t,64,i,e,n)})),Bo=ts((function(t,e){return Yi(t,256,i,i,i,e)}));function Uo(t,e){return t===e||t!=t&&e!=e}var Vo=Gi(Pr),Wo=Gi((function(t,e){return t>=e})),Go=Ar(function(){return arguments}())?Ar:function(t){return na(t)&&It.call(t,"callee")&&!te.call(t,"callee")},Ho=r.isArray,qo=he?We(he):function(t){return na(t)&&Sr(t)==L};function Xo(t){return null!=t&&ta(t.length)&&!Ko(t)}function Zo(t){return na(t)&&Xo(t)}var Yo=fn||vl,$o=de?We(de):function(t){return na(t)&&Sr(t)==y};function Qo(t){if(!na(t))return!1;var e=Sr(t);return e==b||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!sa(t)}function Ko(t){if(!ea(t))return!1;var e=Sr(t);return e==_||e==w||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Jo(t){return"number"==typeof t&&t==ga(t)}function ta(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}function ea(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function na(t){return null!=t&&"object"==typeof t}var ra=fe?We(fe):function(t){return na(t)&&ds(t)==x};function ia(t){return"number"==typeof t||na(t)&&Sr(t)==M}function sa(t){if(!na(t)||Sr(t)!=S)return!1;var e=qt(t);if(null===e)return!0;var n=It.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Ot.call(n)==Nt}var oa=pe?We(pe):function(t){return na(t)&&Sr(t)==E},aa=ge?We(ge):function(t){return na(t)&&ds(t)==C};function la(t){return"string"==typeof t||!Ho(t)&&na(t)&&Sr(t)==k}function ua(t){return"symbol"==typeof t||na(t)&&Sr(t)==T}var ca=me?We(me):function(t){return na(t)&&ta(t.length)&&!!Kt[Sr(t)]},ha=Gi(Fr),da=Gi((function(t,e){return t<=e}));function fa(t){if(!t)return[];if(Xo(t))return la(t)?on(t):Ci(t);if(oe&&t[oe])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[oe]());var e=ds(t);return(e==x?Je:e==C?nn:Ua)(t)}function pa(t){return t?(t=va(t))===c||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ga(t){var e=pa(t),n=e%1;return e==e?n?e-n:e:0}function ma(t){return t?or(ga(t),0,f):0}function va(t){if("number"==typeof t)return t;if(ua(t))return d;if(ea(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ea(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ve(t);var n=pt.test(t);return n||mt.test(t)?ne(t.slice(2),n?2:8):ft.test(t)?d:+t}function ya(t){return ki(t,Ia(t))}function ba(t){return null==t?"":ai(t)}var _a=Ai((function(t,e){if(ws(e)||Xo(e))ki(e,Oa(e),t);else for(var n in e)It.call(e,n)&&tr(t,n,e[n])})),wa=Ai((function(t,e){ki(e,Ia(e),t)})),xa=Ai((function(t,e,n,r){ki(e,Ia(e),t,r)})),Ma=Ai((function(t,e,n,r){ki(e,Oa(e),t,r)})),Sa=ts(sr),Pa=Zr((function(t,e){t=St(t);var n=-1,r=e.length,s=r>2?e[2]:i;for(s&&vs(e[0],e[1],s)&&(r=1);++n<r;)for(var o=e[n],a=Ia(o),l=-1,u=a.length;++l<u;){var c=a[l],h=t[c];(h===i||Uo(h,At[c])&&!It.call(t,c))&&(t[c]=o[c])}return t})),Ea=Zr((function(t){return t.push(i,Qi),ve(za,i,t)}));function Ca(t,e,n){var r=null==t?i:xr(t,e);return r===i?n:r}function ka(t,e){return null!=t&&fs(t,e,Cr)}var Ta=Di((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ft.call(e)),t[e]=n}),el(il)),Aa=Di((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ft.call(e)),It.call(t,e)?t[e].push(n):t[e]=[n]}),os),La=Zr(Tr);function Oa(t){return Xo(t)?Yn(t):zr(t)}function Ia(t){return Xo(t)?Yn(t,!0):function(t){if(!ea(t))return function(t){var e=[];if(null!=t)for(var n in St(t))e.push(n);return e}(t);var e=ws(t),n=[];for(var r in t)("constructor"!=r||!e&&It.call(t,r))&&n.push(r);return n}(t)}var Ra=Ai((function(t,e,n){Br(t,e,n)})),za=Ai((function(t,e,n,r){Br(t,e,n,r)})),Fa=ts((function(t,e){var n={};if(null==t)return n;var r=!1;e=Pe(e,(function(e){return e=vi(e,t),r||(r=e.length>1),e})),ki(t,ns(t),n),r&&(n=ar(n,7,Ki));for(var i=e.length;i--;)ui(n,e[i]);return n})),Na=ts((function(t,e){return null==t?{}:function(t,e){return Wr(t,e,(function(e,n){return ka(t,n)}))}(t,e)}));function ja(t,e){if(null==t)return{};var n=Pe(ns(t),(function(t){return[t]}));return e=os(e),Wr(t,n,(function(t,n){return e(t,n[0])}))}var Da=Zi(Oa),Ba=Zi(Ia);function Ua(t){return null==t?[]:Ge(t,Oa(t))}var Va=Ri((function(t,e,n){return e=e.toLowerCase(),t+(n?Wa(e):e)}));function Wa(t){return Qa(ba(t).toLowerCase())}function Ga(t){return(t=ba(t))&&t.replace(yt,Ye).replace(Ht,"")}var Ha=Ri((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),qa=Ri((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Xa=Ii("toLowerCase"),Za=Ri((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Ya=Ri((function(t,e,n){return t+(n?" ":"")+Qa(e)})),$a=Ri((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Qa=Ii("toUpperCase");function Ka(t,e,n){return t=ba(t),(e=n?i:e)===i?function(t){return Yt.test(t)}(t)?function(t){return t.match(Xt)||[]}(t):function(t){return t.match(lt)||[]}(t):t.match(e)||[]}var Ja=Zr((function(t,e){try{return ve(t,i,e)}catch(t){return Qo(t)?t:new wt(t)}})),tl=ts((function(t,e){return be(e,(function(e){e=Ns(e),ir(t,e,Ao(t[e],t))})),t}));function el(t){return function(){return t}}var nl=Ni(),rl=Ni(!0);function il(t){return t}function sl(t){return Rr("function"==typeof t?t:ar(t,1))}var ol=Zr((function(t,e){return function(n){return Tr(n,t,e)}})),al=Zr((function(t,e){return function(n){return Tr(t,n,e)}}));function ll(t,e,n){var r=Oa(e),i=wr(e,r);null!=n||ea(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=wr(e,Oa(e)));var s=!(ea(n)&&"chain"in n&&!n.chain),o=Ko(t);return be(i,(function(n){var r=e[n];t[n]=r,o&&(t.prototype[n]=function(){var e=this.__chain__;if(s||e){var n=t(this.__wrapped__),i=n.__actions__=Ci(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Ee([this.value()],arguments))})})),t}function ul(){}var cl=Ui(Pe),hl=Ui(we),dl=Ui(Te);function fl(t){return ys(t)?Ne(Ns(t)):function(t){return function(e){return xr(e,t)}}(t)}var pl=Wi(),gl=Wi(!0);function ml(){return[]}function vl(){return!1}var yl,bl=Bi((function(t,e){return t+e}),0),_l=qi("ceil"),wl=Bi((function(t,e){return t/e}),1),xl=qi("floor"),Ml=Bi((function(t,e){return t*e}),1),Sl=qi("round"),Pl=Bi((function(t,e){return t-e}),0);return Dn.after=function(t,e){if("function"!=typeof e)throw new Ct(s);return t=ga(t),function(){if(--t<1)return e.apply(this,arguments)}},Dn.ary=ko,Dn.assign=_a,Dn.assignIn=wa,Dn.assignInWith=xa,Dn.assignWith=Ma,Dn.at=Sa,Dn.before=To,Dn.bind=Ao,Dn.bindAll=tl,Dn.bindKey=Lo,Dn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ho(t)?t:[t]},Dn.chain=fo,Dn.chunk=function(t,e,n){e=(n?vs(t,e,n):e===i)?1:vn(ga(e),0);var s=null==t?0:t.length;if(!s||e<1)return[];for(var o=0,a=0,l=r(cn(s/e));o<s;)l[a++]=ei(t,o,o+=e);return l},Dn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var s=t[e];s&&(i[r++]=s)}return i},Dn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Ee(Ho(n)?Ci(n):[n],mr(e,1))},Dn.cond=function(t){var e=null==t?0:t.length,n=os();return t=e?Pe(t,(function(t){if("function"!=typeof t[1])throw new Ct(s);return[n(t[0]),t[1]]})):[],Zr((function(n){for(var r=-1;++r<e;){var i=t[r];if(ve(i[0],this,n))return ve(i[1],this,n)}}))},Dn.conforms=function(t){return function(t){var e=Oa(t);return function(n){return lr(n,t,e)}}(ar(t,1))},Dn.constant=el,Dn.countBy=mo,Dn.create=function(t,e){var n=Bn(t);return null==e?n:rr(n,e)},Dn.curry=function t(e,n,r){var s=Yi(e,8,i,i,i,i,i,n=r?i:n);return s.placeholder=t.placeholder,s},Dn.curryRight=function t(e,n,r){var s=Yi(e,16,i,i,i,i,i,n=r?i:n);return s.placeholder=t.placeholder,s},Dn.debounce=Oo,Dn.defaults=Pa,Dn.defaultsDeep=Ea,Dn.defer=Io,Dn.delay=Ro,Dn.difference=Bs,Dn.differenceBy=Us,Dn.differenceWith=Vs,Dn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,(e=n||e===i?1:ga(e))<0?0:e,r):[]},Dn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,0,(e=r-(e=n||e===i?1:ga(e)))<0?0:e):[]},Dn.dropRightWhile=function(t,e){return t&&t.length?hi(t,os(e,3),!0,!0):[]},Dn.dropWhile=function(t,e){return t&&t.length?hi(t,os(e,3),!0):[]},Dn.fill=function(t,e,n,r){var s=null==t?0:t.length;return s?(n&&"number"!=typeof n&&vs(t,e,n)&&(n=0,r=s),function(t,e,n,r){var s=t.length;for((n=ga(n))<0&&(n=-n>s?0:s+n),(r=r===i||r>s?s:ga(r))<0&&(r+=s),r=n>r?0:ma(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Dn.filter=function(t,e){return(Ho(t)?xe:gr)(t,os(e,3))},Dn.flatMap=function(t,e){return mr(So(t,e),1)},Dn.flatMapDeep=function(t,e){return mr(So(t,e),c)},Dn.flatMapDepth=function(t,e,n){return n=n===i?1:ga(n),mr(So(t,e),n)},Dn.flatten=Hs,Dn.flattenDeep=function(t){return null!=t&&t.length?mr(t,c):[]},Dn.flattenDepth=function(t,e){return null!=t&&t.length?mr(t,e=e===i?1:ga(e)):[]},Dn.flip=function(t){return Yi(t,512)},Dn.flow=nl,Dn.flowRight=rl,Dn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Dn.functions=function(t){return null==t?[]:wr(t,Oa(t))},Dn.functionsIn=function(t){return null==t?[]:wr(t,Ia(t))},Dn.groupBy=wo,Dn.initial=function(t){return null!=t&&t.length?ei(t,0,-1):[]},Dn.intersection=Xs,Dn.intersectionBy=Zs,Dn.intersectionWith=Ys,Dn.invert=Ta,Dn.invertBy=Aa,Dn.invokeMap=xo,Dn.iteratee=sl,Dn.keyBy=Mo,Dn.keys=Oa,Dn.keysIn=Ia,Dn.map=So,Dn.mapKeys=function(t,e){var n={};return e=os(e,3),br(t,(function(t,r,i){ir(n,e(t,r,i),t)})),n},Dn.mapValues=function(t,e){var n={};return e=os(e,3),br(t,(function(t,r,i){ir(n,r,e(t,r,i))})),n},Dn.matches=function(t){return jr(ar(t,1))},Dn.matchesProperty=function(t,e){return Dr(t,ar(e,1))},Dn.memoize=zo,Dn.merge=Ra,Dn.mergeWith=za,Dn.method=ol,Dn.methodOf=al,Dn.mixin=ll,Dn.negate=Fo,Dn.nthArg=function(t){return t=ga(t),Zr((function(e){return Ur(e,t)}))},Dn.omit=Fa,Dn.omitBy=function(t,e){return ja(t,Fo(os(e)))},Dn.once=function(t){return To(2,t)},Dn.orderBy=function(t,e,n,r){return null==t?[]:(Ho(e)||(e=null==e?[]:[e]),Ho(n=r?i:n)||(n=null==n?[]:[n]),Vr(t,e,n))},Dn.over=cl,Dn.overArgs=No,Dn.overEvery=hl,Dn.overSome=dl,Dn.partial=jo,Dn.partialRight=Do,Dn.partition=Po,Dn.pick=Na,Dn.pickBy=ja,Dn.property=fl,Dn.propertyOf=function(t){return function(e){return null==t?i:xr(t,e)}},Dn.pull=Qs,Dn.pullAll=Ks,Dn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Gr(t,e,os(n,2)):t},Dn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Gr(t,e,i,n):t},Dn.pullAt=Js,Dn.range=pl,Dn.rangeRight=gl,Dn.rearg=Bo,Dn.reject=function(t,e){return(Ho(t)?xe:gr)(t,Fo(os(e,3)))},Dn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],s=t.length;for(e=os(e,3);++r<s;){var o=t[r];e(o,r,t)&&(n.push(o),i.push(r))}return Hr(t,i),n},Dn.rest=function(t,e){if("function"!=typeof t)throw new Ct(s);return Zr(t,e=e===i?e:ga(e))},Dn.reverse=to,Dn.sampleSize=function(t,e,n){return e=(n?vs(t,e,n):e===i)?1:ga(e),(Ho(t)?Qn:$r)(t,e)},Dn.set=function(t,e,n){return null==t?t:Qr(t,e,n)},Dn.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Qr(t,e,n,r)},Dn.shuffle=function(t){return(Ho(t)?Kn:ti)(t)},Dn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&vs(t,e,n)?(e=0,n=r):(e=null==e?0:ga(e),n=n===i?r:ga(n)),ei(t,e,n)):[]},Dn.sortBy=Eo,Dn.sortedUniq=function(t){return t&&t.length?si(t):[]},Dn.sortedUniqBy=function(t,e){return t&&t.length?si(t,os(e,2)):[]},Dn.split=function(t,e,n){return n&&"number"!=typeof n&&vs(t,e,n)&&(e=n=i),(n=n===i?f:n>>>0)?(t=ba(t))&&("string"==typeof e||null!=e&&!oa(e))&&!(e=ai(e))&&Ke(t)?bi(on(t),0,n):t.split(e,n):[]},Dn.spread=function(t,e){if("function"!=typeof t)throw new Ct(s);return e=null==e?0:vn(ga(e),0),Zr((function(n){var r=n[e],i=bi(n,0,e);return r&&Ee(i,r),ve(t,this,i)}))},Dn.tail=function(t){var e=null==t?0:t.length;return e?ei(t,1,e):[]},Dn.take=function(t,e,n){return t&&t.length?ei(t,0,(e=n||e===i?1:ga(e))<0?0:e):[]},Dn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,(e=r-(e=n||e===i?1:ga(e)))<0?0:e,r):[]},Dn.takeRightWhile=function(t,e){return t&&t.length?hi(t,os(e,3),!1,!0):[]},Dn.takeWhile=function(t,e){return t&&t.length?hi(t,os(e,3)):[]},Dn.tap=function(t,e){return e(t),t},Dn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Ct(s);return ea(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Oo(t,e,{leading:r,maxWait:e,trailing:i})},Dn.thru=po,Dn.toArray=fa,Dn.toPairs=Da,Dn.toPairsIn=Ba,Dn.toPath=function(t){return Ho(t)?Pe(t,Ns):ua(t)?[t]:Ci(Fs(ba(t)))},Dn.toPlainObject=ya,Dn.transform=function(t,e,n){var r=Ho(t),i=r||Yo(t)||ca(t);if(e=os(e,4),null==n){var s=t&&t.constructor;n=i?r?new s:[]:ea(t)&&Ko(s)?Bn(qt(t)):{}}return(i?be:br)(t,(function(t,r,i){return e(n,t,r,i)})),n},Dn.unary=function(t){return ko(t,1)},Dn.union=eo,Dn.unionBy=no,Dn.unionWith=ro,Dn.uniq=function(t){return t&&t.length?li(t):[]},Dn.uniqBy=function(t,e){return t&&t.length?li(t,os(e,2)):[]},Dn.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?li(t,i,e):[]},Dn.unset=function(t,e){return null==t||ui(t,e)},Dn.unzip=io,Dn.unzipWith=so,Dn.update=function(t,e,n){return null==t?t:ci(t,e,mi(n))},Dn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:ci(t,e,mi(n),r)},Dn.values=Ua,Dn.valuesIn=function(t){return null==t?[]:Ge(t,Ia(t))},Dn.without=oo,Dn.words=Ka,Dn.wrap=function(t,e){return jo(mi(e),t)},Dn.xor=ao,Dn.xorBy=lo,Dn.xorWith=uo,Dn.zip=co,Dn.zipObject=function(t,e){return pi(t||[],e||[],tr)},Dn.zipObjectDeep=function(t,e){return pi(t||[],e||[],Qr)},Dn.zipWith=ho,Dn.entries=Da,Dn.entriesIn=Ba,Dn.extend=wa,Dn.extendWith=xa,ll(Dn,Dn),Dn.add=bl,Dn.attempt=Ja,Dn.camelCase=Va,Dn.capitalize=Wa,Dn.ceil=_l,Dn.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=va(n))==n?n:0),e!==i&&(e=(e=va(e))==e?e:0),or(va(t),e,n)},Dn.clone=function(t){return ar(t,4)},Dn.cloneDeep=function(t){return ar(t,5)},Dn.cloneDeepWith=function(t,e){return ar(t,5,e="function"==typeof e?e:i)},Dn.cloneWith=function(t,e){return ar(t,4,e="function"==typeof e?e:i)},Dn.conformsTo=function(t,e){return null==e||lr(t,e,Oa(e))},Dn.deburr=Ga,Dn.defaultTo=function(t,e){return null==t||t!=t?e:t},Dn.divide=wl,Dn.endsWith=function(t,e,n){t=ba(t),e=ai(e);var r=t.length,s=n=n===i?r:or(ga(n),0,r);return(n-=e.length)>=0&&t.slice(n,s)==e},Dn.eq=Uo,Dn.escape=function(t){return(t=ba(t))&&Z.test(t)?t.replace(q,$e):t},Dn.escapeRegExp=function(t){return(t=ba(t))&&nt.test(t)?t.replace(et,"\\$&"):t},Dn.every=function(t,e,n){var r=Ho(t)?we:fr;return n&&vs(t,e,n)&&(e=i),r(t,os(e,3))},Dn.find=vo,Dn.findIndex=Ws,Dn.findKey=function(t,e){return Le(t,os(e,3),br)},Dn.findLast=yo,Dn.findLastIndex=Gs,Dn.findLastKey=function(t,e){return Le(t,os(e,3),_r)},Dn.floor=xl,Dn.forEach=bo,Dn.forEachRight=_o,Dn.forIn=function(t,e){return null==t?t:vr(t,os(e,3),Ia)},Dn.forInRight=function(t,e){return null==t?t:yr(t,os(e,3),Ia)},Dn.forOwn=function(t,e){return t&&br(t,os(e,3))},Dn.forOwnRight=function(t,e){return t&&_r(t,os(e,3))},Dn.get=Ca,Dn.gt=Vo,Dn.gte=Wo,Dn.has=function(t,e){return null!=t&&fs(t,e,Er)},Dn.hasIn=ka,Dn.head=qs,Dn.identity=il,Dn.includes=function(t,e,n,r){t=Xo(t)?t:Ua(t),n=n&&!r?ga(n):0;var i=t.length;return n<0&&(n=vn(i+n,0)),la(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Ie(t,e,n)>-1},Dn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ga(n);return i<0&&(i=vn(r+i,0)),Ie(t,e,i)},Dn.inRange=function(t,e,n){return e=pa(e),n===i?(n=e,e=0):n=pa(n),function(t,e,n){return t>=yn(e,n)&&t<vn(e,n)}(t=va(t),e,n)},Dn.invoke=La,Dn.isArguments=Go,Dn.isArray=Ho,Dn.isArrayBuffer=qo,Dn.isArrayLike=Xo,Dn.isArrayLikeObject=Zo,Dn.isBoolean=function(t){return!0===t||!1===t||na(t)&&Sr(t)==v},Dn.isBuffer=Yo,Dn.isDate=$o,Dn.isElement=function(t){return na(t)&&1===t.nodeType&&!sa(t)},Dn.isEmpty=function(t){if(null==t)return!0;if(Xo(t)&&(Ho(t)||"string"==typeof t||"function"==typeof t.splice||Yo(t)||ca(t)||Go(t)))return!t.length;var e=ds(t);if(e==x||e==C)return!t.size;if(ws(t))return!zr(t).length;for(var n in t)if(It.call(t,n))return!1;return!0},Dn.isEqual=function(t,e){return Lr(t,e)},Dn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?Lr(t,e,i,n):!!r},Dn.isError=Qo,Dn.isFinite=function(t){return"number"==typeof t&&pn(t)},Dn.isFunction=Ko,Dn.isInteger=Jo,Dn.isLength=ta,Dn.isMap=ra,Dn.isMatch=function(t,e){return t===e||Or(t,e,ls(e))},Dn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,Or(t,e,ls(e),n)},Dn.isNaN=function(t){return ia(t)&&t!=+t},Dn.isNative=function(t){if(_s(t))throw new wt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ir(t)},Dn.isNil=function(t){return null==t},Dn.isNull=function(t){return null===t},Dn.isNumber=ia,Dn.isObject=ea,Dn.isObjectLike=na,Dn.isPlainObject=sa,Dn.isRegExp=oa,Dn.isSafeInteger=function(t){return Jo(t)&&t>=-9007199254740991&&t<=h},Dn.isSet=aa,Dn.isString=la,Dn.isSymbol=ua,Dn.isTypedArray=ca,Dn.isUndefined=function(t){return t===i},Dn.isWeakMap=function(t){return na(t)&&ds(t)==A},Dn.isWeakSet=function(t){return na(t)&&"[object WeakSet]"==Sr(t)},Dn.join=function(t,e){return null==t?"":gn.call(t,e)},Dn.kebabCase=Ha,Dn.last=$s,Dn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var s=r;return n!==i&&(s=(s=ga(n))<0?vn(r+s,0):yn(s,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,s):Oe(t,ze,s,!0)},Dn.lowerCase=qa,Dn.lowerFirst=Xa,Dn.lt=ha,Dn.lte=da,Dn.max=function(t){return t&&t.length?pr(t,il,Pr):i},Dn.maxBy=function(t,e){return t&&t.length?pr(t,os(e,2),Pr):i},Dn.mean=function(t){return Fe(t,il)},Dn.meanBy=function(t,e){return Fe(t,os(e,2))},Dn.min=function(t){return t&&t.length?pr(t,il,Fr):i},Dn.minBy=function(t,e){return t&&t.length?pr(t,os(e,2),Fr):i},Dn.stubArray=ml,Dn.stubFalse=vl,Dn.stubObject=function(){return{}},Dn.stubString=function(){return""},Dn.stubTrue=function(){return!0},Dn.multiply=Ml,Dn.nth=function(t,e){return t&&t.length?Ur(t,ga(e)):i},Dn.noConflict=function(){return se._===this&&(se._=jt),this},Dn.noop=ul,Dn.now=Co,Dn.pad=function(t,e,n){t=ba(t);var r=(e=ga(e))?sn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Vi(hn(i),n)+t+Vi(cn(i),n)},Dn.padEnd=function(t,e,n){t=ba(t);var r=(e=ga(e))?sn(t):0;return e&&r<e?t+Vi(e-r,n):t},Dn.padStart=function(t,e,n){t=ba(t);var r=(e=ga(e))?sn(t):0;return e&&r<e?Vi(e-r,n)+t:t},Dn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),_n(ba(t).replace(rt,""),e||0)},Dn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&vs(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=pa(t),e===i?(e=t,t=0):e=pa(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var s=wn();return yn(t+s*(e-t+ee("1e-"+((s+"").length-1))),e)}return qr(t,e)},Dn.reduce=function(t,e,n){var r=Ho(t)?Ce:De,i=arguments.length<3;return r(t,os(e,4),n,i,hr)},Dn.reduceRight=function(t,e,n){var r=Ho(t)?ke:De,i=arguments.length<3;return r(t,os(e,4),n,i,dr)},Dn.repeat=function(t,e,n){return e=(n?vs(t,e,n):e===i)?1:ga(e),Xr(ba(t),e)},Dn.replace=function(){var t=arguments,e=ba(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Dn.result=function(t,e,n){var r=-1,s=(e=vi(e,t)).length;for(s||(s=1,t=i);++r<s;){var o=null==t?i:t[Ns(e[r])];o===i&&(r=s,o=n),t=Ko(o)?o.call(t):o}return t},Dn.round=Sl,Dn.runInContext=t,Dn.sample=function(t){return(Ho(t)?$n:Yr)(t)},Dn.size=function(t){if(null==t)return 0;if(Xo(t))return la(t)?sn(t):t.length;var e=ds(t);return e==x||e==C?t.size:zr(t).length},Dn.snakeCase=Za,Dn.some=function(t,e,n){var r=Ho(t)?Te:ni;return n&&vs(t,e,n)&&(e=i),r(t,os(e,3))},Dn.sortedIndex=function(t,e){return ri(t,e)},Dn.sortedIndexBy=function(t,e,n){return ii(t,e,os(n,2))},Dn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ri(t,e);if(r<n&&Uo(t[r],e))return r}return-1},Dn.sortedLastIndex=function(t,e){return ri(t,e,!0)},Dn.sortedLastIndexBy=function(t,e,n){return ii(t,e,os(n,2),!0)},Dn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ri(t,e,!0)-1;if(Uo(t[n],e))return n}return-1},Dn.startCase=Ya,Dn.startsWith=function(t,e,n){return t=ba(t),n=null==n?0:or(ga(n),0,t.length),e=ai(e),t.slice(n,n+e.length)==e},Dn.subtract=Pl,Dn.sum=function(t){return t&&t.length?Be(t,il):0},Dn.sumBy=function(t,e){return t&&t.length?Be(t,os(e,2)):0},Dn.template=function(t,e,n){var r=Dn.templateSettings;n&&vs(t,e,n)&&(e=i),t=ba(t),e=xa({},e,r,$i);var s,o,a=xa({},e.imports,r.imports,$i),l=Oa(a),u=Ge(a,l),c=0,h=e.interpolate||bt,d="__p += '",f=Pt((e.escape||bt).source+"|"+h.source+"|"+(h===Q?ht:bt).source+"|"+(e.evaluate||bt).source+"|$","g"),p="//# sourceURL="+(It.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Qt+"]")+"\n";t.replace(f,(function(e,n,r,i,a,l){return r||(r=i),d+=t.slice(c,l).replace(_t,Qe),n&&(s=!0,d+="' +\n__e("+n+") +\n'"),a&&(o=!0,d+="';\n"+a+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+e.length,e})),d+="';\n";var g=It.call(e,"variable")&&e.variable;if(g){if(ut.test(g))throw new wt("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(o?d.replace(V,""):d).replace(W,"$1").replace(G,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Ja((function(){return xt(l,p+"return "+d).apply(i,u)}));if(m.source=d,Qo(m))throw m;return m},Dn.times=function(t,e){if((t=ga(t))<1||t>h)return[];var n=f,r=yn(t,f);e=os(e),t-=f;for(var i=Ue(r,e);++n<t;)e(n);return i},Dn.toFinite=pa,Dn.toInteger=ga,Dn.toLength=ma,Dn.toLower=function(t){return ba(t).toLowerCase()},Dn.toNumber=va,Dn.toSafeInteger=function(t){return t?or(ga(t),-9007199254740991,h):0===t?t:0},Dn.toString=ba,Dn.toUpper=function(t){return ba(t).toUpperCase()},Dn.trim=function(t,e,n){if((t=ba(t))&&(n||e===i))return Ve(t);if(!t||!(e=ai(e)))return t;var r=on(t),s=on(e);return bi(r,qe(r,s),Xe(r,s)+1).join("")},Dn.trimEnd=function(t,e,n){if((t=ba(t))&&(n||e===i))return t.slice(0,an(t)+1);if(!t||!(e=ai(e)))return t;var r=on(t);return bi(r,0,Xe(r,on(e))+1).join("")},Dn.trimStart=function(t,e,n){if((t=ba(t))&&(n||e===i))return t.replace(rt,"");if(!t||!(e=ai(e)))return t;var r=on(t);return bi(r,qe(r,on(e))).join("")},Dn.truncate=function(t,e){var n=30,r="...";if(ea(e)){var s="separator"in e?e.separator:s;n="length"in e?ga(e.length):n,r="omission"in e?ai(e.omission):r}var o=(t=ba(t)).length;if(Ke(t)){var a=on(t);o=a.length}if(n>=o)return t;var l=n-sn(r);if(l<1)return r;var u=a?bi(a,0,l).join(""):t.slice(0,l);if(s===i)return u+r;if(a&&(l+=u.length-l),oa(s)){if(t.slice(l).search(s)){var c,h=u;for(s.global||(s=Pt(s.source,ba(dt.exec(s))+"g")),s.lastIndex=0;c=s.exec(h);)var d=c.index;u=u.slice(0,d===i?l:d)}}else if(t.indexOf(ai(s),l)!=l){var f=u.lastIndexOf(s);f>-1&&(u=u.slice(0,f))}return u+r},Dn.unescape=function(t){return(t=ba(t))&&X.test(t)?t.replace(H,ln):t},Dn.uniqueId=function(t){var e=++Rt;return ba(t)+e},Dn.upperCase=$a,Dn.upperFirst=Qa,Dn.each=bo,Dn.eachRight=_o,Dn.first=qs,ll(Dn,(yl={},br(Dn,(function(t,e){It.call(Dn.prototype,e)||(yl[e]=t)})),yl),{chain:!1}),Dn.VERSION="4.17.21",be(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Dn[t].placeholder=Dn})),be(["drop","take"],(function(t,e){Wn.prototype[t]=function(n){n=n===i?1:vn(ga(n),0);var r=this.__filtered__&&!e?new Wn(this):this.clone();return r.__filtered__?r.__takeCount__=yn(n,r.__takeCount__):r.__views__.push({size:yn(n,f),type:t+(r.__dir__<0?"Right":"")}),r},Wn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),be(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Wn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:os(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),be(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Wn.prototype[t]=function(){return this[n](1).value()[0]}})),be(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Wn.prototype[t]=function(){return this.__filtered__?new Wn(this):this[n](1)}})),Wn.prototype.compact=function(){return this.filter(il)},Wn.prototype.find=function(t){return this.filter(t).head()},Wn.prototype.findLast=function(t){return this.reverse().find(t)},Wn.prototype.invokeMap=Zr((function(t,e){return"function"==typeof t?new Wn(this):this.map((function(n){return Tr(n,t,e)}))})),Wn.prototype.reject=function(t){return this.filter(Fo(os(t)))},Wn.prototype.slice=function(t,e){t=ga(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Wn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=ga(e))<0?n.dropRight(-e):n.take(e-t)),n)},Wn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Wn.prototype.toArray=function(){return this.take(f)},br(Wn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),s=Dn[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);s&&(Dn.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,l=e instanceof Wn,u=a[0],c=l||Ho(e),h=function(t){var e=s.apply(Dn,Ee([t],a));return r&&d?e[0]:e};c&&n&&"function"==typeof u&&1!=u.length&&(l=c=!1);var d=this.__chain__,f=!!this.__actions__.length,p=o&&!d,g=l&&!f;if(!o&&c){e=g?e:new Wn(this);var m=t.apply(e,a);return m.__actions__.push({func:po,args:[h],thisArg:i}),new Vn(m,d)}return p&&g?t.apply(this,a):(m=this.thru(h),p?r?m.value()[0]:m.value():m)})})),be(["pop","push","shift","sort","splice","unshift"],(function(t){var e=kt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Dn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Ho(i)?i:[],t)}return this[n]((function(n){return e.apply(Ho(n)?n:[],t)}))}})),br(Wn.prototype,(function(t,e){var n=Dn[e];if(n){var r=n.name+"";It.call(An,r)||(An[r]=[]),An[r].push({name:e,func:n})}})),An[ji(i,2).name]=[{name:"wrapper",func:i}],Wn.prototype.clone=function(){var t=new Wn(this.__wrapped__);return t.__actions__=Ci(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ci(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ci(this.__views__),t},Wn.prototype.reverse=function(){if(this.__filtered__){var t=new Wn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Wn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ho(t),r=e<0,i=n?t.length:0,s=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var s=n[r],o=s.size;switch(s.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=yn(e,t+o);break;case"takeRight":t=vn(t,e-o)}}return{start:t,end:e}}(0,i,this.__views__),o=s.start,a=s.end,l=a-o,u=r?a:o-1,c=this.__iteratees__,h=c.length,d=0,f=yn(l,this.__takeCount__);if(!n||!r&&i==l&&f==l)return di(t,this.__actions__);var p=[];t:for(;l--&&d<f;){for(var g=-1,m=t[u+=e];++g<h;){var v=c[g],y=v.iteratee,b=v.type,_=y(m);if(2==b)m=_;else if(!_){if(1==b)continue t;break t}}p[d++]=m}return p},Dn.prototype.at=go,Dn.prototype.chain=function(){return fo(this)},Dn.prototype.commit=function(){return new Vn(this.value(),this.__chain__)},Dn.prototype.next=function(){this.__values__===i&&(this.__values__=fa(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},Dn.prototype.plant=function(t){for(var e,n=this;n instanceof Un;){var r=Ds(n);r.__index__=0,r.__values__=i,e?s.__wrapped__=r:e=r;var s=r;n=n.__wrapped__}return s.__wrapped__=t,e},Dn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Wn){var e=t;return this.__actions__.length&&(e=new Wn(this)),(e=e.reverse()).__actions__.push({func:po,args:[to],thisArg:i}),new Vn(e,this.__chain__)}return this.thru(to)},Dn.prototype.toJSON=Dn.prototype.valueOf=Dn.prototype.value=function(){return di(this.__wrapped__,this.__actions__)},Dn.prototype.first=Dn.prototype.head,oe&&(Dn.prototype[oe]=function(){return this}),Dn}();se._=un,(r=function(){return un}.call(e,n,e,t))===i||(t.exports=r)}.call(this)},155:t=>{var e,n,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var a,l=[],u=!1,c=-1;function h(){u&&a&&(u=!1,a.length?l=a.concat(l):c=-1,l.length&&d())}function d(){if(!u){var t=o(h);u=!0;for(var e=l.length;e;){for(a=l,l=[];++c<e;)a&&a[c].run();c=-1,e=l.length}a=null,u=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function p(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new f(t,e)),1!==l.length||u||o(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},582:function(t){t.exports=function(){"use strict";function t(t,r,i,s,o){!function t(n,r,i,s,o){for(;s>i;){if(s-i>600){var a=s-i+1,l=r-i+1,u=Math.log(a),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(a-c)/a)*(l-a/2<0?-1:1);t(n,r,Math.max(i,Math.floor(r-l*c/a+h)),Math.min(s,Math.floor(r+(a-l)*c/a+h)),o)}var d=n[r],f=i,p=s;for(e(n,i,r),o(n[s],d)>0&&e(n,i,s);f<p;){for(e(n,f,p),f++,p--;o(n[f],d)<0;)f++;for(;o(n[p],d)>0;)p--}0===o(n[i],d)?e(n,i,p):e(n,++p,s),p<=r&&(i=p+1),r<=p&&(s=p-1)}}(t,r,i||0,s||t.length-1,o||n)}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function s(t,e){o(t,0,t.children.length,e,t)}function o(t,e,n,r,i){i||(i=p(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var s=e;s<n;s++){var o=t.children[s];a(i,t.leaf?r(o):o)}return i}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,n,r,i,s){for(var o=[n,r];o.length;)if(!((r=o.pop())-(n=o.pop())<=i)){var a=n+Math.ceil((r-n)/i/2)*i;t(e,a,n,r,s),o.push(n,a,a,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,n=[];if(!f(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var s=0;s<e.children.length;s++){var o=e.children[s],a=e.leaf?r(o):o;f(t,a)&&(e.leaf?n.push(o):d(t,a)?this._all(o,n):i.push(o))}e=i.pop()}return n},r.prototype.collides=function(t){var e=this.data;if(!f(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],s=e.leaf?this.toBBox(i):i;if(f(t,s)){if(e.leaf||d(t,s))return!0;n.push(i)}}e=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,e){if(!t)return this;for(var n,r,s,o=this.data,a=this.toBBox(t),l=[],u=[];o||l.length;){if(o||(o=l.pop(),r=l[l.length-1],n=u.pop(),s=!0),o.leaf){var c=i(t,o.children,e);if(-1!==c)return o.children.splice(c,1),l.push(o),this._condense(l),this}s||o.leaf||!d(o,a)?r?(n++,o=r.children[n],s=!1):o=null:(l.push(o),u.push(n),n=0,r=o,o=o.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},r.prototype._build=function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return s(i=p(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=p([])).leaf=!1,i.height=r;var l=Math.ceil(o/a),u=l*Math.ceil(Math.sqrt(a));g(t,e,n,u,this.compareMinX);for(var c=e;c<=n;c+=u){var h=Math.min(c+u-1,n);g(t,c,h,l,this.compareMinY);for(var d=c;d<=h;d+=l){var f=Math.min(d+l-1,h);i.children.push(this._build(t,d,f,r-1))}}return s(i,this.toBBox),i},r.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,s=1/0,o=void 0,a=0;a<e.children.length;a++){var l=e.children[a],u=c(l),h=(d=t,f=l,(Math.max(f.maxX,d.maxX)-Math.min(f.minX,d.minX))*(Math.max(f.maxY,d.maxY)-Math.min(f.minY,d.minY))-u);h<s?(s=h,i=u<i?u:i,o=l):h===s&&u<i&&(i=u,o=l)}e=o||e.children[0]}var d,f;return e},r.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],s=this._chooseSubtree(r,this.data,e,i);for(s.children.push(t),a(s,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},r.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=p(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,s(n,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},r.prototype._splitRoot=function(t,e){this.data=p([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,n){for(var r,i,s,a,l,u,h,d=1/0,f=1/0,p=e;p<=n-e;p++){var g=o(t,0,p,this.toBBox),m=o(t,p,n,this.toBBox),v=(i=g,s=m,void 0,void 0,void 0,void 0,a=Math.max(i.minX,s.minX),l=Math.max(i.minY,s.minY),u=Math.min(i.maxX,s.maxX),h=Math.min(i.maxY,s.maxY),Math.max(0,u-a)*Math.max(0,h-l)),y=c(g)+c(m);v<d?(d=v,r=p,f=y<f?y:f):v===d&&y<f&&(f=y,r=p)}return r||n-e},r.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:l,i=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,s=o(t,0,e,i),l=o(t,n-e,n,i),u=h(s)+h(l),c=e;c<n-e;c++){var d=t.children[c];a(s,t.leaf?i(d):d),u+=h(s)}for(var f=n-e-1;f>=e;f--){var p=t.children[f];a(l,t.leaf?i(p):p),u+=h(l)}return u},r.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)a(e[r],t)},r.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():s(t[e],this.toBBox)},r}()},448:(t,e,n)=>{"use strict";var r=n(294),i=n(840);function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(t,e){u(t,e),u(t+"Capture",e)}function u(t,e){for(a[t]=e,t=0;t<e.length;t++)o.add(e[t])}var c=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(t,e,n,r,i,s,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){m[t]=new g(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];m[e]=new g(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){m[t]=new g(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){m[t]=new g(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){m[t]=new g(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){m[t]=new g(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){m[t]=new g(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){m[t]=new g(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){m[t]=new g(t,5,!1,t.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(t){return t[1].toUpperCase()}function b(t,e,n,r){var i=m.hasOwnProperty(e)?m[e]:null;(null!==i?0!==i.type:r||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,r){if(null==e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!h.call(p,t)||!h.call(f,t)&&(d.test(t)?p[t]=!0:(f[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(v,y);m[e]=new g(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(v,y);m[e]=new g(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(v,y);m[e]=new g(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),C=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function z(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=R&&t[R]||t["@@iterator"])?t:null}var F,N=Object.assign;function j(t){if(void 0===F)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);F=e&&e[1]||""}return"\n"+F+t}var D=!1;function B(t,e){if(!t||D)return"";D=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(t){var r=t}Reflect.construct(t,[],e)}else{try{e.call()}catch(t){r=t}t.call(e.prototype)}else{try{throw Error()}catch(t){r=t}t()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=o&&0<=a);break}}}finally{D=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?j(t):""}function U(t){switch(t.tag){case 5:return j(t.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return B(t.type,!1);case 11:return B(t.type.render,!1);case 1:return B(t.type,!0);default:return""}}function V(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case M:return"Fragment";case x:return"Portal";case P:return"Profiler";case S:return"StrictMode";case T:return"Suspense";case A:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case C:return(t.displayName||"Context")+".Consumer";case E:return(t._context.displayName||"Context")+".Provider";case k:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case L:return null!==(e=t.displayName||null)?e:V(t.type)||"Memo";case O:e=t._payload,t=t._init;try{return V(t(e))}catch(t){}}return null}function W(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(e);case 8:return e===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e}return null}function G(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function H(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function q(t){t._valueTracker||(t._valueTracker=function(t){var e=H(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,s.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function X(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=H(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function Z(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Y(t,e){var n=e.checked;return N({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function $(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=G(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Q(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function K(t,e){Q(t,e);var n=G(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,G(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function J(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&Z(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+G(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function rt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(s(91));return N({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function it(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(s(92));if(et(n)){if(1<n.length)throw Error(s(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:G(n)}}function st(t,e){var n=G(e.value),r=G(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function ot(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function at(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?at(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ut,ct,ht=(ct=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ut=ut||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ut.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return ct(t,e)}))}:ct);function dt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pt=["Webkit","ms","Moz","O"];function gt(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||ft.hasOwnProperty(t)&&ft[t]?(""+e).trim():e+"px"}function mt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=gt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(ft).forEach((function(t){pt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ft[e]=ft[t]}))}));var vt=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yt(t,e){if(e){if(vt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(s(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(s(60));if("object"!=typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=e.style&&"object"!=typeof e.style)throw Error(s(62))}}function bt(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _t=null;function wt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var xt=null,Mt=null,St=null;function Pt(t){if(t=bi(t)){if("function"!=typeof xt)throw Error(s(280));var e=t.stateNode;e&&(e=wi(e),xt(t.stateNode,t.type,e))}}function Et(t){Mt?St?St.push(t):St=[t]:Mt=t}function Ct(){if(Mt){var t=Mt,e=St;if(St=Mt=null,Pt(t),e)for(t=0;t<e.length;t++)Pt(e[t])}}function kt(t,e){return t(e)}function Tt(){}var At=!1;function Lt(t,e,n){if(At)return t(e,n);At=!0;try{return kt(t,e,n)}finally{At=!1,(null!==Mt||null!==St)&&(Tt(),Ct())}}function Ot(t,e){var n=t.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!=typeof n)throw Error(s(231,e,typeof n));return n}var It=!1;if(c)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){It=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch(ct){It=!1}function zt(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(t){this.onError(t)}}var Ft=!1,Nt=null,jt=!1,Dt=null,Bt={onError:function(t){Ft=!0,Nt=t}};function Ut(t,e,n,r,i,s,o,a,l){Ft=!1,Nt=null,zt.apply(Bt,arguments)}function Vt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!=(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Wt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&null!==(t=t.alternate)&&(e=t.memoizedState),null!==e)return e.dehydrated}return null}function Gt(t){if(Vt(t)!==t)throw Error(s(188))}function Ht(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Vt(t)))throw Error(s(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Gt(i),t;if(o===r)return Gt(i),e;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?t:e}(t))?qt(t):null}function qt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=qt(t);if(null!==e)return e;t=t.sibling}return null}var Xt=i.unstable_scheduleCallback,Zt=i.unstable_cancelCallback,Yt=i.unstable_shouldYield,$t=i.unstable_requestPaint,Qt=i.unstable_now,Kt=i.unstable_getCurrentPriorityLevel,Jt=i.unstable_ImmediatePriority,te=i.unstable_UserBlockingPriority,ee=i.unstable_NormalPriority,ne=i.unstable_LowPriority,re=i.unstable_IdlePriority,ie=null,se=null,oe=Math.clz32?Math.clz32:function(t){return 0==(t>>>=0)?32:31-(ae(t)/le|0)|0},ae=Math.log,le=Math.LN2,ue=64,ce=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function de(t,e){var n=t.pendingLanes;if(0===n)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=he(a):0!=(s&=o)&&(r=he(s))}else 0!=(o=n&~i)?r=he(o):0!==s&&(r=he(s));if(0===r)return 0;if(0!==e&&e!==r&&0==(e&i)&&((i=r&-r)>=(s=e&-e)||16===i&&0!=(4194240&s)))return e;if(0!=(4&r)&&(r|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-oe(e)),r|=t[n],e&=~i;return r}function fe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function pe(t){return 0!=(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function ge(){var t=ue;return 0==(4194240&(ue<<=1))&&(ue=64),t}function me(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ve(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-oe(e)]=n}function ye(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-oe(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var be=0;function _e(t){return 1<(t&=-t)?4<t?0!=(268435455&t)?16:536870912:4:1}var we,xe,Me,Se,Pe,Ee=!1,Ce=[],ke=null,Te=null,Ae=null,Le=new Map,Oe=new Map,Ie=[],Re="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ze(t,e){switch(t){case"focusin":case"focusout":ke=null;break;case"dragenter":case"dragleave":Te=null;break;case"mouseover":case"mouseout":Ae=null;break;case"pointerover":case"pointerout":Le.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oe.delete(e.pointerId)}}function Fe(t,e,n,r,i,s){return null===t||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==e&&null!==(e=bi(e))&&xe(e),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function Ne(t){var e=yi(t.target);if(null!==e){var n=Vt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Wt(n)))return t.blockedOn=e,void Pe(t.priority,(function(){Me(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function je(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ye(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=bi(n))&&xe(e),t.blockedOn=n,!1;var r=new(n=t.nativeEvent).constructor(n.type,n);_t=r,n.target.dispatchEvent(r),_t=null,e.shift()}return!0}function De(t,e,n){je(t)&&n.delete(e)}function Be(){Ee=!1,null!==ke&&je(ke)&&(ke=null),null!==Te&&je(Te)&&(Te=null),null!==Ae&&je(Ae)&&(Ae=null),Le.forEach(De),Oe.forEach(De)}function Ue(t,e){t.blockedOn===e&&(t.blockedOn=null,Ee||(Ee=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Be)))}function Ve(t){function e(e){return Ue(e,t)}if(0<Ce.length){Ue(Ce[0],t);for(var n=1;n<Ce.length;n++){var r=Ce[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==ke&&Ue(ke,t),null!==Te&&Ue(Te,t),null!==Ae&&Ue(Ae,t),Le.forEach(e),Oe.forEach(e),n=0;n<Ie.length;n++)(r=Ie[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Ie.length&&null===(n=Ie[0]).blockedOn;)Ne(n),null===n.blockedOn&&Ie.shift()}var We=_.ReactCurrentBatchConfig,Ge=!0;function He(t,e,n,r){var i=be,s=We.transition;We.transition=null;try{be=1,Xe(t,e,n,r)}finally{be=i,We.transition=s}}function qe(t,e,n,r){var i=be,s=We.transition;We.transition=null;try{be=4,Xe(t,e,n,r)}finally{be=i,We.transition=s}}function Xe(t,e,n,r){if(Ge){var i=Ye(t,e,n,r);if(null===i)Gr(t,e,r,Ze,n),ze(t,r);else if(function(t,e,n,r,i){switch(e){case"focusin":return ke=Fe(ke,t,e,n,r,i),!0;case"dragenter":return Te=Fe(Te,t,e,n,r,i),!0;case"mouseover":return Ae=Fe(Ae,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Le.set(s,Fe(Le.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Oe.set(s,Fe(Oe.get(s)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r))r.stopPropagation();else if(ze(t,r),4&e&&-1<Re.indexOf(t)){for(;null!==i;){var s=bi(i);if(null!==s&&we(s),null===(s=Ye(t,e,n,r))&&Gr(t,e,r,Ze,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Gr(t,e,r,null,n)}}var Ze=null;function Ye(t,e,n,r){if(Ze=null,null!==(t=yi(t=wt(r))))if(null===(e=Vt(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Wt(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ze=t,null}function $e(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kt()){case Jt:return 1;case te:return 4;case ee:case ne:return 16;case re:return 536870912;default:return 16}default:return 16}}var Qe=null,Ke=null,Je=null;function tn(){if(Je)return Je;var t,e,n=Ke,r=n.length,i="value"in Qe?Qe.value:Qe.textContent,s=i.length;for(t=0;t<r&&n[t]===i[t];t++);var o=r-t;for(e=1;e<=o&&n[r-e]===i[s-e];e++);return Je=i.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function sn(t){function e(e,n,r,i,s){for(var o in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,t)t.hasOwnProperty(o)&&(e=t[o],this[o]=e?e(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return N(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var on,an,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=sn(un),hn=N({},un,{view:0,detail:0}),dn=sn(hn),fn=N({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(on=t.screenX-ln.screenX,an=t.screenY-ln.screenY):an=on=0,ln=t),on)},movementY:function(t){return"movementY"in t?t.movementY:an}}),pn=sn(fn),gn=sn(N({},fn,{dataTransfer:0})),mn=sn(N({},hn,{relatedTarget:0})),vn=sn(N({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=N({},un,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bn=sn(yn),_n=sn(N({},un,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Mn[t])&&!!e[t]}function Pn(){return Sn}var En=N({},hn,{key:function(t){if(t.key){var e=wn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?xn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pn,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Cn=sn(En),kn=sn(N({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=sn(N({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pn})),An=sn(N({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ln=N({},fn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),On=sn(Ln),In=[9,13,27,32],Rn=c&&"CompositionEvent"in window,zn=null;c&&"documentMode"in document&&(zn=document.documentMode);var Fn=c&&"TextEvent"in window&&!zn,Nn=c&&(!Rn||zn&&8<zn&&11>=zn),jn=String.fromCharCode(32),Dn=!1;function Bn(t,e){switch(t){case"keyup":return-1!==In.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var Vn=!1,Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Wn[t.type]:"textarea"===e}function Hn(t,e,n,r){Et(r),0<(e=qr(e,"onChange")).length&&(n=new cn("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var qn=null,Xn=null;function Zn(t){jr(t,0)}function Yn(t){if(X(_i(t)))return t}function $n(t,e){if("change"===t)return e}var Qn=!1;if(c){var Kn;if(c){var Jn="oninput"in document;if(!Jn){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),Jn="function"==typeof tr.oninput}Kn=Jn}else Kn=!1;Qn=Kn&&(!document.documentMode||9<document.documentMode)}function er(){qn&&(qn.detachEvent("onpropertychange",nr),Xn=qn=null)}function nr(t){if("value"===t.propertyName&&Yn(Xn)){var e=[];Hn(e,Xn,t,wt(t)),Lt(Zn,e)}}function rr(t,e,n){"focusin"===t?(er(),Xn=n,(qn=e).attachEvent("onpropertychange",nr)):"focusout"===t&&er()}function ir(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Yn(Xn)}function sr(t,e){if("click"===t)return Yn(e)}function or(t,e){if("input"===t||"change"===t)return Yn(e)}var ar="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e};function lr(t,e){if(ar(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(e,i)||!ar(t[i],e[i]))return!1}return!0}function ur(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cr(t,e){var n,r=ur(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=ur(r)}}function hr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function dr(){for(var t=window,e=Z();e instanceof t.HTMLIFrameElement;){try{var n="string"==typeof e.contentWindow.location.href}catch(t){n=!1}if(!n)break;e=Z((t=e.contentWindow).document)}return e}function fr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function pr(t){var e=dr(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=cr(n,s);var o=cr(n,r);i&&o&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,vr=null,yr=null,br=!1;function _r(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==Z(r)||(r="selectionStart"in(r=mr)&&fr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=qr(vr,"onSelect")).length&&(e=new cn("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=mr)))}function wr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Mr={},Sr={};function Pr(t){if(Mr[t])return Mr[t];if(!xr[t])return t;var e,n=xr[t];for(e in n)if(n.hasOwnProperty(e)&&e in Sr)return Mr[t]=n[e];return t}c&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Er=Pr("animationend"),Cr=Pr("animationiteration"),kr=Pr("animationstart"),Tr=Pr("transitionend"),Ar=new Map,Lr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(t,e){Ar.set(t,e),l(e,[t])}for(var Ir=0;Ir<Lr.length;Ir++){var Rr=Lr[Ir];Or(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Or(Er,"onAnimationEnd"),Or(Cr,"onAnimationIteration"),Or(kr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Tr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(zr));function Nr(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,o,a,l,u){if(Ut.apply(this,arguments),Ft){if(!Ft)throw Error(s(198));var c=Nt;Ft=!1,Nt=null,jt||(jt=!0,Dt=c)}}(r,e,void 0,t),t.currentTarget=null}function jr(t,e){e=0!=(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break t;Nr(i,a,u),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break t;Nr(i,a,u),s=l}}}if(jt)throw t=Dt,jt=!1,Dt=null,t}function Dr(t,e){var n=e[gi];void 0===n&&(n=e[gi]=new Set);var r=t+"__bubble";n.has(r)||(Wr(e,t,2,!1),n.add(r))}function Br(t,e,n){var r=0;e&&(r|=4),Wr(n,t,r,e)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Vr(t){if(!t[Ur]){t[Ur]=!0,o.forEach((function(e){"selectionchange"!==e&&(Fr.has(e)||Br(e,!1,t),Br(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Ur]||(e[Ur]=!0,Br("selectionchange",!1,e))}}function Wr(t,e,n,r){switch($e(e)){case 1:var i=He;break;case 4:i=qe;break;default:i=Xe}n=i.bind(null,e,n,t),i=void 0,!It||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Gr(t,e,n,r,i){var s=r;if(0==(1&e)&&0==(2&e)&&null!==r)t:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue t}a=a.parentNode}}r=r.return}Lt((function(){var r=s,i=wt(n),o=[];t:{var a=Ar.get(t);if(void 0!==a){var l=cn,u=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=Cn;break;case"focusin":u="focus",l=mn;break;case"focusout":u="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case Er:case Cr:case kr:l=vn;break;case Tr:l=An;break;case"scroll":l=dn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=kn}var c=0!=(4&e),h=!c&&"scroll"===t,d=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&null!=(g=Ot(p,d))&&c.push(Hr(p,g,f))),h)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,i),o.push({event:a,listeners:c}))}}if(0==(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||n===_t||!(u=n.relatedTarget||n.fromElement)||!yi(u)&&!u[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?yi(u):null)&&(u!==(h=Vt(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(c=kn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:_i(l),f=null==u?a:_i(u),(a=new c(g,p+"leave",l,n,i)).target=h,a.relatedTarget=f,g=null,yi(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,g=c),h=g,l&&u)t:{for(d=u,p=0,f=c=l;f;f=Xr(f))p++;for(f=0,g=d;g;g=Xr(g))f++;for(;0<p-f;)c=Xr(c),p--;for(;0<f-p;)d=Xr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break t;c=Xr(c),d=Xr(d)}c=null}else c=null;null!==l&&Zr(o,a,l,c,!1),null!==u&&null!==h&&Zr(o,h,u,c,!0)}if("select"===(l=(a=r?_i(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=$n;else if(Gn(a))if(Qn)m=or;else{m=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=sr);switch(m&&(m=m(t,r))?Hn(o,m,n,i):(v&&v(t,a,r),"focusout"===t&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&tt(a,"number",a.value)),v=r?_i(r):window,t){case"focusin":(Gn(v)||"true"===v.contentEditable)&&(mr=v,vr=r,yr=null);break;case"focusout":yr=vr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,_r(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":_r(o,n,i)}var y;if(Rn)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else Vn?Bn(t,n)&&(b="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(b="onCompositionStart");b&&(Nn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(y=tn()):(Ke="value"in(Qe=i)?Qe.value:Qe.textContent,Vn=!0)),0<(v=qr(r,b)).length&&(b=new _n(b,t,null,n,i),o.push({event:b,listeners:v}),(y||null!==(y=Un(n)))&&(b.data=y))),(y=Fn?function(t,e){switch(t){case"compositionend":return Un(e);case"keypress":return 32!==e.which?null:(Dn=!0,jn);case"textInput":return(t=e.data)===jn&&Dn?null:t;default:return null}}(t,n):function(t,e){if(Vn)return"compositionend"===t||!Rn&&Bn(t,e)?(t=tn(),Je=Ke=Qe=null,Vn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Nn&&"ko"!==e.locale?null:e.data}}(t,n))&&0<(r=qr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y)}jr(o,e)}))}function Hr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ot(t,n))&&r.unshift(Hr(t,s,i)),null!=(s=Ot(t,e))&&r.push(Hr(t,s,i))),t=t.return}return r}function Xr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Zr(t,e,n,r,i){for(var s=e._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Ot(n,s))&&o.unshift(Hr(n,l,a)):i||null!=(l=Ot(n,s))&&o.push(Hr(n,l,a))),n=n.return}0!==o.length&&t.push({event:e,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Qr(t){return("string"==typeof t?t:""+t).replace(Yr,"\n").replace($r,"")}function Kr(t,e,n){if(e=Qr(e),Qr(t)!==e&&n)throw Error(s(425))}function Jr(){}var ti=null,ei=null;function ni(t,e){return"textarea"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ri="function"==typeof setTimeout?setTimeout:void 0,ii="function"==typeof clearTimeout?clearTimeout:void 0,si="function"==typeof Promise?Promise:void 0,oi="function"==typeof queueMicrotask?queueMicrotask:void 0!==si?function(t){return si.resolve(null).then(t).catch(ai)}:ri;function ai(t){setTimeout((function(){throw t}))}function li(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return t.removeChild(i),void Ve(e);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ve(e)}function ui(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ci(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,gi="__reactEvents$"+hi,mi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(t){var e=t[di];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pi]||n[di]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ci(t);null!==t;){if(n=t[di])return n;t=ci(t)}return e}n=(t=n).parentNode}return null}function bi(t){return!(t=t[di]||t[pi])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function _i(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(s(33))}function wi(t){return t[fi]||null}var xi=[],Mi=-1;function Si(t){return{current:t}}function Pi(t){0>Mi||(t.current=xi[Mi],xi[Mi]=null,Mi--)}function Ei(t,e){Mi++,xi[Mi]=t.current,t.current=e}var Ci={},ki=Si(Ci),Ti=Si(!1),Ai=Ci;function Li(t,e){var n=t.type.contextTypes;if(!n)return Ci;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Oi(t){return null!=t.childContextTypes}function Ii(){Pi(Ti),Pi(ki)}function Ri(t,e,n){if(ki.current!==Ci)throw Error(s(168));Ei(ki,e),Ei(Ti,n)}function zi(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(s(108,W(t)||"Unknown",i));return N({},n,r)}function Fi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ci,Ai=ki.current,Ei(ki,t),Ei(Ti,Ti.current),!0}function Ni(t,e,n){var r=t.stateNode;if(!r)throw Error(s(169));n?(t=zi(t,e,Ai),r.__reactInternalMemoizedMergedChildContext=t,Pi(Ti),Pi(ki),Ei(ki,t)):Pi(Ti),Ei(Ti,n)}var ji=null,Di=!1,Bi=!1;function Ui(t){null===ji?ji=[t]:ji.push(t)}function Vi(){if(!Bi&&null!==ji){Bi=!0;var t=0,e=be;try{var n=ji;for(be=1;t<n.length;t++){var r=n[t];do{r=r(!0)}while(null!==r)}ji=null,Di=!1}catch(e){throw null!==ji&&(ji=ji.slice(t+1)),Xt(Jt,Vi),e}finally{be=e,Bi=!1}}return null}var Wi=[],Gi=0,Hi=null,qi=0,Xi=[],Zi=0,Yi=null,$i=1,Qi="";function Ki(t,e){Wi[Gi++]=qi,Wi[Gi++]=Hi,Hi=t,qi=e}function Ji(t,e,n){Xi[Zi++]=$i,Xi[Zi++]=Qi,Xi[Zi++]=Yi,Yi=t;var r=$i;t=Qi;var i=32-oe(r)-1;r&=~(1<<i),n+=1;var s=32-oe(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-oe(e)+i|n<<i|r,Qi=s+t}else $i=1<<s|n<<i|r,Qi=t}function ts(t){null!==t.return&&(Ki(t,1),Ji(t,1,0))}function es(t){for(;t===Hi;)Hi=Wi[--Gi],Wi[Gi]=null,qi=Wi[--Gi],Wi[Gi]=null;for(;t===Yi;)Yi=Xi[--Zi],Xi[Zi]=null,Qi=Xi[--Zi],Xi[Zi]=null,$i=Xi[--Zi],Xi[Zi]=null}var ns=null,rs=null,is=!1,ss=null;function os(t,e){var n=Lu(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function as(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,ns=t,rs=ui(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,ns=t,rs=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Yi?{id:$i,overflow:Qi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Lu(18,null,null,0)).stateNode=e,n.return=t,t.child=n,ns=t,rs=null,!0);default:return!1}}function ls(t){return 0!=(1&t.mode)&&0==(128&t.flags)}function us(t){if(is){var e=rs;if(e){var n=e;if(!as(t,e)){if(ls(t))throw Error(s(418));e=ui(n.nextSibling);var r=ns;e&&as(t,e)?os(r,n):(t.flags=-4097&t.flags|2,is=!1,ns=t)}}else{if(ls(t))throw Error(s(418));t.flags=-4097&t.flags|2,is=!1,ns=t}}}function cs(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;ns=t}function hs(t){if(t!==ns)return!1;if(!is)return cs(t),is=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!ni(t.type,t.memoizedProps)),e&&(e=rs)){if(ls(t))throw ds(),Error(s(418));for(;e;)os(t,e),e=ui(e.nextSibling)}if(cs(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){rs=ui(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}rs=null}}else rs=ns?ui(t.stateNode.nextSibling):null;return!0}function ds(){for(var t=rs;t;)t=ui(t.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(t){null===ss?ss=[t]:ss.push(t)}var gs=_.ReactCurrentBatchConfig;function ms(t,e){if(t&&t.defaultProps){for(var n in e=N({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var vs=Si(null),ys=null,bs=null,_s=null;function ws(){_s=bs=ys=null}function xs(t){var e=vs.current;Pi(vs),t._currentValue=e}function Ms(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ss(t,e){ys=t,_s=bs=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!=(t.lanes&e)&&(_a=!0),t.firstContext=null)}function Ps(t){var e=t._currentValue;if(_s!==t)if(t={context:t,memoizedValue:e,next:null},null===bs){if(null===ys)throw Error(s(308));bs=t,ys.dependencies={lanes:0,firstContext:t}}else bs=bs.next=t;return e}var Es=null;function Cs(t){null===Es?Es=[t]:Es.push(t)}function ks(t,e,n,r){var i=e.interleaved;return null===i?(n.next=n,Cs(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ts(t,r)}function Ts(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var As=!1;function Ls(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Os(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Is(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Rs(t,e,n){var r=t.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&kl)){var i=r.pending;return null===i?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ts(t,n)}return null===(i=r.interleaved)?(e.next=e,Cs(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ts(t,n)}function zs(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!=(4194240&n))){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ye(t,n)}}function Fs(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=e:s=s.next=e}else i=s=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ns(t,e,n,r){var i=t.updateQueue;As=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===o?s=u:o.next=u,o=l;var c=t.alternate;null!==c&&(a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l)}if(null!==s){var h=i.baseState;for(o=0,c=u=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var p=t,g=a;switch(d=e,f=n,g.tag){case 1:if("function"==typeof(p=g.payload)){h=p.call(f,h,d);break t}h=p;break t;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(d="function"==typeof(p=g.payload)?p.call(f,h,d):p))break t;h=N({},h,d);break t;case 2:As=!0}}null!==a.callback&&0!==a.lane&&(t.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(e=i.shared.interleaved)){i=e;do{o|=i.lane,i=i.next}while(i!==e)}else null===s&&(i.shared.lanes=0);Fl|=o,t.lanes=o,t.memoizedState=h}}function js(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(s(191,i));i.call(r)}}}var Ds=(new r.Component).refs;function Bs(t,e,n,r){n=null==(n=n(r,e=t.memoizedState))?e:N({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var Us={isMounted:function(t){return!!(t=t._reactInternals)&&Vt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=tu(),i=eu(t),s=Is(r,i);s.payload=e,null!=n&&(s.callback=n),null!==(e=Rs(t,s,i))&&(nu(e,t,i,r),zs(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=tu(),i=eu(t),s=Is(r,i);s.tag=1,s.payload=e,null!=n&&(s.callback=n),null!==(e=Rs(t,s,i))&&(nu(e,t,i,r),zs(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tu(),r=eu(t),i=Is(n,r);i.tag=2,null!=e&&(i.callback=e),null!==(e=Rs(t,i,r))&&(nu(e,t,r,n),zs(e,t,r))}};function Vs(t,e,n,r,i,s,o){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,s,o):!(e.prototype&&e.prototype.isPureReactComponent&&lr(n,r)&&lr(i,s))}function Ws(t,e,n){var r=!1,i=Ci,s=e.contextType;return"object"==typeof s&&null!==s?s=Ps(s):(i=Oi(e)?Ai:ki.current,s=(r=null!=(r=e.contextTypes))?Li(t,i):Ci),e=new e(n,s),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Us,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Gs(t,e,n,r){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Us.enqueueReplaceState(e,e.state,null)}function Hs(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Ds,Ls(t);var s=e.contextType;"object"==typeof s&&null!==s?i.context=Ps(s):(s=Oi(e)?Ai:ki.current,i.context=Li(t,s)),i.state=t.memoizedState,"function"==typeof(s=e.getDerivedStateFromProps)&&(Bs(t,e,s,n),i.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(e=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&Us.enqueueReplaceState(i,i.state,null),Ns(t,n,i,r),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.flags|=4194308)}function qs(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,t));var i=r,o=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===o?e.ref:(e=function(t){var e=i.refs;e===Ds&&(e=i.refs={}),null===t?delete e[o]:e[o]=t},e._stringRef=o,e)}if("string"!=typeof t)throw Error(s(284));if(!n._owner)throw Error(s(290,t))}return t}function Xs(t,e){throw t=Object.prototype.toString.call(e),Error(s(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Zs(t){return(0,t._init)(t._payload)}function Ys(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Iu(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=2,n):r:(e.flags|=2,n):(e.flags|=1048576,n)}function a(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,r){return null===e||6!==e.tag?((e=Nu(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function u(t,e,n,r){var s=n.type;return s===M?h(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===O&&Zs(s)===e.type)?((r=i(e,n.props)).ref=qs(t,e,n),r.return=t,r):((r=Ru(n.type,n.key,n.props,null,t.mode,r)).ref=qs(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=ju(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,s){return null===e||7!==e.tag?((e=zu(n,t.mode,r,s)).return=t,e):((e=i(e,n)).return=t,e)}function d(t,e,n){if("string"==typeof e&&""!==e||"number"==typeof e)return(e=Nu(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case w:return(n=Ru(e.type,e.key,e.props,null,t.mode,n)).ref=qs(t,null,e),n.return=t,n;case x:return(e=ju(e,t.mode,n)).return=t,e;case O:return d(t,(0,e._init)(e._payload),n)}if(et(e)||z(e))return(e=zu(e,t.mode,n,null)).return=t,e;Xs(t,e)}return null}function f(t,e,n,r){var i=null!==e?e.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:l(t,e,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?u(t,e,n,r):null;case x:return n.key===i?c(t,e,n,r):null;case O:return f(t,e,(i=n._init)(n._payload),r)}if(et(n)||z(n))return null!==i?null:h(t,e,n,r,null);Xs(t,n)}return null}function p(t,e,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return l(e,t=t.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case w:return u(e,t=t.get(null===r.key?n:r.key)||null,r,i);case x:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i);case O:return p(t,e,n,(0,r._init)(r._payload),i)}if(et(r)||z(r))return h(e,t=t.get(n)||null,r,i,null);Xs(e,r)}return null}function g(i,s,a,l){for(var u=null,c=null,h=s,g=s=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=f(i,h,a[g],l);if(null===v){null===h&&(h=m);break}t&&h&&null===v.alternate&&e(i,h),s=o(v,s,g),null===c?u=v:c.sibling=v,c=v,h=m}if(g===a.length)return n(i,h),is&&Ki(i,g),u;if(null===h){for(;g<a.length;g++)null!==(h=d(i,a[g],l))&&(s=o(h,s,g),null===c?u=h:c.sibling=h,c=h);return is&&Ki(i,g),u}for(h=r(i,h);g<a.length;g++)null!==(m=p(h,i,g,a[g],l))&&(t&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=o(m,s,g),null===c?u=m:c.sibling=m,c=m);return t&&h.forEach((function(t){return e(i,t)})),is&&Ki(i,g),u}function m(i,a,l,u){var c=z(l);if("function"!=typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,g=a,m=a=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var b=f(i,g,y.value,u);if(null===b){null===g&&(g=v);break}t&&g&&null===b.alternate&&e(i,g),a=o(b,a,m),null===h?c=b:h.sibling=b,h=b,g=v}if(y.done)return n(i,g),is&&Ki(i,m),c;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=d(i,y.value,u))&&(a=o(y,a,m),null===h?c=y:h.sibling=y,h=y);return is&&Ki(i,m),c}for(g=r(i,g);!y.done;m++,y=l.next())null!==(y=p(g,i,m,y.value,u))&&(t&&null!==y.alternate&&g.delete(null===y.key?m:y.key),a=o(y,a,m),null===h?c=y:h.sibling=y,h=y);return t&&g.forEach((function(t){return e(i,t)})),is&&Ki(i,m),c}return function t(r,s,o,l){if("object"==typeof o&&null!==o&&o.type===M&&null===o.key&&(o=o.props.children),"object"==typeof o&&null!==o){switch(o.$$typeof){case w:t:{for(var u=o.key,c=s;null!==c;){if(c.key===u){if((u=o.type)===M){if(7===c.tag){n(r,c.sibling),(s=i(c,o.props.children)).return=r,r=s;break t}}else if(c.elementType===u||"object"==typeof u&&null!==u&&u.$$typeof===O&&Zs(u)===c.type){n(r,c.sibling),(s=i(c,o.props)).ref=qs(r,c,o),s.return=r,r=s;break t}n(r,c);break}e(r,c),c=c.sibling}o.type===M?((s=zu(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Ru(o.type,o.key,o.props,null,r.mode,l)).ref=qs(r,s,o),l.return=r,r=l)}return a(r);case x:t:{for(c=o.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break t}n(r,s);break}e(r,s),s=s.sibling}(s=ju(o,r.mode,l)).return=r,r=s}return a(r);case O:return t(r,s,(c=o._init)(o._payload),l)}if(et(o))return g(r,s,o,l);if(z(o))return m(r,s,o,l);Xs(r,o)}return"string"==typeof o&&""!==o||"number"==typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Nu(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var $s=Ys(!0),Qs=Ys(!1),Ks={},Js=Si(Ks),to=Si(Ks),eo=Si(Ks);function no(t){if(t===Ks)throw Error(s(174));return t}function ro(t,e){switch(Ei(eo,e),Ei(to,t),Ei(Js,Ks),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Pi(Js),Ei(Js,e)}function io(){Pi(Js),Pi(to),Pi(eo)}function so(t){no(eo.current);var e=no(Js.current),n=lt(e,t.type);e!==n&&(Ei(to,t),Ei(Js,n))}function oo(t){to.current===t&&(Pi(Js),Pi(to))}var ao=Si(0);function lo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!=(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var uo=[];function co(){for(var t=0;t<uo.length;t++)uo[t]._workInProgressVersionPrimary=null;uo.length=0}var ho=_.ReactCurrentDispatcher,fo=_.ReactCurrentBatchConfig,po=0,go=null,mo=null,vo=null,yo=!1,bo=!1,_o=0,wo=0;function xo(){throw Error(s(321))}function Mo(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ar(t[n],e[n]))return!1;return!0}function So(t,e,n,r,i,o){if(po=o,go=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ho.current=null===t||null===t.memoizedState?aa:la,t=n(r,i),bo){o=0;do{if(bo=!1,_o=0,25<=o)throw Error(s(301));o+=1,vo=mo=null,e.updateQueue=null,ho.current=ua,t=n(r,i)}while(bo)}if(ho.current=oa,e=null!==mo&&null!==mo.next,po=0,vo=mo=go=null,yo=!1,e)throw Error(s(300));return t}function Po(){var t=0!==_o;return _o=0,t}function Eo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vo?go.memoizedState=vo=t:vo=vo.next=t,vo}function Co(){if(null===mo){var t=go.alternate;t=null!==t?t.memoizedState:null}else t=mo.next;var e=null===vo?go.memoizedState:vo.next;if(null!==e)vo=e,mo=t;else{if(null===t)throw Error(s(310));t={memoizedState:(mo=t).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===vo?go.memoizedState=vo=t:vo=vo.next=t}return vo}function ko(t,e){return"function"==typeof e?e(t):e}function To(t){var e=Co(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,u=null,c=o;do{var h=c.lane;if((po&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,a=r):u=u.next=d,go.lanes|=h,Fl|=h}c=c.next}while(null!==c&&c!==o);null===u?a=r:u.next=l,ar(r,e.memoizedState)||(_a=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(null!==(t=n.interleaved)){i=t;do{o=i.lane,go.lanes|=o,Fl|=o,i=i.next}while(i!==t)}else null===i&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ao(t){var e=Co(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=t(o,a.action),a=a.next}while(a!==i);ar(o,e.memoizedState)||(_a=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Lo(){}function Oo(t,e){var n=go,r=Co(),i=e(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,_a=!0),r=r.queue,Go(zo.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||null!==vo&&1&vo.memoizedState.tag){if(n.flags|=2048,Do(9,Ro.bind(null,n,r,i,e),void 0,null),null===Tl)throw Error(s(349));0!=(30&po)||Io(n,e,i)}return i}function Io(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=go.updateQueue)?(e={lastEffect:null,stores:null},go.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Ro(t,e,n,r){e.value=n,e.getSnapshot=r,Fo(e)&&No(t)}function zo(t,e,n){return n((function(){Fo(e)&&No(t)}))}function Fo(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ar(t,n)}catch(t){return!0}}function No(t){var e=Ts(t,1);null!==e&&nu(e,t,1,-1)}function jo(t){var e=Eo();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:t},e.queue=t,t=t.dispatch=na.bind(null,go,t),[e.memoizedState,t]}function Do(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=go.updateQueue)?(e={lastEffect:null,stores:null},go.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function Bo(){return Co().memoizedState}function Uo(t,e,n,r){var i=Eo();go.flags|=t,i.memoizedState=Do(1|e,n,void 0,void 0===r?null:r)}function Vo(t,e,n,r){var i=Co();r=void 0===r?null:r;var s=void 0;if(null!==mo){var o=mo.memoizedState;if(s=o.destroy,null!==r&&Mo(r,o.deps))return void(i.memoizedState=Do(e,n,s,r))}go.flags|=t,i.memoizedState=Do(1|e,n,s,r)}function Wo(t,e){return Uo(8390656,8,t,e)}function Go(t,e){return Vo(2048,8,t,e)}function Ho(t,e){return Vo(4,2,t,e)}function qo(t,e){return Vo(4,4,t,e)}function Xo(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Zo(t,e,n){return n=null!=n?n.concat([t]):null,Vo(4,4,Xo.bind(null,e,t),n)}function Yo(){}function $o(t,e){var n=Co();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Mo(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Qo(t,e){var n=Co();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Mo(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ko(t,e,n){return 0==(21&po)?(t.baseState&&(t.baseState=!1,_a=!0),t.memoizedState=n):(ar(n,e)||(n=ge(),go.lanes|=n,Fl|=n,t.baseState=!0),e)}function Jo(t,e){var n=be;be=0!==n&&4>n?n:4,t(!0);var r=fo.transition;fo.transition={};try{t(!1),e()}finally{be=n,fo.transition=r}}function ta(){return Co().memoizedState}function ea(t,e,n){var r=eu(t);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(t)?ia(e,n):null!==(n=ks(t,e,n,r))&&(nu(n,t,r,tu()),sa(n,e,r))}function na(t,e,n){var r=eu(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(t))ia(e,i);else{var s=t.alternate;if(0===t.lanes&&(null===s||0===s.lanes)&&null!==(s=e.lastRenderedReducer))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=e.interleaved;return null===l?(i.next=i,Cs(e)):(i.next=l.next,l.next=i),void(e.interleaved=i)}}catch(t){}null!==(n=ks(t,e,i,r))&&(nu(n,t,r,i=tu()),sa(n,e,r))}}function ra(t){var e=t.alternate;return t===go||null!==e&&e===go}function ia(t,e){bo=yo=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function sa(t,e,n){if(0!=(4194240&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ye(t,n)}}var oa={readContext:Ps,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},aa={readContext:Ps,useCallback:function(t,e){return Eo().memoizedState=[t,void 0===e?null:e],t},useContext:Ps,useEffect:Wo,useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,Uo(4194308,4,Xo.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Uo(4194308,4,t,e)},useInsertionEffect:function(t,e){return Uo(4,2,t,e)},useMemo:function(t,e){var n=Eo();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Eo();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ea.bind(null,go,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Eo().memoizedState=t},useState:jo,useDebugValue:Yo,useDeferredValue:function(t){return Eo().memoizedState=t},useTransition:function(){var t=jo(!1),e=t[0];return t=Jo.bind(null,t[1]),Eo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=go,i=Eo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=e(),null===Tl)throw Error(s(349));0!=(30&po)||Io(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Wo(zo.bind(null,r,o,t),[t]),r.flags|=2048,Do(9,Ro.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Eo(),e=Tl.identifierPrefix;if(is){var n=Qi;e=":"+e+"R"+(n=($i&~(1<<32-oe($i)-1)).toString(32)+n),0<(n=_o++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=wo++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},la={readContext:Ps,useCallback:$o,useContext:Ps,useEffect:Go,useImperativeHandle:Zo,useInsertionEffect:Ho,useLayoutEffect:qo,useMemo:Qo,useReducer:To,useRef:Bo,useState:function(){return To(ko)},useDebugValue:Yo,useDeferredValue:function(t){return Ko(Co(),mo.memoizedState,t)},useTransition:function(){return[To(ko)[0],Co().memoizedState]},useMutableSource:Lo,useSyncExternalStore:Oo,useId:ta,unstable_isNewReconciler:!1},ua={readContext:Ps,useCallback:$o,useContext:Ps,useEffect:Go,useImperativeHandle:Zo,useInsertionEffect:Ho,useLayoutEffect:qo,useMemo:Qo,useReducer:Ao,useRef:Bo,useState:function(){return Ao(ko)},useDebugValue:Yo,useDeferredValue:function(t){var e=Co();return null===mo?e.memoizedState=t:Ko(e,mo.memoizedState,t)},useTransition:function(){return[Ao(ko)[0],Co().memoizedState]},useMutableSource:Lo,useSyncExternalStore:Oo,useId:ta,unstable_isNewReconciler:!1};function ca(t,e){try{var n="",r=e;do{n+=U(r),r=r.return}while(r);var i=n}catch(t){i="\nError generating stack: "+t.message+"\n"+t.stack}return{value:t,source:e,stack:i,digest:null}}function ha(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function da(t,e){try{console.error(e.value)}catch(t){setTimeout((function(){throw t}))}}var fa="function"==typeof WeakMap?WeakMap:Map;function pa(t,e,n){(n=Is(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Gl||(Gl=!0,Hl=r),da(0,e)},n}function ga(t,e,n){(n=Is(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"==typeof r){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){da(0,e)}}var s=t.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){da(0,e),"function"!=typeof r&&(null===ql?ql=new Set([this]):ql.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function ma(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new fa;var i=new Set;r.set(e,i)}else void 0===(i=r.get(e))&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Pu.bind(null,t,e,n),e.then(t,t))}function va(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function ya(t,e,n,r,i){return 0==(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Is(-1,1)).tag=2,Rs(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var ba=_.ReactCurrentOwner,_a=!1;function wa(t,e,n,r){e.child=null===t?Qs(e,null,n,r):$s(e,t.child,n,r)}function xa(t,e,n,r,i){n=n.render;var s=e.ref;return Ss(e,i),r=So(t,e,n,r,s,i),n=Po(),null===t||_a?(is&&n&&ts(e),e.flags|=1,wa(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ga(t,e,i))}function Ma(t,e,n,r,i){if(null===t){var s=n.type;return"function"!=typeof s||Ou(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Ru(n.type,null,r,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,Sa(t,e,s,r,i))}if(s=t.child,0==(t.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&t.ref===e.ref)return Ga(t,e,i)}return e.flags|=1,(t=Iu(s,r)).ref=e.ref,t.return=e,e.child=t}function Sa(t,e,n,r,i){if(null!==t){var s=t.memoizedProps;if(lr(s,r)&&t.ref===e.ref){if(_a=!1,e.pendingProps=r=s,0==(t.lanes&i))return e.lanes=t.lanes,Ga(t,e,i);0!=(131072&t.flags)&&(_a=!0)}}return Ca(t,e,n,r,i)}function Pa(t,e,n){var r=e.pendingProps,i=r.children,s=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0==(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Il,Ol),Ol|=n;else{if(0==(1073741824&n))return t=null!==s?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ei(Il,Ol),Ol|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ei(Il,Ol),Ol|=r}else null!==s?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ei(Il,Ol),Ol|=r;return wa(t,e,i,n),e.child}function Ea(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ca(t,e,n,r,i){var s=Oi(n)?Ai:ki.current;return s=Li(e,s),Ss(e,i),n=So(t,e,n,r,s,i),r=Po(),null===t||_a?(is&&r&&ts(e),e.flags|=1,wa(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ga(t,e,i))}function ka(t,e,n,r,i){if(Oi(n)){var s=!0;Fi(e)}else s=!1;if(Ss(e,i),null===e.stateNode)Wa(t,e),Ws(e,n,r),Hs(e,n,r,i),r=!0;else if(null===t){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;u="object"==typeof u&&null!==u?Ps(u):Li(e,u=Oi(n)?Ai:ki.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;h||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==r||l!==u)&&Gs(e,o,r,u),As=!1;var d=e.memoizedState;o.state=d,Ns(e,r,o,i),l=e.memoizedState,a!==r||d!==l||Ti.current||As?("function"==typeof c&&(Bs(e,n,c,r),l=e.memoizedState),(a=As||Vs(e,n,a,r,d,l,u))?(h||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(e.flags|=4194308)):("function"==typeof o.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):("function"==typeof o.componentDidMount&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Os(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:ms(e.type,a),o.props=u,h=e.pendingProps,d=o.context,l="object"==typeof(l=n.contextType)&&null!==l?Ps(l):Li(e,l=Oi(n)?Ai:ki.current);var f=n.getDerivedStateFromProps;(c="function"==typeof f||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==h||d!==l)&&Gs(e,o,r,l),As=!1,d=e.memoizedState,o.state=d,Ns(e,r,o,i);var p=e.memoizedState;a!==h||d!==p||Ti.current||As?("function"==typeof f&&(Bs(e,n,f,r),p=e.memoizedState),(u=As||Vs(e,n,u,r,d,p,l)||!1)?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof o.componentDidUpdate&&(e.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!=typeof o.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Ta(t,e,n,r,s,i)}function Ta(t,e,n,r,i,s){Ea(t,e);var o=0!=(128&e.flags);if(!r&&!o)return i&&Ni(e,n,!1),Ga(t,e,s);r=e.stateNode,ba.current=e;var a=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&o?(e.child=$s(e,t.child,null,s),e.child=$s(e,null,a,s)):wa(t,e,a,s),e.memoizedState=r.state,i&&Ni(e,n,!0),e.child}function Aa(t){var e=t.stateNode;e.pendingContext?Ri(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Ri(0,e.context,!1),ro(t,e.containerInfo)}function La(t,e,n,r,i){return fs(),ps(i),e.flags|=256,wa(t,e,n,r),e.child}var Oa,Ia,Ra,za={dehydrated:null,treeContext:null,retryLane:0};function Fa(t){return{baseLanes:t,cachePool:null,transitions:null}}function Na(t,e,n){var r,i=e.pendingProps,o=ao.current,a=!1,l=0!=(128&e.flags);if((r=l)||(r=(null===t||null!==t.memoizedState)&&0!=(2&o)),r?(a=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(o|=1),Ei(ao,1&o),null===t)return us(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0==(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=i.children,t=i.fallback,a?(i=e.mode,a=e.child,l={mode:"hidden",children:l},0==(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fu(l,i,0,null),t=zu(t,i,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Fa(n),e.memoizedState=za,t):ja(e,l));if(null!==(o=t.memoizedState)&&null!==(r=o.dehydrated))return function(t,e,n,r,i,o,a){if(n)return 256&e.flags?(e.flags&=-257,Da(t,e,a,r=ha(Error(s(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Fu({mode:"visible",children:r.children},i,0,null),(o=zu(o,i,a,null)).flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,0!=(1&e.mode)&&$s(e,t.child,null,a),e.child.memoizedState=Fa(a),e.memoizedState=za,o);if(0==(1&e.mode))return Da(t,e,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Da(t,e,a,r=ha(o=Error(s(419)),r,void 0))}if(l=0!=(a&t.childLanes),_a||l){if(null!==(r=Tl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!=(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ts(t,i),nu(r,t,i,-1))}return gu(),Da(t,e,a,r=ha(Error(s(421))))}return"$?"===i.data?(e.flags|=128,e.child=t.child,e=Cu.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,rs=ui(i.nextSibling),ns=e,is=!0,ss=null,null!==t&&(Xi[Zi++]=$i,Xi[Zi++]=Qi,Xi[Zi++]=Yi,$i=t.id,Qi=t.overflow,Yi=e),(e=ja(e,r.children)).flags|=4096,e)}(t,e,l,i,r,o,n);if(a){a=i.fallback,l=e.mode,r=(o=t.child).sibling;var u={mode:"hidden",children:i.children};return 0==(1&l)&&e.child!==o?((i=e.child).childLanes=0,i.pendingProps=u,e.deletions=null):(i=Iu(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Iu(r,a):(a=zu(a,l,n,null)).flags|=2,a.return=e,i.return=e,i.sibling=a,e.child=i,i=a,a=e.child,l=null===(l=t.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~n,e.memoizedState=za,i}return t=(a=t.child).sibling,i=Iu(a,{mode:"visible",children:i.children}),0==(1&e.mode)&&(i.lanes=n),i.return=e,i.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function ja(t,e){return(e=Fu({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Da(t,e,n,r){return null!==r&&ps(r),$s(e,t.child,null,n),(t=ja(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Ba(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),Ms(t.return,e,n)}function Ua(t,e,n,r,i){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Va(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(wa(t,e,r.children,n),0!=(2&(r=ao.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!=(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Ba(t,n,e);else if(19===t.tag)Ba(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ei(ao,r),0==(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===lo(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ua(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===lo(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ua(e,!0,n,null,s);break;case"together":Ua(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wa(t,e){0==(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ga(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Fl|=e.lanes,0==(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(n=Iu(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Iu(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Ha(t,e){if(!is)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function qa(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Xa(t,e,n){var r=e.pendingProps;switch(es(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qa(e),null;case 1:case 17:return Oi(e.type)&&Ii(),qa(e),null;case 3:return r=e.stateNode,io(),Pi(Ti),Pi(ki),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(hs(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0==(256&e.flags)||(e.flags|=1024,null!==ss&&(ou(ss),ss=null))),qa(e),null;case 5:oo(e);var i=no(eo.current);if(n=e.type,null!==t&&null!=e.stateNode)Ia(t,e,n,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(s(166));return qa(e),null}if(t=no(Js.current),hs(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[di]=e,r[fi]=o,t=0!=(1&e.mode),n){case"dialog":Dr("cancel",r),Dr("close",r);break;case"iframe":case"object":case"embed":Dr("load",r);break;case"video":case"audio":for(i=0;i<zr.length;i++)Dr(zr[i],r);break;case"source":Dr("error",r);break;case"img":case"image":case"link":Dr("error",r),Dr("load",r);break;case"details":Dr("toggle",r);break;case"input":$(r,o),Dr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Dr("invalid",r);break;case"textarea":it(r,o),Dr("invalid",r)}for(var l in yt(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"==typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Kr(r.textContent,u,t),i=["children",u]):"number"==typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Kr(r.textContent,u,t),i=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Dr("scroll",r)}switch(n){case"input":q(r),J(r,o,!0);break;case"textarea":q(r),ot(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Jr)}r=i,e.updateQueue=r,null!==r&&(e.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=at(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"==typeof r.is?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),"select"===n&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[di]=e,t[fi]=r,Oa(t,e),e.stateNode=t;t:{switch(l=bt(n,r),n){case"dialog":Dr("cancel",t),Dr("close",t),i=r;break;case"iframe":case"object":case"embed":Dr("load",t),i=r;break;case"video":case"audio":for(i=0;i<zr.length;i++)Dr(zr[i],t);i=r;break;case"source":Dr("error",t),i=r;break;case"img":case"image":case"link":Dr("error",t),Dr("load",t),i=r;break;case"details":Dr("toggle",t),i=r;break;case"input":$(t,r),i=Y(t,r),Dr("invalid",t);break;case"option":default:i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=N({},r,{value:void 0}),Dr("invalid",t);break;case"textarea":it(t,r),i=rt(t,r),Dr("invalid",t)}for(o in yt(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?mt(t,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&ht(t,c):"children"===o?"string"==typeof c?("textarea"!==n||""!==c)&&dt(t,c):"number"==typeof c&&dt(t,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Dr("scroll",t):null!=c&&b(t,o,c,l))}switch(n){case"input":q(t),J(t,r,!1);break;case"textarea":q(t),ot(t);break;case"option":null!=r.value&&t.setAttribute("value",""+G(r.value));break;case"select":t.multiple=!!r.multiple,null!=(o=r.value)?nt(t,!!r.multiple,o,!1):null!=r.defaultValue&&nt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(t.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return qa(e),null;case 6:if(t&&null!=e.stateNode)Ra(0,e,t.memoizedProps,r);else{if("string"!=typeof r&&null===e.stateNode)throw Error(s(166));if(n=no(eo.current),no(Js.current),hs(e)){if(r=e.stateNode,n=e.memoizedProps,r[di]=e,(o=r.nodeValue!==n)&&null!==(t=ns))switch(t.tag){case 3:Kr(r.nodeValue,n,0!=(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Kr(r.nodeValue,n,0!=(1&t.mode))}o&&(e.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=e,e.stateNode=r}return qa(e),null;case 13:if(Pi(ao),r=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(is&&null!==rs&&0!=(1&e.mode)&&0==(128&e.flags))ds(),fs(),e.flags|=98560,o=!1;else if(o=hs(e),null!==r&&null!==r.dehydrated){if(null===t){if(!o)throw Error(s(318));if(!(o=null!==(o=e.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=e}else fs(),0==(128&e.flags)&&(e.memoizedState=null),e.flags|=4;qa(e),o=!1}else null!==ss&&(ou(ss),ss=null),o=!0;if(!o)return 65536&e.flags?e:null}return 0!=(128&e.flags)?(e.lanes=n,e):((r=null!==r)!=(null!==t&&null!==t.memoizedState)&&r&&(e.child.flags|=8192,0!=(1&e.mode)&&(null===t||0!=(1&ao.current)?0===Rl&&(Rl=3):gu())),null!==e.updateQueue&&(e.flags|=4),qa(e),null);case 4:return io(),null===t&&Vr(e.stateNode.containerInfo),qa(e),null;case 10:return xs(e.type._context),qa(e),null;case 19:if(Pi(ao),null===(o=e.memoizedState))return qa(e),null;if(r=0!=(128&e.flags),null===(l=o.rendering))if(r)Ha(o,!1);else{if(0!==Rl||null!==t&&0!=(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=lo(t))){for(e.flags|=128,Ha(o,!1),null!==(r=l.updateQueue)&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;null!==n;)t=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ei(ao,1&ao.current|2),e.child}t=t.sibling}null!==o.tail&&Qt()>Vl&&(e.flags|=128,r=!0,Ha(o,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=lo(l))){if(e.flags|=128,r=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),Ha(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return qa(e),null}else 2*Qt()-o.renderingStartTime>Vl&&1073741824!==n&&(e.flags|=128,r=!0,Ha(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=o.last)?n.sibling=l:e.child=l,o.last=l)}return null!==o.tail?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Qt(),e.sibling=null,n=ao.current,Ei(ao,r?1&n|2:1&n),e):(qa(e),null);case 22:case 23:return hu(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!=(1&e.mode)?0!=(1073741824&Ol)&&(qa(e),6&e.subtreeFlags&&(e.flags|=8192)):qa(e),null;case 24:case 25:return null}throw Error(s(156,e.tag))}function Za(t,e){switch(es(e),e.tag){case 1:return Oi(e.type)&&Ii(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return io(),Pi(Ti),Pi(ki),co(),0!=(65536&(t=e.flags))&&0==(128&t)?(e.flags=-65537&t|128,e):null;case 5:return oo(e),null;case 13:if(Pi(ao),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(s(340));fs()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Pi(ao),null;case 4:return io(),null;case 10:return xs(e.type._context),null;case 22:case 23:return hu(),null;default:return null}}Oa=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ia=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,no(Js.current);var s,o=null;switch(n){case"input":i=Y(t,i),r=Y(t,r),o=[];break;case"select":i=N({},i,{value:void 0}),r=N({},r,{value:void 0}),o=[];break;case"textarea":i=rt(t,i),r=rt(t,r),o=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(t.onclick=Jr)}for(c in yt(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!=typeof u&&"number"!=typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Dr("scroll",t),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}},Ra=function(t,e,n,r){n!==r&&(e.flags|=4)};var Ya=!1,$a=!1,Qa="function"==typeof WeakSet?WeakSet:Set,Ka=null;function Ja(t,e){var n=t.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){Su(t,e,n)}else n.current=null}function tl(t,e,n){try{n()}catch(n){Su(t,e,n)}}var el=!1;function nl(t,e,n){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(e,n,s)}i=i.next}while(i!==r)}}function rl(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function il(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"==typeof e?e(t):e.current=t}}function sl(t){var e=t.alternate;null!==e&&(t.alternate=null,sl(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&null!==(e=t.stateNode)&&(delete e[di],delete e[fi],delete e[gi],delete e[mi],delete e[vi]),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ol(t){return 5===t.tag||3===t.tag||4===t.tag}function al(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||ol(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ll(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!=(n=n._reactRootContainer)||null!==e.onclick||(e.onclick=Jr));else if(4!==r&&null!==(t=t.child))for(ll(t,e,n),t=t.sibling;null!==t;)ll(t,e,n),t=t.sibling}function ul(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(ul(t,e,n),t=t.sibling;null!==t;)ul(t,e,n),t=t.sibling}var cl=null,hl=!1;function dl(t,e,n){for(n=n.child;null!==n;)fl(t,e,n),n=n.sibling}function fl(t,e,n){if(se&&"function"==typeof se.onCommitFiberUnmount)try{se.onCommitFiberUnmount(ie,n)}catch(t){}switch(n.tag){case 5:$a||Ja(n,e);case 6:var r=cl,i=hl;cl=null,dl(t,e,n),hl=i,null!==(cl=r)&&(hl?(t=cl,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(hl?(t=cl,n=n.stateNode,8===t.nodeType?li(t.parentNode,n):1===t.nodeType&&li(t,n),Ve(t)):li(cl,n.stateNode));break;case 4:r=cl,i=hl,cl=n.stateNode.containerInfo,hl=!0,dl(t,e,n),cl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!$a&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!=(2&s)||0!=(4&s))&&tl(n,e,o),i=i.next}while(i!==r)}dl(t,e,n);break;case 1:if(!$a&&(Ja(n,e),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(t){Su(n,e,t)}dl(t,e,n);break;case 21:dl(t,e,n);break;case 22:1&n.mode?($a=(r=$a)||null!==n.memoizedState,dl(t,e,n),$a=r):dl(t,e,n);break;default:dl(t,e,n)}}function pl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Qa),e.forEach((function(e){var r=ku.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function gl(t,e){var n=e.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,a=e,l=a;t:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,hl=!1;break t;case 3:case 4:cl=l.stateNode.containerInfo,hl=!0;break t}l=l.return}if(null===cl)throw Error(s(160));fl(o,a,i),cl=null,hl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(t){Su(i,e,t)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)ml(e,t),e=e.sibling}function ml(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gl(e,t),vl(t),4&r){try{nl(3,t,t.return),rl(3,t)}catch(e){Su(t,t.return,e)}try{nl(5,t,t.return)}catch(e){Su(t,t.return,e)}}break;case 1:gl(e,t),vl(t),512&r&&null!==n&&Ja(n,n.return);break;case 5:if(gl(e,t),vl(t),512&r&&null!==n&&Ja(n,n.return),32&t.flags){var i=t.stateNode;try{dt(i,"")}catch(e){Su(t,t.return,e)}}if(4&r&&null!=(i=t.stateNode)){var o=t.memoizedProps,a=null!==n?n.memoizedProps:o,l=t.type,u=t.updateQueue;if(t.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&Q(i,o),bt(l,a);var c=bt(l,o);for(a=0;a<u.length;a+=2){var h=u[a],d=u[a+1];"style"===h?mt(i,d):"dangerouslySetInnerHTML"===h?ht(i,d):"children"===h?dt(i,d):b(i,h,d,c)}switch(l){case"input":K(i,o);break;case"textarea":st(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?nt(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?nt(i,!!o.multiple,o.defaultValue,!0):nt(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(e){Su(t,t.return,e)}}break;case 6:if(gl(e,t),vl(t),4&r){if(null===t.stateNode)throw Error(s(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(e){Su(t,t.return,e)}}break;case 3:if(gl(e,t),vl(t),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ve(e.containerInfo)}catch(e){Su(t,t.return,e)}break;case 4:default:gl(e,t),vl(t);break;case 13:gl(e,t),vl(t),8192&(i=t.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Ul=Qt())),4&r&&pl(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?($a=(c=$a)||h,gl(e,t),$a=c):gl(e,t),vl(t),8192&r){if(c=null!==t.memoizedState,(t.stateNode.isHidden=c)&&!h&&0!=(1&t.mode))for(Ka=t,h=t.child;null!==h;){for(d=Ka=h;null!==Ka;){switch(p=(f=Ka).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Ja(f,f.return);var g=f.stateNode;if("function"==typeof g.componentWillUnmount){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(t){Su(r,n,t)}}break;case 5:Ja(f,f.return);break;case 22:if(null!==f.memoizedState){wl(d);continue}}null!==p?(p.return=f,Ka=p):wl(d)}h=h.sibling}t:for(h=null,d=t;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"==typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=null!=(u=d.memoizedProps.style)&&u.hasOwnProperty("display")?u.display:null,l.style.display=gt("display",a))}catch(e){Su(t,t.return,e)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(e){Su(t,t.return,e)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(e,t),vl(t),4&r&&pl(t);case 21:}}function vl(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(ol(n)){var r=n;break t}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(dt(i,""),r.flags&=-33),ul(t,al(t),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(t,al(t),o);break;default:throw Error(s(161))}}catch(e){Su(t,t.return,e)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function yl(t,e,n){Ka=t,bl(t,e,n)}function bl(t,e,n){for(var r=0!=(1&t.mode);null!==Ka;){var i=Ka,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ya;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||$a;a=Ya;var u=$a;if(Ya=o,($a=l)&&!u)for(Ka=i;null!==Ka;)l=(o=Ka).child,22===o.tag&&null!==o.memoizedState?xl(i):null!==l?(l.return=o,Ka=l):xl(i);for(;null!==s;)Ka=s,bl(s,e,n),s=s.sibling;Ka=i,Ya=a,$a=u}_l(t)}else 0!=(8772&i.subtreeFlags)&&null!==s?(s.return=i,Ka=s):_l(t)}}function _l(t){for(;null!==Ka;){var e=Ka;if(0!=(8772&e.flags)){var n=e.alternate;try{if(0!=(8772&e.flags))switch(e.tag){case 0:case 11:case 15:$a||rl(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!$a)if(null===n)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ms(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;null!==o&&js(e,o,r);break;case 3:var a=e.updateQueue;if(null!==a){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}js(e,a,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var c=e.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Ve(d)}}}break;default:throw Error(s(163))}$a||512&e.flags&&il(e)}catch(t){Su(e,e.return,t)}}if(e===t){Ka=null;break}if(null!==(n=e.sibling)){n.return=e.return,Ka=n;break}Ka=e.return}}function wl(t){for(;null!==Ka;){var e=Ka;if(e===t){Ka=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Ka=n;break}Ka=e.return}}function xl(t){for(;null!==Ka;){var e=Ka;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rl(4,e)}catch(t){Su(e,n,t)}break;case 1:var r=e.stateNode;if("function"==typeof r.componentDidMount){var i=e.return;try{r.componentDidMount()}catch(t){Su(e,i,t)}}var s=e.return;try{il(e)}catch(t){Su(e,s,t)}break;case 5:var o=e.return;try{il(e)}catch(t){Su(e,o,t)}}}catch(t){Su(e,e.return,t)}if(e===t){Ka=null;break}var a=e.sibling;if(null!==a){a.return=e.return,Ka=a;break}Ka=e.return}}var Ml,Sl=Math.ceil,Pl=_.ReactCurrentDispatcher,El=_.ReactCurrentOwner,Cl=_.ReactCurrentBatchConfig,kl=0,Tl=null,Al=null,Ll=0,Ol=0,Il=Si(0),Rl=0,zl=null,Fl=0,Nl=0,jl=0,Dl=null,Bl=null,Ul=0,Vl=1/0,Wl=null,Gl=!1,Hl=null,ql=null,Xl=!1,Zl=null,Yl=0,$l=0,Ql=null,Kl=-1,Jl=0;function tu(){return 0!=(6&kl)?Qt():-1!==Kl?Kl:Kl=Qt()}function eu(t){return 0==(1&t.mode)?1:0!=(2&kl)&&0!==Ll?Ll&-Ll:null!==gs.transition?(0===Jl&&(Jl=ge()),Jl):0!==(t=be)?t:t=void 0===(t=window.event)?16:$e(t.type)}function nu(t,e,n,r){if(50<$l)throw $l=0,Ql=null,Error(s(185));ve(t,n,r),0!=(2&kl)&&t===Tl||(t===Tl&&(0==(2&kl)&&(Nl|=n),4===Rl&&au(t,Ll)),ru(t,r),1===n&&0===kl&&0==(1&e.mode)&&(Vl=Qt()+500,Di&&Vi()))}function ru(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-oe(s),a=1<<o,l=i[o];-1===l?0!=(a&n)&&0==(a&r)||(i[o]=fe(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}(t,e);var r=de(t,t===Tl?Ll:0);if(0===r)null!==n&&Zt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=n&&Zt(n),1===e)0===t.tag?function(t){Di=!0,Ui(t)}(lu.bind(null,t)):Ui(lu.bind(null,t)),oi((function(){0==(6&kl)&&Vi()})),n=null;else{switch(_e(r)){case 1:n=Jt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=re}n=Tu(n,iu.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function iu(t,e){if(Kl=-1,Jl=0,0!=(6&kl))throw Error(s(327));var n=t.callbackNode;if(xu()&&t.callbackNode!==n)return null;var r=de(t,t===Tl?Ll:0);if(0===r)return null;if(0!=(30&r)||0!=(r&t.expiredLanes)||e)e=mu(t,r);else{e=r;var i=kl;kl|=2;var o=pu();for(Tl===t&&Ll===e||(Wl=null,Vl=Qt()+500,du(t,e));;)try{yu();break}catch(e){fu(t,e)}ws(),Pl.current=o,kl=i,null!==Al?e=0:(Tl=null,Ll=0,e=Rl)}if(0!==e){if(2===e&&0!==(i=pe(t))&&(r=i,e=su(t,i)),1===e)throw n=zl,du(t,0),au(t,r),ru(t,Qt()),n;if(6===e)au(t,r);else{if(i=t.current.alternate,0==(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(t){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=mu(t,r))&&0!==(o=pe(t))&&(r=o,e=su(t,o)),1===e))throw n=zl,du(t,0),au(t,r),ru(t,Qt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(s(345));case 2:case 5:wu(t,Bl,Wl);break;case 3:if(au(t,r),(130023424&r)===r&&10<(e=Ul+500-Qt())){if(0!==de(t,0))break;if(((i=t.suspendedLanes)&r)!==r){tu(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ri(wu.bind(null,t,Bl,Wl),e);break}wu(t,Bl,Wl);break;case 4:if(au(t,r),(4194240&r)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-oe(r);o=1<<a,(a=e[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Qt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){t.timeoutHandle=ri(wu.bind(null,t,Bl,Wl),r);break}wu(t,Bl,Wl);break;default:throw Error(s(329))}}}return ru(t,Qt()),t.callbackNode===n?iu.bind(null,t):null}function su(t,e){var n=Dl;return t.current.memoizedState.isDehydrated&&(du(t,e).flags|=256),2!==(t=mu(t,e))&&(e=Bl,Bl=n,null!==e&&ou(e)),t}function ou(t){null===Bl?Bl=t:Bl.push.apply(Bl,t)}function au(t,e){for(e&=~jl,e&=~Nl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-oe(e),r=1<<n;t[n]=-1,e&=~r}}function lu(t){if(0!=(6&kl))throw Error(s(327));xu();var e=de(t,0);if(0==(1&e))return ru(t,Qt()),null;var n=mu(t,e);if(0!==t.tag&&2===n){var r=pe(t);0!==r&&(e=r,n=su(t,r))}if(1===n)throw n=zl,du(t,0),au(t,e),ru(t,Qt()),n;if(6===n)throw Error(s(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wu(t,Bl,Wl),ru(t,Qt()),null}function uu(t,e){var n=kl;kl|=1;try{return t(e)}finally{0===(kl=n)&&(Vl=Qt()+500,Di&&Vi())}}function cu(t){null!==Zl&&0===Zl.tag&&0==(6&kl)&&xu();var e=kl;kl|=1;var n=Cl.transition,r=be;try{if(Cl.transition=null,be=1,t)return t()}finally{be=r,Cl.transition=n,0==(6&(kl=e))&&Vi()}}function hu(){Ol=Il.current,Pi(Il)}function du(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,ii(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(es(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Ii();break;case 3:io(),Pi(Ti),Pi(ki),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Pi(ao);break;case 10:xs(r.type._context);break;case 22:case 23:hu()}n=n.return}if(Tl=t,Al=t=Iu(t.current,null),Ll=Ol=e,Rl=0,zl=null,jl=Nl=Fl=0,Bl=Dl=null,null!==Es){for(e=0;e<Es.length;e++)if(null!==(r=(n=Es[e]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Es=null}return t}function fu(t,e){for(;;){var n=Al;try{if(ws(),ho.current=oa,yo){for(var r=go.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,vo=mo=go=null,bo=!1,_o=0,El.current=null,null===n||null===n.return){Rl=1,zl=e,Al=null;break}t:{var o=t,a=n.return,l=n,u=e;if(e=Ll,l.flags|=32768,null!==u&&"object"==typeof u&&"function"==typeof u.then){var c=u,h=l,d=h.tag;if(0==(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,e),1&p.mode&&ma(o,c,e),u=c;var g=(e=p).updateQueue;if(null===g){var m=new Set;m.add(u),e.updateQueue=m}else g.add(u);break t}if(0==(1&e)){ma(o,c,e),gu();break t}u=Error(s(426))}else if(is&&1&l.mode){var v=va(a);if(null!==v){0==(65536&v.flags)&&(v.flags|=256),ya(v,a,l,0,e),ps(ca(u,l));break t}}o=u=ca(u,l),4!==Rl&&(Rl=2),null===Dl?Dl=[o]:Dl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e,Fs(o,pa(0,u,e));break t;case 1:l=u;var y=o.type,b=o.stateNode;if(0==(128&o.flags)&&("function"==typeof y.getDerivedStateFromError||null!==b&&"function"==typeof b.componentDidCatch&&(null===ql||!ql.has(b)))){o.flags|=65536,e&=-e,o.lanes|=e,Fs(o,ga(o,l,e));break t}}o=o.return}while(null!==o)}_u(n)}catch(t){e=t,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function pu(){var t=Pl.current;return Pl.current=oa,null===t?oa:t}function gu(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Tl||0==(268435455&Fl)&&0==(268435455&Nl)||au(Tl,Ll)}function mu(t,e){var n=kl;kl|=2;var r=pu();for(Tl===t&&Ll===e||(Wl=null,du(t,e));;)try{vu();break}catch(e){fu(t,e)}if(ws(),kl=n,Pl.current=r,null!==Al)throw Error(s(261));return Tl=null,Ll=0,Rl}function vu(){for(;null!==Al;)bu(Al)}function yu(){for(;null!==Al&&!Yt();)bu(Al)}function bu(t){var e=Ml(t.alternate,t,Ol);t.memoizedProps=t.pendingProps,null===e?_u(t):Al=e,El.current=null}function _u(t){var e=t;do{var n=e.alternate;if(t=e.return,0==(32768&e.flags)){if(null!==(n=Xa(n,e,Ol)))return void(Al=n)}else{if(null!==(n=Za(n,e)))return n.flags&=32767,void(Al=n);if(null===t)return Rl=6,void(Al=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Al=e);Al=e=t}while(null!==e);0===Rl&&(Rl=5)}function wu(t,e,n){var r=be,i=Cl.transition;try{Cl.transition=null,be=1,function(t,e,n,r){do{xu()}while(null!==Zl);if(0!=(6&kl))throw Error(s(327));n=t.finishedWork;var i=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(s(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-oe(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}(t,o),t===Tl&&(Al=Tl=null,Ll=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||Xl||(Xl=!0,Tu(ee,(function(){return xu(),null}))),o=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var a=be;be=1;var l=kl;kl|=4,El.current=null,function(t,e){if(ti=Ge,fr(t=dr())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var r=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(t){n=null;break t}var a=0,l=-1,u=-1,c=0,h=0,d=t,f=null;e:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(u=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===t)break e;if(f===n&&++c===i&&(l=a),f===o&&++h===r&&(u=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ei={focusedElem:t,selectionRange:n},Ge=!1,Ka=e;null!==Ka;)if(t=(e=Ka).child,0!=(1028&e.subtreeFlags)&&null!==t)t.return=e,Ka=t;else for(;null!==Ka;){e=Ka;try{var g=e.alternate;if(0!=(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:ms(e.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=e.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(s(163))}}catch(t){Su(e,e.return,t)}if(null!==(t=e.sibling)){t.return=e.return,Ka=t;break}Ka=e.return}g=el,el=!1}(t,n),ml(n,t),pr(ei),Ge=!!ti,ei=ti=null,t.current=n,yl(n,t,i),$t(),kl=l,be=a,Cl.transition=o}else t.current=n;if(Xl&&(Xl=!1,Zl=t,Yl=i),0===(o=t.pendingLanes)&&(ql=null),function(t){if(se&&"function"==typeof se.onCommitFiberRoot)try{se.onCommitFiberRoot(ie,t,void 0,128==(128&t.current.flags))}catch(t){}}(n.stateNode),ru(t,Qt()),null!==e)for(r=t.onRecoverableError,n=0;n<e.length;n++)r((i=e[n]).value,{componentStack:i.stack,digest:i.digest});if(Gl)throw Gl=!1,t=Hl,Hl=null,t;0!=(1&Yl)&&0!==t.tag&&xu(),0!=(1&(o=t.pendingLanes))?t===Ql?$l++:($l=0,Ql=t):$l=0,Vi()}(t,e,n,r)}finally{Cl.transition=i,be=r}return null}function xu(){if(null!==Zl){var t=_e(Yl),e=Cl.transition,n=be;try{if(Cl.transition=null,be=16>t?16:t,null===Zl)var r=!1;else{if(t=Zl,Zl=null,Yl=0,0!=(6&kl))throw Error(s(331));var i=kl;for(kl|=4,Ka=t.current;null!==Ka;){var o=Ka,a=o.child;if(0!=(16&Ka.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Ka=c;null!==Ka;){var h=Ka;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Ka=d;else for(;null!==Ka;){var f=(h=Ka).sibling,p=h.return;if(sl(h),h===c){Ka=null;break}if(null!==f){f.return=p,Ka=f;break}Ka=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Ka=o}}if(0!=(2064&o.subtreeFlags)&&null!==a)a.return=o,Ka=a;else t:for(;null!==Ka;){if(0!=(2048&(o=Ka).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Ka=y;break t}Ka=o.return}}var b=t.current;for(Ka=b;null!==Ka;){var _=(a=Ka).child;if(0!=(2064&a.subtreeFlags)&&null!==_)_.return=a,Ka=_;else t:for(a=b;null!==Ka;){if(0!=(2048&(l=Ka).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(t){Su(l,l.return,t)}if(l===a){Ka=null;break t}var w=l.sibling;if(null!==w){w.return=l.return,Ka=w;break t}Ka=l.return}}if(kl=i,Vi(),se&&"function"==typeof se.onPostCommitFiberRoot)try{se.onPostCommitFiberRoot(ie,t)}catch(t){}r=!0}return r}finally{be=n,Cl.transition=e}}return!1}function Mu(t,e,n){t=Rs(t,e=pa(0,e=ca(n,e),1),1),e=tu(),null!==t&&(ve(t,1,e),ru(t,e))}function Su(t,e,n){if(3===t.tag)Mu(t,t,n);else for(;null!==e;){if(3===e.tag){Mu(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"==typeof e.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===ql||!ql.has(r))){e=Rs(e,t=ga(e,t=ca(n,t),1),1),t=tu(),null!==e&&(ve(e,1,t),ru(e,t));break}}e=e.return}}function Pu(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=tu(),t.pingedLanes|=t.suspendedLanes&n,Tl===t&&(Ll&n)===n&&(4===Rl||3===Rl&&(130023424&Ll)===Ll&&500>Qt()-Ul?du(t,0):jl|=n),ru(t,e)}function Eu(t,e){0===e&&(0==(1&t.mode)?e=1:(e=ce,0==(130023424&(ce<<=1))&&(ce=4194304)));var n=tu();null!==(t=Ts(t,e))&&(ve(t,e,n),ru(t,n))}function Cu(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Eu(t,n)}function ku(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(e),Eu(t,n)}function Tu(t,e){return Xt(t,e)}function Au(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lu(t,e,n,r){return new Au(t,e,n,r)}function Ou(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Iu(t,e){var n=t.alternate;return null===n?((n=Lu(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ru(t,e,n,r,i,o){var a=2;if(r=t,"function"==typeof t)Ou(t)&&(a=1);else if("string"==typeof t)a=5;else t:switch(t){case M:return zu(n.children,i,o,e);case S:a=8,i|=8;break;case P:return(t=Lu(12,n,e,2|i)).elementType=P,t.lanes=o,t;case T:return(t=Lu(13,n,e,i)).elementType=T,t.lanes=o,t;case A:return(t=Lu(19,n,e,i)).elementType=A,t.lanes=o,t;case I:return Fu(n,i,o,e);default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case E:a=10;break t;case C:a=9;break t;case k:a=11;break t;case L:a=14;break t;case O:a=16,r=null;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=Lu(a,n,e,i)).elementType=t,e.type=r,e.lanes=o,e}function zu(t,e,n,r){return(t=Lu(7,t,r,e)).lanes=n,t}function Fu(t,e,n,r){return(t=Lu(22,t,r,e)).elementType=I,t.lanes=n,t.stateNode={isHidden:!1},t}function Nu(t,e,n){return(t=Lu(6,t,null,e)).lanes=n,t}function ju(t,e,n){return(e=Lu(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Du(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=me(0),this.expirationTimes=me(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=me(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bu(t,e,n,r,i,s,o,a,l){return t=new Du(t,e,n,a,l),1===e?(e=1,!0===s&&(e|=8)):e=0,s=Lu(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),t}function Uu(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function Vu(t){if(!t)return Ci;t:{if(Vt(t=t._reactInternals)!==t||1!==t.tag)throw Error(s(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Oi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(s(171))}if(1===t.tag){var n=t.type;if(Oi(n))return zi(t,n,e)}return e}function Wu(t,e,n,r,i,s,o,a,l){return(t=Bu(n,r,!0,t,0,s,0,a,l)).context=Vu(null),n=t.current,(s=Is(r=tu(),i=eu(n))).callback=null!=e?e:null,Rs(n,s,i),t.current.lanes=i,ve(t,i,r),ru(t,r),t}function Gu(t,e,n,r){var i=e.current,s=tu(),o=eu(i);return n=Vu(n),null===e.context?e.context=n:e.pendingContext=n,(e=Is(s,o)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),null!==(t=Rs(i,e,o))&&(nu(t,i,o,s),zs(t,i,o)),o}function Hu(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function qu(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Xu(t,e){qu(t,e),(t=t.alternate)&&qu(t,e)}Ml=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ti.current)_a=!0;else{if(0==(t.lanes&n)&&0==(128&e.flags))return _a=!1,function(t,e,n){switch(e.tag){case 3:Aa(e),fs();break;case 5:so(e);break;case 1:Oi(e.type)&&Fi(e);break;case 4:ro(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ei(vs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=e.memoizedState))return null!==r.dehydrated?(Ei(ao,1&ao.current),e.flags|=128,null):0!=(n&e.child.childLanes)?Na(t,e,n):(Ei(ao,1&ao.current),null!==(t=Ga(t,e,n))?t.sibling:null);Ei(ao,1&ao.current);break;case 19:if(r=0!=(n&e.childLanes),0!=(128&t.flags)){if(r)return Va(t,e,n);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(ao,ao.current),r)break;return null;case 22:case 23:return e.lanes=0,Pa(t,e,n)}return Ga(t,e,n)}(t,e,n);_a=0!=(131072&t.flags)}else _a=!1,is&&0!=(1048576&e.flags)&&Ji(e,qi,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Wa(t,e),t=e.pendingProps;var i=Li(e,ki.current);Ss(e,n),i=So(null,e,r,t,i,n);var o=Po();return e.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Oi(r)?(o=!0,Fi(e)):o=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ls(e),i.updater=Us,e.stateNode=i,i._reactInternals=e,Hs(e,r,t,n),e=Ta(null,e,r,!0,o,n)):(e.tag=0,is&&o&&ts(e),wa(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(Wa(t,e),t=e.pendingProps,r=(i=r._init)(r._payload),e.type=r,i=e.tag=function(t){if("function"==typeof t)return Ou(t)?1:0;if(null!=t){if((t=t.$$typeof)===k)return 11;if(t===L)return 14}return 2}(r),t=ms(r,t),i){case 0:e=Ca(null,e,r,t,n);break t;case 1:e=ka(null,e,r,t,n);break t;case 11:e=xa(null,e,r,t,n);break t;case 14:e=Ma(null,e,r,ms(r.type,t),n);break t}throw Error(s(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,Ca(t,e,r,i=e.elementType===r?i:ms(r,i),n);case 1:return r=e.type,i=e.pendingProps,ka(t,e,r,i=e.elementType===r?i:ms(r,i),n);case 3:t:{if(Aa(e),null===t)throw Error(s(387));r=e.pendingProps,i=(o=e.memoizedState).element,Os(t,e),Ns(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,256&e.flags){e=La(t,e,r,n,i=ca(Error(s(423)),e));break t}if(r!==i){e=La(t,e,r,n,i=ca(Error(s(424)),e));break t}for(rs=ui(e.stateNode.containerInfo.firstChild),ns=e,is=!0,ss=null,n=Qs(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){e=Ga(t,e,n);break t}wa(t,e,r,n)}e=e.child}return e;case 5:return so(e),null===t&&us(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(e.flags|=32),Ea(t,e),wa(t,e,a,n),e.child;case 6:return null===t&&us(e),null;case 13:return Na(t,e,n);case 4:return ro(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=$s(e,null,r,n):wa(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,xa(t,e,r,i=e.elementType===r?i:ms(r,i),n);case 7:return wa(t,e,e.pendingProps,n),e.child;case 8:case 12:return wa(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,Ei(vs,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ti.current){e=Ga(t,e,n);break t}}else for(null!==(o=e.child)&&(o.return=e);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Is(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Ms(o.return,n,e),l.lanes|=n;break}u=u.next}}else if(10===o.tag)a=o.type===e.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ms(a,n,e),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===e){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}wa(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ss(e,n),r=r(i=Ps(i)),e.flags|=1,wa(t,e,r,n),e.child;case 14:return i=ms(r=e.type,e.pendingProps),Ma(t,e,r,i=ms(r.type,i),n);case 15:return Sa(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ms(r,i),Wa(t,e),e.tag=1,Oi(r)?(t=!0,Fi(e)):t=!1,Ss(e,n),Ws(e,r,i),Hs(e,r,i,n),Ta(null,e,r,!0,t,n);case 19:return Va(t,e,n);case 22:return Pa(t,e,n)}throw Error(s(156,e.tag))};var Zu="function"==typeof reportError?reportError:function(t){console.error(t)};function Yu(t){this._internalRoot=t}function $u(t){this._internalRoot=t}function Qu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Ku(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Ju(){}function tc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"==typeof i){var a=i;i=function(){var t=Hu(o);a.call(t)}}Gu(e,o,t,i)}else o=function(t,e,n,r,i){if(i){if("function"==typeof r){var s=r;r=function(){var t=Hu(o);s.call(t)}}var o=Wu(e,r,t,0,null,!1,0,"",Ju);return t._reactRootContainer=o,t[pi]=o.current,Vr(8===t.nodeType?t.parentNode:t),cu(),o}for(;i=t.lastChild;)t.removeChild(i);if("function"==typeof r){var a=r;r=function(){var t=Hu(l);a.call(t)}}var l=Bu(t,0,!1,null,0,!1,0,"",Ju);return t._reactRootContainer=l,t[pi]=l.current,Vr(8===t.nodeType?t.parentNode:t),cu((function(){Gu(e,l,n,r)})),l}(n,e,t,i,r);return Hu(o)}$u.prototype.render=Yu.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(s(409));Gu(t,e,null,null)},$u.prototype.unmount=Yu.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;cu((function(){Gu(null,t,null,null)})),e[pi]=null}},$u.prototype.unstable_scheduleHydration=function(t){if(t){var e=Se();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ie.length&&0!==e&&e<Ie[n].priority;n++);Ie.splice(n,0,t),0===n&&Ne(t)}},we=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=he(e.pendingLanes);0!==n&&(ye(e,1|n),ru(e,Qt()),0==(6&kl)&&(Vl=Qt()+500,Vi()))}break;case 13:cu((function(){var e=Ts(t,1);if(null!==e){var n=tu();nu(e,t,1,n)}})),Xu(t,1)}},xe=function(t){if(13===t.tag){var e=Ts(t,134217728);null!==e&&nu(e,t,134217728,tu()),Xu(t,134217728)}},Me=function(t){if(13===t.tag){var e=eu(t),n=Ts(t,e);null!==n&&nu(n,t,e,tu()),Xu(t,e)}},Se=function(){return be},Pe=function(t,e){var n=be;try{return be=t,e()}finally{be=n}},xt=function(t,e,n){switch(e){case"input":if(K(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=wi(r);if(!i)throw Error(s(90));X(r),K(r,i)}}}break;case"textarea":st(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},kt=uu,Tt=cu;var ec={usingClientEntryPoint:!1,Events:[bi,_i,wi,Et,Ct,uu]},nc={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Ht(t))?null:t.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{ie=ic.inject(rc),se=ic}catch(ct){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qu(e))throw Error(s(200));return Uu(t,e,null,n)},e.createRoot=function(t,e){if(!Qu(t))throw Error(s(299));var n=!1,r="",i=Zu;return null!=e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(r=e.identifierPrefix),void 0!==e.onRecoverableError&&(i=e.onRecoverableError)),e=Bu(t,1,!1,null,0,n,0,r,i),t[pi]=e.current,Vr(8===t.nodeType?t.parentNode:t),new Yu(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"==typeof t.render)throw Error(s(188));throw t=Object.keys(t).join(","),Error(s(268,t))}return null===(t=Ht(e))?null:t.stateNode},e.flushSync=function(t){return cu(t)},e.hydrate=function(t,e,n){if(!Ku(e))throw Error(s(200));return tc(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Qu(t))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Zu;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),e=Wu(e,null,t,1,null!=n?n:null,i,0,o,a),t[pi]=e.current,Vr(t),r)for(t=0;t<r.length;t++)i=(i=(n=r[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new $u(e)},e.render=function(t,e,n){if(!Ku(e))throw Error(s(200));return tc(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Ku(t))throw Error(s(40));return!!t._reactRootContainer&&(cu((function(){tc(null,null,t,!1,(function(){t._reactRootContainer=null,t[pi]=null}))})),!0)},e.unstable_batchedUpdates=uu,e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ku(n))throw Error(s(200));if(null==t||void 0===t._reactInternals)throw Error(s(38));return tc(t,e,n,!1,r)},e.version="18.2.0-next-9e3b772b8-20220608"},745:(t,e,n)=>{"use strict";var r=n(935);e.s=r.createRoot,r.hydrateRoot},935:(t,e,n)=>{"use strict";!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}(),t.exports=n(448)},921:(t,e)=>{"use strict";Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen");Symbol.for("react.module.reference")},864:(t,e,n)=>{"use strict";n(921)},408:(t,e)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}function y(){}function b(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},v.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},y.prototype=v.prototype;var _=b.prototype=new y;_.constructor=b,g(_,v.prototype),_.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,M={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function P(t,e,r){var i,s={},o=null,a=null;if(null!=e)for(i in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),e)x.call(e,i)&&!S.hasOwnProperty(i)&&(s[i]=e[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:t,key:o,ref:a,props:s,_owner:M.current}}function E(t){return"object"==typeof t&&null!==t&&t.$$typeof===n}var C=/\/+/g;function k(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function T(t,e,i,s,o){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=t),t=""===s?"."+k(l,0):s,w(o)?(i="",null!=t&&(i=t.replace(C,"$&/")+"/"),T(o,e,i,"",(function(t){return t}))):null!=o&&(E(o)&&(o=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+t)),e.push(o)),1;if(l=0,s=""===s?".":s+":",w(t))for(var u=0;u<t.length;u++){var c=s+k(a=t[u],u);l+=T(a,e,i,c,o)}else if(c=function(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"==typeof c)for(t=c.call(t),u=0;!(a=t.next()).done;)l+=T(a=a.value,e,i,c=s+k(a,u++),o);else if("object"===a)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function A(t,e,n){if(null==t)return t;var r=[],i=0;return T(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function L(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var O={current:null},I={transition:null},R={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:I,ReactCurrentOwner:M};e.Children={map:A,forEach:function(t,e,n){A(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return A(t,(function(){e++})),e},toArray:function(t){return A(t,(function(t){return t}))||[]},only:function(t){if(!E(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=v,e.Fragment=i,e.Profiler=o,e.PureComponent=b,e.StrictMode=s,e.Suspense=c,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,e.cloneElement=function(t,e,r){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=g({},t.props),s=t.key,o=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(o=e.ref,a=M.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)x.call(e,u)&&!S.hasOwnProperty(u)&&(i[u]=void 0===e[u]&&void 0!==l?l[u]:e[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:t.type,key:s,ref:o,props:i,_owner:a}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=P,e.createFactory=function(t){var e=P.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:u,render:t}},e.isValidElement=E,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:L}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=I.transition;I.transition={};try{t()}finally{I.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return O.current.useCallback(t,e)},e.useContext=function(t){return O.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return O.current.useDeferredValue(t)},e.useEffect=function(t,e){return O.current.useEffect(t,e)},e.useId=function(){return O.current.useId()},e.useImperativeHandle=function(t,e,n){return O.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return O.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return O.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return O.current.useMemo(t,e)},e.useReducer=function(t,e,n){return O.current.useReducer(t,e,n)},e.useRef=function(t){return O.current.useRef(t)},e.useState=function(t){return O.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return O.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return O.current.useTransition()},e.version="18.2.0"},294:(t,e,n)=>{"use strict";t.exports=n(408)},53:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,i=t[r];if(!(0<s(i,e)))break t;t[r]=e,t[n]=i,n=r}}function r(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=t[a],u=a+1,c=t[u];if(0>s(l,n))u<i&&0>s(c,l)?(t[r]=c,t[u]=n,r=u):(t[r]=l,t[a]=n,r=a);else{if(!(u<i&&0>s(c,n)))break t;t[r]=c,t[u]=n,r=u}}}return e}function s(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,v="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function _(t){for(var e=r(c);null!==e;){if(null===e.callback)i(c);else{if(!(e.startTime<=t))break;i(c),e.sortIndex=e.expirationTime,n(u,e)}e=r(c)}}function w(t){if(m=!1,_(t),!g)if(null!==r(u))g=!0,I(x);else{var e=r(c);null!==e&&R(w,e.startTime-t)}}function x(t,n){g=!1,m&&(m=!1,y(E),E=-1),p=!0;var s=f;try{for(_(n),d=r(u);null!==d&&(!(d.expirationTime>n)||t&&!T());){var o=d.callback;if("function"==typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=e.unstable_now(),"function"==typeof a?d.callback=a:d===r(u)&&i(u),_(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&R(w,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var M,S=!1,P=null,E=-1,C=5,k=-1;function T(){return!(e.unstable_now()-k<C)}function A(){if(null!==P){var t=e.unstable_now();k=t;var n=!0;try{n=P(!0,t)}finally{n?M():(S=!1,P=null)}}else S=!1}if("function"==typeof b)M=function(){b(A)};else if("undefined"!=typeof MessageChannel){var L=new MessageChannel,O=L.port2;L.port1.onmessage=A,M=function(){O.postMessage(null)}}else M=function(){v(A,0)};function I(t){P=t,S||(S=!0,M())}function R(t,n){E=v((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,I(x))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,i,s){var o=e.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?o+s:o,t){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return t={id:h++,callback:i,priorityLevel:t,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(t.sortIndex=s,n(c,t),null===r(u)&&t===r(c)&&(m?(y(E),E=-1):m=!0,R(w,s-o))):(t.sortIndex=a,n(u,t),g||p||(g=!0,I(x))),t},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},840:(t,e,n)=>{"use strict";t.exports=n(53)},379:t=>{"use strict";var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var s={},o=[],a=0;a<t.length;a++){var l=t[a],u=r.base?l[0]+r.base:l[0],c=s[u]||0,h="".concat(u," ").concat(c);s[u]=c+1;var d=n(h),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)e[d].references++,e[d].updater(f);else{var p=i(f,r);r.byIndex=a,e.splice(a,0,{identifier:h,updater:p,references:1})}o.push(h)}return o}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var s=r(t=t||[],i=i||{});return function(t){t=t||[];for(var o=0;o<s.length;o++){var a=n(s[o]);e[a].references--}for(var l=r(t,i),u=0;u<s.length;u++){var c=n(s[u]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}s=l}}},569:t=>{"use strict";var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},250:(t,e,n)=>{"use strict";var r=n(294),i="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},s=r.useState,o=r.useEffect,a=r.useLayoutEffect,l=r.useDebugValue;function u(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!i(t,n)}catch(t){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(t,e){return e()}:function(t,e){var n=e(),r=s({inst:{value:n,getSnapshot:e}}),i=r[0].inst,c=r[1];return a((function(){i.value=n,i.getSnapshot=e,u(i)&&c({inst:i})}),[t,n,e]),o((function(){return u(i)&&c({inst:i}),t((function(){u(i)&&c({inst:i})}))}),[t]),l(n),n};e.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},139:(t,e,n)=>{"use strict";var r=n(294),i=n(688),s="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},o=i.useSyncExternalStore,a=r.useRef,l=r.useEffect,u=r.useMemo,c=r.useDebugValue;e.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var h=a(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=u((function(){function t(t){if(!l){if(l=!0,o=t,t=r(t),void 0!==i&&d.hasValue){var e=d.value;if(i(e,t))return a=e}return a=t}if(e=a,s(o,t))return e;var n=r(t);return void 0!==i&&i(e,n)?e:(o=t,a=n)}var o,a,l=!1,u=void 0===n?null:n;return[function(){return t(e())},null===u?void 0:function(){return t(u())}]}),[e,n,r,i]);var f=o(t,h[0],h[1]);return l((function(){d.hasValue=!0,d.value=f}),[f]),c(f),f}},688:(t,e,n)=>{"use strict";t.exports=n(250)},798:(t,e,n)=>{"use strict";t.exports=n(139)},521:()=>{},214:()=>{},893:()=>{}},s={};function o(t){var e=s[t];if(void 0!==e)return e.exports;var n=s[t]={id:t,loaded:!1,exports:{}};return i[t].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.m=i,o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,o.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var i=Object.create(null);o.r(i);var s={};t=t||[null,e({}),e([]),e(e)];for(var a=2&r&&n;"object"==typeof a&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach((t=>s[t]=()=>n[t]));return s.default=()=>n,o.d(i,s),i},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.f={},o.e=t=>Promise.all(Object.keys(o.f).reduce(((e,n)=>(o.f[n](t,e),e)),[])),o.u=t=>t+".bundle.js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n={},r="aero:",o.l=(t,e,i,s)=>{if(n[t])n[t].push(e);else{var a,l;if(void 0!==i)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var h=u[c];if(h.getAttribute("src")==t||h.getAttribute("data-webpack")==r+i){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.setAttribute("data-webpack",r+i),a.src=t),n[t]=[e];var d=(e,r)=>{a.onerror=a.onload=null,clearTimeout(f);var i=n[t];if(delete n[t],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((t=>t(r))),e)return e(r)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}},o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;o.g.importScripts&&(t=o.g.location+"");var e=o.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=t})(),(()=>{var t={143:0};o.f.j=(e,n)=>{var r=o.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise(((n,i)=>r=t[e]=[n,i]));n.push(r[2]=i);var s=o.p+o.u(e),a=new Error;o.l(s,(n=>{if(o.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;a.message="Loading chunk "+e+" failed.\n("+i+": "+s+")",a.name="ChunkLoadError",a.type=i,a.request=s,r[1](a)}}),"chunk-"+e,e)}};var e=(e,n)=>{var r,i,[s,a,l]=n,u=0;if(s.some((e=>0!==t[e]))){for(r in a)o.o(a,r)&&(o.m[r]=a[r]);l&&l(o)}for(e&&e(n);u<s.length;u++)i=s[u],o.o(t,i)&&t[i]&&t[i][0](),t[i]=0},n=globalThis.webpackChunkaero=globalThis.webpackChunkaero||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),o.nc=void 0,(()=>{"use strict";var t,e=o(294),n=o(144),r=o.n(n),i=o(745);function s(){return s=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s.apply(this,arguments)}!function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(t||(t={}));var a="beforeunload";function l(t){t.preventDefault(),t.returnValue=""}function u(){var t=[];return{get length(){return t.length},push:function(e){return t.push(e),function(){t=t.filter((function(t){return t!==e}))}},call:function(e){t.forEach((function(t){return t&&t(e)}))}}}function c(t){var e=t.pathname,n=void 0===e?"/":e,r=t.search,i=void 0===r?"":r,s=t.hash,o=void 0===s?"":s;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function h(t){var e={};if(t){var n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));var r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}const d=(0,e.createContext)(null),f=(0,e.createContext)(null),p=(0,e.createContext)({outlet:null,matches:[]});function g(t,e){if(!t)throw new Error(e)}function m(t,e,n){void 0===n&&(n="/");let r=M(("string"==typeof e?h(e):e).pathname||"/",n);if(null==r)return null;let i=v(t);!function(t){t.sort(((t,e)=>t.score!==e.score?e.score-t.score:function(t,e){let n=t.length===e.length&&t.slice(0,-1).every(((t,n)=>t===e[n]));return n?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map((t=>t.childrenIndex)),e.routesMeta.map((t=>t.childrenIndex)))))}(i);let s=null;for(let t=0;null==s&&t<i.length;++t)s=w(i[t],r);return s}function v(t,e,n,r){return void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r=""),t.forEach(((t,i)=>{let s={relativePath:t.path||"",caseSensitive:!0===t.caseSensitive,childrenIndex:i,route:t};s.relativePath.startsWith("/")&&(s.relativePath.startsWith(r)||g(!1),s.relativePath=s.relativePath.slice(r.length));let o=S([r,s.relativePath]),a=n.concat(s);t.children&&t.children.length>0&&(!0===t.index&&g(!1),v(t.children,e,a,o)),(null!=t.path||t.index)&&e.push({path:o,score:_(o,t.index),routesMeta:a})})),e}const y=/^:\w+$/,b=t=>"*"===t;function _(t,e){let n=t.split("/"),r=n.length;return n.some(b)&&(r+=-2),e&&(r+=2),n.filter((t=>!b(t))).reduce(((t,e)=>t+(y.test(e)?3:""===e?1:10)),r)}function w(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let t=0;t<n.length;++t){let o=n[t],a=t===n.length-1,l="/"===i?e:e.slice(i.length)||"/",u=x({path:o.relativePath,caseSensitive:o.caseSensitive,end:a},l);if(!u)return null;Object.assign(r,u.params);let c=o.route;s.push({params:r,pathname:S([i,u.pathname]),pathnameBase:P(S([i,u.pathnameBase])),route:c}),"/"!==u.pathnameBase&&(i=S([i,u.pathnameBase]))}return s}function x(t,e){"string"==typeof t&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!0);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,((t,e)=>(r.push(e),"([^\\/]+)")));return t.endsWith("*")?(r.push("*"),i+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)",[new RegExp(i,e?void 0:"i"),r]}(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((t,e,n)=>{if("*"===e){let t=a[n]||"";o=s.slice(0,s.length-t.length).replace(/(.)\/+$/,"$1")}return t[e]=function(t,e){try{return decodeURIComponent(t)}catch(e){return t}}(a[n]||""),t}),{}),pathname:s,pathnameBase:o,pattern:t}}function M(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=t.charAt(e.length);return n&&"/"!==n?null:t.slice(e.length)||"/"}const S=t=>t.join("/").replace(/\/\/+/g,"/"),P=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");function E(){return null!=(0,e.useContext)(f)}function C(t){g(!1)}function k(n){let{basename:r="/",children:i=null,location:s,navigationType:o=t.Pop,navigator:a,static:l=!1}=n;E()&&g(!1);let u=P(r),c=(0,e.useMemo)((()=>({basename:u,navigator:a,static:l})),[u,a,l]);"string"==typeof s&&(s=h(s));let{pathname:p="/",search:m="",hash:v="",state:y=null,key:b="default"}=s,_=(0,e.useMemo)((()=>{let t=M(p,u);return null==t?null:{pathname:t,search:m,hash:v,state:y,key:b}}),[u,p,m,v,y,b]);return null==_?null:(0,e.createElement)(d.Provider,{value:c},(0,e.createElement)(f.Provider,{children:i,value:{location:_,navigationType:o}}))}function T(t){let{children:n,location:r}=t;return function(t,n){E()||g(!1);let{matches:r}=(0,e.useContext)(p),i=r[r.length-1],s=i?i.params:{},o=(i&&i.pathname,i?i.pathnameBase:"/");i&&i.route;let a,l=(E()||g(!1),(0,e.useContext)(f).location);if(n){var u;let t="string"==typeof n?h(n):n;"/"===o||(null==(u=t.pathname)?void 0:u.startsWith(o))||g(!1),a=t}else a=l;let c=a.pathname||"/",d=m(t,{pathname:"/"===o?c:c.slice(o.length)||"/"});return function(t,n){return void 0===n&&(n=[]),null==t?null:t.reduceRight(((r,i,s)=>(0,e.createElement)(p.Provider,{children:void 0!==i.route.element?i.route.element:r,value:{outlet:r,matches:n.concat(t.slice(0,s+1))}})),null)}(d&&d.map((t=>Object.assign({},t,{params:Object.assign({},s,t.params),pathname:S([o,t.pathname]),pathnameBase:"/"===t.pathnameBase?o:S([o,t.pathnameBase])}))),r)}(A(n),r)}function A(t){let n=[];return e.Children.forEach(t,(t=>{if(!(0,e.isValidElement)(t))return;if(t.type===e.Fragment)return void n.push.apply(n,A(t.props.children));t.type!==C&&g(!1);let r={caseSensitive:t.props.caseSensitive,element:t.props.element,index:t.props.index,path:t.props.path};t.props.children&&(r.children=A(t.props.children)),n.push(r)})),n}function L(n){let{basename:r,children:i,window:o}=n,d=(0,e.useRef)();null==d.current&&(d.current=function(e){void 0===e&&(e={});var n=e.window,r=void 0===n?document.defaultView:n,i=r.history;function o(){var t=h(r.location.hash.substr(1)),e=t.pathname,n=void 0===e?"/":e,s=t.search,o=void 0===s?"":s,a=t.hash,l=void 0===a?"":a,u=i.state||{};return[u.idx,{pathname:n,search:o,hash:l,state:u.usr||null,key:u.key||"default"}]}var d=null;function f(){if(d)b.call(d),d=null;else{var e=t.Pop,n=o(),r=n[0],i=n[1];if(b.length){if(null!=r){var s=m-r;s&&(d={action:e,location:i,retry:function(){P(-1*s)}},P(s))}}else S(e)}}r.addEventListener("popstate",f),r.addEventListener("hashchange",(function(){c(o()[1])!==c(v)&&f()}));var p=t.Pop,g=o(),m=g[0],v=g[1],y=u(),b=u();function _(t){return function(){var t=document.querySelector("base"),e="";if(t&&t.getAttribute("href")){var n=r.location.href,i=n.indexOf("#");e=-1===i?n:n.slice(0,i)}return e}()+"#"+("string"==typeof t?t:c(t))}function w(t,e){return void 0===e&&(e=null),s({pathname:v.pathname,hash:"",search:""},"string"==typeof t?h(t):t,{state:e,key:Math.random().toString(36).substr(2,8)})}function x(t,e){return[{usr:t.state,key:t.key,idx:e},_(t)]}function M(t,e,n){return!b.length||(b.call({action:t,location:e,retry:n}),!1)}function S(t){p=t;var e=o();m=e[0],v=e[1],y.call({action:p,location:v})}function P(t){i.go(t)}return null==m&&(m=0,i.replaceState(s({},i.state,{idx:m}),"")),{get action(){return p},get location(){return v},createHref:_,push:function e(n,s){var o=t.Push,a=w(n,s);if(M(o,a,(function(){e(n,s)}))){var l=x(a,m+1),u=l[0],c=l[1];try{i.pushState(u,"",c)}catch(t){r.location.assign(c)}S(o)}},replace:function e(n,r){var s=t.Replace,o=w(n,r);if(M(s,o,(function(){e(n,r)}))){var a=x(o,m),l=a[0],u=a[1];i.replaceState(l,"",u),S(s)}},go:P,back:function(){P(-1)},forward:function(){P(1)},listen:function(t){return y.push(t)},block:function(t){var e=b.push(t);return 1===b.length&&r.addEventListener(a,l),function(){e(),b.length||r.removeEventListener(a,l)}}}}({window:o}));let f=d.current,[p,g]=(0,e.useState)({action:f.action,location:f.location});return(0,e.useLayoutEffect)((()=>f.listen(g)),[f]),(0,e.createElement)(k,{basename:r,children:i,location:p.location,navigationType:p.action,navigator:f})}var O=o(688),I=o(798),R=o(935);let z=function(t){t()};const F=()=>z,N=e.createContext(null);function j(){return(0,e.useContext)(N)}let D=()=>{throw new Error("uSES not initialized!")};const B=(t,e)=>t===e;function U(t=N){const n=t===N?j:()=>(0,e.useContext)(t);return function(t,r=B){const{store:i,subscription:s,getServerState:o}=n(),a=D(s.addNestedSub,i.getState,o||i.getState,t,r);return(0,e.useDebugValue)(a),a}}const V=U();o(679),o(864);const W={notify(){},get:()=>[]};const G="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?e.useLayoutEffect:e.useEffect;let H=null;const q=function({store:t,context:n,children:r,serverState:i}){const s=(0,e.useMemo)((()=>{const e=function(t,e){let n,r=W;function i(){o.onStateChange&&o.onStateChange()}function s(){n||(n=e?e.addNestedSub(i):t.subscribe(i),r=function(){const t=F();let e=null,n=null;return{clear(){e=null,n=null},notify(){t((()=>{let t=e;for(;t;)t.callback(),t=t.next}))},get(){let t=[],n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(t){let r=!0,i=n={callback:t,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}const o={addNestedSub:function(t){return s(),r.subscribe(t)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:s,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=W)},getListeners:()=>r};return o}(t);return{store:t,subscription:e,getServerState:i?()=>i:void 0}}),[t,i]),o=(0,e.useMemo)((()=>t.getState()),[t]);G((()=>{const{subscription:e}=s;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[s,o]);const a=n||N;return e.createElement(a.Provider,{value:s},r)};function X(t=N){const n=t===N?j:()=>(0,e.useContext)(t);return function(){const{store:t}=n();return t}}const Z=X();function Y(t=N){const e=t===N?Z:X(t);return function(){return e().dispatch}}const $=Y();var Q;(t=>{D=t})(I.useSyncExternalStoreWithSelector),(t=>{H=t})(O.useSyncExternalStore),Q=R.unstable_batchedUpdates,z=Q,o(486);const K=e.createContext(null);function J(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function tt(t,e){const n=e.viewState||e;let r=!1;if("longitude"in n&&"latitude"in n){const e=t.center;t.center=new e.constructor(n.longitude,n.latitude),r=r||e!==t.center}if("zoom"in n){const e=t.zoom;t.zoom=n.zoom,r=r||e!==t.zoom}if("bearing"in n){const e=t.bearing;t.bearing=n.bearing,r=r||e!==t.bearing}if("pitch"in n){const e=t.pitch;t.pitch=n.pitch,r=r||e!==t.pitch}return n.padding&&!t.isPaddingEqual(n.padding)&&(r=!0,t.padding=n.padding),r}const et=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function nt(t){if(!t)return null;if("string"==typeof t)return t;if("toJS"in t&&(t=t.toJS()),!t.layers)return t;const e={};for(const n of t.layers)e[n.id]=n;const n=t.layers.map((t=>{const n=e[t.ref];let r=null;if("interactive"in t&&(r={...t},delete r.interactive),n){r=r||{...t},delete r.ref;for(const t of et)t in n&&(r[t]=n[t])}return r||t}));return{...t,layers:n}}function rt(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!rt(t[n],e[n]))return!1;return!0}if(Array.isArray(e))return!1;if("object"==typeof t&&"object"==typeof e){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const r of n){if(!e.hasOwnProperty(r))return!1;if(!rt(t[r],e[r]))return!1}return!0}return!1}const it={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},st={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},ot={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},at=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],lt=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class ut{constructor(t,e,n){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=t=>{const e=this.props[ot[t.type]];e&&e(t)},this._onPointerEvent=t=>{"mousemove"!==t.type&&"mouseout"!==t.type||this._updateHover(t);const e=this.props[it[t.type]];if(e){if(this.props.interactiveLayerIds&&"mouseover"!==t.type&&"mouseout"!==t.type){const e=this._hoveredFeatures||this._map.queryRenderedFeatures(t.point,{layers:this.props.interactiveLayerIds});t.features=e}e(t),delete t.features}},this._onCameraEvent=t=>{if(!this._internalUpdate){const e=this.props[st[t.type]];e&&e(t)}t.type in this._deferredEvents&&(this._deferredEvents[t.type]=!1)},this._MapClass=t,this.props=e,this._initialize(n)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const e=this.props;this.props=t;const n=this._updateSettings(t,e);n&&this._createShadowTransform(this._map);const r=this._updateSize(t),i=this._updateViewState(t,!0);this._updateStyle(t,e),this._updateStyleComponents(t,e),this._updateHandlers(t,e),(n||r||i&&!this._map.isMoving())&&this.redraw()}static reuse(t,e){const n=ut.savedMaps.pop();if(!n)return null;const r=n.map,i=r.getContainer();for(e.className=i.className;i.childNodes.length>0;)e.appendChild(i.childNodes[0]);return r._container=e,t.initialViewState&&n._updateViewState(t.initialViewState,!1),r.resize(),n.setProps({...t,styleDiffing:!1}),r.isStyleLoaded()?r.fire("load"):r.once("styledata",(()=>r.fire("load"))),n}_initialize(t){const{props:e}=this,n={...e,...e.initialViewState,accessToken:e.mapboxAccessToken||ct()||null,container:t,style:nt(e.mapStyle)},r=n.initialViewState||n.viewState||n;if(Object.assign(n,{center:[r.longitude||0,r.latitude||0],zoom:r.zoom||0,pitch:r.pitch||0,bearing:r.bearing||0}),e.gl){const t=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=t,e.gl)}const i=new this._MapClass(n);r.padding&&i.setPadding(r.padding),e.cursor&&(i.getCanvas().style.cursor=e.cursor),this._createShadowTransform(i);const s=i._render;i._render=t=>{this._inRender=!0,s.call(i,t),this._inRender=!1};const o=i._renderTaskQueue.run;i._renderTaskQueue.run=t=>{o.call(i._renderTaskQueue,t),this._onBeforeRepaint()},i.on("render",(()=>this._onAfterRepaint()));const a=i.fire;i.fire=this._fireEvent.bind(this,a),i.on("resize",(()=>{this._renderTransform.resize(i.transform.width,i.transform.height)})),i.on("styledata",(()=>this._updateStyleComponents(this.props,{}))),i.on("sourcedata",(()=>this._updateStyleComponents(this.props,{})));for(const t in it)i.on(t,this._onPointerEvent);for(const t in st)i.on(t,this._onCameraEvent);for(const t in ot)i.on(t,this._onEvent);this._map=i}recycle(){ut.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const e=function(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}(t.transform);t.painter.transform=e;const n=e.updateElevation;n&&(e.updateElevation=r=>{t.transform.elevation=e.elevation,n.call(e,r),n.call(t.transform,r)}),this._renderTransform=e}_updateSize(t){const{viewState:e}=t;if(e){const t=this._map;if(e.width!==t.transform.width||e.height!==t.transform.height)return t.resize(),!0}return!1}_updateViewState(t,e){if(this._internalUpdate)return!1;const n=this._map,r=this._renderTransform,{zoom:i,pitch:s,bearing:o}=r,a=n.isMoving();a&&(r.cameraElevationReference="sea");const l=tt(r,{...J(n.transform),...t});if(a&&(r.cameraElevationReference="ground"),l&&e){const t=this._deferredEvents;t.move=!0,t.zoom||(t.zoom=i!==r.zoom),t.rotate||(t.rotate=o!==r.bearing),t.pitch||(t.pitch=s!==r.pitch)}return a||tt(n.transform,t),l}_updateSettings(t,e){const n=this._map;let r=!1;for(const i of at)i in t&&!rt(t[i],e[i])&&(r=!0,n[`set${i[0].toUpperCase()}${i.slice(1)}`](t[i]));return r}_updateStyle(t,e){if(t.cursor!==e.cursor&&(this._map.getCanvas().style.cursor=t.cursor),t.mapStyle!==e.mapStyle){const e={diff:t.styleDiffing};return"localIdeographFontFamily"in t&&(e.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(nt(t.mapStyle),e),!0}return!1}_updateStyleComponents(t,e){const n=this._map;let r=!1;return n.style.loaded()&&("light"in t&&!rt(t.light,e.light)&&(r=!0,n.setLight(t.light)),"fog"in t&&!rt(t.fog,e.fog)&&(r=!0,n.setFog(t.fog)),"terrain"in t&&!rt(t.terrain,e.terrain)&&(t.terrain&&!n.getSource(t.terrain.source)||(r=!0,n.setTerrain(t.terrain)))),r}_updateHandlers(t,e){const n=this._map;let r=!1;for(const i of lt){const s=t[i];rt(s,e[i])||(r=!0,s?n[i].enable(s):n[i].disable())}return r}_updateHover(t){var e;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const r=t.type,i=(null===(e=this._hoveredFeatures)||void 0===e?void 0:e.length)>0;let s;if("mousemove"===r)try{s=this._map.queryRenderedFeatures(t.point,{layers:n.interactiveLayerIds})}catch(t){s=[]}else s=[];const o=s.length>0;!o&&i&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=s,o&&!i&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=r}else this._hoveredFeatures=null}_fireEvent(t,e,n){const r=this._map,i=r.transform,s="string"==typeof e?e:e.type;return"move"===s&&this._updateViewState(this.props,!1),s in st&&("object"==typeof e&&(e.viewState=J(i)),this._map.isMoving())?(r.transform=this._renderTransform,t.call(r,e,n),r.transform=i,r):(t.call(r,e,n),r)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const e in this._deferredEvents)this._deferredEvents[e]&&t.fire(e);this._internalUpdate=!1;const e=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=e}}}function ct(){let t=null;if("undefined"!=typeof location){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||"pk.eyJ1IjoicGFuYXlpb3RpcyIsImEiOiJjbDc2Y3NyMTUwNGpsM3ZvMTl6ZTdzenJjIn0.V2oTQwJuC29gAmFau3jVIA"}catch(t){}try{t=t||"MISSING_ENV_VAR".REACT_APP_MAPBOX_ACCESS_TOKEN}catch(t){}return t}ut.savedMaps=[];const ht=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];const dt="undefined"!=typeof document?e.useLayoutEffect:e.useEffect,ft=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"],pt=e.createContext(null),gt={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:t=>console.error(t.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},mt=(0,e.forwardRef)(((t,n)=>{const r=(0,e.useContext)(K),[i,s]=(0,e.useState)(null),a=(0,e.useRef)(),{current:l}=(0,e.useRef)({mapLib:null,map:null});(0,e.useEffect)((()=>{const e=t.mapLib;let n,i=!0;return Promise.resolve(e||o.e(158).then(o.t.bind(o,158,23))).then((e=>{if(i){if(e.Map||(e=e.default),!e||!e.Map)throw new Error("Invalid mapLib");if(!e.supported(t))throw new Error("Map is not supported by this browser");!function(t,e){for(const n of ft)n in e&&(t[n]=e[n]);e.RTLTextPlugin&&t.getRTLTextPluginStatus&&"unavailable"===t.getRTLTextPluginStatus()&&t.setRTLTextPlugin(e.RTLTextPlugin,(t=>{t&&console.error(t)}),!1)}(e,t),t.reuseMaps&&(n=ut.reuse(t,a.current)),n||(n=new ut(e.Map,t,a.current)),l.map=function(t,e){if(!t)return null;const n=t.map,r={getMap:()=>n,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:n=>t.transform.locationPoint(e.LngLat.convert(n)),unproject:n=>t.transform.pointLocation(e.Point.convert(n))};for(const t of function(t){const e=new Set;let n=t;for(;n;){for(const r of Object.getOwnPropertyNames(n))"_"!==r[0]&&"function"==typeof t[r]&&"fire"!==r&&"setEventedParent"!==r&&e.add(r);n=Object.getPrototypeOf(n)}return Array.from(e)}(n))t in r||ht.includes(t)||(r[t]=n[t].bind(n));return r}(n,e),l.mapLib=e,s(n),null==r||r.onMapMount(l.map,t.id)}})).catch((e=>{t.onError({type:"error",target:null,originalEvent:null,error:e})})),()=>{i=!1,n&&(null==r||r.onMapUnmount(t.id),t.reuseMaps?n.recycle():n.destroy())}}),[]),dt((()=>{i&&i.setProps(t)})),(0,e.useImperativeHandle)(n,(()=>l.map),[i]);const u=(0,e.useMemo)((()=>({position:"relative",width:"100%",height:"100%",...t.style})),[t.style]);return e.createElement("div",{id:t.id,ref:a,style:u},i&&e.createElement(pt.Provider,{value:l},t.children))}));mt.displayName="Map",mt.defaultProps=gt;const vt=mt,yt=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function bt(t,e){if(!t||!e)return;const n=t.style;for(const t in e){const r=e[t];Number.isFinite(r)&&!yt.test(t)?n[t]=`${r}px`:n[t]=r}}function _t(t){const{map:n,mapLib:r}=(0,e.useContext)(pt),i=(0,e.useRef)({props:t});i.current.props=t;const s=(0,e.useMemo)((()=>{let n=!1;e.Children.forEach(t.children,(t=>{t&&(n=!0)}));const o={...t,element:n?document.createElement("div"):null},a=new r.Marker(o).setLngLat([t.longitude,t.latitude]);return a.getElement().addEventListener("click",(t=>{var e,n;null===(n=(e=i.current.props).onClick)||void 0===n||n.call(e,{type:"click",target:a,originalEvent:t})})),a.on("dragstart",(t=>{var e,n;const r=t;r.lngLat=s.getLngLat(),null===(n=(e=i.current.props).onDragStart)||void 0===n||n.call(e,r)})),a.on("drag",(t=>{var e,n;const r=t;r.lngLat=s.getLngLat(),null===(n=(e=i.current.props).onDrag)||void 0===n||n.call(e,r)})),a.on("dragend",(t=>{var e,n;const r=t;r.lngLat=s.getLngLat(),null===(n=(e=i.current.props).onDragEnd)||void 0===n||n.call(e,r)})),a}),[]);return(0,e.useEffect)((()=>(s.addTo(n.getMap()),()=>{s.remove()})),[]),(0,e.useEffect)((()=>{bt(s.getElement(),t.style)}),[t.style]),s.getLngLat().lng===t.longitude&&s.getLngLat().lat===t.latitude||s.setLngLat([t.longitude,t.latitude]),t.offset&&!function(t,e){const n=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0,i=Array.isArray(e)?e[0]:e?e.x:0,s=Array.isArray(e)?e[1]:e?e.y:0;return n===i&&r===s}(s.getOffset(),t.offset)&&s.setOffset(t.offset),s.isDraggable()!==t.draggable&&s.setDraggable(t.draggable),s.getRotation()!==t.rotation&&s.setRotation(t.rotation),s.getRotationAlignment()!==t.rotationAlignment&&s.setRotationAlignment(t.rotationAlignment),s.getPitchAlignment()!==t.pitchAlignment&&s.setPitchAlignment(t.pitchAlignment),s.getPopup()!==t.popup&&s.setPopup(t.popup),(0,R.createPortal)(t.children,s.getElement())}_t.defaultProps={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};const wt=e.memo(_t);function xt(t){return new Set(t?t.trim().split(/\s+/):[])}const Mt=e.memo((function(t){const{map:n,mapLib:r}=(0,e.useContext)(pt),i=(0,e.useMemo)((()=>document.createElement("div")),[]),s=(0,e.useRef)({props:t});s.current.props=t;const o=(0,e.useMemo)((()=>{const e={...t},n=new r.Popup(e).setLngLat([t.longitude,t.latitude]);return n.once("open",(t=>{var e,n;null===(n=(e=s.current.props).onOpen)||void 0===n||n.call(e,t)})),n}),[]);if((0,e.useEffect)((()=>{const t=t=>{var e,n;null===(n=(e=s.current.props).onClose)||void 0===n||n.call(e,t)};return o.on("close",t),o.setDOMContent(i).addTo(n.getMap()),()=>{o.off("close",t),o.isOpen()&&o.remove()}}),[]),(0,e.useEffect)((()=>{bt(o.getElement(),t.style)}),[t.style]),o.isOpen()&&(o.getLngLat().lng===t.longitude&&o.getLngLat().lat===t.latitude||o.setLngLat([t.longitude,t.latitude]),t.offset&&!rt(o.options.offset,t.offset)&&o.setOffset(t.offset),o.options.anchor===t.anchor&&o.options.maxWidth===t.maxWidth||(o.options.anchor=t.anchor,o.setMaxWidth(t.maxWidth)),o.options.className!==t.className)){const e=xt(o.options.className),n=xt(t.className);for(const t of e)n.has(t)||o.removeClassName(t);for(const t of n)e.has(t)||o.addClassName(t);o.options.className=t.className}return(0,R.createPortal)(t.children,i)}));function St(t,n,r){const i=(0,e.useContext)(pt),s=(0,e.useMemo)((()=>t(i)),[]);return(0,e.useEffect)((()=>{var t;const{map:e}=i;return e.hasControl(s)||e.addControl(s,null===(t=r||n)||void 0===t?void 0:t.position),()=>{"function"==typeof n&&n(i),e.hasControl(s)&&e.removeControl(s)}}),[]),s}e.memo((function(t){const n=St((({mapLib:e})=>new e.AttributionControl(t)),{position:t.position});return(0,e.useEffect)((()=>{bt(n._container,t.style)}),[t.style]),null})),e.memo((function(t){const n=St((({mapLib:e})=>new e.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)})),{position:t.position});return(0,e.useEffect)((()=>{bt(n._controlContainer,t.style)}),[t.style]),null}));const Pt=(0,e.forwardRef)(((t,n)=>{const r=(0,e.useRef)({props:t}),i=St((({mapLib:e})=>{const n=new e.GeolocateControl(t),i=n._setupUI;return n._setupUI=t=>{n._container.hasChildNodes()||i(t)},n.on("geolocate",(t=>{var e,n;null===(n=(e=r.current.props).onGeolocate)||void 0===n||n.call(e,t)})),n.on("error",(t=>{var e,n;null===(n=(e=r.current.props).onError)||void 0===n||n.call(e,t)})),n.on("outofmaxbounds",(t=>{var e,n;null===(n=(e=r.current.props).onOutOfMaxBounds)||void 0===n||n.call(e,t)})),n.on("trackuserlocationstart",(t=>{var e,n;null===(n=(e=r.current.props).onTrackUserLocationStart)||void 0===n||n.call(e,t)})),n.on("trackuserlocationend",(t=>{var e,n;null===(n=(e=r.current.props).onTrackUserLocationEnd)||void 0===n||n.call(e,t)})),n}),{position:t.position});return r.current.props=t,(0,e.useImperativeHandle)(n,(()=>({trigger:()=>i.trigger()})),[]),(0,e.useEffect)((()=>{bt(i._container,t.style)}),[t.style]),null}));Pt.displayName="GeolocateControl",e.memo(Pt);const Et=e.memo((function(t){const n=St((({mapLib:e})=>new e.NavigationControl(t)),{position:t.position});return(0,e.useEffect)((()=>{bt(n._container,t.style)}),[t.style]),null}));function Ct(t){const n=St((({mapLib:e})=>new e.ScaleControl(t)),{position:t.position});return n.options.unit===t.unit&&n.options.maxWidth===t.maxWidth||(n.options.maxWidth=t.maxWidth,n.setUnit(t.unit)),(0,e.useEffect)((()=>{bt(n._container,t.style)}),[t.style]),null}Ct.defaultProps={unit:"metric",maxWidth:100};const kt=e.memo(Ct);function Tt(t,e){if(!t)throw new Error(e)}let At=0;const Lt=function(t){const n=(0,e.useContext)(pt).map.getMap(),r=(0,e.useRef)(t),[,i]=(0,e.useState)(0),s=(0,e.useMemo)((()=>t.id||"jsx-source-"+At++),[]);(0,e.useEffect)((()=>{if(n){const t=()=>i((t=>t+1));return n.on("styledata",t),t(),()=>{var e;if(n.off("styledata",t),n.style&&n.style._loaded&&n.getSource(s)){const t=null===(e=n.getStyle())||void 0===e?void 0:e.layers;if(t)for(const e of t)e.source===s&&n.removeLayer(e.id);n.removeSource(s)}}}}),[n]);let o=n&&n.style&&n.getSource(s);return o?function(t,e,n){Tt(e.id===n.id,"source id changed"),Tt(e.type===n.type,"source type changed");let r="",i=0;for(const t in e)"children"===t||"id"===t||rt(n[t],e[t])||(r=t,i++);if(!i)return;const s=e.type;if("geojson"===s)t.setData(e.data);else if("image"===s)t.updateImage({url:e.url,coordinates:e.coordinates});else if("canvas"!==s&&"video"!==s||1!==i||"coordinates"!==r)if("vector"===s&&"setUrl"in t)switch(r){case"url":t.setUrl(e.url);break;case"tiles":t.setTiles(e.tiles)}else console.warn(`Unable to update <Source> prop: ${r}`);else t.setCoordinates(e.coordinates)}(o,t,r.current):o=function(t,e,n){if(t.style&&t.style._loaded){const r={...n};return delete r.id,delete r.children,t.addSource(e,r),t.getSource(e)}return null}(n,s,t),r.current=t,o&&e.Children.map(t.children,(t=>t&&(0,e.cloneElement)(t,{source:s})))||null};let Ot=0;const It=function(t){const n=(0,e.useContext)(pt).map.getMap(),r=(0,e.useRef)(t),[,i]=(0,e.useState)(0),s=(0,e.useMemo)((()=>t.id||"jsx-layer-"+Ot++),[]);if((0,e.useEffect)((()=>{if(n){const t=()=>i((t=>t+1));return n.on("styledata",t),t(),()=>{n.off("styledata",t),n.style&&n.style._loaded&&n.getLayer(s)&&n.removeLayer(s)}}}),[n]),n&&n.style&&n.getLayer(s))try{!function(t,e,n,r){if(Tt(n.id===r.id,"layer id changed"),Tt(n.type===r.type,"layer type changed"),"custom"===n.type||"custom"===r.type)return;const{layout:i={},paint:s={},filter:o,minzoom:a,maxzoom:l,beforeId:u}=n;if(u!==r.beforeId&&t.moveLayer(e,u),i!==r.layout){const n=r.layout||{};for(const r in i)rt(i[r],n[r])||t.setLayoutProperty(e,r,i[r]);for(const r in n)i.hasOwnProperty(r)||t.setLayoutProperty(e,r,void 0)}if(s!==r.paint){const n=r.paint||{};for(const r in s)rt(s[r],n[r])||t.setPaintProperty(e,r,s[r]);for(const r in n)s.hasOwnProperty(r)||t.setPaintProperty(e,r,void 0)}rt(o,r.filter)||t.setFilter(e,o),a===r.minzoom&&l===r.maxzoom||t.setLayerZoomRange(e,a,l)}(n,s,t,r.current)}catch(t){console.warn(t)}else!function(t,e,n){if(t.style&&t.style._loaded&&(!("source"in n)||t.getSource(n.source))){const r={...n,id:e};delete r.beforeId,t.addLayer(r,n.beforeId)}}(n,s,t);return r.current=t,null};function Rt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let zt=1,Ft=1;class Nt{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(t){const{delay:e=0,duration:n=Number.POSITIVE_INFINITY,rate:r=1,repeat:i=1}=t,s=zt++,o={time:0,delay:e,duration:n,rate:r,repeat:i};return this._setChannelTime(o,this.time),this.channels.set(s,o),s}removeChannel(t){this.channels.delete(t);for(const[e,n]of this.animations)n.channel===t&&this.detachAnimation(e)}isFinished(t){const e=this.channels.get(t);return void 0!==e&&this.time>=e.delay+e.duration*e.repeat}getTime(t){if(void 0===t)return this.time;const e=this.channels.get(t);return void 0===e?-1:e.time}setTime(t){this.time=Math.max(0,t);const e=this.channels.values();for(const t of e)this._setChannelTime(t,this.time);const n=this.animations.values();for(const t of n){const{animation:e,channel:n}=t;e.setTime(this.getTime(n))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,e){const n=Ft++;return this.animations.set(n,{animation:t,channel:e}),t.setTime(this.getTime(e)),n}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,e){const n=e-t.delay;n>=t.duration*t.repeat?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}}const jt=Symbol.for("component"),Dt=Symbol.for("asyncPropDefaults"),Bt=Symbol.for("asyncPropOriginal"),Ut=Symbol.for("asyncPropResolved");var Vt=o(155);function Wt(t){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type)return!0;if(void 0!==Vt&&"object"==typeof Vt.versions&&Boolean(Vt.versions.electron))return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}var Gt=o(155);function Ht(){return!("object"==typeof Gt&&"[object process]"===String(Gt)&&!Gt.browser)||Wt()}const qt="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source";Ht();class Xt{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";Rt(this,"storage",void 0),Rt(this,"id",void 0),Rt(this,"config",{}),this.storage=function(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(t){return null}}(n),this.id=t,this.config={},Object.assign(this.config,e),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){return this.config={},this.updateConfiguration(t)}updateConfiguration(t){if(Object.assign(this.config,t),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}return this}_loadConfiguration(){let t={};if(this.storage){const e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}function Zt(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const s=t.width*n,o=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let Yt;function $t(t){return"string"==typeof t?Yt[t.toUpperCase()]||Yt.WHITE:t}function Qt(t,e){if(!t)throw new Error(e||"Assertion failed")}!function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(Yt||(Yt={}));var Kt=o(155);const Jt={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==o.g&&o.g,document:"undefined"!=typeof document&&document,process:"object"==typeof Kt&&Kt},te=(globalThis,Jt.window||Jt.self||Jt.global),ee=Jt.process||{};function ne(){let t;var e,n;if(Ht&&"performance"in te)t=null==te||null===(e=te.performance)||void 0===e||null===(n=e.now)||void 0===n?void 0:n.call(e);else if("hrtime"in ee){var r;const e=null==ee||null===(r=ee.hrtime)||void 0===r?void 0:r.call(ee);t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}console;const re={debug:Ht&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},ie={enabled:!0,level:0};function se(){}const oe={},ae={once:!0};class le{constructor(){let{id:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};Rt(this,"id",void 0),Rt(this,"VERSION",qt),Rt(this,"_startTs",ne()),Rt(this,"_deltaTs",ne()),Rt(this,"_storage",void 0),Rt(this,"userData",{}),Rt(this,"LOG_THROTTLE_TIMEOUT",0),this.id=t,this._storage=new Xt("__probe-".concat(this.id,"__"),ie),this.userData={},this.timeStamp("".concat(this.id," started")),function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(const n of r)"function"==typeof t[n]&&(e.find((t=>n===t))||(t[n]=t[n].bind(t)))}(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((ne()-this._startTs).toPrecision(10))}getDelta(){return Number((ne()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:t}),this}setLevel(t){return this._storage.updateConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,e){this._storage.updateConfiguration({[t]:e})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,e){Qt(t,e)}warn(t){return this._getLogFunction(0,t,re.warn,arguments,ae)}error(t){return this._getLogFunction(0,t,re.error,arguments)}deprecated(t,e){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(e,"` instead"))}removed(t,e){return this.error("`".concat(t,"` has been removed. Use `").concat(e,"` instead"))}probe(t,e){return this._getLogFunction(t,e,re.log,arguments,{time:!0,once:!0})}log(t,e){return this._getLogFunction(t,e,re.debug,arguments)}info(t,e){return this._getLogFunction(t,e,console.info,arguments)}once(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction(t,e,re.debug||re.info,arguments,ae)}table(t,e,n){return e?this._getLogFunction(t,e,console.table||se,n&&[n],{tag:he(e)}):se}image(t){let{logLevel:e,priority:n,image:r,message:i="",scale:s=1}=t;return this._shouldLog(e||n)?Ht?function(t){let{image:e,message:n="",scale:r=1}=t;if("string"==typeof e){const t=new Image;return t.onload=()=>{const e=Zt(t,n,r);console.log(...e)},t.src=e,se}const i=e.nodeName||"";if("img"===i.toLowerCase())return console.log(...Zt(e,n,r)),se;if("canvas"===i.toLowerCase()){const t=new Image;return t.onload=()=>console.log(...Zt(t,n,r)),t.src=e.toDataURL(),se}return se}({image:r,message:i,scale:s}):function(t){let{image:e,message:n="",scale:r=1}=t,i=null;try{i=o(214)}catch(t){}return i?()=>i(e,{fit:"box",width:"".concat(Math.round(80*r),"%")}).then((t=>console.log(t))):se}({image:r,message:i,scale:s}):se}time(t,e){return this._getLogFunction(t,e,console.time?console.time:console.info)}timeEnd(t,e){return this._getLogFunction(t,e,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,e){return this._getLogFunction(t,e,console.timeStamp||se)}group(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=ce({logLevel:t,message:e,opts:n}),{collapsed:i}=n;return r.method=(i?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(t,e,Object.assign({},n,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||se)}withGroup(t,e,n){this.group(t,e)();try{n()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=ue(t)}_getLogFunction(t,e,n,r,i){if(this._shouldLog(t)){i=ce({logLevel:t,message:e,args:r,opts:i}),Qt(n=n||i.method),i.total=this.getTotal(),i.delta=this.getDelta(),this._deltaTs=ne();const s=i.tag||i.message;if(i.once){if(oe[s])return se;oe[s]=ne()}return e=function(t,e,n){if("string"==typeof e){const o=n.time?function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}(function(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s"),e}(n.total)):"";r=e=n.time?"".concat(t,": ").concat(o,"  ").concat(e):"".concat(t,": ").concat(e),i=n.color,s=n.background,Ht||"string"!=typeof r||(i&&(i=$t(i),r="[".concat(i,"m").concat(r,"[39m")),s&&(i=$t(s),r="[".concat(s+10,"m").concat(r,"[49m"))),e=r}var r,i,s;return e}(this.id,i.message,i),n.bind(console,e,...i.args)}return se}}function ue(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Qt(Number.isFinite(e)&&e>=0),e}function ce(t){const{logLevel:e,message:n}=t;t.logLevel=ue(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"==typeof t.message&&(t.message=t.message());const i=typeof t.message;return Qt("string"===i||"object"===i),Object.assign(t,{args:r},t.opts)}function he(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}Rt(le,"VERSION",qt);const de=new le({id:"deck"});let fe={};function pe(t,e,n,r){de.level>0&&fe[t]&&fe[t].call(null,e,n,r)}function ge(t,e=(()=>!0)){return Array.isArray(t)?me(t,e,[]):e(t)?[t]:[]}function me(t,e,n){let r=-1;for(;++r<t.length;){const i=t[r];Array.isArray(i)?me(i,e,n):e(i)&&n.push(i)}return n}function ve({target:t,source:e,start:n=0,count:r=1}){const i=e.length,s=r*i;let o=0;for(let r=n;o<i;o++)t[r++]=e[o];for(;o<s;)o<s-o?(t.copyWithin(n+o,n,n+o),o*=2):(t.copyWithin(n+o,n,n+s-o),o=s);return t}var ye=o(155);function be(){let t;if("undefined"!=typeof window&&window.performance)t=window.performance.now();else if(void 0!==ye&&ye.hrtime){const e=ye.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}class _e{constructor(t,e){Rt(this,"name",void 0),Rt(this,"type",void 0),Rt(this,"sampleSize",1),Rt(this,"time",void 0),Rt(this,"count",void 0),Rt(this,"samples",void 0),Rt(this,"lastTiming",void 0),Rt(this,"lastSampleTime",void 0),Rt(this,"lastSampleCount",void 0),Rt(this,"_count",0),Rt(this,"_time",0),Rt(this,"_samples",0),Rt(this,"_startTime",0),Rt(this,"_timerPending",!1),this.name=t,this.type=e,this.reset()}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=be(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(be()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class we{constructor(t){Rt(this,"id",void 0),Rt(this,"stats",{}),this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:t,type:e})}get size(){return Object.keys(this.stats).length}reset(){for(const t in this.stats)this.stats[t].reset();return this}forEach(t){for(const e in this.stats)t(this.stats[e])}getTable(){const t={};return this.forEach((e=>{t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}})),t}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((t=>this._getOrCreate(t)))}_getOrCreate(t){if(!t||!t.name)return null;const{name:e,type:n}=t;return this.stats[e]||(this.stats[e]=t instanceof _e?t:new _e(e,n)),this.stats[e]}}const xe=t=>"function"==typeof t,Me=t=>null!==t&&"object"==typeof t,Se=t=>Me(t)&&t.constructor==={}.constructor,Pe=t=>"undefined"!=typeof Response&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,Ee=t=>"undefined"!=typeof Blob&&t instanceof Blob,Ce=t=>(t=>"undefined"!=typeof ReadableStream&&t instanceof ReadableStream||Me(t)&&xe(t.tee)&&xe(t.cancel)&&xe(t.getReader))(t)||(t=>Me(t)&&xe(t.read)&&xe(t.pipe)&&(t=>"boolean"==typeof t)(t.readable))(t);function ke(t,e){if(!t)throw new Error(e||"loader assertion failed.")}function Te(t){var e;return!!t&&(Array.isArray(t)&&(t=t[0]),Array.isArray(null===(e=t)||void 0===e?void 0:e.extensions))}function Ae(t){var e,n;let r;return ke(t,"null loader"),ke(Te(t),"invalid loader"),Array.isArray(t)&&(r=t[1],t=t[0],t={...t,options:{...t.options,...r}}),(null!==(e=t)&&void 0!==e&&e.parseTextSync||null!==(n=t)&&void 0!==n&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const Le={},Oe=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,Ie=/^([-\w.]+\/[-\w.+]+)/;function Re(t){const e=Ie.exec(t);return e?e[1]:t}function ze(t){const e=Oe.exec(t);return e?e[1]:""}const Fe=/\?.*/;function Ne(t){if(Pe(t)){const e=je(t.url||"");return{url:e,type:Re(t.headers.get("content-type")||"")||ze(e)}}return Ee(t)?{url:je(t.name||""),type:t.type||""}:"string"==typeof t?{url:je(t),type:ze(t)}:{url:"",type:""}}function je(t){return t.replace(Fe,"")}async function De(t){if(Pe(t))return t;const e={},n=function(t){return Pe(t)?t.headers["content-length"]||-1:Ee(t)?t.size:"string"==typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}(t);n>=0&&(e["content-length"]=String(n));const{url:r,type:i}=Ne(t);i&&(e["content-type"]=i);const s=await async function(t){if("string"==typeof t)return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const e=t.slice(0,5);return await new Promise((t=>{const n=new FileReader;n.onload=e=>{var n;return t(null==e||null===(n=e.target)||void 0===n?void 0:n.result)},n.readAsDataURL(e)}))}if(t instanceof ArrayBuffer){const e=function(t){let e="";const n=new Uint8Array(t);for(let t=0;t<n.byteLength;t++)e+=String.fromCharCode(n[t]);return btoa(e)}(t.slice(0,5));return"data:base64,".concat(e)}return null}(t);s&&(e["x-first-bytes"]=s),"string"==typeof t&&(t=(new TextEncoder).encode(t));const o=new Response(t,{headers:e});return Object.defineProperty(o,"url",{value:r}),o}async function Be(t,e){if("string"==typeof t){t=function(t){for(const e in Le)if(t.startsWith(e)){const n=Le[e];t=t.replace(e,n)}return t.startsWith("http://")||t.startsWith("https://")||(t="".concat("").concat(t)),t}(t);let n=e;return null!=e&&e.fetch&&"function"!=typeof(null==e?void 0:e.fetch)&&(n=e.fetch),await fetch(t,n)}return await De(t)}const Ue=new le({id:"loaders.gl"});class Ve{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}var We=o(155);"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,void 0!==o.g&&o.g,"undefined"!=typeof document&&document;const Ge=Boolean("object"!=typeof We||"[object process]"!==String(We)||We.browser),He=void 0!==We&&We.version&&/v([0-9]*)/.exec(We.version),qe=(He&&parseFloat(He[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){Rt(this,"console",void 0),this.console=console}log(...t){return this.console.log.bind(this.console,...t)}info(...t){return this.console.info.bind(this.console,...t)}warn(...t){return this.console.warn.bind(this.console,...t)}error(...t){return this.console.error.bind(this.console,...t)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:Ge,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),Xe={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function Ze(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const Ye=()=>{const t=Ze();return t.globalOptions=t.globalOptions||{...qe},t.globalOptions};function $e(t,e,n,r){return n=n||[],function(t,e){Ke(t,null,qe,Xe,e);for(const n of e){const r=t&&t[n.id]||{},i=n.options&&n.options[n.id]||{},s=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};Ke(r,n.id,i,s,e)}}(t,n=Array.isArray(n)?n:[n]),function(t,e,n){const r={...t.options||{}};return function(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}(r,n),null===r.log&&(r.log=new Ve),tn(r,Ye()),tn(r,e),r}(e,t,r)}function Qe(t,e){const n=Ye(),r=t||n;return"function"==typeof r.fetch?r.fetch:Me(r.fetch)?t=>Be(t,r):null!=e&&e.fetch?null==e?void 0:e.fetch:Be}function Ke(t,e,n,r,i){const s=e||"Top level",o=e?"".concat(e,"."):"";for(const a in t){const l=!e&&Me(t[a]),u="baseUri"===a&&!e,c="workerUrl"===a&&e;if(!(a in n)&&!u&&!c)if(a in r)Ue.warn("".concat(s," loader option '").concat(o).concat(a,"' no longer supported, use '").concat(r[a],"'"))();else if(!l){const t=Je(a,i);Ue.warn("".concat(s," loader option '").concat(o).concat(a,"' not recognized. ").concat(t))()}}}function Je(t,e){const n=t.toLowerCase();let r="";for(const i of e)for(const e in i.options){if(t===e)return"Did you mean '".concat(i.id,".").concat(e,"'?");const s=e.toLowerCase();(n.startsWith(s)||s.startsWith(n))&&(r=r||"Did you mean '".concat(i.id,".").concat(e,"'?"))}return r}function tn(t,e){for(const n in e)if(n in e){const r=e[n];Se(r)&&Se(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function en(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}var nn=o(155);"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,void 0!==o.g&&o.g,"undefined"!=typeof document&&document;const rn="object"!=typeof nn||"[object process]"!==String(nn)||nn.browser,sn="undefined"!=typeof window&&void 0!==window.orientation,on=void 0!==nn&&nn.version&&/v([0-9]*)/.exec(nn.version);on&&parseFloat(on[1]);class an{}const ln=new Map;function un(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function cn(t,e=!0,n){const r=n||new Set;if(t)if(hn(t))r.add(t);else if(hn(t.buffer))r.add(t.buffer);else if(ArrayBuffer.isView(t));else if(e&&"object"==typeof t)for(const n in t)cn(t[n],e,r);return void 0===n?Array.from(r):[]}function hn(t){return!!t&&(t instanceof ArrayBuffer||"undefined"!=typeof MessagePort&&t instanceof MessagePort||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas)}const dn=()=>{};class fn{static isSupported(){return"undefined"!=typeof Worker&&rn||void 0!==typeof an}constructor(t){Rt(this,"name",void 0),Rt(this,"source",void 0),Rt(this,"url",void 0),Rt(this,"terminated",!1),Rt(this,"worker",void 0),Rt(this,"onMessage",void 0),Rt(this,"onError",void 0),Rt(this,"_loadableURL","");const{name:e,source:n,url:r}=t;en(n||r),this.name=e,this.source=n,this.url=r,this.onMessage=dn,this.onError=t=>console.log(t),this.worker=rn?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=dn,this.onError=dn,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(t,e){e=e||cn(t),this.worker.postMessage(t,e)}_getErrorFromErrorEvent(t){let e="Failed to load ";return e+="worker ".concat(this.name," from ").concat(this.url,". "),t.message&&(e+="".concat(t.message," in ")),t.lineno&&(e+=":".concat(t.lineno,":").concat(t.colno)),new Error(e)}_createBrowserWorker(){this._loadableURL=function(t){en(t.source&&!t.url||!t.source&&t.url);let e=ln.get(t.source||t.url);return e||(t.url&&(e=(n=t.url).startsWith("http")?un("try {\n  importScripts('".concat(n,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")):n,ln.set(t.url,e)),t.source&&(e=un(t.source),ln.set(t.source,e))),en(e),e;var n}({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},t.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},t.onmessageerror=t=>console.error(t),t}_createNodeWorker(){let t;if(this.url){const e=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);t=new an(e,{eval:!1})}else{if(!this.source)throw new Error("no worker");t=new an(this.source,{eval:!0})}return t.on("message",(t=>{this.onMessage(t)})),t.on("error",(t=>{this.onError(t)})),t.on("exit",(t=>{})),t}}class pn{constructor(t,e){Rt(this,"name",void 0),Rt(this,"workerThread",void 0),Rt(this,"isRunning",!0),Rt(this,"result",void 0),Rt(this,"_resolve",(()=>{})),Rt(this,"_reject",(()=>{})),this.name=t,this.workerThread=e,this.result=new Promise(((t,e)=>{this._resolve=t,this._reject=e}))}postMessage(t,e){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:e})}done(t){en(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){en(this.isRunning),this.isRunning=!1,this._reject(t)}}class gn{static isSupported(){return fn.isSupported()}constructor(t){Rt(this,"name","unnamed"),Rt(this,"source",void 0),Rt(this,"url",void 0),Rt(this,"maxConcurrency",1),Rt(this,"maxMobileConcurrency",1),Rt(this,"onDebug",(()=>{})),Rt(this,"reuseWorkers",!0),Rt(this,"props",{}),Rt(this,"jobQueue",[]),Rt(this,"idleQueue",[]),Rt(this,"count",0),Rt(this,"isDestroyed",!1),this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach((t=>t.destroy())),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},void 0!==t.name&&(this.name=t.name),void 0!==t.maxConcurrency&&(this.maxConcurrency=t.maxConcurrency),void 0!==t.maxMobileConcurrency&&(this.maxMobileConcurrency=t.maxMobileConcurrency),void 0!==t.reuseWorkers&&(this.reuseWorkers=t.reuseWorkers),void 0!==t.onDebug&&(this.onDebug=t.onDebug)}async startJob(t,e=((t,e,n)=>t.done(n)),n=((t,e)=>t.error(e))){const r=new Promise((r=>(this.jobQueue.push({name:t,onMessage:e,onError:n,onStart:r}),this)));return this._startQueuedJob(),await r}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const e=this.jobQueue.shift();if(e){this.onDebug({message:"Starting job",name:e.name,workerThread:t,backlog:this.jobQueue.length});const n=new pn(e.name,t);t.onMessage=t=>e.onMessage(n,t.type,t.payload),t.onError=t=>e.onError(n,t),e.onStart(n);try{await n.result}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new fn({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return sn?this.maxMobileConcurrency:this.maxConcurrency}}const mn={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class vn{static isSupported(){return fn.isSupported()}static getWorkerFarm(t={}){return vn._workerFarm=vn._workerFarm||new vn({}),vn._workerFarm.setProps(t),vn._workerFarm}constructor(t){Rt(this,"props",void 0),Rt(this,"workerPools",new Map),this.props={...mn},this.setProps(t),this.workerPools=new Map}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:e,source:n,url:r}=t;let i=this.workerPools.get(e);return i||(i=new gn({name:e,source:n,url:r}),i.setProps(this._getWorkerPoolProps()),this.workerPools.set(e,i)),i}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}async function yn(t,e,n,r,i){const s=t.id,o=function(t,e={}){const n=e[t.id]||{},r="".concat(t.id,"-worker.js");let i=n.workerUrl;if(i||"compression"!==t.id||(i=e.workerUrl),"test"===e._workerType&&(i="modules/".concat(t.module,"/dist/").concat(r)),!i){let e=t.version;"latest"===e&&(e="latest");const n=e?"@".concat(e):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(n,"/dist/").concat(r)}return en(i),i}(t,n),a=vn.getWorkerFarm(n).getWorkerPool({name:s,url:o});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const l=await a.startJob("process-on-worker",bn.bind(null,i));l.postMessage("process",{input:e,options:n,context:r});const u=await l.result;return await u.result}async function bn(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:i,input:s,options:o}=r;try{const n=await t(s,o);e.postMessage("done",{id:i,result:n})}catch(t){const n=t instanceof Error?t.message:"unknown error";e.postMessage("error",{id:i,error:n})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}function _n(t){return t&&"object"==typeof t&&t.isBuffer}function wn(t){if(_n(t))return _n(e=t)?new Uint8Array(e.buffer,e.byteOffset,e.length).slice().buffer:e;var e;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return 0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if("string"==typeof t){const e=t;return(new TextEncoder).encode(e).buffer}if(t&&"object"==typeof t&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}Rt(vn,"_workerFarm",void 0),o(521);const xn=262144;function Mn(t,e){return Ge?async function*(t,e){const n=t.getReader();let r;try{for(;;){const t=r||n.read();null!=e&&e._streamReadAhead&&(r=n.read());const{done:i,value:s}=await t;if(i)return;yield wn(s)}}catch(t){n.releaseLock()}}(t,e):async function*(t,e){for await(const e of t)yield wn(e)}(t)}const Sn="Cannot convert supplied data type";async function Pn(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if("string"==typeof t||r)return function(t,e,n){if(e.text&&"string"==typeof t)return t;if((t=>t&&"object"==typeof t&&t.isBuffer)(t)&&(t=t.buffer),t instanceof ArrayBuffer){const n=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let n=t.buffer;const r=t.byteLength||t.length;return 0===t.byteOffset&&r===n.byteLength||(n=n.slice(t.byteOffset,t.byteOffset+r)),n}throw new Error(Sn)}(t,e);if(Ee(t)&&(t=await De(t)),Pe(t)){const n=t;return await async function(t){if(!t.ok){const e=await async function(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let r=t.statusText;n.includes("application/json")&&(r+=" ".concat(await t.text())),e+=r,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch(t){}return e}(t);throw new Error(e)}}(n),e.binary?await n.arrayBuffer():await n.text()}if(Ce(t)&&(t=function(t,e){if("string"==typeof t)return function*(t,e){const n=(null==e?void 0:e.chunkSize)||262144;let r=0;const i=new TextEncoder;for(;r<t.length;){const e=Math.min(t.length-r,n),s=t.slice(r,r+e);r+=e,yield i.encode(s)}}(t,e);if(t instanceof ArrayBuffer)return function*(t,e={}){const{chunkSize:n=xn}=e;let r=0;for(;r<t.byteLength;){const e=Math.min(t.byteLength-r,n),i=new ArrayBuffer(e),s=new Uint8Array(t,r,e);new Uint8Array(i).set(s),r+=e,yield i}}(t,e);if(Ee(t))return async function*(t,e){const n=(null==e?void 0:e.chunkSize)||1048576;let r=0;for(;r<t.size;){const e=r+n,i=await t.slice(r,e).arrayBuffer();r=e,yield i}}(t,e);if(Ce(t))return Mn(t,e);if(Pe(t))return Mn(t.body,e);throw new Error("makeIterator")}(t,n)),(t=>t&&"function"==typeof t[Symbol.iterator])(t)||(t=>t&&"function"==typeof t[Symbol.asyncIterator])(t))return async function(t){const e=[];for await(const n of t)e.push(n);return function(...t){const e=t.map((t=>t instanceof ArrayBuffer?new Uint8Array(t):t)),n=e.reduce(((t,e)=>t+e.byteLength),0),r=new Uint8Array(n);let i=0;for(const t of e)r.set(t,i),i+=t.byteLength;return r.buffer}(...e)}(t);throw new Error(Sn)}const En=new le({id:"loaders.gl"}),Cn=()=>{const t=Ze();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry},kn=/\.([^.]+)$/;function Tn(t,e=[],n,r){if(!An(t))return null;if(e&&!Array.isArray(e))return Ae(e);let i=[];e&&(i=i.concat(e)),null!=n&&n.ignoreRegisteredLoaders||i.push(...Cn()),function(t){for(const e of t)Ae(e)}(i);const s=function(t,e,n,r){const{url:i,type:s}=Ne(t),o=i||(null==r?void 0:r.url);let a=null,l="";var u;return null!=n&&n.mimeType&&(a=On(e,null==n?void 0:n.mimeType),l="match forced by supplied MIME type ".concat(null==n?void 0:n.mimeType)),a=a||function(t,e){const n=e&&kn.exec(e),r=n&&n[1];return r?function(t,e){e=e.toLowerCase();for(const n of t)for(const t of n.extensions)if(t.toLowerCase()===e)return n;return null}(t,r):null}(e,o),l=l||(a?"matched url ".concat(o):""),a=a||On(e,s),l=l||(a?"matched MIME type ".concat(s):""),a=a||function(t,e){if(!e)return null;for(const n of t)if("string"==typeof e){if(In(e,n))return n}else if(ArrayBuffer.isView(e)){if(Rn(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&Rn(e,0,n))return n;return null}(e,t),l=l||(a?"matched initial data ".concat(zn(t)):""),a=a||On(e,null==n?void 0:n.fallbackMimeType),l=l||(a?"matched fallback MIME type ".concat(s):""),l&&En.log(1,"selectLoader selected ".concat(null===(u=a)||void 0===u?void 0:u.name,": ").concat(l,".")),a}(t,i,n,r);if(!(s||null!=n&&n.nothrow))throw new Error(Ln(t));return s}function An(t){return!(t instanceof Response&&204===t.status)}function Ln(t){const{url:e,type:n}=Ne(t);let r="No valid loader found (";r+=e?"".concat(function(t){const e=t&&t.lastIndexOf("/");return e>=0?t.substr(e+1):""}(e),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const i=t?zn(t):"";return r+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",r+=")",r}function On(t,e){for(const n of t){if(n.mimeTypes&&n.mimeTypes.includes(e))return n;if(e==="application/x.".concat(n.id))return n}return null}function In(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some((e=>t.startsWith(e)))}function Rn(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some((r=>function(t,e,n,r){if(r instanceof ArrayBuffer)return function(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let t=0;t<r.length;++t)if(r[t]!==i[t])return!1;return!0}(r,t,r.byteLength);switch(typeof r){case"function":return r(t,n);case"string":return r===Fn(t,e,r.length);default:return!1}}(t,e,n,r)))}function zn(t,e=5){return"string"==typeof t?t.slice(0,e):ArrayBuffer.isView(t)?Fn(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?Fn(t,0,e):""}function Fn(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let i="";for(let t=0;t<n;t++)i+=String.fromCharCode(r.getUint8(e+t));return i}async function Nn(t,e,n,r){en(!r||"object"==typeof r),!e||Array.isArray(e)||Te(e)||(r=void 0,n=e,e=void 0),t=await t,n=n||{};const{url:i}=Ne(t),s=function(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const t=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...t]:t}return n&&n.length?n:null}(e,r),o=await async function(t,e=[],n,r){if(!An(t))return null;let i=Tn(t,e,{...n,nothrow:!0},r);if(i)return i;if(Ee(t)&&(i=Tn(t=await t.slice(0,10).arrayBuffer(),e,n,r)),!(i||null!=n&&n.nothrow))throw new Error(Ln(t));return i}(t,s,n);return o?(r=function(t,e,n=null){if(n)return n;const r={fetch:Qe(e,t),...t};return Array.isArray(r.loaders)||(r.loaders=null),r}({url:i,parse:Nn,loaders:s},n=$e(n,o,s,i),r),await async function(t,e,n,r){if(function(t,e="3.2.5"){en(t,"no worker provided");t.version}(t),Pe(e)){const t=e,{ok:n,redirected:i,status:s,statusText:o,type:a,url:l}=t,u=Object.fromEntries(t.headers.entries());r.response={headers:u,ok:n,redirected:i,status:s,statusText:o,type:a,url:l}}if(e=await Pn(e,t,n),t.parseTextSync&&"string"==typeof e)return n.dataType="text",t.parseTextSync(e,n,r,t);if(function(t,e){return!!vn.isSupported()&&!!(rn||null!=e&&e._nodeWorkers)&&t.worker&&(null==e?void 0:e.worker)}(t,n))return await yn(t,e,n,r,Nn);if(t.parseText&&"string"==typeof e)return await t.parseText(e,n,r,t);if(t.parse)return await t.parse(e,n,r,t);throw en(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}(o,t,n,r)):null}async function jn(t,e,n,r){Array.isArray(e)||Te(e)||(n=e,e=void 0);const i=Qe(n);let s=t;return"string"==typeof t&&(s=await i(t)),Ee(t)&&(s=await i(t)),await Nn(s,e,n)}class Dn{constructor(t,e,n){Rt(this,"id",void 0),Rt(this,"context",void 0),Rt(this,"isLoaded",void 0),Rt(this,"persistent",void 0),Rt(this,"_loadCount",0),Rt(this,"_subscribers",new Set),Rt(this,"_data",void 0),Rt(this,"_loader",void 0),Rt(this,"_error",void 0),Rt(this,"_content",void 0),this.id=t,this.context=n,this.setData(e)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then((()=>this.getData()))}setData(t,e){if(t===this._data&&!e)return;this._data=t;const n=++this._loadCount;let r=t;"string"==typeof t&&(r=jn(t)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then((t=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=t)})).catch((t=>{this._loadCount===n&&(this.isLoaded=!0,this._error=t||!0)}))):(this.isLoaded=!0,this._error=void 0,this._content=t);for(const t of this._subscribers)t.onChange(this.getData())}}class Bn{constructor({gl:t,protocol:e}){Rt(this,"protocol",void 0),Rt(this,"_context",void 0),Rt(this,"_resources",void 0),Rt(this,"_consumers",void 0),Rt(this,"_pruneRequest",void 0),this.protocol=e||"resource://",this._context={gl:t,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(t){return!!t.startsWith(this.protocol)||t in this._resources}add({resourceId:t,data:e,forceUpdate:n=!1,persistent:r=!0}){let i=this._resources[t];i?i.setData(e,n):(i=new Dn(t,e,this._context),this._resources[t]=i),i.persistent=r}remove(t){const e=this._resources[t];e&&(e.delete(),delete this._resources[t])}unsubscribe({consumerId:t}){const e=this._consumers[t];if(e){for(const t in e){const n=e[t],r=this._resources[n.resourceId];r&&r.unsubscribe(n)}delete this._consumers[t],this.prune()}}subscribe({resourceId:t,onChange:e,consumerId:n,requestId:r="default"}){const{_resources:i,protocol:s}=this;t.startsWith(s)&&(i[t=t.replace(s,"")]||this.add({resourceId:t,data:null,persistent:!1}));const o=i[t];if(this._track(n,r,o,e),o)return o.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout((()=>this._prune()),0))}finalize(){for(const t in this._resources)this._resources[t].delete()}_track(t,e,n,r){const i=this._consumers,s=i[t]=i[t]||{},o=s[e]||{},a=o.resourceId&&this._resources[o.resourceId];a&&(a.unsubscribe(o),this.prune()),n&&(s[e]=o,o.onChange=r,o.resourceId=n.id,n.subscribe(o))}_prune(){this._pruneRequest=null;for(const t of Object.keys(this._resources)){const e=this._resources[t];e.persistent||e.inUse()||(e.delete(),delete this._resources[t])}}}const Un=new class{constructor(t={}){Rt(this,"_pool",[]),Rt(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(t)}setOptions(t){Object.assign(this.opts,t)}allocate(t,e,{size:n=1,type:r,padding:i=0,copy:s=!1,initialize:o=!1,maxCount:a}){const l=r||t&&t.constructor||Float32Array,u=e*n+i;if(ArrayBuffer.isView(t)){if(u<=t.length)return t;if(u*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new l(t.buffer,0,u)}let c=1/0;a&&(c=a*n+i);const h=this._allocate(l,u,o,c);return t&&s?h.set(t):o||h.fill(0,0,4),this._release(t),h}release(t){this._release(t)}_allocate(t,e,n,r){let i=Math.max(Math.ceil(e*this.opts.overAlloc),1);i>r&&(i=r);const s=this._pool,o=t.BYTES_PER_ELEMENT*i,a=s.findIndex((t=>t.byteLength>=o));if(a>=0){const e=new t(s.splice(a,1)[0],0,i);return n&&e.fill(0),e}return new t(i)}_release(t){if(!ArrayBuffer.isView(t))return;const e=this._pool,{buffer:n}=t,{byteLength:r}=n,i=e.findIndex((t=>t.byteLength>=r));i<0?e.push(n):(i>0||e.length<this.opts.poolSize)&&e.splice(i,0,n),e.length>this.opts.poolSize&&e.shift()}},Vn=(Math.PI,Math.PI,{EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0});function Wn(t,{precision:e=Vn.precision}={}){return t=function(t){return Math.round(t/Vn.EPSILON)*Vn.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function Gn(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Hn(t,e,n){return function(t,e,n){if(Gn(t)){const r=t;n=n||function(t){return t.clone?t.clone():new Array(t.length)}(r);for(let i=0;i<n.length&&i<r.length;++i)n[i]=e(t[i],i,n);return n}return e(t)}(t,(t=>Math.max(e,Math.min(n,t))))}function qn(t,e,n){return Gn(t)?t.map(((t,r)=>qn(t,e[r],n))):n*e+(1-n)*t}function Xn(t,e,n){const r=Vn.EPSILON;n&&(Vn.EPSILON=n);try{if(t===e)return!0;if(Gn(t)&&Gn(e)){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Xn(t[n],e[n]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):"number"==typeof t&&"number"==typeof e&&Math.abs(t-e)<=Vn.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{Vn.EPSILON=r}}class Zn extends(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=t[n+e];return this.check()}toArray(t=[],e=0){for(let n=0;n<this.ELEMENTS;++n)t[e+n]=this[n];return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:Gn(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Vn)}formatString(t){let e="";for(let n=0;n<this.ELEMENTS;++n)e+=(n>0?", ":"")+Wn(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(!Xn(this[e],t[e]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,e,n){if(void 0===n)return this.lerp(this,t,e);for(let r=0;r<this.ELEMENTS;++r){const i=t[r];this[r]=i+n*(e[r]-i)}return this.check()}min(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}max(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}clamp(t,e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),e[n]);return this.check()}add(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]+=e[t];return this.check()}subtract(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]-=e[t];return this.check()}scale(t){if("number"==typeof t)for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;else for(let e=0;e<this.ELEMENTS&&e<t.length;++e)this[e]*=t[e];return this.check()}multiplyByScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}check(){if(Vn.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}addScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),e);return this.check()}get elements(){return this}}function Yn(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function $n(t,e,n=""){if(Vn.debug&&!function(t,e){if(t.length!==e)return!1;for(let e=0;e<t.length;++e)if(!Number.isFinite(t[e]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}function Qn(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}class Kn extends Zn{get x(){return this[0]}set x(t){this[0]=Yn(t)}get y(){return this[1]}set y(t){this[1]=Yn(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let e=0;for(let n=0;n<this.ELEMENTS;++n){const r=this[n]-t[n];e+=r*r}return Yn(e)}dot(t){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*t[n];return Yn(e)}normalize(){const t=this.magnitude();if(0!==t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}multiply(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e[t];return this.check()}divide(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e[t];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return Qn(t>=0&&t<this.ELEMENTS,"index is out of range"),Yn(this[t])}setComponent(t,e){return Qn(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}addVectors(t,e){return this.copy(t).add(e)}subVectors(t,e){return this.copy(t).subtract(e)}multiplyVectors(t,e){return this.copy(t).multiply(e)}addScaledVector(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}var Jn=1e-6,tr="undefined"!=typeof Float32Array?Float32Array:Array;function er(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/o,t}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var nr;function rr(t,e,n){const r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s||1;return t[0]=(n[0]*r+n[4]*i+n[8]*s)/o,t[1]=(n[1]*r+n[5]*i+n[9]*s)/o,t[2]=(n[2]*r+n[6]*i+n[10]*s)/o,t}nr=new tr(3),tr!=Float32Array&&(nr[0]=0,nr[1]=0,nr[2]=0);const ir=[0,0,0];let sr;class or extends Kn{static get ZERO(){return sr||(sr=new or(0,0,0),Object.freeze(sr)),sr}constructor(t=0,e=0,n=0){super(-0,-0,-0),1===arguments.length&&Gn(t)?this.copy(t):(Vn.debug&&(Yn(t),Yn(e),Yn(n)),this[0]=t,this[1]=e,this[2]=n)}set(t,e,n){return this[0]=t,this[1]=e,this[2]=n,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return Vn.debug&&(Yn(t.x),Yn(t.y),Yn(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=Yn(t)}angle(t){return function(t,e){var n=t[0],r=t[1],i=t[2],s=e[0],o=e[1],a=e[2],l=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(s*s+o*o+a*a),u=l&&function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}(t,e)/l;return Math.acos(Math.min(Math.max(u,-1),1))}(this,t)}cross(t){return function(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[0],a=n[1],l=n[2];t[0]=i*l-s*a,t[1]=s*o-r*l,t[2]=r*a-i*o}(this,this,t),this.check()}rotateX({radians:t,origin:e=ir}){return function(t,e,n,r){var i=[],s=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,e,t),this.check()}rotateY({radians:t,origin:e=ir}){return function(t,e,n,r){var i=[],s=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,e,t),this.check()}rotateZ({radians:t,origin:e=ir}){return function(t,e,n,r){var i=[],s=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,e,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return er(this,this,t),this.check()}transformAsVector(t){return rr(this,this,t),this.check()}transformByMatrix3(t){return function(t,e,n){var r=e[0],i=e[1],s=e[2];t[0]=r*n[0]+i*n[3]+s*n[6],t[1]=r*n[1]+i*n[4]+s*n[7],t[2]=r*n[2]+i*n[5]+s*n[8]}(this,this,t),this.check()}transformByMatrix2(t){return function(t,e,n){const r=e[0],i=e[1];t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2]}(this,this,t),this.check()}transformByQuaternion(t){return function(t,e,n){var r=n[0],i=n[1],s=n[2],o=n[3],a=e[0],l=e[1],u=e[2],c=i*u-s*l,h=s*a-r*u,d=r*l-i*a,f=i*d-s*h,p=s*c-r*d,g=r*h-i*c,m=2*o;c*=m,h*=m,d*=m,f*=2,p*=2,g*=2,t[0]=a+c+f,t[1]=l+h+p,t[2]=u+d+g}(this,this,t),this.check()}}const ar=new or;function lr(t,e,n,r){ar.set(t,e,n);const i=ar.len();return{distance:r/i,normal:new or(-t/i,-e/i,-n/i)}}function ur(t){return t-Math.fround(t)}let cr;function hr(t,e){const{size:n=1,startIndex:r=0}=e,i=void 0!==e.endIndex?e.endIndex:t.length,s=(i-r)/n;cr=Un.allocate(cr,s,{type:Float32Array,size:2*n});let o=r,a=0;for(;o<i;){for(let e=0;e<n;e++){const r=t[o++];cr[a+e]=r,cr[a+e+n]=ur(r)}a+=2*n}return cr.subarray(0,s*n*2)}class dr extends Zn{toString(){let t="[";if(Vn.printRowMajor){t+="row-major:";for(let e=0;e<this.RANK;++e)for(let n=0;n<this.RANK;++n)t+=" ".concat(this[n*this.RANK+e])}else{t+="column-major:";for(let e=0;e<this.ELEMENTS;++e)t+=" ".concat(this[e])}return t+="]",t}getElementIndex(t,e){return e*this.RANK+t}getElement(t,e){return this[e*this.RANK+t]}setElement(t,e,n){return this[e*this.RANK+t]=Yn(n),this}getColumn(t,e=new Array(this.RANK).fill(-0)){const n=t*this.RANK;for(let t=0;t<this.RANK;++t)e[t]=this[n+t];return e}setColumn(t,e){const n=t*this.RANK;for(let t=0;t<this.RANK;++t)this[n+t]=e[t];return this}}function fr(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],g=e[13],m=e[14],v=e[15],y=n*a-r*o,b=n*l-i*o,_=n*u-s*o,w=r*l-i*a,x=r*u-s*a,M=i*u-s*l,S=c*g-h*p,P=c*m-d*p,E=c*v-f*p,C=h*m-d*g,k=h*v-f*g,T=d*v-f*m,A=y*T-b*k+_*C+w*E-x*P+M*S;return A?(A=1/A,t[0]=(a*T-l*k+u*C)*A,t[1]=(i*k-r*T-s*C)*A,t[2]=(g*M-m*x+v*w)*A,t[3]=(d*x-h*M-f*w)*A,t[4]=(l*E-o*T-u*P)*A,t[5]=(n*T-i*E+s*P)*A,t[6]=(m*_-p*M-v*b)*A,t[7]=(c*M-d*_+f*b)*A,t[8]=(o*k-a*E+u*S)*A,t[9]=(r*E-n*k-s*S)*A,t[10]=(p*x-g*_+v*y)*A,t[11]=(h*_-c*x-f*y)*A,t[12]=(a*P-o*C-l*S)*A,t[13]=(n*C-r*P+i*S)*A,t[14]=(g*b-p*w-m*y)*A,t[15]=(c*w-h*b+d*y)*A,t):null}function pr(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],f=e[10],p=e[11],g=e[12],m=e[13],v=e[14],y=e[15],b=n[0],_=n[1],w=n[2],x=n[3];return t[0]=b*r+_*a+w*h+x*g,t[1]=b*i+_*l+w*d+x*m,t[2]=b*s+_*u+w*f+x*v,t[3]=b*o+_*c+w*p+x*y,b=n[4],_=n[5],w=n[6],x=n[7],t[4]=b*r+_*a+w*h+x*g,t[5]=b*i+_*l+w*d+x*m,t[6]=b*s+_*u+w*f+x*v,t[7]=b*o+_*c+w*p+x*y,b=n[8],_=n[9],w=n[10],x=n[11],t[8]=b*r+_*a+w*h+x*g,t[9]=b*i+_*l+w*d+x*m,t[10]=b*s+_*u+w*f+x*v,t[11]=b*o+_*c+w*p+x*y,b=n[12],_=n[13],w=n[14],x=n[15],t[12]=b*r+_*a+w*h+x*g,t[13]=b*i+_*l+w*d+x*m,t[14]=b*s+_*u+w*f+x*v,t[15]=b*o+_*c+w*p+x*y,t}function gr(t,e,n){var r,i,s,o,a,l,u,c,h,d,f,p,g=n[0],m=n[1],v=n[2];return e===t?(t[12]=e[0]*g+e[4]*m+e[8]*v+e[12],t[13]=e[1]*g+e[5]*m+e[9]*v+e[13],t[14]=e[2]*g+e[6]*m+e[10]*v+e[14],t[15]=e[3]*g+e[7]*m+e[11]*v+e[15]):(r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],f=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=s,t[3]=o,t[4]=a,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=d,t[10]=f,t[11]=p,t[12]=r*g+a*m+h*v+e[12],t[13]=i*g+l*m+d*v+e[13],t[14]=s*g+u*m+f*v+e[14],t[15]=o*g+c*m+p*v+e[15]),t}function mr(t,e,n){var r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function vr(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[4],o=e[5],a=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+u*r,t[5]=o*i+c*r,t[6]=a*i+h*r,t[7]=l*i+d*r,t[8]=u*i-s*r,t[9]=c*i-o*r,t[10]=h*i-a*r,t[11]=d*i-l*r,t}function yr(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],u=e[4],c=e[5],h=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+u*r,t[1]=o*i+c*r,t[2]=a*i+h*r,t[3]=l*i+d*r,t[4]=u*i-s*r,t[5]=c*i-o*r,t[6]=h*i-a*r,t[7]=d*i-l*r,t}var br;function _r(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function wr(t,e){return t[0]=-e[0],t[1]=-e[1],t}function xr(t,e,n,r){var i=e[0],s=e[1];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t}function Mr(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,t}!function(){var t=new tr(2);tr!=Float32Array&&(t[0]=0,t[1]=0)}(),function(){var t=new tr(4);tr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}(),function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"}(br||(br={}));const Sr=45*Math.PI/180,Pr=1,Er=.1,Cr=500,kr=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Tr extends dr{static get IDENTITY(){return Lr||(Lr=new Tr,Object.freeze(Lr)),Lr}static get ZERO(){return Ar||(Ar=new Tr([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Ar)),Ar}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return br}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,e,n,r,i,s,o,a,l,u,c,h,d,f,p,g){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=s,this[6]=o,this[7]=a,this[8]=l,this[9]=u,this[10]=c,this[11]=h,this[12]=d,this[13]=f,this[14]=p,this[15]=g,this.check()}setRowMajor(t,e,n,r,i,s,o,a,l,u,c,h,d,f,p,g){return this[0]=t,this[1]=i,this[2]=l,this[3]=d,this[4]=e,this[5]=s,this[6]=u,this[7]=f,this[8]=n,this[9]=o,this[10]=c,this[11]=p,this[12]=r,this[13]=a,this[14]=h,this[15]=g,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(kr)}fromObject(t){return this.check()}fromQuaternion(t){return function(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,l=i+i,u=n*o,c=r*o,h=r*a,d=i*o,f=i*a,p=i*l,g=s*o,m=s*a,v=s*l;t[0]=1-h-p,t[1]=c+v,t[2]=d-m,t[3]=0,t[4]=c-v,t[5]=1-u-p,t[6]=f+g,t[7]=0,t[8]=d+m,t[9]=f-g,t[10]=1-u-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,t),this.check()}frustum(t){const{left:e,right:n,bottom:r,top:i,near:s=Er,far:o=Cr}=t;return o===1/0?function(t,e,n,r,i,s){const o=2*s/(n-e),a=2*s/(i-r),l=(n+e)/(n-e),u=(i+r)/(i-r),c=-2*s;t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=l,t[9]=u,t[10]=-1,t[11]=-1,t[12]=0,t[13]=0,t[14]=c,t[15]=0}(this,e,n,r,i,s):function(t,e,n,r,i,s,o){var a=1/(n-e),l=1/(i-r),u=1/(s-o);t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*l,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*l,t[10]=(o+s)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*u,t[15]=0}(this,e,n,r,i,s,o),this.check()}lookAt(t){const{eye:e,center:n=[0,0,0],up:r=[0,1,0]}=t;return function(t,e,n,r){var i,s,o,a,l,u,c,h,d,f,p=e[0],g=e[1],m=e[2],v=r[0],y=r[1],b=r[2],_=n[0],w=n[1],x=n[2];Math.abs(p-_)<Jn&&Math.abs(g-w)<Jn&&Math.abs(m-x)<Jn?function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(c=p-_,h=g-w,d=m-x,i=y*(d*=f=1/Math.hypot(c,h,d))-b*(h*=f),s=b*(c*=f)-v*d,o=v*h-y*c,(f=Math.hypot(i,s,o))?(i*=f=1/f,s*=f,o*=f):(i=0,s=0,o=0),a=h*o-d*s,l=d*i-c*o,u=c*s-h*i,(f=Math.hypot(a,l,u))?(a*=f=1/f,l*=f,u*=f):(a=0,l=0,u=0),t[0]=i,t[1]=a,t[2]=c,t[3]=0,t[4]=s,t[5]=l,t[6]=h,t[7]=0,t[8]=o,t[9]=u,t[10]=d,t[11]=0,t[12]=-(i*p+s*g+o*m),t[13]=-(a*p+l*g+u*m),t[14]=-(c*p+h*g+d*m),t[15]=1)}(this,e,n,r),this.check()}ortho(t){const{left:e,right:n,bottom:r,top:i,near:s=Er,far:o=Cr}=t;return function(t,e,n,r,i,s,o){var a=1/(e-n),l=1/(r-i),u=1/(s-o);t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*l,t[14]=(o+s)*u,t[15]=1}(this,e,n,r,i,s,o),this.check()}orthographic(t){const{fovy:e=Sr,aspect:n=Pr,focalDistance:r=1,near:i=Er,far:s=Cr}=t;Or(e);const o=e/2,a=r*Math.tan(o),l=a*n;return this.ortho({left:-l,right:l,bottom:-a,top:a,near:i,far:s})}perspective(t){const{fovy:e=45*Math.PI/180,aspect:n=1,near:r=.1,far:i=500}=t;return Or(e),function(t,e,n,r,i){var s,o=1/Math.tan(e/2);t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(s=1/(r-i),t[10]=(i+r)*s,t[14]=2*i*r*s):(t[10]=-1,t[14]=-2*r)}(this,e,n,r,i),this.check()}determinant(){return function(t){var e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],h=t[10],d=t[11],f=t[12],p=t[13],g=t[14],m=t[15];return(e*o-n*s)*(h*m-d*g)-(e*a-r*s)*(c*m-d*p)+(e*l-i*s)*(c*g-h*p)+(n*a-r*o)*(u*m-d*f)-(n*l-i*o)*(u*g-h*f)+(r*l-i*a)*(u*p-c*f)}(this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const n=this.getScale(e),r=1/n[0],i=1/n[1],s=1/n[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*s,t[3]=0,t[4]=this[4]*r,t[5]=this[5]*i,t[6]=this[6]*s,t[7]=0,t[8]=this[8]*r,t[9]=this[9]*i,t[10]=this[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const n=this.getScale(e),r=1/n[0],i=1/n[1],s=1/n[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*s,t[3]=this[4]*r,t[4]=this[5]*i,t[5]=this[6]*s,t[6]=this[8]*r,t[7]=this[9]*i,t[8]=this[10]*s,t}transpose(){return function(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=i,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}invert(){return fr(this,this),this.check()}multiplyLeft(t){return pr(this,t,this),this.check()}multiplyRight(t){return pr(this,this,t),this.check()}rotateX(t){return vr(this,this,t),this.check()}rotateY(t){return function(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],u=e[8],c=e[9],h=e[10],d=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-u*r,t[1]=o*i-c*r,t[2]=a*i-h*r,t[3]=l*i-d*r,t[8]=s*r+u*i,t[9]=o*r+c*i,t[10]=a*r+h*i,t[11]=l*r+d*i}(this,this,t),this.check()}rotateZ(t){return yr(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,e){return function(t,e,n,r){var i,s,o,a,l,u,c,h,d,f,p,g,m,v,y,b,_,w,x,M,S,P,E,C,k=r[0],T=r[1],A=r[2],L=Math.hypot(k,T,A);L<Jn||(k*=L=1/L,T*=L,A*=L,i=Math.sin(n),o=1-(s=Math.cos(n)),a=e[0],l=e[1],u=e[2],c=e[3],h=e[4],d=e[5],f=e[6],p=e[7],g=e[8],m=e[9],v=e[10],y=e[11],b=k*k*o+s,_=T*k*o+A*i,w=A*k*o-T*i,x=k*T*o-A*i,M=T*T*o+s,S=A*T*o+k*i,P=k*A*o+T*i,E=T*A*o-k*i,C=A*A*o+s,t[0]=a*b+h*_+g*w,t[1]=l*b+d*_+m*w,t[2]=u*b+f*_+v*w,t[3]=c*b+p*_+y*w,t[4]=a*x+h*M+g*S,t[5]=l*x+d*M+m*S,t[6]=u*x+f*M+v*S,t[7]=c*x+p*M+y*S,t[8]=a*P+h*E+g*C,t[9]=l*P+d*E+m*C,t[10]=u*P+f*E+v*C,t[11]=c*P+p*E+y*C,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,t,e),this.check()}scale(t){return mr(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return gr(this,this,t),this.check()}transform(t,e){return 4===t.length?($n(e=Mr(e||[-0,-0,-0,-0],t,this),4),e):this.transformAsPoint(t,e)}transformAsPoint(t,e){const{length:n}=t;let r;switch(n){case 2:r=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}(e||[-0,-0],t,this);break;case 3:r=er(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return $n(r,t.length),r}transformAsVector(t,e){let n;switch(t.length){case 2:n=function(t,e,n){const r=e[0],i=e[1],s=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/s,t[1]=(n[1]*r+n[5]*i)/s,t}(e||[-0,-0],t,this);break;case 3:n=rr(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return $n(n,t.length),n}transformPoint(t,e){return this.transformAsPoint(t,e)}transformVector(t,e){return this.transformAsPoint(t,e)}transformDirection(t,e){return this.transformAsVector(t,e)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,e,n){return this.identity().translate([t,e,n])}}let Ar,Lr;function Or(t){if(t>2*Math.PI)throw Error("expected radians")}function Ir(t,e){const n=Mr([],e,t);return function(t,e,n){t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n}(n,n,1/n[3]),n}function Rr(t,e){const n=t%e;return n<0?e+n:n}function zr(t,e,n){return t<e?e:t>n?n:t}const Fr=Math.log2||function(t){return Math.log(t)*Math.LOG2E};function Nr(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const jr=Math.PI,Dr=jr/4,Br=jr/180,Ur=180/jr,Vr=512,Wr=85.051129,Gr=1.5;function Hr(t){const[e,n]=t;Nr(Number.isFinite(e)),Nr(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=n*Br;return[Vr*(e*Br+jr)/(2*jr),Vr*(jr+Math.log(Math.tan(Dr+.5*r)))/(2*jr)]}function qr(t){const[e,n]=t,r=e/Vr*(2*jr)-jr,i=2*(Math.atan(Math.exp(n/Vr*(2*jr)-jr))-Dr);return[r*Ur,i*Ur]}function Xr(t){const{latitude:e,longitude:n,highPrecision:r=!1}=t;Nr(Number.isFinite(e)&&Number.isFinite(n));const i=Math.cos(e*Br),s=512/360,o=s/i,a=12790407194604047e-21/i,l={unitsPerMeter:[a,a,a],metersPerUnit:[1/a,1/a,1/a],unitsPerDegree:[s,o,a],degreesPerUnit:[.703125,1/o,1/a]};if(r){const t=Br*Math.tan(e*Br)/i,n=s*t/2,r=12790407194604047e-21*t,u=r/o*a;l.unitsPerDegree2=[0,n,r],l.unitsPerMeter2=[u,0,u]}return l}function Zr(t,e){const[n,r,i]=t,[s,o,a]=e,{unitsPerMeter:l,unitsPerMeter2:u}=Xr({longitude:n,latitude:r,highPrecision:!0}),c=Hr(t);c[0]+=s*(l[0]+u[0]*o),c[1]+=o*(l[1]+u[1]*o);const h=qr(c),d=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[h[0],h[1],d]:h}function Yr(t){return 2*Math.atan(.5/t)*Ur}function $r(t){return.5/Math.tan(.5*t*Br)}function Qr(t,e){const[n,r,i=0]=t;return Nr(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),Ir(e,[n,r,i,1])}function Kr(t,e,n=0){const[r,i,s]=t;if(Nr(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(s))return Ir(e,[r,i,s,1]);const o=Ir(e,[r,i,0,1]),a=Ir(e,[r,i,1,1]),l=o[2],u=a[2];return xr([],o,a,l===u?0:((n||0)-l)/(u-l))}function Jr(t){const{width:e,height:n,bounds:r,minExtent:i=0,maxZoom:s=24,offset:o=[0,0]}=t,[[a,l],[u,c]]=r,h=function(t=0){return"number"==typeof t?{top:t,bottom:t,left:t,right:t}:(Nr(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}(t.padding),d=Hr([a,zr(c,-85.051129,Wr)]),f=Hr([u,zr(l,-85.051129,Wr)]),p=[Math.max(Math.abs(f[0]-d[0]),i),Math.max(Math.abs(f[1]-d[1]),i)],g=[e-h.left-h.right-2*Math.abs(o[0]),n-h.top-h.bottom-2*Math.abs(o[1])];Nr(g[0]>0&&g[1]>0);const m=g[0]/p[0],v=g[1]/p[1],y=(h.right-h.left)/2/m,b=(h.bottom-h.top)/2/v,_=qr([(f[0]+d[0])/2+y,(f[1]+d[1])/2+b]),w=Math.min(s,Fr(Math.abs(Math.min(m,v))));return Nr(Number.isFinite(w)),{longitude:_[0],latitude:_[1],zoom:w}}const ti=Math.PI/180;function ei(t,e,n){const{pixelUnprojectionMatrix:r}=t,i=Ir(r,[e,0,1,1]),s=Ir(r,[e,t.height,1,1]),o=qr(xr([],i,s,(n*t.distanceScales.unitsPerMeter[2]-i[2])/(s[2]-i[2])));return o.push(n),o}const ni={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(ni,"IDENTITY",{get:()=>(de.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const ri={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},ii={common:0,meters:1,pixels:2},si={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},oi="draw",ai="mask",li=Math.PI/180,ui=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ci=[0,0,0],hi={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class di{constructor(t={}){Rt(this,"id",void 0),Rt(this,"x",void 0),Rt(this,"y",void 0),Rt(this,"width",void 0),Rt(this,"height",void 0),Rt(this,"isGeospatial",void 0),Rt(this,"zoom",void 0),Rt(this,"focalDistance",void 0),Rt(this,"position",void 0),Rt(this,"modelMatrix",void 0),Rt(this,"distanceScales",void 0),Rt(this,"scale",void 0),Rt(this,"center",void 0),Rt(this,"cameraPosition",void 0),Rt(this,"projectionMatrix",void 0),Rt(this,"viewMatrix",void 0),Rt(this,"viewMatrixUncentered",void 0),Rt(this,"viewMatrixInverse",void 0),Rt(this,"viewProjectionMatrix",void 0),Rt(this,"pixelProjectionMatrix",void 0),Rt(this,"pixelUnprojectionMatrix",void 0),Rt(this,"resolution",void 0),Rt(this,"_frustumPlanes",{}),this.id=t.id||this.constructor.displayName||"viewport",this.x=t.x||0,this.y=t.y||0,this.width=t.width||1,this.height=t.height||1,this.zoom=t.zoom||0,this.distanceScales=t.distanceScales||hi,this.focalDistance=t.focalDistance||1,this.position=t.position||ci,this.modelMatrix=t.modelMatrix||null;const{longitude:e,latitude:n}=t;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(e),this._initProps(t),this._initMatrices(t),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?ri.WEB_MERCATOR:ri.WEB_MERCATOR_AUTO_OFFSET:ri.IDENTITY}equals(t){return t instanceof di&&(this===t||t.width===this.width&&t.height===this.height&&t.scale===this.scale&&Xn(t.projectionMatrix,this.projectionMatrix)&&Xn(t.viewMatrix,this.viewMatrix))}project(t,{topLeft:e=!0}={}){const n=Qr(this.projectPosition(t),this.pixelProjectionMatrix),[r,i]=n,s=e?i:this.height-i;return 2===t.length?[r,s]:[r,s,n[2]]}unproject(t,{topLeft:e=!0,targetZ:n}={}){const[r,i,s]=t,o=e?i:this.height-i,a=n&&n*this.distanceScales.unitsPerMeter[2],l=Kr([r,o,s],this.pixelUnprojectionMatrix,a),[u,c,h]=this.unprojectPosition(l);return Number.isFinite(s)?[u,c,h]:Number.isFinite(n)?[u,c,n]:[u,c]}projectPosition(t){const[e,n]=this.projectFlat(t);return[e,n,(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(t){const[e,n]=this.unprojectFlat(t);return[e,n,(t[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(t){if(this.isGeospatial){const e=Hr(t);return e[1]=Hn(e[1],-318,830),e}return t}unprojectFlat(t){return this.isGeospatial?qr(t):t}getBounds(t={}){const e={targetZ:t.z||0},n=this.unproject([0,0],e),r=this.unproject([this.width,0],e),i=this.unproject([0,this.height],e),s=this.unproject([this.width,this.height],e);return[Math.min(n[0],r[0],i[0],s[0]),Math.min(n[1],r[1],i[1],s[1]),Math.max(n[0],r[0],i[0],s[0]),Math.max(n[1],r[1],i[1],s[1])]}getDistanceScales(t){return t?Xr({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel({x:t,y:e,width:n=1,height:r=1}){return t<this.x+this.width&&this.x<t+n&&e<this.y+this.height&&this.y<e+r}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,{left:lr((t=this.viewProjectionMatrix)[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:lr(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:lr(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:lr(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:lr(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:lr(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}),this._frustumPlanes;var t}panByPosition(t,e){return null}_initProps(t){const e=t.longitude,n=t.latitude;this.isGeospatial&&(Number.isFinite(t.zoom)||(this.zoom=function(t){const{latitude:e}=t;Nr(Number.isFinite(e));const n=Math.cos(e*Br);return Fr(4003e4*n)-9}({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=t.distanceScales||Xr({latitude:n,longitude:e}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:i,modelMatrix:s}=t;let o=ci;if(i&&(o=s?new Tr(s).transformAsVector(i,[]):i),this.isGeospatial){const t=this.projectPosition([e,n,0]);this.center=new or(o).scale(this.distanceScales.unitsPerMeter).add(t)}else this.center=this.projectPosition(o)}_initMatrices(t){const{viewMatrix:e=ui,projectionMatrix:n=null,orthographic:r=!1,fovyRadians:i,fovy:s=75,near:o=.1,far:a=1e3,padding:l=null,focalDistance:u=1}=t;this.viewMatrixUncentered=e,this.viewMatrix=(new Tr).multiplyRight(e).translate(new or(this.center).negate()),this.projectionMatrix=n||function({width:t,height:e,orthographic:n,fovyRadians:r,focalDistance:i,padding:s,near:o,far:a}){const l=t/e,u=n?(new Tr).orthographic({fovy:r,aspect:l,focalDistance:i,near:o,far:a}):(new Tr).perspective({fovy:r,aspect:l,near:o,far:a});if(s){const{left:n=0,right:r=0,top:i=0,bottom:o=0}=s,a=Hn((n+t-r)/2,0,t)-t/2,l=Hn((i+e-o)/2,0,e)-e/2;u[8]-=2*a/t,u[9]+=2*l/e}return u}({width:this.width,height:this.height,orthographic:r,fovyRadians:i||s*li,focalDistance:u,padding:l,near:o,far:a});const c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var h;pr(c,c,this.projectionMatrix),pr(c,c,this.viewMatrix),this.viewProjectionMatrix=c,this.viewMatrixInverse=fr([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=[(h=this.viewMatrixInverse)[12],h[13],h[14]];const d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];mr(d,d,[this.width/2,-this.height/2,1]),gr(d,d,[1,-1,0]),pr(f,d,this.viewProjectionMatrix),this.pixelProjectionMatrix=f,this.pixelUnprojectionMatrix=fr([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||de.warn("Pixel project matrix not invertible")()}}Rt(di,"displayName","Viewport");const fi="vs",pi="fs";function gi(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const mi={number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},array:{validate:(t,e)=>Array.isArray(t)||ArrayBuffer.isView(t)}};function vi(t){let e=yi(t);return"object"===e?t?"type"in t?Object.assign({},t,mi[t.type]):"value"in t?(e=yi(t.value),Object.assign({type:e},t,mi[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},mi[e])}function yi(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}class bi{constructor(t){let{name:e,vs:n,fs:r,dependencies:i=[],uniforms:s,getUniforms:o,deprecations:a=[],defines:l={},inject:u={},vertexShader:c,fragmentShader:h}=t;gi("string"==typeof e),this.name=e,this.vs=n||c,this.fs=r||h,this.getModuleUniforms=o,this.dependencies=i,this.deprecations=this._parseDeprecationDefinitions(a),this.defines=l,this.injections=function(t){const e={vs:{},fs:{}};for(const n in t){let r=t[n];const i=n.slice(0,2);"string"==typeof r&&(r={order:0,injection:r}),e[i][n]=r}return e}(u),s&&(this.uniforms=function(t){const e={};for(const n in t){const r=vi(t[n]);e[n]=r}return e}(s))}getModuleSource(t){let e;switch(t){case"vs":e=this.vs||"";break;case"fs":e=this.fs||"";break;default:gi(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(e,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(t,e){return this.getModuleUniforms?this.getModuleUniforms(t,e):this.uniforms?this._defaultGetUniforms(t):{}}getDefines(){return this.defines}checkDeprecations(t,e){this.deprecations.forEach((n=>{n.regex.test(t)&&(n.deprecated?e.deprecated(n.old,n.new)():e.removed(n.old,n.new)())}))}_parseDeprecationDefinitions(t){return t.forEach((t=>{"function"===t.type?t.regex=new RegExp("\\b".concat(t.old,"\\(")):t.regex=new RegExp("".concat(t.type," ").concat(t.old,";"))})),t}_defaultGetUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e={},n=this.uniforms;for(const r in n){const i=n[r];r in t&&!i.private?(i.validate&&gi(i.validate(t[r],i),"".concat(this.name,": invalid ").concat(r)),e[r]=t[r]):e[r]=i.value}return e}}function _i(t){return function(t){const e={},n={};return wi({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort(((t,e)=>n[e]-n[t])).map((t=>e[t]))}(xi(t))}function wi(t){let{modules:e,level:n,moduleMap:r,moduleDepth:i}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const t of e)r[t.name]=t,(void 0===i[t.name]||i[t.name]<n)&&(i[t.name]=n);for(const t of e)t.dependencies&&wi({modules:t.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}function xi(t,e){return t.map((t=>(t instanceof bi||(gi("string"!=typeof t,"Shader module use by name is deprecated. Import shader module '".concat(t,"' and use it directly.")),gi(t.name,"shader module has no name"),(t=new bi(t)).dependencies=xi(t.dependencies)),t)))}function Mi(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e="undefined"!=typeof window&&window.navigator||{},n=t.userAgent||e.userAgent||"",r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i}const Si={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Pi={};Object.keys(Si).forEach((t=>{Pi[t]=t}));const Ei={};function Ci(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Si[e];if(gi(r,e),!Mi(n))return!0;if(e in Ei)return Ei[e];const i=r[0],s=n.behavior||"enable",o="#extension GL_".concat(i," : ").concat(s,"\nvoid main(void) {}"),a=t.createShader(35633);t.shaderSource(a,o),t.compileShader(a);const l=t.getShaderParameter(a,35713);return t.deleteShader(a),Ei[e]=l,l}function ki(t,e){return(e=Array.isArray(e)?e:[e]).every((e=>function(t,e){const n=Si[e];gi(n,e);const r=function(t){return"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&2===t._version)}(t)&&n[1]||n[0],i="string"==typeof r?Boolean(t.getExtension(r)):r;return gi(!1===i||!0===i),i}(t,e)))}const Ti={[fi]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",[pi]:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},Ai="__LUMA_INJECT_DECLARATIONS__",Li=/void\s+main\s*\([^)]*\)\s*\{\n?/,Oi=/}\n?[^{}]*$/,Ii=[];function Ri(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=e===fi;for(const e in n){const r=n[e];r.sort(((t,e)=>t.order-e.order)),Ii.length=r.length;for(let t=0,e=r.length;t<e;++t)Ii[t]=r[t].injection;const s="".concat(Ii.join("\n"),"\n");switch(e){case"vs:#decl":i&&(t=t.replace(Ai,s));break;case"vs:#main-start":i&&(t=t.replace(Li,(t=>t+s)));break;case"vs:#main-end":i&&(t=t.replace(Oi,(t=>s+t)));break;case"fs:#decl":i||(t=t.replace(Ai,s));break;case"fs:#main-start":i||(t=t.replace(Li,(t=>t+s)));break;case"fs:#main-end":i||(t=t.replace(Oi,(t=>s+t)));break;default:t=t.replace(e,(t=>t+s))}}return t=t.replace(Ai,""),r&&(t=t.replace(/\}\s*$/,(t=>t+Ti[e]))),t}function zi(t){const e={};return gi(Array.isArray(t)&&t.length>1),t.forEach((t=>{for(const n in t)e[n]=e[n]?"".concat(e[n],"\n").concat(t[n]):t[n]})),e}function Fi(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const Ni=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],ji=[...Ni,[Fi("attribute"),"in $1"],[Fi("varying"),"out $1"]],Di=[...Ni,[Fi("varying"),"in $1"]],Bi=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],Ui=[...Bi,[Fi("in"),"attribute $1"],[Fi("out"),"varying $1"]],Vi=[...Bi,[Fi("in"),"varying $1"]],Wi="gl_FragColor",Gi=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,Hi=/void\s+main\s*\([^)]*\)\s*\{\n?/;function qi(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}const Xi="\n\n".concat(Ai,"\n\n"),Zi={[fi]:"vertex",[pi]:"fragment"};function Yi(t,e){let{id:n,source:r,type:i,modules:s,defines:o={},hookFunctions:a=[],inject:l={},transpileToGLSL100:u=!1,prologue:c=!0,log:h}=e;gi("string"==typeof r,"shader source must be a string");const d=i===fi,f=r.split("\n");let p=100,g="",m=r;0===f[0].indexOf("#version ")?(p=300,g=f[0],m=f.slice(1).join("\n")):g="#version ".concat(p);const v={};s.forEach((t=>{Object.assign(v,t.getDefines())})),Object.assign(v,o);let y=c?"".concat(g,"\n").concat(function(t){let{id:e,source:n,type:r}=t;return e&&"string"==typeof e&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(Zi[r],"\n\n"):""}({id:n,source:r,type:i}),"\n").concat(function(t){let{type:e}=t;return"\n#define SHADER_TYPE_".concat(Zi[e].toUpperCase(),"\n")}({type:i}),"\n").concat(function(t){const e=function(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||7936),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||7937),i=function(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}(n,r);return{gpuVendor:i,vendor:n,renderer:r,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t);switch(e.gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(t),"\n").concat(function(t,e,n){let r="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return ki(t,Pi.GLSL_FRAG_DEPTH)&&(r+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),ki(t,Pi.GLSL_DERIVATIVES)&&Ci(t,Pi.GLSL_DERIVATIVES)&&(r+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),ki(t,Pi.GLSL_FRAG_DATA)&&Ci(t,Pi.GLSL_FRAG_DATA,{behavior:"require"})&&(r+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),ki(t,Pi.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),r}(t),"\n").concat(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(const r in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;const i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],"\n"))}return 0===e&&(n+="\n"),n}(v),"\n").concat(d?"":"precision highp float;\n\n","\n"):"".concat(g,"\n");const b=function(t){const e={vs:{},fs:{}};return t.forEach((t=>{let n;"string"!=typeof t?(n=t,t=n.hook):n={},t=t.trim();const[r,i]=t.split(":"),s=t.replace(/\(.+/,"");e[r][s]=Object.assign(n,{signature:i})})),e}(a),_={},w={},x={};for(const t in l){const e="string"==typeof l[t]?{injection:l[t],order:0}:l[t],n=t.match(/^(v|f)s:(#)?([\w-]+)$/);if(n){const r=n[2],i=n[3];r?"decl"===i?w[t]=[e]:x[t]=[e]:_[t]=[e]}else x[t]=[e]}for(const t of s){h&&t.checkDeprecations(m,h),y+=t.getModuleSource(i,p);const e=t.injections[i];for(const t in e){const n=t.match(/^(v|f)s:#([\w-]+)$/);if(n){const r="decl"===n[2]?w:x;r[t]=r[t]||[],r[t].push(e[t])}else _[t]=_[t]||[],_[t].push(e[t])}}return y+=Xi,y=Ri(y,i,w),y+=function(t,e){let n="";for(const r in t){const i=t[r];if(n+="void ".concat(i.signature," {\n"),i.header&&(n+="  ".concat(i.header)),e[r]){const t=e[r];t.sort(((t,e)=>t.order-e.order));for(const e of t)n+="  ".concat(e.injection,"\n")}i.footer&&(n+="  ".concat(i.footer)),n+="}\n"}return n}(b[i],_),y+=m,y=Ri(y,i,x),y=function(t,e,n){switch(e){case 300:return n?qi(t,ji):function(t){const e=(t=qi(t,Di)).match(Gi);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(Wi,"\\b"),"g"),n)}else{const e="fragmentColor";t=t.replace(Hi,(t=>"out vec4 ".concat(e,";\n").concat(t))).replace(new RegExp("\\b".concat(Wi,"\\b"),"g"),e)}return t}(t);case 100:return n?qi(t,Ui):function(t){const e=(t=qi(t,Vi)).match(Gi);if(e){const n=e[1];t=t.replace(Gi,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),Wi)}return t}(t);default:throw new Error("unknown GLSL version ".concat(e))}}(y,u?100:p,d),y}function $i(t){return function(e){const n={};for(const r of t){const t=r.getUniforms(e,n);Object.assign(n,t)}return n}}const Qi=new le({id:"luma.gl"});function Ki(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function Ji(t){return"undefined"!=typeof WebGLRenderingContext&&t instanceof WebGLRenderingContext||"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&Number.isFinite(t._version))}function ts(t){return"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&2===t._version)}function es(t){return Ki(Ji(t),"Invalid WebGLRenderingContext"),t}function ns(t){return Ki(ts(t),"Requires WebGL2"),t}const rs={};const is=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let e=0;e<this.attribs.length;e++){const r=new t.VertexAttrib(n);this.attribs[e]=r}this.maxAttrib=0};(is.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const ss=function(t){const e=this;this.gl=t,function(t){const e=t.getError;t.getError=function(){let n;do{n=e.apply(t),0!==n&&(rs[n]=!0)}while(0!==n);for(n in rs)if(rs[n])return delete rs[n],parseInt(n,10);return 0}}(t);const n=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(t){return t===e.VERTEX_ARRAY_BINDING_OES?e.currentVertexArrayObject===e.defaultVertexArrayObject?null:e.currentVertexArrayObject:n.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(t){const r=e.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,t);const i=r.attribs[t];return i.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(t){const r=e.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,t);const i=r.attribs[t];return i.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(t,r){switch(t){case 34962:e.currentArrayBuffer=r;break;case 34963:e.currentVertexArrayObject.elementArrayBuffer=r}return n.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(t,r){const i=e.currentVertexArrayObject,s=i.attribs[t];switch(r){case 34975:return s.buffer;case 34338:return s.enabled;case 34339:return s.size;case 34340:return s.stride;case 34341:return s.type;case 34922:return s.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(t,r,i,s,o,a){const l=e.currentVertexArrayObject;l.maxAttrib=Math.max(l.maxAttrib,t);const u=l.attribs[t];return u.buffer=e.currentArrayBuffer,u.size=r,u.type=i,u.normalized=s,u.stride=o,u.offset=a,u.recache(),n.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",(()=>{globalThis.console&&globalThis.console.log&&globalThis.console.log("OESVertexArrayObject emulation library context restored"),e.reset_()}),!0),this.reset_()};ss.prototype.VERTEX_ARRAY_BINDING_OES=34229,ss.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let t=0;t<this.vertexArrayObjects.length;++t)this.vertexArrayObjects.isAlive=!1;const t=this.gl;this.maxVertexAttribs=t.getParameter(34921),this.defaultVertexArrayObject=new is(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},ss.prototype.createVertexArrayOES=function(){const t=new is(this);return this.vertexArrayObjects.push(t),t},ss.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)},ss.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof is&&t.hasBeenBound&&t.ext===this)},ss.prototype.bindVertexArrayOES=function(t){const e=this.gl;if(t&&!t.isAlive)return n="bindVertexArrayOES: attempt to bind deleted arrayObject",rs[1282]=!0,void(void 0!==n&&(r=n,globalThis.console&&globalThis.console.error&&globalThis.console.error(r)));var n,r;const i=this.original,s=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const o=this.currentVertexArrayObject;if(s===o)return;s&&o.elementArrayBuffer===s.elementArrayBuffer||i.bindBuffer.call(e,34963,o.elementArrayBuffer);let a=this.currentArrayBuffer;const l=Math.max(s?s.maxAttrib:0,o.maxAttrib);for(let t=0;t<=l;t++){const n=o.attribs[t],r=s?s.attribs[t]:null;if(s&&n.enabled===r.enabled||(n.enabled?i.enableVertexAttribArray.call(e,t):i.disableVertexAttribArray.call(e,t)),n.enabled){let o=!1;s&&n.buffer===r.buffer||(a!==n.buffer&&(i.bindBuffer.call(e,34962,n.buffer),a=n.buffer),o=!0),(o||n.cached!==r.cached)&&i.vertexAttribPointer.call(e,t,n.size,n.type,n.normalized,n.stride,n.offset)}}this.currentArrayBuffer!==a&&i.bindBuffer.call(e,34962,this.currentArrayBuffer)};const os="OES_element_index",as="WEBGL_draw_buffers",ls="WEBGL_debug_renderer_info",us=t=>ts(t)?void 0:0,cs={3074:t=>ts(t)?void 0:36064,35723:t=>ts(t)?void 0:4352,35977:us,32937:us,36795:(t,e)=>{const n=ts(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},37445:(t,e)=>{const n=t.getExtension(ls);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},37446:(t,e)=>{const n=t.getExtension(ls);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},34047:(t,e)=>{const n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:us,35071:us,37447:us,36063:(t,e)=>{if(!ts(t)){const n=t.getExtension(as);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:us,35374:us,35377:us,34852:t=>{if(!ts(t)){const e=t.getExtension(as);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(os)?2147483647:65535,33001:t=>t.getExtension(os)?16777216:65535,33e3:t=>16777216,37157:us,35373:us,35657:us,36183:us,37137:us,34045:us,35978:us,35979:us,35968:us,35376:us,35375:us,35659:us,37154:us,35371:us,35658:us,35076:us,35077:us,35380:us},hs="ANGLE_instanced_arrays",ds={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{Ki(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[hs]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){Ki(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Ki(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{Ki(!1)},deleteQuery:()=>{Ki(!1)},beginQuery:()=>{Ki(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},fs={readBuffer:(t,e,n)=>{ts(t)&&e(n)},getVertexAttrib:(t,e,n,r)=>{const{webgl2:i,ext:s}=function(t,e){return{webgl2:ts(t),ext:t.getExtension("ANGLE_instanced_arrays")}}(t);let o;switch(r){case 35069:o=!!i&&void 0;break;case 35070:o=i||s?void 0:0}return void 0!==o?o:e(n,r)},getProgramParameter:(t,e,n,r)=>{if(!ts(t))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,r)},getInternalformatParameter:(t,e,n,r,i)=>ts(t)||32937!==i?t.getInternalformatParameter(n,r,i):new Int32Array([0]),getTexParameter(t,e,n,r){if(34046===r){const{extensions:e}=t.luma,n=e.EXT_texture_filter_anisotropic;r=n&&n.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,r)},getParameter:function(t,e,n){const r=cs[n],i="function"==typeof r?r(t,e,n):r;return void 0!==i?i:e(n)},hint:(t,e,n,r)=>e(n,r)};function ps(t,e){let{extension:n,target:r,target2:i}=e;const s=ds[n];Ki(s);const{meta:o={}}=s,{suffix:a=""}=o,l=t.getExtension(n);for(const e of Object.keys(s)){const n="".concat(e).concat(a);let o=null;"meta"===e||"function"==typeof t[e]||(l&&"function"==typeof l[n]?o=function(){return l[n](...arguments)}:"function"==typeof s[e]&&(o=s[e].bind(r))),o&&(r[e]=o,i[e]=o)}}globalThis.polyfillContext=function(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(function(t){if("function"==typeof t.createVertexArray)return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const t=e.call(this)||[];return t.indexOf("OES_vertex_array_object")<0&&t.push("OES_vertex_array_object"),t};const n=t.getExtension;t.getExtension=function(e){return n.call(this,e)||("OES_vertex_array_object"!==e?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new ss(this)),this.__OESVertexArrayObject))}}(t),function(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}(t),function(t,e){for(const n of Object.getOwnPropertyNames(e))"overrides"!==n&&ps(t,{extension:n,target:t.luma,target2:t})}(t,ds),function(t,e){let{target:n,target2:r}=e;Object.keys(fs).forEach((e=>{if("function"==typeof fs[e]){const i=t[e]?t[e].bind(t):()=>{},s=fs[e].bind(null,t,i);n[e]=s,r[e]=s}}))}(t,{target:e,target2:t}),e.polyfilled=!0),t};const gs={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},ms=(t,e,n)=>e?t.enable(n):t.disable(n),vs=(t,e,n)=>t.hint(n,e),ys=(t,e,n)=>t.pixelStorei(n,e);function bs(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const _s={3042:ms,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:ms,2885:(t,e)=>t.cullFace(e),2929:ms,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:ms,35723:vs,36006:(t,e)=>{const n=ts(t)?36009:36160;return t.bindFramebuffer(n,e)},2886:(t,e)=>t.frontFace(e),33170:vs,2849:(t,e)=>t.lineWidth(e),32823:ms,32824:"polygonOffset",10752:"polygonOffset",35977:ms,32938:"sampleCoverage",32939:"sampleCoverage",3089:ms,3088:(t,e)=>t.scissor(...e),2960:ms,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:ys,3317:ys,37440:ys,37441:ys,37443:ys,3330:ys,3332:ys,3331:ys,36010:(t,e)=>t.bindFramebuffer(36008,e),3314:ys,32878:ys,3316:ys,3315:ys,32877:ys,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=bs(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=bs(e)&&2===e.length?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=bs(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=bs(e)&&3===e.length?[...e,...e]:e;const[n,r,i,s,o,a]=e;t.stencilFuncSeparate(1028,n,r,i),t.stencilFuncSeparate(1029,s,o,a)},stencilOp:(t,e)=>{e=bs(e)&&3===e.length?[...e,...e]:e;const[n,r,i,s,o,a]=e;t.stencilOpSeparate(1028,n,r,i),t.stencilOpSeparate(1029,s,o,a)},viewport:(t,e)=>t.viewport(...e)};function ws(t,e,n){return void 0!==e[t]?e[t]:n[t]}const xs={blendEquation:(t,e,n)=>t.blendEquationSeparate(ws(32777,e,n),ws(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(ws(32969,e,n),ws(32968,e,n),ws(32971,e,n),ws(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(ws(32824,e,n),ws(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(ws(32938,e,n),ws(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,ws(2962,e,n),ws(2967,e,n),ws(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,ws(34816,e,n),ws(36003,e,n),ws(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,ws(2964,e,n),ws(2965,e,n),ws(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,ws(34817,e,n),ws(34818,e,n),ws(34819,e,n))},Ms={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,r,i)=>t({32773:new Float32Array([e,n,r,i])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,r,i)=>t({32969:e,32968:n,32971:r,32970:i}),clearColor:(t,e,n,r,i)=>t({3106:new Float32Array([e,n,r,i])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,r,i)=>t({3107:[e,n,r,i]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,r,i)=>t({3088:new Int32Array([e,n,r,i])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[1028===e?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({2962:e,2967:n,2963:r,34816:e,36003:n,36004:r}),stencilFuncSeparate:(t,e,n,r,i)=>t({[1028===e?2962:34816]:n,[1028===e?2967:36003]:r,[1028===e?2963:36004]:i}),stencilOp:(t,e,n,r)=>t({2964:e,2965:n,2966:r,34817:e,34818:n,34819:r}),stencilOpSeparate:(t,e,n,r,i)=>t({[1028===e?2964:34817]:n,[1028===e?2965:34818]:r,[1028===e?2966:34819]:i}),viewport:(t,e,n,r,i)=>t({2978:[e,n,r,i]})},Ss=(t,e)=>t.isEnabled(e),Ps={3042:Ss,2884:Ss,2929:Ss,3024:Ss,32823:Ss,32926:Ss,32928:Ss,3089:Ss,2960:Ss,35977:Ss};function Es(t){for(const e in t)return!1;return!0}function Cs(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}return!1}function ks(t,e){const n=t[e].bind(t);t[e]=function(){const e=arguments.length<=0?void 0:arguments[0];return e in t.state.cache&&t.state.enable?t.state.cache[e]:n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function Ts(t,e,n){const r=t[e].bind(t);t[e]=function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];const{valueChanged:o,oldValue:a}=n(t.state._updateCache,...i);return o&&r(...i),a},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function As(t){const e=t.useProgram.bind(t);t.useProgram=function(n){t.state.program!==n&&(e(n),t.state.program=n)}}class Ls{constructor(t){let{copyState:e=!1,log:n=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=e?function(t,e){if("number"==typeof(e=e||gs)){const n=e,r=Ps[n];return r?r(t,n):t.getParameter(n)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const e of n){const n=Ps[e];r[e]=n?n(t,Number(e)):t.getParameter(Number(e))}return r}(t):Object.assign({},gs),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Ki(this.stateStack.length>0);const t=this.stateStack[this.stateStack.length-1];Rs(this.gl,t),this.stateStack.pop()}_updateCache(t){let e,n=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const i in t){Ki(void 0!==i);const s=t[i],o=this.cache[i];Cs(s,o)||(n=!0,e=o,r&&!(i in r)&&(r[i]=o),this.cache[i]=s)}return{valueChanged:n,oldValue:e}}}function Os(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:n=!0,copyState:r}=e;if(Ki(void 0!==r),!t.state){const{polyfillContext:e}=globalThis;e&&e(t),t.state=new Ls(t,{copyState:r}),As(t);for(const e in Ms)Ts(t,e,Ms[e]);ks(t,"getParameter"),ks(t,"isEnabled")}return t.state.enable=n,t}function Is(t){Ki(t.state),t.state.pop()}function Rs(t,e){if(Ki(Ji(t),"setParameters requires a WebGL context"),Es(e))return;const n={};for(const r in e){const i=Number(r),s=_s[r];s&&("string"==typeof s?n[s]=!0:s(t,e[r],i))}const r=t.state&&t.state.cache;if(r)for(const i in n)(0,xs[i])(t,e,r)}function zs(t,e,n){if(Es(e))return n(t);const{nocatch:r=!0}=e;let i;if(function(t){t.state||Os(t,{copyState:!1}),t.state.push()}(t),Rs(t,e),r)i=n(t),Is(t);else try{i=n(t)}finally{Is(t)}return i}function Fs(t){const{luma:e}=t;if(t.canvas&&e){const{clientWidth:n}=e.canvasSizeInfo;return n?t.drawingBufferWidth/n:1}return 1}function Ns(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Fs(t),i=t.drawingBufferWidth,s=t.drawingBufferHeight;return Ds(e,r,i,s,n)}function js(t){const e="undefined"==typeof window?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function Ds(t,e,n,r,i){const s=Bs(t[0],e,n);let o=Us(t[1],e,r,i),a=Bs(t[0]+1,e,n);const l=a===n-1?a:a-1;let u;return a=Us(t[1]+1,e,r,i),i?(a=0===a?a:a+1,u=o,o=a):u=a===r-1?a:a-1,{x:s,y:o,width:Math.max(l-s+1,1),height:Math.max(u-o+1,1)}}function Bs(t,e,n){return Math.min(Math.round(t*e),n-1)}function Us(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const Vs=Ht(),Ws=Vs&&"undefined"!=typeof document,Gs={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function Hs(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ki(Vs,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),t=Object.assign({},Gs,t);const{width:e,height:n}=t;function r(e){if(t.throwOnError)throw new Error(e);return console.error(e),null}let i;t.onError=r;const{canvas:s}=t,o=Zs({canvas:s,width:e,height:n,onError:r});return i=Xs(o,t),i?(i=qs(i,t),Ys(i),i):null}function qs(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||$s(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},Gs,e);const{manageState:n,debug:r}=e;return n&&Os(t,{copyState:!1,log:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Qi.log(1,...e)()}}),Vs&&r&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),Qi.level=Math.max(Qi.level,1)):Qi.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function Xs(t,e){const{onError:n}=e;let r=null;const i=t=>r=t.statusMessage||r;t.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let a=null;return o&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),s&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",i,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n("Failed to create ".concat(o&&!s?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function Zs(t){let e,{canvas:n,width:r=800,height:i=600,onError:s}=t;return"string"==typeof n?(Ws&&"complete"===document.readyState||s("createGLContext called on canvas '".concat(n,"' before page was loaded")),e=document.getElementById(n)):n?e=n:(e=document.createElement("canvas"),e.id="lumagl-canvas",e.style.width=Number.isFinite(r)?"".concat(r,"px"):"100%",e.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(e,document.body.firstChild)),e}function Ys(t){const e=ts(t)?"WebGL2":"WebGL1",n=function(t){const e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info");return{vendor:r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=t.debug?" debug":"";Qi.info(1,"".concat(e).concat(i," context ").concat(r))()}function $s(t){return"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext?2:1}function Qs(t,e,n){let r="width"in n?n.width:t.canvas.clientWidth,i="height"in n?n.height:t.canvas.clientHeight;r&&i||(Qi.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,i=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const s=t.luma.canvasSizeInfo;if(s.clientWidth!==r||s.clientHeight!==i||s.devicePixelRatio!==e){let n=e;const s=Math.floor(r*n),o=Math.floor(i*n);t.canvas.width=s,t.canvas.height=o,t.drawingBufferWidth===s&&t.drawingBufferHeight===o||(Qi.warn("Device pixel ratio clamped")(),n=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*n),t.canvas.height=Math.floor(i*n)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}const Ks="8.5.16";class Js{constructor(){this.stats=new Map}get(t){return this.stats.has(t)||this.stats.set(t,new we({id:t})),this.stats.get(t)}}const to=new Js;if(globalThis.luma&&globalThis.luma.VERSION!==Ks)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(Ks));function eo(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function no(t,e){if("string"!=typeof e)return e;const n=Number(e);if(!isNaN(n))return n;const r=t[e=e.replace(/^.*\./,"")];return eo(void 0!==r,"Accessing undefined constant GL.".concat(e)),r}function ro(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}globalThis.luma||(Ht()&&Qi.log(1,"luma.gl ".concat(Ks," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:Ks,version:Ks,log:Qi,stats:to,globals:{modules:{},nodeIO:{}}}),globalThis.luma;const io={};function so(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";io[t]=io[t]||1;const e=io[t]++;return"".concat(t,"-").concat(e)}function oo(t){return eo("number"==typeof t,"Input must be a number"),t&&0==(t&t-1)}function ao(t){let e=!0;for(const n in t){e=!1;break}return e}function lo(t,e,n,r){const i="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),s=Object.getPrototypeOf(t);r.forEach((t=>{s.methodName||(s[t]=()=>{throw Qi.removed("Calling removed method ".concat(e,".").concat(t,": "),i)(),new Error(t)})}))}const uo="Resource subclass must define virtual methods";class co{get[Symbol.toStringTag](){return"Resource"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};es(t);const{id:n,userData:r={}}=e;this.gl=t,this.gl2=t,this.id=n||so(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=e.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._initStats(),this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,e&&t&&e.filter(Boolean).forEach((t=>t.delete())),this}bind(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t)}unbind(){this.bind(null)}getParameter(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};eo(t=no(this.gl,t));const n=(this.constructor.PARAMETERS||{})[t];if(n){const t=ts(this.gl);if("webgl2"in n&&!t||"extension"in n&&!this.gl.getExtension(n.extension)){const e=n.webgl1,r="webgl2"in n?n.webgl2:n.webgl1;return t?r:e}}return this._getParameter(t,e)}getParameters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:e,keys:n}=t,r=this.constructor.PARAMETERS||{},i=ts(this.gl),s={},o=e||Object.keys(r);for(const e of o){const o=r[e];if(o&&(!("webgl2"in o)||i)&&(!("extension"in o)||this.gl.getExtension(o.extension))){const r=n?ro(this.gl,e):e;s[r]=this.getParameter(e,t),n&&"GLenum"===o.type&&(s[r]=ro(this.gl,s[r]))}}return s}setParameter(t,e){eo(t=no(this.gl,t));const n=(this.constructor.PARAMETERS||{})[t];if(n){const t=ts(this.gl);if("webgl2"in n&&!t||"extension"in n&&!this.gl.getExtension(n.extension))throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(e=no(e))}return this._setParameter(t,e),this}setParameters(t){for(const e in t)this.setParameter(e,t[e]);return this}stubRemovedMethods(t,e,n){return lo(this,t,e,n)}initialize(t){}_createHandle(){throw new Error(uo)}_deleteHandle(){throw new Error(uo)}_bindHandle(t){throw new Error(uo)}_getOptsFromHandle(){throw new Error(uo)}_getParameter(t,e){throw new Error(uo)}_setParameter(t,e){throw new Error(uo)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_initStats(){this.gl.stats=this.gl.stats||new Js}_addStats(){const t=this[Symbol.toStringTag],e=to.get("Resource Counts");e.get("Resources Created").incrementCount(),e.get("".concat(t,"s Created")).incrementCount(),e.get("".concat(t,"s Active")).incrementCount()}_removeStats(){const t=this[Symbol.toStringTag];to.get("Resource Counts").get("".concat(t,"s Active")).decrementCount()}_trackAllocatedMemory(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._doTrackAllocatedMemory(t,e),this._doTrackAllocatedMemory(t,e,this.gl.stats.get("Memory Usage"))}_doTrackAllocatedMemory(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:to.get("Memory Usage");n.get("GPU Memory").addCount(t),n.get("".concat(e," Memory")).addCount(t),this.byteLength=t}_trackDeallocatedMemory(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._doTrackDeallocatedMemory(t),this._doTrackDeallocatedMemory(t,this.gl.stats.get("Memory Usage"))}_doTrackDeallocatedMemory(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:to.get("Memory Usage");e.get("GPU Memory").subtractCount(this.byteLength),e.get("".concat(t," Memory")).subtractCount(this.byteLength),this.byteLength=0}}function ho(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error("Failed to deduce GL constant from typed array")}}function fo(t){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function po(t){let{data:e,width:n,height:r,bytesPerPixel:i=4,temp:s}=t;const o=n*i;s=s||new Uint8Array(o);for(let t=0;t<r/2;++t){const n=t*o,i=(r-t-1)*o;s.set(e.subarray(n,n+o)),e.copyWithin(n,i,i+o),e.set(s,i)}}function go(t){let{data:e,width:n,height:r}=t;const i=Math.round(n/2),s=Math.round(r/2),o=new Uint8Array(i*s*4);for(let t=0;t<s;t++)for(let r=0;r<i;r++)for(let s=0;s<4;s++)o[4*(t*i+r)+s]=e[4*(2*t*n+2*r)+s];return{data:o,width:i,height:s}}function mo(t,e,n){const{removedProps:r={},deprecatedProps:i={},replacedProps:s={}}=n;for(const n in r)if(n in e){const e=r[n]?"".concat(t,".").concat(r[n]):"N/A";Qi.removed("".concat(t,".").concat(n),e)()}for(const n in i)if(n in e){const e=i[n];Qi.deprecated("".concat(t,".").concat(n),"".concat(t,".").concat(e))()}let o=null;for(const n in s)if(n in e){const r=s[n];Qi.deprecated("".concat(t,".").concat(n),"".concat(t,".").concat(r))(),o=o||Object.assign({},e),o[r]=e[n],delete o[n]}return o||e}const vo={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},yo={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class bo{static getBytesPerElement(t){return fo(t.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(t){return eo(t.size),fo(t.type||5126).BYTES_PER_ELEMENT*t.size}static resolve(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new bo(...[vo,...e])}constructor(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((t=>this._assign(t))),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return bo.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return bo.getBytesPerVertex(this)}_assign(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=mo("Accessor",t,yo),void 0!==t.type&&(this.type=t.type,5124!==t.type&&5125!==t.type||(this.integer=!0)),void 0!==t.size&&(this.size=t.size),void 0!==t.offset&&(this.offset=t.offset),void 0!==t.stride&&(this.stride=t.stride),void 0!==t.normalized&&(this.normalized=t.normalized),void 0!==t.integer&&(this.integer=t.integer),void 0!==t.divisor&&(this.divisor=t.divisor),void 0!==t.buffer&&(this.buffer=t.buffer),void 0!==t.index&&("boolean"==typeof t.index?this.index=t.index?1:0:this.index=t.index),void 0!==t.instanced&&(this.divisor=t.instanced?1:0),void 0!==t.isInstanced&&(this.divisor=t.isInstanced?1:0),this}}const _o={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},wo={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:_o},xo={removedProps:_o};class Mo extends co{get[Symbol.toStringTag](){return"Buffer"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=e.target||(this.gl.webgl2?36662:34962),this.initialize(e),Object.seal(this)}getElementCount(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/bo.getBytesPerElement(t))}getVertexCount(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/bo.getBytesPerVertex(t))}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=mo("Buffer",t,wo),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}setProps(t){return"accessor"in(t=mo("Buffer",t,xo))&&this.setAccessor(t.accessor),this}setAccessor(t){return delete(t=Object.assign({},t)).buffer,this.accessor=new bo(t),this}reallocate(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}setData(t){return this.initialize(t)}subData(t){ArrayBuffer.isView(t)&&(t={data:t});const{data:e,offset:n=0,srcOffset:r=0}=t,i=t.byteLength||t.length;eo(e);const s=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(s,this.handle),0!==r||void 0!==i?(ns(this.gl),this.gl.bufferSubData(this.target,n,e,r,i)):this.gl.bufferSubData(s,n,e),this.gl.bindBuffer(s,null),this.debugData=null,this._inferType(e),this}copyData(t){let{sourceBuffer:e,readOffset:n=0,writeOffset:r=0,size:i}=t;const{gl:s}=this;return ns(s),s.bindBuffer(36662,e.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,n,r,i),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:t=null,srcByteOffset:e=0,dstOffset:n=0,length:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ns(this.gl);const i=fo(this.accessor.type||5126,{clamped:!1}),s=this._getAvailableElementCount(e),o=n;let a,l;t?(l=t.length,a=l-o):(a=Math.min(s,r||s),l=o+a);const u=Math.min(s,a);return r=r||u,eo(r<=u),t=t||new i(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,e,t,n,r),this.gl.bindBuffer(36662,null),t}bind(){let{target:t=this.target,index:e=this.accessor&&this.accessor.index,offset:n=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===t||35982===t?void 0!==r?this.gl.bindBufferRange(t,e,this.handle,n,r):(eo(0===n),this.gl.bindBufferBase(t,e,this.handle)):this.gl.bindBuffer(t,this.handle),this}unbind(){let{target:t=this.target,index:e=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===t||35982===t?this.gl.bindBufferBase(t,e,null):this.gl.bindBuffer(t,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.byteLength+e;eo(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,this.usage),this.gl.bufferSubData(r,e,t),this.gl.bindBuffer(r,null),this.debugData=t.slice(0,10),this.bytesUsed=n,this._trackAllocatedMemory(n);const i=ho(t);return eo(i),this.setAccessor(new bo(this.accessor,{type:i})),this}_setByteLength(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;eo(t>=0),this._trackDeallocatedMemory();let n=t;0===t&&(n=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,e),this.gl.bindBuffer(r,null),this.usage=e,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(t){const e=t/fo(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-e}_inferType(t){this.accessor.type||this.setAccessor(new bo(this.accessor,{type:ho(t)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(t){this.gl.bindBuffer(this.target,this.handle);const e=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),e}get type(){return Qi.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return Qi.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(t){return Qi.deprecated("setByteLength","reallocate")(),this.reallocate(t)}updateAccessor(t){return Qi.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new bo(this.accessor,t),this}}const So={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},Po={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},Eo={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},Co=[9729,9728],ko=globalThis.WebGLBuffer||function(){};class To extends co{get[Symbol.toStringTag](){return"Texture"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:n,linearFiltering:r}=e;let i=!0;return n&&(i=i&&function(t,e){const n=So[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;const r=ts(t)&&n.gl2||n.gl1;return"string"==typeof r?t.getExtension(r):r}(t,n),i=i&&(!r||function(t,e){const n=So[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}(t,n))),i}constructor(t,e){const{id:n=so("texture"),handle:r,target:i}=e;super(t,{id:n,handle:r}),this.target=i,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data;if(e instanceof Promise)return e.then((e=>this.initialize(Object.assign({},t,{pixels:e,data:e})))),this;const n="undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement;if(n&&e.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,e.addEventListener("loadeddata",(()=>this.initialize(t))),this;const{pixels:r=null,format:i=6408,border:s=0,recreate:o=!1,parameters:a={},pixelStore:l={},textureUnit:u}=t;e||(e=r);let{width:c,height:h,dataFormat:d,type:f,compressed:p=!1,mipmaps:g=!0}=t;const{depth:m=0}=t;return({width:c,height:h,compressed:p,dataFormat:d,type:f}=this._deduceParameters({format:i,type:f,dataFormat:d,compressed:p,data:e,width:c,height:h})),this.width=c,this.height=h,this.depth=m,this.format=i,this.type=f,this.dataFormat=d,this.border=s,this.textureUnit=u,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),g&&this._isNPOT()&&(Qi.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),g=!1,this._updateForNPOT(a)),this.mipmaps=g,this.setImageData({data:e,width:c,height:h,depth:m,format:i,type:f,dataFormat:d,border:s,mipmaps:g,parameters:l,compressed:p}),g&&this.generateMipmap(),this.setParameters(a),o&&(this.data=e),n&&(this._video={video:e,parameters:a,lastTime:e.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?e.currentTime:-1}),this}update(){if(this._video){const{video:t,parameters:e,lastTime:n}=this._video;if(n===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:e}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}resize(t){let{height:e,width:n,mipmaps:r=!1}=t;return n!==this.width||e!==this.height?this.initialize({width:n,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(Qi.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),zs(this.gl,t,(()=>{this.gl.generateMipmap(this.target)})),this.gl.bindTexture(this.target,null),this)}setImageData(t){this._trackDeallocatedMemory("Texture");const{target:e=this.target,pixels:n=null,level:r=0,format:i=this.format,border:s=this.border,offset:o=0,parameters:a={}}=t;let{data:l=null,type:u=this.type,width:c=this.width,height:h=this.height,dataFormat:d=this.dataFormat,compressed:f=!1}=t;l||(l=n),({type:u,dataFormat:d,compressed:f,width:c,height:h}=this._deduceParameters({format:i,type:u,dataFormat:d,compressed:f,data:l,width:c,height:h}));const{gl:p}=this;p.bindTexture(this.target,this.handle);let g,m=null;({data:l,dataType:m}=this._getDataType({data:l,compressed:f}));let v=0;if(zs(this.gl,a,(()=>{switch(m){case"null":p.texImage2D(e,r,i,c,h,s,d,u,l);break;case"typed-array":p.texImage2D(e,r,i,c,h,s,d,u,l,o);break;case"buffer":g=ns(p),g.bindBuffer(35052,l.handle||l),g.texImage2D(e,r,i,c,h,s,d,u,o),g.bindBuffer(35052,null);break;case"browser-object":ts(p)?p.texImage2D(e,r,i,c,h,s,d,u,l):p.texImage2D(e,r,i,d,u,l);break;case"compressed":for(const[t,n]of l.entries())p.compressedTexImage2D(e,t,n.format,n.width,n.height,s,n.data),v+=n.levelSize;break;default:eo(!1,"Unknown image data type")}})),"compressed"===m)this._trackAllocatedMemory(v,"Texture");else if(l&&l.byteLength)this._trackAllocatedMemory(l.byteLength,"Texture");else{const t=Po[this.dataFormat]||4,e=Eo[this.type]||1;this._trackAllocatedMemory(this.width*this.height*t*e,"Texture")}return this.loaded=!0,this}setSubImageData(t){let{target:e=this.target,pixels:n=null,data:r=null,x:i=0,y:s=0,width:o=this.width,height:a=this.height,level:l=0,format:u=this.format,type:c=this.type,dataFormat:h=this.dataFormat,compressed:d=!1,offset:f=0,border:p=this.border,parameters:g={}}=t;if(({type:c,dataFormat:h,compressed:d,width:o,height:a}=this._deduceParameters({format:u,type:c,dataFormat:h,compressed:d,data:r,width:o,height:a})),eo(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=n),r&&r.data){const t=r;r=t.data,o=t.shape[0],a=t.shape[1]}r instanceof Mo&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),zs(this.gl,g,(()=>{if(d)this.gl.compressedTexSubImage2D(e,l,i,s,o,a,u,r);else if(null===r)this.gl.texSubImage2D(e,l,i,s,o,a,h,c,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(e,l,i,s,o,a,h,c,r,f);else if(r instanceof ko){const t=ns(this.gl);t.bindBuffer(35052,r),t.texSubImage2D(e,l,i,s,o,a,h,c,f),t.bindBuffer(35052,null)}else ts(this.gl)?ns(this.gl).texSubImage2D(e,l,i,s,o,a,h,c,r):this.gl.texSubImage2D(e,l,i,s,h,c,r)})),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return Qi.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,this.handle),t}unbind(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,null),t}_getDataType(t){let{data:e,compressed:n=!1}=t;return n?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof Mo?{data:e.handle,dataType:"buffer"}:e instanceof ko?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}_deduceParameters(t){const{format:e,data:n}=t;let{width:r,height:i,dataFormat:s,type:o,compressed:a}=t;const l=So[e];return s=s||l&&l.dataFormat,o=o||l&&l.types[0],a=a||l&&l.compressed,({width:r,height:i}=this._deduceImageSize(n,r,i)),{dataFormat:s,type:o,compressed:a,width:r,height:i,format:e,data:n}}_deduceImageSize(t,e,n){let r;return r="undefined"!=typeof ImageData&&t instanceof ImageData?{width:t.width,height:t.height}:"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?{width:t.width,height:t.height}:"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t?{width:e,height:n}:{width:e>=0?e:1,height:n>=0?n:1},eo(r,"Could not deduced texture size"),eo(void 0===e||r.width===e,"Deduced texture width does not match supplied width"),eo(void 0===n||r.height===n,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const e=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),e}}_setParameter(t,e){switch(this.gl.bindTexture(this.target,this.handle),e=this._getNPOTParam(t,e),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,e);break;case 4096:case 4097:eo(!1);break;default:this.gl.texParameteri(this.target,t,e)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(ts(this.gl)||!this.width||!this.height||oo(this.width)&&oo(this.height))}_updateForNPOT(t){void 0===t[this.gl.TEXTURE_MIN_FILTER]&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===t[this.gl.TEXTURE_WRAP_S]&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===t[this.gl.TEXTURE_WRAP_T]&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(t,e){if(this._isNPOT())switch(t){case 10241:-1===Co.indexOf(e)&&(e=9729);break;case 10242:case 10243:33071!==e&&(e=33071)}return e}}class Ao extends To{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(t,e){return To.isSupported(t,e)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;es(t),(e instanceof Promise||"string"==typeof e)&&(e={data:e}),"string"==typeof e.data&&(e=Object.assign({},e,{data:(n=e.data,eo("string"==typeof n),n=""+n,new Promise(((t,e)=>{try{const r=new Image;r.onload=()=>t(r),r.onerror=()=>e(new Error("Could not load image ".concat(n,"."))),r.crossOrigin="anonymous",r.src=n}catch(t){e(t)}})))})),super(t,Object.assign({},e,{target:3553})),this.initialize(e),Object.seal(this)}}const Lo="EXT_color_buffer_float",Oo={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Lo,bpp:2},33327:{gl2:Lo,bpp:4},34842:{gl2:Lo,bpp:8},33326:{gl2:Lo,bpp:4},33328:{gl2:Lo,bpp:8},34836:{gl2:Lo,bpp:16},35898:{gl2:Lo,bpp:4}};class Io extends co{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(t){let{format:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!e||function(t,e,n){const r=n[e];if(!r)return!1;const i=ts(t)&&r.gl2||r.gl1;return"string"==typeof i?t.getExtension(i):i}(t,e,Oo)}static getSamplesForFormat(t,e){let{format:n}=e;return t.getInternalformatParameter(36161,n,32937)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.initialize(e),Object.seal(this)}initialize(t){let{format:e,width:n=1,height:r=1,samples:i=0}=t;return eo(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==i&&ts(this.gl)?this.gl.renderbufferStorageMultisample(36161,i,e,n,r):this.gl.renderbufferStorage(36161,e,n,r),this.format=e,this.width=n,this.height=r,this.samples=i,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*Oo[this.format].bpp),this}resize(t){let{width:e,height:n}=t;return e!==this.width||n!==this.height?this.initialize({width:e,height:n,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(t){this.gl.bindRenderbuffer(36161,t)}_syncHandle(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(t){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,t)}}const Ro=6144,zo=6145,Fo=6146,No=34041,jo="clear: bad arguments";function Do(t){let{framebuffer:e=null,color:n=null,depth:r=null,stencil:i=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s={};e&&(s.framebuffer=e);let o=0;n&&(o|=16384,!0!==n&&(s.clearColor=n)),r&&(o|=256,!0!==r&&(s.clearDepth=r)),i&&(o|=1024,!0!==r&&(s.clearStencil=r)),eo(0!==o,jo),zs(t,s,(()=>{t.clear(o)}))}const Bo=[34069,34070,34071,34072,34073,34074];class Uo extends To{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};es(t),super(t,Object.assign({},e,{target:34067})),this.initialize(e),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:e=!0,parameters:n={}}=t;return this.opts=t,this.setCubeMapImageData(t).then((()=>{this.loaded=!0,e&&this.generateMipmap(t),this.setParameters(n)})),this}subImage(t){let{face:e,data:n,x:r=0,y:i=0,mipmapLevel:s=0}=t;return this._subImage({target:e,data:n,x:r,y:i,mipmapLevel:s})}async setCubeMapImageData(t){let{width:e,height:n,pixels:r,data:i,border:s=0,format:o=6408,type:a=5121}=t;const{gl:l}=this,u=r||i,c=await Promise.all(Bo.map((t=>{const e=u[t];return Promise.all(Array.isArray(e)?e:[e])})));this.bind(),Bo.forEach(((t,r)=>{c[r].length>1&&!1!==this.opts.mipmaps&&Qi.warn("".concat(this.id," has mipmap and multiple LODs."))(),c[r].forEach(((r,i)=>{e&&n?l.texImage2D(t,i,o,e,n,s,o,a,r):l.texImage2D(t,i,o,o,a,r)}))})),this.unbind()}setImageDataForFace(t){const{face:e,width:n,height:r,pixels:i,data:s,border:o=0,format:a=6408,type:l=5121}=t,{gl:u}=this,c=i||s;return this.bind(),c instanceof Promise?c.then((n=>this.setImageDataForFace(Object.assign({},t,{face:e,data:n,pixels:n})))):this.width||this.height?u.texImage2D(e,0,a,n,r,o,a,l,c):u.texImage2D(e,0,a,a,l,c),this}}Uo.FACES=Bo;class Vo extends To{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(t){return ts(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ns(t),e=Object.assign({depth:1},e,{target:32879,unpackFlipY:!1}),super(t,e),this.initialize(e),Object.seal(this)}setImageData(t){let{level:e=0,dataFormat:n=6408,width:r,height:i,depth:s=1,border:o=0,format:a,type:l=5121,offset:u=0,data:c,parameters:h={}}=t;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),zs(this.gl,h,(()=>{ArrayBuffer.isView(c)&&this.gl.texImage3D(this.target,e,n,r,i,s,o,a,l,c),c instanceof Mo&&(this.gl.bindBuffer(35052,c.handle),this.gl.texImage3D(this.target,e,n,r,i,s,o,a,l,u))})),c&&c.byteLength)this._trackAllocatedMemory(c.byteLength,"Texture");else{const t=Po[this.dataFormat]||4,e=Eo[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*t*e,"Texture")}return this.loaded=!0,this}}function Wo(t,e){eo(t instanceof Ao||t instanceof Uo||t instanceof Vo);const n=t.constructor,{gl:r,width:i,height:s,format:o,type:a,dataFormat:l,border:u,mipmaps:c}=t;return new n(r,Object.assign({width:i,height:s,format:o,type:a,dataFormat:l,border:u,mipmaps:c},e))}function Go(t,e){const{gl:n,width:r,height:i,id:s}=t;return new ea(n,Object.assign({},e,{id:"framebuffer-for-".concat(s),width:r,height:i,attachments:{36064:t}}))}function Ho(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:l,sourceType:u}=e;const{framebuffer:c,deleteFramebuffer:h}=Xo(t);eo(c);const{gl:d,handle:f,attachments:p}=c;a=a||c.width,l=l||c.height,36064===s&&null===f&&(s=1028),eo(p[s]),u=u||p[s].type,o=Zo(o,u,i,a,l),u=u||ho(o);const g=d.bindFramebuffer(36160,f);return d.readPixels(n,r,a,l,i,u,o),d.bindFramebuffer(36160,g||null),h&&c.delete(),o}function qo(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Ho(t,{sourceAttachment:e}),{width:i,height:s}=t;for(;s>n;)({data:r,width:i,height:s}=go({data:r,width:i,height:s}));po({data:r,width:i,height:s});const o=document.createElement("canvas");o.width=i,o.height=s;const a=o.getContext("2d"),l=a.createImageData(i,s);return l.data.set(r),a.putImageData(l,0,0),o.toDataURL()}function Xo(t){return t instanceof ea?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:Go(t),deleteFramebuffer:!0}}function Zo(t,e,n,r,i){if(t)return t;const s=fo(e=e||5121,{clamped:!1}),o=function(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return eo(!1),0}}(n);return new s(r*i*o)}const Yo="TIMER_QUERY",$o="ELEMENT_INDEX_UINT32",Qo={WEBGL2:[!1,!0],VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],[Yo]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],[$o]:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],FLOAT_BLEND:["EXT_float_blend"],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:[function(t){const e=new Ao(t,{format:6408,type:5126,dataFormat:6408}),n=new ea(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),r=n.getStatus();return e.delete(),n.delete(),36053===r},"EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:["EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]};function Ko(t,e){return(e=Array.isArray(e)?e:[e]).every((e=>Jo(t,e)))}function Jo(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function(t,e){const n=Qo[e];let r;eo(n,e);const i=ts(t)&&n[1]||n[0];if("function"==typeof i)r=i(t);else if(Array.isArray(i)){r=!0;for(const e of i)r=r&&Boolean(t.getExtension(e))}else"string"==typeof i?r=Boolean(t.getExtension(i)):"boolean"==typeof i?r=i:eo(!1);return r}(t,e)),t.luma.caps[e]||Qi.log(2,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}const ta="Multiple render targets not supported";class ea extends co{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:n,colorBufferHalfFloat:r}=e;let i=!0;return n&&(i=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),r&&(i=i&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),i}static getDefaultFramebuffer(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new ea(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const t=ns(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const t=ns(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(e),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(t){let{width:e=1,height:n=1,attachments:r=null,color:i=!0,depth:s=!0,stencil:o=!1,check:a=!0,readBuffer:l,drawBuffers:u}=t;if(eo(e>=0&&n>=0,"Width and height need to be integers"),this.width=e,this.height=n,r)for(const t in r){const i=r[t];(Array.isArray(i)?i[0]:i).resize({width:e,height:n})}else r=this._createDefaultAttachments(i,s,o,e,n);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:u}),r&&a&&this.checkStatus()}delete(){for(const t of this.ownResources)t.delete();return super.delete(),this}update(t){let{attachments:e={},readBuffer:n,drawBuffers:r,clearAttachments:i=!1,resizeAttachments:s=!0}=t;this.attach(e,{clearAttachments:i,resizeAttachments:s});const{gl:o}=this,a=o.bindFramebuffer(36160,this.handle);return n&&this._setReadBuffer(n),r&&this._setDrawBuffers(r),o.bindFramebuffer(36160,a||null),this}resize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:e,height:n}=t;if(null===this.handle)return eo(void 0===e&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===e&&(e=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),e!==this.width&&n!==this.height&&Qi.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(e,"x").concat(n))();for(const t in this.attachments)this.attachments[t].resize({width:e,height:n});return this.width=e,this.height=n,this}attach(t){let{clearAttachments:e=!1,resizeAttachments:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};e&&Object.keys(this.attachments).forEach((t=>{r[t]=null})),Object.assign(r,t);const i=this.gl.bindFramebuffer(36160,this.handle);for(const t in r){eo(void 0!==t,"Misspelled framebuffer binding point?");const e=Number(t),i=r[e];let s=i;if(s)if(s instanceof Io)this._attachRenderbuffer({attachment:e,renderbuffer:s});else if(Array.isArray(i)){const[t,n=0,r=0]=i;s=t,this._attachTexture({attachment:e,texture:t,layer:n,level:r})}else this._attachTexture({attachment:e,texture:s,layer:0,level:0});else this._unattach(e);n&&s&&s.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,i||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter((t=>!this.attachments[t])).forEach((t=>{delete this.attachments[t]}))}checkStatus(){const{gl:t}=this,e=this.getStatus();if(36053!==e)throw new Error(function(t){return(ea.STATUS||{})[t]||"Framebuffer error ".concat(t)}(e));return this}getStatus(){const{gl:t}=this,e=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,e||null),n}clear(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:e,depth:n,stencil:r,drawBuffers:i=[]}=t,s=this.gl.bindFramebuffer(36160,this.handle);return(e||n||r)&&Do(this.gl,{color:e,depth:n,stencil:r}),i.forEach(((t,e)=>{!function(t){let{framebuffer:e=null,buffer:n=Ro,drawBuffer:r=0,value:i=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ns(t),zs(t,{framebuffer:e},(()=>{switch(n){case Ro:switch(i.constructor){case Int32Array:t.clearBufferiv(n,r,i);break;case Uint32Array:t.clearBufferuiv(n,r,i);break;case Float32Array:default:t.clearBufferfv(n,r,i)}break;case zo:t.clearBufferfv(zo,0,[i]);break;case Fo:t.clearBufferiv(Fo,0,[i]);break;case No:const[e,s]=i;t.clearBufferfi(No,0,e,s);break;default:eo(!1,jo)}}))}(this.gl,{drawBuffer:e,value:t})})),this.gl.bindFramebuffer(36160,s||null),this}readPixels(){return Qi.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return Qi.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return Qi.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return Qi.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return Qi.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return Qi.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(t){let{attachments:e=[],x:n=0,y:r=0,width:i,height:s}=t;const o=ns(this.gl),a=o.bindFramebuffer(36008,this.handle);return 0===n&&0===r&&void 0===i&&void 0===s?o.invalidateFramebuffer(36008,e):o.invalidateFramebuffer(36008,e,n,r,i,s),o.bindFramebuffer(36008,a),this}getAttachmentParameter(t,e,n){let r=this._getAttachmentParameterFallback(e);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,t,e),this.gl.bindFramebuffer(36160,null)),n&&r>1e3&&(r=ro(this.gl,r)),r}getAttachmentParameters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const r={};for(const i of n)r[e?ro(this.gl,i):i]=this.getAttachmentParameter(t,i,e);return r}getParameters(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=Object.keys(this.attachments),n={};for(const r of e){const e=Number(r);n[t?ro(this.gl,e):e]=this.getAttachmentParameters(e,t)}return n}show(){return"undefined"!=typeof window&&window.open(qo(this),"luma-debug-texture"),this}log(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t>Qi.level||"undefined"==typeof window)return this;e=e||"Framebuffer ".concat(this.id);const n=qo(this,{targetMaxHeight:100});return Qi.image({logLevel:t,message:e,image:n},e)(),this}bind(){let{target:t=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(t,this.handle),this}unbind(){let{target:t=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(t,null),this}_createDefaultAttachments(t,e,n,r,i){let s=null;return t&&(s=s||{},s[36064]=new Ao(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:i,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(s[36064])),e&&n?(s=s||{},s[33306]=new Io(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(s[33306])):e?(s=s||{},s[36096]=new Io(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:i}),this.ownResources.push(s[36096])):n&&eo(!1),s}_unattach(t){const e=this.attachments[t];e&&(e instanceof Io?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}_attachRenderbuffer(t){let{attachment:e=36064,renderbuffer:n}=t;const{gl:r}=this;r.framebufferRenderbuffer(36160,e,36161,n.handle),this.attachments[e]=n}_attachTexture(t){let{attachment:e=36064,texture:n,layer:r,level:i}=t;const{gl:s}=this;switch(s.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:ns(s).framebufferTextureLayer(36160,e,n.target,i,r);break;case 34067:const t=function(t){return t<34069?t+34069:t}(r);s.framebufferTexture2D(36160,e,t,n.handle,i);break;case 3553:s.framebufferTexture2D(36160,e,3553,n.handle,i);break;default:eo(!1,"Illegal texture type")}s.bindTexture(n.target,null),this.attachments[e]=n}_setReadBuffer(t){const e=ts(n=this.gl)?n:null;var n;e?e.readBuffer(t):eo(36064===t||1029===t,ta),this.readBuffer=t}_setDrawBuffers(t){const{gl:e}=this,n=ns(e);if(n)n.drawBuffers(t);else{const n=e.getExtension("WEBGL_draw_buffers");n?n.drawBuffersWEBGL(t):eo(1===t.length&&(36064===t[0]||1029===t[0]),ta)}this.drawBuffers=t}_getAttachmentParameterFallback(t){const e=function(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in Qo)void 0===t.luma.caps[e]&&(t.luma.caps[e]=Jo(t,e));return t.luma.caps}(this.gl);switch(t){case 36052:return e.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return e.WEBGL2?null:8;case 33297:return e.WEBGL2?null:5125;case 33296:return e.WEBGL2||e.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(t){return this.gl.bindFramebuffer(36160,t)}}ea.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const na={5126:ma.bind(null,"uniform1fv",la,1,va),35664:ma.bind(null,"uniform2fv",la,2,va),35665:ma.bind(null,"uniform3fv",la,3,va),35666:ma.bind(null,"uniform4fv",la,4,va),5124:ma.bind(null,"uniform1iv",ua,1,va),35667:ma.bind(null,"uniform2iv",ua,2,va),35668:ma.bind(null,"uniform3iv",ua,3,va),35669:ma.bind(null,"uniform4iv",ua,4,va),35670:ma.bind(null,"uniform1iv",ua,1,va),35671:ma.bind(null,"uniform2iv",ua,2,va),35672:ma.bind(null,"uniform3iv",ua,3,va),35673:ma.bind(null,"uniform4iv",ua,4,va),35674:ma.bind(null,"uniformMatrix2fv",la,4,ya),35675:ma.bind(null,"uniformMatrix3fv",la,9,ya),35676:ma.bind(null,"uniformMatrix4fv",la,16,ya),35678:ga,35680:ga,5125:ma.bind(null,"uniform1uiv",ca,1,va),36294:ma.bind(null,"uniform2uiv",ca,2,va),36295:ma.bind(null,"uniform3uiv",ca,3,va),36296:ma.bind(null,"uniform4uiv",ca,4,va),35685:ma.bind(null,"uniformMatrix2x3fv",la,6,ya),35686:ma.bind(null,"uniformMatrix2x4fv",la,8,ya),35687:ma.bind(null,"uniformMatrix3x2fv",la,6,ya),35688:ma.bind(null,"uniformMatrix3x4fv",la,12,ya),35689:ma.bind(null,"uniformMatrix4x2fv",la,8,ya),35690:ma.bind(null,"uniformMatrix4x3fv",la,12,ya),35678:ga,35680:ga,35679:ga,35682:ga,36289:ga,36292:ga,36293:ga,36298:ga,36299:ga,36300:ga,36303:ga,36306:ga,36307:ga,36308:ga,36311:ga},ra={},ia={},sa={},oa=[0];function aa(t,e,n,r){1===e&&"boolean"==typeof t&&(t=t?1:0),Number.isFinite(t)&&(oa[0]=t,t=oa);const i=t.length;if(i%e&&Qi.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let s=r[i];s||(s=new n(i),r[i]=s);for(let e=0;e<i;e++)s[e]=t[e];return s}function la(t,e){return aa(t,e,Float32Array,ra)}function ua(t,e){return aa(t,e,Int32Array,ia)}function ca(t,e){return aa(t,e,Uint32Array,sa)}function ha(t,e,n){const r=na[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function da(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};const e=t.match(/([^[]*)(\[[0-9]+\])?/);if(!e||e.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:e[1],length:e[2]||1,isArray:Boolean(e[2])}}function fa(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function(t){if(0===t.length)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t):!!isFinite(t)||!0===t||!1===t||t instanceof To||t instanceof Io||t instanceof ea&&Boolean(t.texture)}function pa(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const r=t[e];for(let t=0,e=n.length;t<e;++t)r[t]=n[t]}else t[e]=n.slice();else t[e]=n}function ga(){let t=null;return(e,n,r)=>{const i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function ma(t,e,n,r){let i=null,s=null;return(o,a,l)=>{const u=e(l,n),c=u.length;let h=!1;if(null===i)i=new Float32Array(c),s=c,h=!0;else{eo(s===c,"Uniform length cannot change.");for(let t=0;t<c;++t)if(u[t]!==i[t]){h=!0;break}}return h&&(r(o,t,a,u),i.set(u)),h}}function va(t,e,n,r){t[e](n,r)}function ya(t,e,n,r){t[e](n,!1,r)}function ba(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=t.match(n);return r?r[1]:e}function _a(t,e){let n="";for(let r=0;r<e.length;r++){const i=e[r];if((t[r+3]||t[r+2]||t[r+1])&&(n+="".concat(i,"\n"),t[r+1])){const e=t[r+1],i=e.split(":",3),s=i[0],o=parseInt(i[1],10)||0,a=e.substring(i.join(":").length+1).trim();n+=wa("^^^ ".concat(s,": ").concat(a,"\n\n"),o)}}return n}function wa(t,e){let n="";for(let t=0;t<e;++t)n+=" ";return"".concat(n).concat(t)}class xa extends co{get[Symbol.toStringTag](){return"Shader"}static getTypeName(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return eo(!1),"unknown"}}constructor(t,e){es(t),eo("string"==typeof e.source,"Shader: GLSL source code must be a JavaScript string"),super(t,{id:ba(e.source,null)||e.id||so("unnamed ".concat(xa.getTypeName(e.shaderType)))}),this.shaderType=e.shaderType,this.source=e.source,this.initialize(e)}initialize(t){let{source:e}=t;const n=ba(e,null);n&&(this.id=so(n)),this._compile(e)}getParameter(t){return this.gl.getShaderParameter(this.handle,t)}toString(){return"".concat(xa.getTypeName(this.shaderType),":").concat(this.id)}getName(){return ba(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;if(t.startsWith("#version ")||(t="#version 100\n".concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const t=this.gl.getShaderInfoLog(this.handle),{shaderName:e,errors:n,warnings:r}=function(t,e,n,r){const i=t.split(/\r?\n/),s={},o={},a=r||ba(e)||"(unnamed)",l="".concat(function(t){switch(t){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(n)," shader ").concat(a);for(let e=0;e<i.length;e++){const n=i[e];if(n.length<=1)continue;const r=n.split(":"),a=r[0],u=parseInt(r[2],10);if(isNaN(u))throw new Error("GLSL compilation error in ".concat(l,": ").concat(t));"WARNING"!==a?s[u]=n:o[u]=n}const u=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map(((t,r)=>{const s=String(r+e),o=s.length;return wa(s,i-o)+n+t}))}(e);return{shaderName:l,errors:_a(s,u),warnings:_a(o,u)}}(t,this.source,this.shaderType,this.id);throw Qi.error("GLSL compilation errors in ".concat(e,"\n").concat(n))(),Qi.warn("GLSL compilation warnings in ".concat(e,"\n").concat(r))(),new Error("GLSL compilation errors in ".concat(e))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class Ma extends xa{get[Symbol.toStringTag](){return"VertexShader"}constructor(t,e){"string"==typeof e&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class Sa extends xa{get[Symbol.toStringTag](){return"FragmentShader"}constructor(t,e){"string"==typeof e&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const Pa=5126,Ea=5124,Ca=5125,ka={[Pa]:[Pa,1,"float"],35664:[Pa,2,"vec2"],35665:[Pa,3,"vec3"],35666:[Pa,4,"vec4"],[Ea]:[Ea,1,"int"],35667:[Ea,2,"ivec2"],35668:[Ea,3,"ivec3"],35669:[Ea,4,"ivec4"],[Ca]:[Ca,1,"uint"],36294:[Ca,2,"uvec2"],36295:[Ca,3,"uvec3"],36296:[Ca,4,"uvec4"],35670:[Pa,1,"bool"],35671:[Pa,2,"bvec2"],35672:[Pa,3,"bvec3"],35673:[Pa,4,"bvec4"],35674:[Pa,8,"mat2"],35685:[Pa,8,"mat2x3"],35686:[Pa,8,"mat2x4"],35675:[Pa,12,"mat3"],35687:[Pa,12,"mat3x2"],35688:[Pa,12,"mat3x4"],35676:[Pa,16,"mat4"],35689:[Pa,16,"mat4x2"],35690:[Pa,16,"mat4x3"]};function Ta(t){const e=ka[t];if(!e)return null;const[n,r]=e;return{type:n,components:r}}function Aa(t,e){switch(t){case 5120:case 5121:case 5122:case 5123:t=Pa}for(const n in ka){const[r,i,s]=ka[n];if(r===t&&i===e)return{glType:n,name:s}}return null}class La{constructor(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}getAttributeInfo(t){const e=Number(t);return Number.isFinite(e)?this.attributeInfosByLocation[e]:this.attributeInfosByName[t]||null}getAttributeLocation(t){const e=this.getAttributeInfo(t);return e?e.location:-1}getAttributeAccessor(t){const e=this.getAttributeInfo(t);return e?e.accessor:null}getVaryingInfo(t){const e=Number(t);return Number.isFinite(e)?this.varyingInfos[e]:this.varyingInfosByName[t]||null}getVaryingIndex(t){const e=this.getVaryingInfo();return e?e.location:-1}getVaryingAccessor(t){const e=this.getVaryingInfo();return e?e.accessor:null}_readAttributesFromProgram(t){const{gl:e}=t,n=e.getProgramParameter(t.handle,35721);for(let r=0;r<n;r++){const{name:n,type:i,size:s}=e.getActiveAttrib(t.handle,r),o=e.getAttribLocation(t.handle,n);o>=0&&this._addAttribute(o,n,i,s)}this.attributeInfos.sort(((t,e)=>t.location-e.location))}_readVaryingsFromProgram(t){const{gl:e}=t;if(!ts(e))return;const n=e.getProgramParameter(t.handle,35971);for(let r=0;r<n;r++){const{name:n,type:i,size:s}=e.getTransformFeedbackVarying(t.handle,r);this._addVarying(r,n,i,s)}this.varyingInfos.sort(((t,e)=>t.location-e.location))}_addAttribute(t,e,n,r){const{type:i,components:s}=Ta(n),o={type:i,size:r*s};this._inferProperties(t,e,o);const a={location:t,name:e,accessor:new bo(o)};this.attributeInfos.push(a),this.attributeInfosByLocation[t]=a,this.attributeInfosByName[a.name]=a}_inferProperties(t,e,n){/instance/i.test(e)&&(n.divisor=1)}_addVarying(t,e,n,r){const{type:i,components:s}=Ta(n),o={location:t,name:e,accessor:new bo({type:i,size:r*s})};this.varyingInfos.push(o),this.varyingInfosByName[o.name]=o}}const Oa=35981,Ia=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class Ra extends co{get[Symbol.toStringTag](){return"Program"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.stubRemovedMethods("Program","v6.0",Ia),this._isCached=!1,this.initialize(e),Object.seal(this),this._setId(e.id)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:e,vs:n,fs:r,varyings:i,bufferMode:s=Oa}=t;return this.hash=e||"",this.vs="string"==typeof n?new Ma(this.gl,{id:"".concat(t.id,"-vs"),source:n}):n,this.fs="string"==typeof r?new Sa(this.gl,{id:"".concat(t.id,"-fs"),source:r}):r,eo(this.vs instanceof Ma),eo(this.fs instanceof Sa),this.uniforms={},this._textureUniforms={},i&&i.length>0&&(ns(this.gl),this.varyings=i,this.gl2.transformFeedbackVaryings(this.handle,i,s)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new La(this),this.setProps(t)}delete(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:super.delete(t)}setProps(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}draw(t){let{logPriority:e,drawMode:n=4,vertexCount:r,offset:i=0,start:s,end:o,isIndexed:a=!1,indexType:l=5123,instanceCount:u=0,isInstanced:c=u>0,vertexArray:h=null,transformFeedback:d,framebuffer:f,parameters:p={},uniforms:g,samplers:m}=t;if((g||m)&&(Qi.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(g||{})),Qi.priority>=e){const t=f?f.id:"default",i="mode=".concat(ro(this.gl,n)," verts=").concat(r," ")+"instances=".concat(u," indexType=").concat(ro(this.gl,l)," ")+"isInstanced=".concat(c," isIndexed=").concat(a," ")+"Framebuffer=".concat(t);Qi.log(e,i)()}return eo(h),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||c&&0===u||(h.bindForDraw(r,u,(()=>{if(void 0!==f&&(p=Object.assign({},p,{framebuffer:f})),d){const t=function(t){switch(t){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return eo(!1),0}}(n);d.begin(t)}this._bindTextures(),zs(this.gl,p,(()=>{a&&c?this.gl2.drawElementsInstanced(n,r,l,i,u):a&&ts(this.gl)&&!isNaN(s)&&!isNaN(o)?this.gl2.drawRangeElements(n,s,o,r,l,i):a?this.gl.drawElements(n,r,l,i):c?this.gl2.drawArraysInstanced(n,i,r,u):this.gl.drawArrays(n,i,r)})),d&&d.end()})),0))}setUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Qi.priority>=2&&function(t,e,n){for(const r in t){const i=t[r];if((!n||Boolean(n[r]))&&!fa(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}}(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const e in t){const n=t[e],r=this._uniformSetters[e];if(r){let t=n,i=!1;if(t instanceof ea&&(t=t.texture),t instanceof To)if(i=this.uniforms[e]!==n,i){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const n=t,{textureIndex:i}=r;n.bind(i),t=i,this._textureUniforms[e]=n}else t=r.textureIndex;else this._textureUniforms[e]&&delete this._textureUniforms[e];(r(t)||i)&&pa(this.uniforms,e,n)}}return this}_areTexturesRenderable(){let t=!0;for(const e in this._textureUniforms){const n=this._textureUniforms[e];n.update(),t=t&&n.loaded}return t}_bindTextures(){for(const t in this._textureUniforms){const e=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(e)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(t){const e=this.gl.getAttachedShaders(t),n={};for(const t of e)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new Ma({handle:t});break;case 35632:n.fs=new Sa({handle:t})}return n}_getParameter(t){return this.gl.getProgramParameter(this.handle,t)}_setId(t){if(!t){const t=this._getName();this.id=so(t)}}_getName(){let t=this.vs.getName()||this.fs.getName();return t=t.replace(/shader/i,""),t=t?"".concat(t,"-program"):"program",t}_compileAndLink(){const{gl:t}=this;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),Qi.time(4,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),Qi.timeEnd(4,"linkProgram for ".concat(this._getName()))(),t.debug||Qi.level>0){if(!t.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));if(t.validateProgram(this.handle),!t.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:t}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let e=0;e<this._uniformCount;e++){const n=this.gl.getActiveUniform(this.handle,e),{name:r}=da(n.name);let i=t.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=ha(t,i,n),n.size>1)for(let e=0;e<n.size;e++)i=t.getUniformLocation(this.handle,"".concat(r,"[").concat(e,"]")),this._uniformSetters["".concat(r,"[").concat(e,"]")]=ha(t,i,n)}this._textureIndexCounter=0}getActiveUniforms(t,e){return this.gl2.getActiveUniforms(this.handle,t,e)}getUniformBlockIndex(t){return this.gl2.getUniformBlockIndex(this.handle,t)}getActiveUniformBlockParameter(t,e){return this.gl2.getActiveUniformBlockParameter(this.handle,t,e)}uniformBlockBinding(t,e){this.gl2.uniformBlockBinding(this.handle,t,e)}}class za{static getDefaultProgramManager(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new za(t),t.luma.defaultProgramManager}constructor(t){this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(t){this._defaultModules.find((e=>e.name===t.name))||this._defaultModules.push(t),this.stateHash++}removeDefaultModule(t){const e="string"==typeof t?t:t.name;this._defaultModules=this._defaultModules.filter((t=>t.name!==e)),this.stateHash++}addShaderHook(t,e){e&&(t=Object.assign(e,{hook:t})),this._hookFunctions.push(t),this.stateHash++}get(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:e="",fs:n="",defines:r={},inject:i={},varyings:s=[],bufferMode:o=35981,transpileToGLSL100:a=!1}=t,l=this._getModuleList(t.modules),u=this._getHash(e),c=this._getHash(n),h=l.map((t=>this._getHash(t.name))).sort(),d=s.map((t=>this._getHash(t))),f=Object.keys(r).sort(),p=Object.keys(i).sort(),g=[],m=[];for(const t of f)g.push(this._getHash(t)),g.push(this._getHash(r[t]));for(const t of p)m.push(this._getHash(t)),m.push(this._getHash(i[t]));const v="".concat(u,"/").concat(c,"D").concat(g.join("/"),"M").concat(h.join("/"),"I").concat(m.join("/"),"V").concat(d.join("/"),"H").concat(this.stateHash,"B").concat(o).concat(a?"T":"");if(!this._programCache[v]){const t=function(t,e){const{vs:n,fs:r}=e,i=_i(e.modules||[]);return{gl:t,vs:Yi(t,Object.assign({},e,{source:n,type:fi,modules:i})),fs:Yi(t,Object.assign({},e,{source:r,type:pi,modules:i})),getUniforms:$i(i)}}(this.gl,{vs:e,fs:n,modules:l,inject:i,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:a});this._programCache[v]=new Ra(this.gl,{hash:v,vs:t.vs,fs:t.fs,varyings:s,bufferMode:o}),this._getUniforms[v]=t.getUniforms||(t=>{}),this._useCounts[v]=0}return this._useCounts[v]++,this._programCache[v]}getUniforms(t){return this._getUniforms[t.hash]||null}release(t){const e=t.hash;this._useCounts[e]--,0===this._useCounts[e]&&(this._programCache[e].delete(),delete this._programCache[e],delete this._getUniforms[e],delete this._useCounts[e])}_getHash(t){return void 0===this._hashes[t]&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}_getModuleList(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const e=new Array(this._defaultModules.length+t.length),n={};let r=0;for(let t=0,i=this._defaultModules.length;t<i;++t){const i=this._defaultModules[t],s=i.name;e[r++]=i,n[s]=!0}for(let i=0,s=t.length;i<s;++i){const s=t[i],o=s.name;n[o]||(e[r++]=s,n[o]=!0)}return e.length=r,e}}const Fa="#define SMOOTH_EDGE_RADIUS 0.5",Na={name:"geometry",vs:"\n".concat(Fa,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(Fa,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},ja=Object.keys(ni).map((t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(ni[t],";"))).join(""),Da=Object.keys(ri).map((t=>"const int PROJECTION_MODE_".concat(t," = ").concat(ri[t],";"))).join(""),Ba=Object.keys(ii).map((t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(ii[t],";"))).join(""),Ua="".concat(ja,"\n").concat(Da,"\n").concat(Ba,'\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0; // meters\nconst float GLOBE_RADIUS = 256.0;\n\n// returns an adjustment factor for uCommonUnitsPerMeter\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n\n    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear\n    // Adjust by 1 / cos(latitude)\n    // If geometry.position (vertex in common space) is populated, use it\n    // Otherwise use geometry.worldPosition (anchor in world space)\n    \n    if (geometry.position.w == 0.0) {\n      float y = clamp(geometry.worldPosition.y, -89.9, 89.9);\n      return 1.0 / cos(radians(y));\n    }\n\n    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)\n    // Taylor series of 1 / cos(latitude)\n    // Max error < 0.003\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n//\n// Scaling offsets - scales meters to "world distance"\n// Note the scalar version of project_size is for scaling the z component only\n//\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\n\n// Get rotation matrix that aligns the z axis with the given up vector\n// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  // Tangent on XY plane\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n\n//\n// Projecting normal - transform deltas from current coordinate system to\n// normals in the worldspace\n//\nvec3 project_normal(vec3 vector) {\n  // Apply model matrix\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\n\n//\n// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]\n//\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\n\n//\n// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)\n//\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n\n  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size(position_world.z),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        // Too far from the projection center for offset mode to be accurate\n        // Only use high parts\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n\n  // Translation is already added to the high parts\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\n\n//\n// Projects from common space coordinates to clip space.\n// Uses project_uViewProjectionMatrix\n//\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\n\n// Returns a clip space offset that corresponds to a given number of screen pixels\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  // UNIT_PIXELS\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n');function Va(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function Wa(t){let e,n={};return r=>{for(const i in r)if(!Va(r[i],n[i])){e=t(r),n=r;break}return e}}const Ga=[0,0,0,0],Ha=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],qa=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Xa=[0,0,0],Za=[0,0,0],Ya=Wa((function({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:r}){const{projectionCenter:i,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:a,shaderCoordinateOrigin:l,geospatialOrigin:u}=function(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:i}=t;let{viewMatrix:s,viewProjectionMatrix:o}=t,a=Ga,l=Ga,u=t.cameraPosition;const{geospatialOrigin:c,shaderCoordinateOrigin:h,offsetMode:d}=$a(t,e,n);return d&&(l=t.projectPosition(c||h),u=[u[0]-l[0],u[1]-l[1],u[2]-l[2]],l[3]=1,a=Mr([],l,o),s=r||s,o=pr([],i,s),o=pr([],o,Ha)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:l,cameraPosCommon:u,shaderCoordinateOrigin:h,geospatialOrigin:c}}(t,n,r),c=t.getDistanceScales(),h=[t.width*e,t.height*e],d=Mr([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,f={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:o.slice(0,3),project_uCenter:i,project_uPseudoMeters:Boolean(t._pseudoMeters),project_uViewportSize:h,project_uDevicePixelRatio:e,project_uFocalDistance:d,project_uCommonUnitsPerMeter:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:Xa,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:qa,project_uCameraPosition:a};if(u){const e=t.getDistanceScales(u);switch(n){case ni.METER_OFFSETS:f.project_uCommonUnitsPerWorldUnit=e.unitsPerMeter,f.project_uCommonUnitsPerWorldUnit2=e.unitsPerMeter2;break;case ni.LNGLAT:case ni.LNGLAT_OFFSETS:t._pseudoMeters||(f.project_uCommonUnitsPerMeter=e.unitsPerMeter),f.project_uCommonUnitsPerWorldUnit=e.unitsPerDegree,f.project_uCommonUnitsPerWorldUnit2=e.unitsPerDegree2;break;case ni.CARTESIAN:f.project_uCommonUnitsPerWorldUnit=[1,1,e.unitsPerMeter[2]],f.project_uCommonUnitsPerWorldUnit2=[0,0,e.unitsPerMeter2[2]]}}return f}));function $a(t,e,n=Za){n.length<3&&(n=[n[0],n[1],0]);let r,i=n,s=!0;switch(r=e===ni.LNGLAT_OFFSETS||e===ni.METER_OFFSETS?n:t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case ri.WEB_MERCATOR:e!==ni.LNGLAT&&e!==ni.CARTESIAN||(r=[0,0,0],s=!1);break;case ri.WEB_MERCATOR_AUTO_OFFSET:e===ni.LNGLAT?i=r:e===ni.CARTESIAN&&(i=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],r=t.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case ri.IDENTITY:i=t.position.map(Math.fround),i[2]=i[2]||0;break;case ri.GLOBE:s=!1,r=null;break;default:s=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:s}}const Qa={},Ka={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},Na],vs:Ua,getUniforms:function(t=Qa){return"viewport"in t?function({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:r=ni.DEFAULT,coordinateOrigin:i=Za,autoWrapLongitude:s=!1}){r===ni.DEFAULT&&(r=t.isGeospatial?ni.LNGLAT:ni.CARTESIAN);const o=Ya({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:i});return o.project_uWrapLongitude=s,o.project_uModelMatrix=n||qa,o}(t):{}}},Ja=[Ka],tl=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function el(t){const e=za.getDefaultProgramManager(t);for(const t of Ja)e.addDefaultModule(t);for(const t of tl)e.addShaderHook(t);return e}class nl{constructor(t,{deck:e,stats:n,viewport:r,timeline:i}={}){Rt(this,"layers",void 0),Rt(this,"context",void 0),Rt(this,"resourceManager",void 0),Rt(this,"_lastRenderedLayers",[]),Rt(this,"_needsRedraw",!1),Rt(this,"_needsUpdate",!1),Rt(this,"_nextLayers",null),Rt(this,"_debug",!1),Rt(this,"activateViewport",(t=>{pe("layerManager.activateViewport",this,t),t&&(this.context.viewport=t)})),this.layers=[],this.resourceManager=new Bn({gl:t,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:t,deck:e,programManager:t&&el(t),stats:n||new we({id:"deck.gl"}),viewport:r||new di({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:i||new Nt,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const t of this.layers)this._finalizeLayer(t)}needsRedraw(t={clearRedrawFlags:!1}){let e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const r=n.getNeedsRedraw(t);e=e||r}return e}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(t){this._needsRedraw=this._needsRedraw||t}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t}getLayers({layerIds:t}={}){return t?this.layers.filter((e=>t.find((t=>0===e.id.indexOf(t))))):this.layers}setProps(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}setLayers(t,e){pe("layerManager.setLayers",this,e,t),this._lastRenderedLayers=t;const n=ge(t,Boolean);for(const t of n)t.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(this._nextLayers||this._lastRenderedLayers,t)),this._nextLayers=null}_handleError(t,e,n){n.raiseError(e,"".concat(t," of ").concat(n))}_updateLayers(t,e){const n={};for(const e of t)n[e.id]?de.warn("Multiple old layers with same id ".concat(e.id))():n[e.id]=e;const r=[];this._updateSublayersRecursively(e,n,r),this._finalizeOldLayers(n);let i=!1;for(const t of r)if(t.hasUniformTransition()){i="Uniform transition in ".concat(t);break}this._needsUpdate=i,this.layers=r}_updateSublayersRecursively(t,e,n){for(const r of t){r.context=this.context;const t=e[r.id];null===t&&de.warn("Multiple new layers with same id ".concat(r.id))(),e[r.id]=null;let i=null;try{this._debug&&t!==r&&r.validateProps(),t?(this._transferLayerState(t,r),this._updateLayer(r)):this._initializeLayer(r),n.push(r),i=r.isComposite?r.getSubLayers():null}catch(t){this._handleError("matching",t,r)}i&&this._updateSublayersRecursively(i,e,n)}}_finalizeOldLayers(t){for(const e in t){const n=t[e];n&&this._finalizeLayer(n)}}_initializeLayer(t){try{t._initialize(),t.lifecycle="Initialized"}catch(e){this._handleError("initialization",e,t)}}_transferLayerState(t,e){e._transferState(t),e.lifecycle="Matched. State transferred from previous layer",e!==t&&(t.lifecycle="Discarded. Awaiting garbage collection")}_updateLayer(t){try{t._update()}catch(e){this._handleError("update",e,t)}}_finalizeLayer(t){this._needsRedraw=this._needsRedraw||"finalized ".concat(t),t.lifecycle="No longer matched. Awaiting garbage collection";try{t._finalize(),t.lifecycle="Finalized! Awaiting garbage collection"}catch(e){this._handleError("finalization",e,t)}}}function rl(t,e){if(t===e)return!0;if(!t||!e)return!1;for(const n in t){const r=t[n],i=e[n];if(!(r===i||Array.isArray(r)&&Array.isArray(i)&&rl(r,i)))return!1}return!0}class il{constructor(t){Rt(this,"width",void 0),Rt(this,"height",void 0),Rt(this,"views",void 0),Rt(this,"viewState",void 0),Rt(this,"controllers",void 0),Rt(this,"timeline",void 0),Rt(this,"_viewports",void 0),Rt(this,"_viewportMap",void 0),Rt(this,"_isUpdating",void 0),Rt(this,"_needsRedraw",void 0),Rt(this,"_needsUpdate",void 0),Rt(this,"_eventManager",void 0),Rt(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}finalize(){for(const t in this.controllers){const e=this.controllers[t];e&&e.finalize()}this.controllers={}}needsRedraw(t={clearRedrawFlags:!1}){const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}updateViewStates(){for(const t in this.controllers){const e=this.controllers[t];e&&e.updateTransition()}}getViewports(t){return t?this._viewports.filter((e=>e.containsPixel(t))):this._viewports}getViews(){const t={};return this.views.forEach((e=>{t[e.id]=e})),t}getView(t){return this.views.find((e=>e.id===t))}getViewState(t){const e="string"==typeof t?this.getView(t):t,n=e&&this.viewState[e.getViewStateId()]||this.viewState;return e?e.filterViewState(n):n}getViewport(t){return this._viewportMap[t]}unproject(t,e){const n=this.getViewports(),r={x:t[0],y:t[1]};for(let i=n.length-1;i>=0;--i){const s=n[i];if(s.containsPixel(r)){const n=t.slice();return n[0]-=s.x,n[1]-=s.y,s.unproject(n,e)}}return null}setProps(t){t.views&&this._setViews(t.views),t.viewState&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(t,e){t===this.width&&e===this.height||(this.width=t,this.height=e,this.setNeedsUpdate("Size changed"))}_setViews(t){t=ge(t,Boolean),this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}_setViewState(t){t?(!rl(t,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=t):de.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(t,e){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...e,viewId:t})}_createController(t,e){return new(0,e.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,e.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:e=>t.makeViewport({viewState:e,width:this.width,height:this.height})})}_updateController(t,e,n,r){const i=t.controller;if(i){const s={...e,...i,id:t.id,x:n.x,y:n.y,width:n.width,height:n.height};return r||(r=this._createController(t,s)),r&&r.setProps(s),r}return null}_rebuildViewports(){const{views:t}=this,e=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let r=t.length;r--;){const i=t[r],s=this.getViewState(i),o=i.makeViewport({viewState:s,width:this.width,height:this.height});let a=e[i.id];const l=Boolean(i.controller);l&&!a&&(n=!0),!n&&l||!a||(a.finalize(),a=null),this.controllers[i.id]=this._updateController(i,s,o,a),this._viewports.unshift(o)}for(const t in e){const n=e[t];n&&!this.controllers[t]&&n.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach((t=>{t.id&&(this._viewportMap[t.id]=this._viewportMap[t.id]||t)}))}_diffViews(t,e){return t.length!==e.length||t.some(((n,r)=>!t[r].equals(e[r])))}}const sl=/([0-9]+\.?[0-9]*)(%|px)/;function ol(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=sl.exec(t);if(e&&e.length>=3){const t="%"===e[2],n=parseFloat(e[1]);return{position:t?n/100:n,relative:t}}default:throw new Error("Could not parse position string ".concat(t))}}function al(t,e){return t.relative?Math.round(t.position*e):t.position}function ll(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class ul{constructor(t){Rt(this,"id",void 0),Rt(this,"viewportInstance",void 0),Rt(this,"_x",void 0),Rt(this,"_y",void 0),Rt(this,"_width",void 0),Rt(this,"_height",void 0),Rt(this,"_padding",void 0),Rt(this,"props",void 0);const{id:e,x:n=0,y:r=0,width:i="100%",height:s="100%",padding:o=null,viewportInstance:a}=t||{};ll(!a||a instanceof di),this.viewportInstance=a,this.id=e||this.constructor.displayName||"view",this.props={...t,id:this.id},this._x=ol(n),this._y=ol(r),this._width=ol(i),this._height=ol(s),this._padding=o&&{left:ol(o.left||0),right:ol(o.right||0),top:ol(o.top||0),bottom:ol(o.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(t){return this===t||(this.viewportInstance?!!t.viewportInstance&&this.viewportInstance.equals(t.viewportInstance):this.ViewportType===t.ViewportType&&rl(this.props,t.props))}makeViewport({width:t,height:e,viewState:n}){if(this.viewportInstance)return this.viewportInstance;n=this.filterViewState(n);const r=this.getDimensions({width:t,height:e});return new this.ViewportType({...n,...this.props,...r})}getViewStateId(){const{viewState:t}=this.props;return"string"==typeof t?t:(null==t?void 0:t.id)||this.id}filterViewState(t){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const e={...t};for(const t in this.props.viewState)"id"!==t&&(e[t]=this.props.viewState[t]);return e}return t}getDimensions({width:t,height:e}){const n={x:al(this._x,t),y:al(this._y,e),width:al(this._width,t),height:al(this._height,e)};return this._padding&&(n.padding={left:al(this._padding.left,t),top:al(this._padding.top,e),right:al(this._padding.right,t),bottom:al(this._padding.bottom,e)}),n}get controller(){const t=this.props.controller;return t?!0===t?{type:this.ControllerType}:"function"==typeof t?{type:t}:{type:this.ControllerType,...t}:null}}const cl=Math.PI/180;function hl(t){return 512/4003e4/Math.cos(t*cl)}class dl extends di{constructor(t={}){const{latitude:e=0,longitude:n=0,zoom:r=0,pitch:i=0,bearing:s=0,nearZMultiplier:o=.1,farZMultiplier:a=1.01,orthographic:l=!1,projectionMatrix:u,repeat:c=!1,worldOffset:h=0,legacyMeterSizes:d=!1}=t;let{width:f,height:p,altitude:g=1.5}=t;const m=Math.pow(2,r);let v;f=f||1,p=p||1;let y=null;u?(g=u[5]/2,v=Yr(g)):(t.fovy?(v=t.fovy,g=$r(v)):v=Yr(g),y=function(t){const{width:e,height:n,altitude:r,pitch:i=0,offset:s,center:o,scale:a,nearZMultiplier:l=1,farZMultiplier:u=1}=t;let{fovy:c=Yr(Gr)}=t;void 0!==r&&(c=Yr(r));const h=c*Br,d=i*Br,f=$r(c);let p=f;o&&(p+=o[2]*a/Math.cos(d)/n);const g=h*(.5+(s?s[1]:0)/n),m=Math.sin(g)*p/Math.sin(zr(Math.PI/2-d-g,.01,Math.PI-.01)),v=Math.sin(d)*m+p,y=10*p;return{fov:h,aspect:e/n,focalDistance:f,near:l,far:Math.min(v*u,y)}}({width:f,height:p,pitch:i,fovy:v,nearZMultiplier:o,farZMultiplier:a}));let b=function(t){const{height:e,pitch:n,bearing:r,altitude:i,scale:s,center:o}=t,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];gr(a,a,[0,0,-i]),vr(a,a,-n*Br),yr(a,a,r*Br);const l=s/e;return mr(a,a,[l,l,l]),o&&gr(a,a,function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}([],o)),a}({height:p,pitch:i,bearing:s,scale:m,altitude:g});h&&(b=(new Tr).translate([512*h,0,0]).multiplyLeft(b)),super({...t,width:f,height:p,viewMatrix:b,longitude:n,latitude:e,zoom:r,...y,fovy:v,focalDistance:g}),Rt(this,"longitude",void 0),Rt(this,"latitude",void 0),Rt(this,"pitch",void 0),Rt(this,"bearing",void 0),Rt(this,"altitude",void 0),Rt(this,"fovy",void 0),Rt(this,"orthographic",void 0),Rt(this,"_subViewports",void 0),Rt(this,"_pseudoMeters",void 0),this.latitude=e,this.longitude=n,this.zoom=r,this.pitch=i,this.bearing=s,this.altitude=g,this.fovy=v,this.orthographic=l,this._subViewports=c?[]:null,this._pseudoMeters=d,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),e=Math.floor((t[0]+180)/360),n=Math.ceil((t[2]-180)/360);for(let t=e;t<=n;t++){const e=t?new dl({...this,worldOffset:t}):this;this._subViewports.push(e)}}return this._subViewports}projectPosition(t){if(this._pseudoMeters)return super.projectPosition(t);const[e,n]=this.projectFlat(t);return[e,n,(t[2]||0)*hl(t[1])]}unprojectPosition(t){if(this._pseudoMeters)return super.unprojectPosition(t);const[e,n]=this.unprojectFlat(t);return[e,n,(t[2]||0)/hl(n)]}addMetersToLngLat(t,e){return Zr(t,e)}panByPosition(t,e){const n=Kr(e,this.pixelUnprojectionMatrix),r=_r([],this.projectFlat(t),wr([],n)),i=_r([],this.center,r),[s,o]=this.unprojectFlat(i);return{longitude:s,latitude:o}}getBounds(t={}){const e=function(t,e=0){const{width:n,height:r,unproject:i}=t,s={targetZ:e},o=i([0,r],s),a=i([n,r],s);let l,u;return(t.fovy?.5*t.fovy*ti:Math.atan(.5/t.altitude))>(90-t.pitch)*ti-.01?(l=ei(t,0,e),u=ei(t,n,e)):(l=i([0,0],s),u=i([n,0],s)),[o,a,u,l]}(this,t.z||0);return[Math.min(e[0][0],e[1][0],e[2][0],e[3][0]),Math.min(e[0][1],e[1][1],e[2][1],e[3][1]),Math.max(e[0][0],e[1][0],e[2][0],e[3][0]),Math.max(e[0][1],e[1][1],e[2][1],e[3][1])]}fitBounds(t,e={}){const{width:n,height:r}=this,{longitude:i,latitude:s,zoom:o}=Jr({width:n,height:r,bounds:t,...e});return new dl({width:n,height:r,longitude:i,latitude:s,zoom:o})}}Rt(dl,"displayName","WebMercatorViewport");class fl{constructor(t){Rt(this,"_inProgress",void 0),Rt(this,"_handle",void 0),Rt(this,"_timeline",void 0),Rt(this,"time",void 0),Rt(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=t,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(t){var e,n;this.cancel(),this.settings=t,this._inProgress=!0,null===(e=(n=this.settings).onStart)||void 0===e||e.call(n,this)}end(){var t,e;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(t=(e=this.settings).onEnd)||void 0===t||t.call(e,this))}cancel(){var t,e;this._inProgress&&(null===(t=(e=this.settings).onInterrupt)||void 0===t||t.call(e,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var t,e;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:t,settings:e}=this;this._handle=t.addChannel({delay:t.getTime(),duration:e.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(t=(e=this.settings).onUpdate)||void 0===t||t.call(e,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const pl=()=>{},gl=t=>t;class ml{constructor(t){Rt(this,"getControllerState",void 0),Rt(this,"props",void 0),Rt(this,"propsInTransition",void 0),Rt(this,"transition",void 0),Rt(this,"onViewStateChange",void 0),Rt(this,"onStateChange",void 0),Rt(this,"_onTransitionUpdate",(t=>{const{time:e,settings:{interpolator:n,startProps:r,endProps:i,duration:s,easing:o}}=t,a=o(e/s),l=n.interpolateProps(r,i,a);this.propsInTransition=this.getControllerState({...this.props,...l}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})})),this.getControllerState=t.getControllerState,this.propsInTransition=null,this.transition=new fl(t.timeline),this.onViewStateChange=t.onViewStateChange||pl,this.onStateChange=t.onStateChange||pl}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(t){let e=!1;const n=this.props;if(this.props=t,!n||this._shouldIgnoreViewportChange(n,t))return!1;if(this._isTransitionEnabled(t)){let r=n;if(this.transition.inProgress){const{interruption:t,endProps:e}=this.transition.settings;r={...n,...2===t?e:this.propsInTransition||n}}this._triggerTransition(r,t),e=!0}else this.transition.cancel();return e}updateTransition(){this.transition.update()}_isTransitionEnabled(t){const{transitionDuration:e,transitionInterpolator:n}=t;return(e>0||"auto"===e)&&Boolean(n)}_isUpdateDueToCurrentTransition(t){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition)}_shouldIgnoreViewportChange(t,e){return this.transition.inProgress?3===this.transition.settings.interruption||this._isUpdateDueToCurrentTransition(e):!this._isTransitionEnabled(e)||e.transitionInterpolator.arePropsEqual(t,e)}_triggerTransition(t,e){const n=this.getControllerState(t),r=this.getControllerState(e).shortestPathFrom(n),i=e.transitionInterpolator,s=i.getDuration?i.getDuration(t,e):e.transitionDuration;if(0===s)return;const o=i.initializeProps(t,r);this.propsInTransition={};const a={duration:s,easing:e.transitionEasing||gl,interpolator:i,interruption:e.transitionInterruption||1,startProps:o.start,endProps:o.end,onStart:e.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(e.onTransitionInterrupt),onEnd:this._onTransitionEnd(e.onTransitionEnd)};this.transition.start(a),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(t){return e=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),null==t||t(e)}}}const vl=["longitude","latitude","zoom","bearing","pitch"],yl=["longitude","latitude","zoom"];class bl extends class{constructor(t){Rt(this,"_propsToCompare",void 0),Rt(this,"_propsToExtract",void 0),Rt(this,"_requiredProps",void 0);const{compare:e,extract:n,required:r}=t;this._propsToCompare=e,this._propsToExtract=n||e,this._requiredProps=r}arePropsEqual(t,e){for(const n of this._propsToCompare)if(!(n in t)||!(n in e)||!Xn(t[n],e[n]))return!1;return!0}initializeProps(t,e){const n={},r={};for(const i of this._propsToExtract)(i in t||i in e)&&(n[i]=t[i],r[i]=e[i]);return this._checkRequiredProps(n),this._checkRequiredProps(r),{start:n,end:r}}getDuration(t,e){return e.transitionDuration}_checkRequiredProps(t){this._requiredProps&&this._requiredProps.forEach((e=>{const n=t[e];ll(Number.isFinite(n)||Array.isArray(n),"".concat(e," is required for transition"))}))}}{constructor(t={}){const e=Array.isArray(t)?t:t.transitionProps,n=Array.isArray(t)?{}:t;n.transitionProps=Array.isArray(e)?{compare:e,required:e}:e||{compare:vl,required:yl},super(n.transitionProps),Rt(this,"opts",void 0),this.opts=n}initializeProps(t,e){const n=super.initializeProps(t,e),{makeViewport:r,around:i}=this.opts;if(r&&i){const s=r(t),o=r(e),a=s.unproject(i);n.start.around=i,Object.assign(n.end,{around:o.project(a),aroundPosition:a,width:e.width,height:e.height})}return n}interpolateProps(t,e,n){const r={};for(const i of this._propsToExtract)r[i]=qn(t[i]||0,e[i]||0,n);if(e.aroundPosition&&this.opts.makeViewport){const i=this.opts.makeViewport({...e,...r});Object.assign(r,i.panByPosition(e.aroundPosition,qn(t.around,e.around,n)))}return r}}const _l={transitionDuration:0},wl=t=>1-(1-t)*(1-t),xl=["wheel"],Ml=["panstart","panmove","panend"],Sl=["pinchstart","pinchmove","pinchend"],Pl=["tripanstart","tripanmove","tripanend"],El=["doubletap"],Cl=["keydown"],kl={};class Tl{constructor(t){Rt(this,"props",void 0),Rt(this,"state",{}),Rt(this,"transitionManager",void 0),Rt(this,"eventManager",void 0),Rt(this,"onViewStateChange",void 0),Rt(this,"onStateChange",void 0),Rt(this,"makeViewport",void 0),Rt(this,"_controllerState",void 0),Rt(this,"_events",{}),Rt(this,"_interactionState",{isDragging:!1}),Rt(this,"_customEvents",[]),Rt(this,"_eventStartBlocked",null),Rt(this,"_panMove",!1),Rt(this,"invertPan",!1),Rt(this,"dragMode","rotate"),Rt(this,"inertia",0),Rt(this,"scrollZoom",!0),Rt(this,"dragPan",!0),Rt(this,"dragRotate",!0),Rt(this,"doubleClickZoom",!0),Rt(this,"touchZoom",!0),Rt(this,"touchRotate",!1),Rt(this,"keyboard",!0),this.transitionManager=new ml({...t,getControllerState:t=>new this.ControllerState(t),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=t.eventManager,this.onViewStateChange=t.onViewStateChange||(()=>{}),this.onStateChange=t.onStateChange||(()=>{}),this.makeViewport=t.makeViewport}set events(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.props&&this.setProps(this.props)}finalize(){for(const e in this._events){var t;this._events[e]&&(null===(t=this.eventManager)||void 0===t||t.off(e,this.handleEvent))}this.transitionManager.finalize()}handleEvent(t){this._controllerState=void 0;const e=this._eventStartBlocked;switch(t.type){case"panstart":return!e&&this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return!e&&this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return!e&&this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(t){const{x:e,y:n}=this.props,{offsetCenter:r}=t;return[r.x-e,r.y-n]}isPointInBounds(t,e){const{width:n,height:r}=this.props;if(e&&e.handled)return!1;const i=t[0]>=0&&t[0]<=n&&t[1]>=0&&t[1]<=r;return i&&e&&e.stopPropagation(),i}isFunctionKeyPressed(t){const{srcEvent:e}=t;return Boolean(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(t){const e=setTimeout((()=>{this._eventStartBlocked===e&&(this._eventStartBlocked=null)}),t);this._eventStartBlocked=e}setProps(t){t.dragMode&&(this.dragMode=t.dragMode),this.props=t,"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);const{inertia:e}=t;this.inertia=Number.isFinite(e)?e:!0===e?300:0;const{scrollZoom:n=!0,dragPan:r=!0,dragRotate:i=!0,doubleClickZoom:s=!0,touchZoom:o=!0,touchRotate:a=!1,keyboard:l=!0}=t,u=Boolean(this.onViewStateChange);this.toggleEvents(xl,u&&n),this.toggleEvents(Ml,u&&(r||i)),this.toggleEvents(Sl,u&&(o||a)),this.toggleEvents(Pl,u&&a),this.toggleEvents(El,u&&s),this.toggleEvents(Cl,u&&l),this.scrollZoom=n,this.dragPan=r,this.dragRotate=i,this.doubleClickZoom=s,this.touchZoom=o,this.touchRotate=a,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(t,e){this.eventManager&&t.forEach((t=>{this._events[t]!==e&&(this._events[t]=e,e?this.eventManager.on(t,this.handleEvent):this.eventManager.off(t,this.handleEvent))}))}updateViewport(t,e=null,n={}){const r={...t.getViewportProps(),...e},i=this.controllerState!==t;if(this.state=t.getState(),this._setInteractionState(n),i){const t=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:t})}}_onTransition(t){this.onViewStateChange({...t,interactionState:this._interactionState})}_setInteractionState(t){Object.assign(this._interactionState,t),this.onStateChange(this._interactionState)}_onPanStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;let n=this.isFunctionKeyPressed(t)||t.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(n=!n);const r=this.controllerState[n?"panStart":"rotateStart"]({pos:e});return this._panMove=n,this.updateViewport(r,_l,{isDragging:!0}),!0}_onPan(t){return!!this.isDragging()&&(this._panMove?this._onPanMove(t):this._onPanRotate(t))}_onPanEnd(t){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t))}_onPanMove(t){if(!this.dragPan)return!1;const e=this.getCenter(t),n=this.controllerState.pan({pos:e});return this.updateViewport(n,_l,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(t){const{inertia:e}=this;if(this.dragPan&&e&&t.velocity){const n=this.getCenter(t),r=[n[0]+t.velocityX*e/2,n[1]+t.velocityY*e/2],i=this.controllerState.pan({pos:r}).panEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:wl},{isDragging:!1,isPanning:!0})}else{const t=this.controllerState.panEnd();this.updateViewport(t,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(t){if(!this.dragRotate)return!1;const e=this.getCenter(t),n=this.controllerState.rotate({pos:e});return this.updateViewport(n,_l,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(t){const{inertia:e}=this;if(this.dragRotate&&e&&t.velocity){const n=this.getCenter(t),r=[n[0]+t.velocityX*e/2,n[1]+t.velocityY*e/2],i=this.controllerState.rotate({pos:r}).rotateEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:wl},{isDragging:!1,isRotating:!0})}else{const t=this.controllerState.rotateEnd();this.updateViewport(t,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(t){if(!this.scrollZoom)return!1;t.srcEvent.preventDefault();const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const{speed:n=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:i}=t;let s=2/(1+Math.exp(-Math.abs(i*n)));i<0&&0!==s&&(s=1/s);const o=this.controllerState.zoom({pos:e,scale:s});return this.updateViewport(o,{...this._getTransitionProps({around:e}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const n=this.controllerState.rotateStart({pos:e});return this.updateViewport(n,_l,{isDragging:!0}),!0}_onTriplePan(t){if(!this.touchRotate)return!1;if(!this.isDragging())return!1;const e=this.getCenter(t);e[0]-=t.deltaX;const n=this.controllerState.rotate({pos:e});return this.updateViewport(n,_l,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(t){if(!this.isDragging())return!1;const{inertia:e}=this;if(this.touchRotate&&e&&t.velocityY){const n=this.getCenter(t),r=[n[0],n[1]+=t.velocityY*e/2],i=this.controllerState.rotate({pos:r});this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:wl},{isDragging:!1,isRotating:!0}),this.blockEvents(e)}else{const t=this.controllerState.rotateEnd();this.updateViewport(t,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const n=this.controllerState.zoomStart({pos:e}).rotateStart({pos:e});return kl._startPinchRotation=t.rotation,kl._lastPinchEvent=t,this.updateViewport(n,_l,{isDragging:!0}),!0}_onPinch(t){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;let e=this.controllerState;if(this.touchZoom){const{scale:n}=t,r=this.getCenter(t);e=e.zoom({pos:r,scale:n})}if(this.touchRotate){const{rotation:n}=t;e=e.rotate({deltaAngleX:kl._startPinchRotation-n})}return this.updateViewport(e,_l,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),kl._lastPinchEvent=t,!0}_onPinchEnd(t){if(!this.isDragging())return!1;const{inertia:e}=this,{_lastPinchEvent:n}=kl;if(this.touchZoom&&e&&n&&t.scale!==n.scale){const r=this.getCenter(t);let i=this.controllerState.rotateEnd();const s=Math.log2(t.scale),o=(s-Math.log2(n.scale))/(t.deltaTime-n.deltaTime),a=Math.pow(2,s+o*e/2);i=i.zoom({pos:r,scale:a}).zoomEnd(),this.updateViewport(i,{...this._getTransitionProps({around:r}),transitionDuration:e,transitionEasing:wl},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(e)}else{const t=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(t,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return kl._startPinchRotation=null,kl._lastPinchEvent=null,!0}_onDoubleTap(t){if(!this.doubleClickZoom)return!1;const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const n=this.isFunctionKeyPressed(t),r=this.controllerState.zoom({pos:e,scale:n?.5:2});return this.updateViewport(r,this._getTransitionProps({around:e}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(t){if(!this.keyboard)return!1;const e=this.isFunctionKeyPressed(t),{zoomSpeed:n,moveSpeed:r,rotateSpeedX:i,rotateSpeedY:s}=!0===this.keyboard?{}:this.keyboard,{controllerState:o}=this;let a;const l={};switch(t.srcEvent.code){case"Minus":a=e?o.zoomOut(n).zoomOut(n):o.zoomOut(n),l.isZooming=!0;break;case"Equal":a=e?o.zoomIn(n).zoomIn(n):o.zoomIn(n),l.isZooming=!0;break;case"ArrowLeft":e?(a=o.rotateLeft(i),l.isRotating=!0):(a=o.moveLeft(r),l.isPanning=!0);break;case"ArrowRight":e?(a=o.rotateRight(i),l.isRotating=!0):(a=o.moveRight(r),l.isPanning=!0);break;case"ArrowUp":e?(a=o.rotateUp(s),l.isRotating=!0):(a=o.moveUp(r),l.isPanning=!0);break;case"ArrowDown":e?(a=o.rotateDown(s),l.isRotating=!0):(a=o.moveDown(r),l.isPanning=!0);break;default:return!1}return this.updateViewport(a,this._getTransitionProps(),l),!0}_getTransitionProps(t){const{transition:e}=this;return e&&e.transitionInterpolator?t?{...e,transitionInterpolator:new bl({...t,...e.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:e:_l}}class Al{constructor(t,e){Rt(this,"_viewportProps",void 0),Rt(this,"_state",void 0),this._viewportProps=this.applyConstraints(t),this._state=e}getViewportProps(){return this._viewportProps}getState(){return this._state}}class Ll extends Al{constructor(t){const{width:e,height:n,latitude:r,longitude:i,zoom:s,bearing:o=0,pitch:a=0,altitude:l=1.5,position:u=[0,0,0],maxZoom:c=20,minZoom:h=0,maxPitch:d=60,minPitch:f=0,startPanLngLat:p,startZoomLngLat:g,startRotatePos:m,startBearing:v,startPitch:y,startZoom:b,normalize:_=!0}=t;ll(Number.isFinite(i)),ll(Number.isFinite(r)),ll(Number.isFinite(s)),super({width:e,height:n,latitude:r,longitude:i,zoom:s,bearing:o,pitch:a,altitude:l,maxZoom:c,minZoom:h,maxPitch:d,minPitch:f,normalize:_,position:u},{startPanLngLat:p,startZoomLngLat:g,startRotatePos:m,startBearing:v,startPitch:y,startZoom:b}),Rt(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanLngLat:this._unproject(t)})}pan({pos:t,startPos:e}){const n=this.getState().startPanLngLat||this._unproject(e);if(!n)return this;const r=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(r)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:t,deltaAngleX:e=0,deltaAngleY:n=0}){const{startRotatePos:r,startBearing:i,startPitch:s}=this.getState();if(!r||void 0===i||void 0===s)return this;let o;return o=t?this._getNewRotation(t,r,s,i):{bearing:i+e,pitch:s+n},this._getUpdatedState(o)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:t}){return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:e,scale:n}){let{startZoom:r,startZoomLngLat:i}=this.getState();if(i||(r=this.getViewportProps().zoom,i=this._unproject(e)||this._unproject(t)),!i)return this;const{maxZoom:s,minZoom:o}=this.getViewportProps();let a=r+Math.log2(n);a=Hn(a,o,s);const l=this.makeViewport({...this.getViewportProps(),zoom:a});return this._getUpdatedState({zoom:a,...l.panByPosition(i,t)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(t=2){return this._zoomFromCenter(t)}zoomOut(t=2){return this._zoomFromCenter(1/t)}moveLeft(t=100){return this._panFromCenter([t,0])}moveRight(t=100){return this._panFromCenter([-t,0])}moveUp(t=100){return this._panFromCenter([0,t])}moveDown(t=100){return this._panFromCenter([0,-t])}rotateLeft(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}shortestPathFrom(t){const e=t.getViewportProps(),n={...this.getViewportProps()},{bearing:r,longitude:i}=n;return Math.abs(r-e.bearing)>180&&(n.bearing=r<0?r+360:r-360),Math.abs(i-e.longitude)>180&&(n.longitude=i<0?i+360:i-360),n}applyConstraints(t){const{maxZoom:e,minZoom:n,zoom:r}=t;t.zoom=Hn(r,n,e);const{maxPitch:i,minPitch:s,pitch:o}=t;t.pitch=Hn(o,s,i);const{normalize:a=!0}=t;return a&&Object.assign(t,function(t){const{width:e,height:n,pitch:r=0}=t;let{longitude:i,latitude:s,zoom:o,bearing:a=0}=t;(i<-180||i>180)&&(i=Rr(i+180,360)-180),(a<-180||a>180)&&(a=Rr(a+180,360)-180);const l=Fr(n/512);if(o<=l)o=l,s=0;else{const t=n/2/Math.pow(2,o),e=qr([0,t])[1];if(s<e)s=e;else{const e=qr([0,512-t])[1];s>e&&(s=e)}}return{width:e,height:n,longitude:i,latitude:s,zoom:o,pitch:r,bearing:a}}(t)),t}_zoomFromCenter(t){const{width:e,height:n}=this.getViewportProps();return this.zoom({pos:[e/2,n/2],scale:t})}_panFromCenter(t){const{width:e,height:n}=this.getViewportProps();return this.pan({startPos:[e/2,n/2],pos:[e/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}_unproject(t){const e=this.makeViewport(this.getViewportProps());return t&&e.unproject(t)}_getNewRotation(t,e,n,r){const i=t[0]-e[0],s=t[1]-e[1],o=t[1],a=e[1],{width:l,height:u}=this.getViewportProps(),c=i/l;let h=0;s>0?Math.abs(u-a)>5&&(h=s/(a-u)*1.2):s<0&&a>5&&(h=1-o/a),h=Hn(h,-1,1);const{minPitch:d,maxPitch:f}=this.getViewportProps();let p=n;return h>0?p=n+h*(f-n):h<0&&(p=n-h*(d-n)),{pitch:p,bearing:r+180*c}}}class Ol extends Tl{constructor(...t){super(...t),Rt(this,"ControllerState",Ll),Rt(this,"transition",{transitionDuration:300,transitionInterpolator:new bl({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),Rt(this,"dragMode","pan")}setProps(t){t.position=t.position||[0,0,0];const e=this.props;super.setProps(t),(!e||e.height!==t.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...t,...this.state}))}}class Il extends ul{get ViewportType(){return dl}get ControllerType(){return Ol}}Rt(Il,"displayName","MapView");const Rl=[255,255,255],zl=1;let Fl=0;class Nl{constructor(t={}){Rt(this,"id",void 0),Rt(this,"color",void 0),Rt(this,"intensity",void 0),Rt(this,"type","ambient");const{color:e=Rl}=t,{intensity:n=zl}=t;this.id=t.id||"ambient-".concat(Fl++),this.color=e,this.intensity=n}}const jl=[255,255,255],Dl=1,Bl=[0,0,-1];let Ul=0;class Vl{constructor(t={}){Rt(this,"id",void 0),Rt(this,"color",void 0),Rt(this,"intensity",void 0),Rt(this,"type","directional"),Rt(this,"direction",void 0),Rt(this,"shadow",void 0);const{color:e=jl}=t,{intensity:n=Dl}=t,{direction:r=Bl}=t,{_shadow:i=!1}=t;this.id=t.id||"directional-".concat(Ul++),this.color=e,this.intensity=n,this.type="directional",this.direction=new or(r).normalize().toArray(),this.shadow=i}getProjectedLight(t){return this}}class Wl extends class{constructor(t,e={id:"pass"}){Rt(this,"id",void 0),Rt(this,"gl",void 0),Rt(this,"props",void 0);const{id:n}=e;this.id=n,this.gl=t,this.props={...e}}setProps(t){Object.assign(this.props,t)}render(t){}cleanup(){}}{render(t){return Rs(this.gl,{framebuffer:t.target}),this._drawLayers(t)}_drawLayers(t){const{target:e,moduleParameters:n,viewports:r,views:i,onViewportActive:s,clearCanvas:o=!0}=t;t.pass=t.pass||"unknown";const a=this.gl;o&&function(t){Rs(t,{viewport:[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}),t.clear(16640)}(a);const l=[];for(const o of r){const r=i&&i[o.id];s(o);const u=this._getDrawLayerParams(o,t),c=o.subViewports||[o];for(const i of c){const s=this._drawLayersInViewport(a,{target:e,moduleParameters:n,viewport:i,view:r,pass:t.pass,layers:t.layers},u);l.push(s)}}return l}_getDrawLayerParams(t,{layers:e,pass:n,layerFilter:r,cullRect:i,effects:s,moduleParameters:o}){const a=[],l=Gl(),u={layer:e[0],viewport:t,isPicking:n.startsWith("picking"),renderPass:n,cullRect:i},c={};for(let i=0;i<e.length;i++){const h=e[i],d=this._shouldDrawLayer(h,u,r,c),f={shouldDrawLayer:d};d&&(f.layerRenderIndex=l(h,d),f.moduleParameters=this._getModuleParameters(h,s,n,o),f.layerParameters=this.getLayerParameters(h,i,t)),a[i]=f}return a}_drawLayersInViewport(t,{layers:e,moduleParameters:n,pass:r,target:i,viewport:s,view:o},a){const l=function(t,{moduleParameters:e,target:n,viewport:r}){const i=n&&"default-framebuffer"!==n.id,s=e&&e.devicePixelRatio||Fs(t),o=i?n.height:t.drawingBufferHeight,a=r;return[a.x*s,o-(a.y+a.height)*s,a.width*s,a.height*s]}(t,{moduleParameters:n,target:i,viewport:s});if(o&&o.props.clear){const e=!0===o.props.clear?{color:!0,depth:!0}:o.props.clear;zs(t,{scissorTest:!0,scissor:l},(()=>Do(t,e)))}const u={totalCount:e.length,visibleCount:0,compositeCount:0,pickableCount:0};Rs(t,{viewport:l});for(let t=0;t<e.length;t++){const n=e[t],{shouldDrawLayer:i,layerRenderIndex:o,moduleParameters:l,layerParameters:c}=a[t];if(i&&n.props.pickable&&u.pickableCount++,n.isComposite)u.compositeCount++;else if(i){u.visibleCount++,l.viewport=s;try{n._drawLayer({moduleParameters:l,uniforms:{layerIndex:o},parameters:c})}catch(t){n.raiseError(t,"drawing ".concat(n," to ").concat(r))}}}return u}shouldDrawLayer(t){return!0}getModuleParameters(t,e){return null}getLayerParameters(t,e,n){return t.props.parameters}_shouldDrawLayer(t,e,n,r){if(!t.props.visible||!this.shouldDrawLayer(t))return!1;e.layer=t;let i=t.parent;for(;i;){if(!i.props.visible||!i.filterSubLayer(e))return!1;e.layer=i,i=i.parent}if(n){const t=e.layer.id;if(t in r||(r[t]=n(e)),!r[t])return!1}return t.activateViewport(e.viewport),!0}_getModuleParameters(t,e,n,r){var i;const s=Object.assign(Object.create((null===(i=t.internalState)||void 0===i?void 0:i.propsInTransition)||t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,pickingActive:0,devicePixelRatio:Fs(this.gl)});if(e)for(const n of e){var o;Object.assign(s,null===(o=n.getModuleParameters)||void 0===o?void 0:o.call(n,t))}return Object.assign(s,this.getModuleParameters(t,e),r)}}function Gl(t=0,e={}){const n={},r=(i,s)=>{const o=i.props._offset,a=i.id,l=i.parent&&i.parent.id;let u;if(l&&!(l in e)&&r(i.parent,!1),l in n){const t=n[l]=n[l]||Gl(e[l],e);u=t(i,s),n[a]=t}else Number.isFinite(o)?(u=o+(e[l]||0),n[a]=null):u=t;return s&&u>=t&&(t=u+1),e[a]=u,u};return r}class Hl extends Wl{constructor(t,e){super(t,e),Rt(this,"shadowMap",void 0),Rt(this,"depthBuffer",void 0),Rt(this,"fbo",void 0),this.shadowMap=new Ao(t,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new Io(t,{format:33189,width:1,height:1}),this.fbo=new ea(t,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(t){const e=this.fbo;zs(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},(()=>{const n=t.viewports[0],r=Fs(this.gl),i=n.width*r,s=n.height*r;i===e.width&&s===e.height||e.resize({width:i,height:s}),super.render({...t,target:e,pass:"shadow"})}))}shouldDrawLayer(t){return!1!==t.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const ql=Wa((function({viewport:t,center:e}){return new Tr(t.viewProjectionMatrix).invert().transform(e)})),Xl=Wa((function({viewport:t,shadowMatrices:e}){const n=[],r=t.pixelUnprojectionMatrix,i=t.isGeospatial?void 0:1,s=[[0,0,i],[t.width,0,i],[0,t.height,i],[t.width,t.height,i],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map((t=>function(t,e){const[n,r,i]=t,s=Kr([n,r,i],e);return Number.isFinite(i)?s:[s[0],s[1],0]}(t,r)));for(const r of e){const e=r.clone().translate(new or(t.center).negate()),i=s.map((t=>e.transform(t))),o=(new Tr).ortho({left:Math.min(...i.map((t=>t[0]))),right:Math.max(...i.map((t=>t[0]))),bottom:Math.min(...i.map((t=>t[1]))),top:Math.max(...i.map((t=>t[1]))),near:Math.min(...i.map((t=>-t[2]))),far:Math.max(...i.map((t=>-t[2])))});n.push(o.multiplyRight(r))}return n})),Zl=[0,0,0,1],Yl=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],$l={name:"shadow",dependencies:[Ka],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?function(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const r={shadow_uDrawShadowMap:Boolean(t.drawToShadowMap),shadow_uUseShadowMap:!!t.shadowMaps&&t.shadowMaps.length>0,shadow_uColor:t.shadowColor||Zl,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},i=ql({viewport:t.viewport,center:e.project_uCenter}),s=[],o=Xl({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let n=0;n<t.shadowMatrices.length;n++){const r=o[n],a=r.clone().translate(new or(t.viewport.center).negate());e.project_uCoordinateSystem===ni.LNGLAT&&e.project_uProjectionMode===ri.WEB_MERCATOR?(o[n]=a,s[n]=i):(o[n]=r.clone().multiplyRight(Yl),s[n]=a.transform(i))}for(let e=0;e<o.length;e++)r["shadow_uViewProjectionMatrices[".concat(e,"]")]=o[e],r["shadow_uProjectCenters[".concat(e,"]")]=s[e],t.shadowMaps&&t.shadowMaps.length>0?r["shadow_uShadowMap".concat(e)]=t.shadowMaps[e]:r["shadow_uShadowMap".concat(e)]=t.dummyShadowMap;return r}(t,e):{}},Ql={color:[255,255,255],intensity:1},Kl=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],Jl=[0,0,0,200/255];class tu{constructor(t={}){Rt(this,"id","lighting-effect"),Rt(this,"props",null),Rt(this,"shadowColor",Jl),Rt(this,"shadow",void 0),Rt(this,"ambientLight",null),Rt(this,"directionalLights",[]),Rt(this,"pointLights",[]),Rt(this,"shadowPasses",[]),Rt(this,"shadowMaps",[]),Rt(this,"dummyShadowMap",null),Rt(this,"programManager",void 0),Rt(this,"shadowMatrices",void 0);for(const e in t){const n=t[e];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some((t=>t.shadow))}preRender(t,{layers:e,layerFilter:n,viewports:r,onViewportActive:i,views:s}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(t),this.programManager||(this.programManager=za.getDefaultProgramManager(t),$l&&this.programManager.addDefaultModule($l)),this.dummyShadowMap||(this.dummyShadowMap=new Ao(t,{width:1,height:1}));for(let t=0;t<this.shadowPasses.length;t++)this.shadowPasses[t].render({layers:e,layerFilter:n,viewports:r,onViewportActive:i,views:s,moduleParameters:{shadowLightId:t,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(t){const e=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return e.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map((e=>e.getProjectedLight({layer:t}))),pointLights:this.pointLights.map((e=>e.getProjectedLight({layer:t})))},e}cleanup(){for(const t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule($l),this.programManager=null)}_calculateMatrices(){const t=[];for(const e of this.directionalLights){const n=(new Tr).lookAt({eye:new or(e.direction).negate()});t.push(n)}return t}_createShadowPasses(t){for(let e=0;e<this.directionalLights.length;e++){const n=new Hl(t);this.shadowPasses[e]=n,this.shadowMaps[e]=n.shadowMap}}_applyDefaultLights(){const{ambientLight:t,pointLights:e,directionalLights:n}=this;t||0!==e.length||0!==n.length||(this.ambientLight=new Nl(Ql),this.directionalLights.push(new Vl(Kl[0]),new Vl(Kl[1])))}}class eu extends Wl{constructor(t,e){super(t,e),Rt(this,"maskMap",void 0),Rt(this,"fbo",void 0);const{mapSize:n=2048}=e;this.maskMap=new Ao(t,{width:n,height:n,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.fbo=new ea(t,{id:"maskmap",width:n,height:n,attachments:{36064:this.maskMap}})}render(t){const e=this.gl,n=[!1,!1,!1,!1];return n[t.channel]=!0,zs(e,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:n,depthTest:!1},(()=>super.render({...t,target:this.fbo,pass:"mask"})))}shouldDrawLayer(t){return t.props.operation===ai}delete(){this.fbo.delete(),this.maskMap.delete()}}const nu=(new Tr).lookAt({eye:[0,0,1]});function ru({width:t,height:e,near:n,far:r,padding:i}){let s=-t/2,o=t/2,a=-e/2,l=e/2;if(i){const{left:n=0,right:r=0,top:u=0,bottom:c=0}=i,h=Hn((n+t-r)/2,0,t)-t/2,d=Hn((u+e-c)/2,0,e)-e/2;s-=h,o-=h,a+=d,l+=d}return(new Tr).ortho({left:s,right:o,bottom:a,top:l,near:n,far:r})}class iu extends di{constructor(t){const{width:e,height:n,near:r=.1,far:i=1e3,zoom:s=0,target:o=[0,0,0],padding:a=null,flipY:l=!0}=t,u=Array.isArray(s)?s[0]:s,c=Array.isArray(s)?s[1]:s,h=Math.min(u,c),d=Math.pow(2,h);let f;if(u!==c){const t=Math.pow(2,u),e=Math.pow(2,c);f={unitsPerMeter:[t/d,e/d,1],metersPerUnit:[d/t,d/e,1]}}super({...t,longitude:void 0,position:o,viewMatrix:nu.clone().scale([d,d*(l?-1:1),d]),projectionMatrix:ru({width:e||1,height:n||1,padding:a,near:r,far:i}),zoom:h,distanceScales:f})}projectFlat([t,e]){const{unitsPerMeter:n}=this.distanceScales;return[t*n[0],e*n[1]]}unprojectFlat([t,e]){const{metersPerUnit:n}=this.distanceScales;return[t*n[0],e*n[1]]}panByPosition(t,e){const n=Kr(e,this.pixelUnprojectionMatrix),r=_r([],this.projectFlat(t),wr([],n)),i=_r([],this.center,r);return{target:this.unprojectFlat(i)}}}class su extends Al{constructor(t){const{width:e,height:n,rotationX:r=0,rotationOrbit:i=0,target:s=[0,0,0],zoom:o=0,minRotationX:a=-90,maxRotationX:l=90,minZoom:u=-1/0,maxZoom:c=1/0,startPanPosition:h,startRotatePos:d,startRotationX:f,startRotationOrbit:p,startZoomPosition:g,startZoom:m}=t;super({width:e,height:n,rotationX:r,rotationOrbit:i,target:s,zoom:o,minRotationX:a,maxRotationX:l,minZoom:u,maxZoom:c},{startPanPosition:h,startRotatePos:d,startRotationX:f,startRotationOrbit:p,startZoomPosition:g,startZoom:m}),Rt(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanPosition:this._unproject(t)})}pan({pos:t,startPosition:e}){const n=this.getState().startPanPosition||e;if(!n)return this;const r=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(r)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:t,deltaAngleX:e=0,deltaAngleY:n=0}){const{startRotatePos:r,startRotationX:i,startRotationOrbit:s}=this.getState(),{width:o,height:a}=this.getViewportProps();if(!r||void 0===i||void 0===s)return this;let l;if(t){let e=(t[0]-r[0])/o;const n=(t[1]-r[1])/a;(i<-90||i>90)&&(e*=-1),l={rotationX:i+180*n,rotationOrbit:s+180*e}}else l={rotationX:i+n,rotationOrbit:s+e};return this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(t){const e=t.getViewportProps(),n={...this.getViewportProps()},{rotationOrbit:r}=n;return Math.abs(r-e.rotationOrbit)>180&&(n.rotationOrbit=r<0?r+360:r-360),n}zoomStart({pos:t}){return this._getUpdatedState({startZoomPosition:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:e,scale:n}){let{startZoom:r,startZoomPosition:i}=this.getState();if(i||(r=this.getViewportProps().zoom,i=this._unproject(e)||this._unproject(t)),!i)return this;const s=this._calculateNewZoom({scale:n,startZoom:r}),o=this.makeViewport({...this.getViewportProps(),zoom:s});return this._getUpdatedState({zoom:s,...o.panByPosition(i,t)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:t})})}zoomOut(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/t})})}moveLeft(t=50){return this._panFromCenter([-t,0])}moveRight(t=50){return this._panFromCenter([t,0])}moveUp(t=50){return this._panFromCenter([0,-t])}moveDown(t=50){return this._panFromCenter([0,t])}rotateLeft(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-t})}rotateRight(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+t})}rotateUp(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-t})}rotateDown(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+t})}_unproject(t){const e=this.makeViewport(this.getViewportProps());return t&&e.unproject(t)}_calculateNewZoom({scale:t,startZoom:e}){const{maxZoom:n,minZoom:r}=this.getViewportProps();return void 0===e&&(e=this.getViewportProps().zoom),Hn(e+Math.log2(t),r,n)}_panFromCenter(t){const{width:e,height:n,target:r}=this.getViewportProps();return this.pan({startPosition:r,pos:[e/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}applyConstraints(t){const{maxZoom:e,minZoom:n,zoom:r,maxRotationX:i,minRotationX:s,rotationOrbit:o}=t;return t.zoom=Array.isArray(r)?[Hn(r[0],n,e),Hn(r[1],n,e)]:Hn(r,n,e),t.rotationX=Hn(t.rotationX,s,i),(o<-180||o>180)&&(t.rotationOrbit=function(t,e){const n=t%360;return n<0?360+n:n}(o+180)-180),t}}class ou extends su{constructor(t){super(t),Rt(this,"zoomAxis",void 0),this.zoomAxis=t.zoomAxis||"all"}_calculateNewZoom({scale:t,startZoom:e}){const{maxZoom:n,minZoom:r}=this.getViewportProps();void 0===e&&(e=this.getViewportProps().zoom);let i=Math.log2(t);if(Array.isArray(e)){let[t,s]=e;switch(this.zoomAxis){case"X":t=Hn(t+i,r,n);break;case"Y":s=Hn(s+i,r,n);break;default:let e=Math.min(t+i,s+i);e<r&&(i+=r-e),e=Math.max(t+i,s+i),e>n&&(i+=n-e),t+=i,s+=i}return[t,s]}return Hn(e+i,r,n)}}class au extends Tl{constructor(...t){super(...t),Rt(this,"ControllerState",ou),Rt(this,"transition",{transitionDuration:300,transitionInterpolator:new bl(["target","zoom"])}),Rt(this,"dragMode","pan")}_onPanRotate(){return!1}}class lu extends ul{get ViewportType(){return iu}get ControllerType(){return au}}Rt(lu,"displayName","OrthographicView");class uu{constructor(){Rt(this,"id","mask-effect"),Rt(this,"props",null),Rt(this,"useInPicking",!0),Rt(this,"dummyMaskMap",void 0),Rt(this,"channels",[]),Rt(this,"masks",null),Rt(this,"maskPass",void 0),Rt(this,"maskMap",void 0),Rt(this,"lastViewport",void 0)}preRender(t,{layers:e,layerFilter:n,viewports:r,onViewportActive:i,views:s}){this.dummyMaskMap||(this.dummyMaskMap=new Ao(t,{width:1,height:1}));const o=e.filter((t=>t.props.visible&&t.props.operation===ai));if(0===o.length)return this.masks=null,void(this.channels.length=0);this.masks={},this.maskPass||(this.maskPass=new eu(t,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const a=this._sortMaskChannels(o),l=r[0],u=!this.lastViewport||!this.lastViewport.equals(l);for(const t in a)this._renderChannel(a[t],{layerFilter:n,onViewportActive:i,views:s,viewport:l,viewportChanged:u})}_renderChannel(t,{layerFilter:e,onViewportActive:n,views:r,viewport:i,viewportChanged:s}){const o=this.channels[t.index];if(!o)return;const a=t===o||o.layers.length!==t.layers.length||t.layerBounds.some(((t,e)=>t!==o.layerBounds[e]));if(t.bounds=o.bounds,t.maskBounds=o.maskBounds,this.channels[t.index]=t,(a||s)&&(this.lastViewport=i,t.bounds=function({layers:t,viewport:e}){let n=null;for(const e of t){const t=e.getBounds();t&&(n?(n[0]=Math.min(n[0],t[0][0]),n[1]=Math.min(n[1],t[0][1]),n[2]=Math.max(n[2],t[1][0]),n[3]=Math.max(n[3],t[1][1])):n=[t[0][0],t[0][1],t[1][0],t[1][1]])}const r=e.getBounds();if(!n)return r;const i=function(t){const e=t[2]-t[0],n=t[3]-t[1],r=t[0]+.5*e,i=t[1]+.5*n;return[r-e,i-n,r+e,i+n]}(r);return n[2]-n[0]<i[2]-i[0]||n[3]-n[1]<i[3]-i[1]||(n[0]=Math.max(n[0],i[0]),n[1]=Math.max(n[1],i[1]),n[2]=Math.min(n[2],i[2]),n[3]=Math.min(n[3],i[3])),n}({layers:t.layers,viewport:i}),a||!Xn(t.bounds,o.bounds))){const{maskPass:s,maskMap:o}=this,a=function({bounds:t,viewport:e,width:n,height:r}){if(t[2]<=t[0]||t[3]<=t[1])return null;if(n-=2,r-=2,e instanceof dl){const{longitude:e,latitude:i,zoom:s}=Jr({width:n,height:r,bounds:[[t[0],t[1]],[t[2],t[3]]],maxZoom:20});return new dl({longitude:e,latitude:i,zoom:s,x:1,y:1,width:n,height:r})}const i=[(t[0]+t[2])/2,(t[1]+t[3])/2,0],s=Math.min(20,n/(t[2]-t[0]),r/(t[3]-t[1]));return new lu({x:1,y:1}).makeViewport({width:n,height:r,viewState:{target:i,zoom:Math.log2(s)}})}({bounds:t.bounds,viewport:i,width:o.width,height:o.height});t.maskBounds=a?a.getBounds():[0,0,1,1],s.render({pass:"mask",channel:t.index,layers:t.layers,layerFilter:e,viewports:a?[a]:[],onViewportActive:n,views:r,moduleParameters:{devicePixelRatio:1}})}this.masks[t.id]={index:t.index,bounds:t.maskBounds,coordinateOrigin:t.coordinateOrigin,coordinateSystem:t.coordinateSystem}}_sortMaskChannels(t){const e={};let n=0;for(const r of t){const{id:t}=r.root;let i=e[t];if(!i){if(++n>4){de.warn("Too many mask layers. The max supported is 4")();continue}i={id:t,index:this.channels.findIndex((e=>(null==e?void 0:e.id)===t)),layers:[],layerBounds:[],coordinateOrigin:r.root.props.coordinateOrigin,coordinateSystem:r.root.props.coordinateSystem},e[t]=i}i.layers.push(r),i.layerBounds.push(r.getBounds())}for(let t=0;t<4;t++){const n=this.channels[t];n&&n.id in e||(this.channels[t]=null)}for(const t in e){const n=e[t];n.index<0&&(n.index=this.channels.findIndex((t=>!t)),this.channels[n.index]=n)}return e}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const cu=new tu;class hu{constructor(){Rt(this,"effects",void 0),Rt(this,"_internalEffects",void 0),Rt(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(t){"effects"in t&&(t.effects.length===this.effects.length&&rl(t.effects,this.effects)||(this.setEffects(t.effects),this._needsRedraw="effects changed"))}needsRedraw(t={clearRedrawFlags:!1}){const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(t=[]){this.cleanup(),this.effects=t,this._internalEffects=t.slice(),this._internalEffects.push(new uu),t.some((t=>t instanceof tu))||this._internalEffects.push(cu)}cleanup(){for(const t of this.effects)t.cleanup();for(const t of this._internalEffects)t.cleanup();this.effects.length=0,this._internalEffects.length=0}}class du extends Wl{shouldDrawLayer(t){return t.props.operation===oi}}const fu={blendFunc:[1,0,32771,0],blendEquation:32774};class pu extends Wl{constructor(...t){super(...t),Rt(this,"pickZ",void 0),Rt(this,"_colors",null)}render(t){return t.pickingFBO?this._drawPickingBuffer(t):super.render(t)}_drawPickingBuffer({layers:t,layerFilter:e,views:n,viewports:r,onViewportActive:i,pickingFBO:s,deviceRect:{x:o,y:a,width:l,height:u},cullRect:c,effects:h,pass:d="picking",pickZ:f}){const p=this.gl;this.pickZ=f;const g=f?null:{byLayer:new Map,byAlpha:[]};this._colors=g;const m=zs(p,{scissorTest:!0,scissor:[o,a,l,u],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...fu,blend:!f},(()=>super.render({target:s,layers:t,layerFilter:e,views:n,viewports:r,onViewportActive:i,cullRect:c,effects:null==h?void 0:h.filter((t=>t.useInPicking)),pass:d})));return this._colors=null,{decodePickingColor:g&&gu.bind(null,g),stats:m}}shouldDrawLayer(t){return t.props.pickable&&t.props.operation===oi}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(t,e,n){const r={...t.props.parameters};return this._colors?(Object.assign(r,fu),r.blend=!0,r.blendColor=function(t,e,n){const{byLayer:r,byAlpha:i}=t;let s,o=r.get(e);return o?(o.viewports.push(n),s=o.a):(s=r.size+1,s<=255?(o={a:s,layer:e,viewports:[n]},r.set(e,o),i[s]=o):(de.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}(this._colors,t,n)):r.blend=!1,r}}function gu(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}class mu{constructor(t){this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new du(t),this.pickLayersPass=new pu(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(t){"layerFilter"in t&&this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in t&&this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(t){const e=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;t.layerFilter=t.layerFilter||this.layerFilter,t.effects=t.effects||[],t.target=t.target||ea.getDefaultFramebuffer(this.gl),this._preRender(t.effects,t);const n=this.lastPostProcessEffect?this.renderBuffers[0]:t.target,r=e.render({...t,target:n});this._postRender(t.effects,t),this.renderCount++,pe("deckRenderer.renderLayers",this,r,t)}needsRedraw(t={clearRedrawFlags:!1}){const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}finalize(){const{renderBuffers:t}=this;for(const e of t)e.delete();t.length=0}_preRender(t,e){let n=null;for(const r of t)r.preRender(this.gl,e),r.postRender&&(n=r);n&&this._resizeRenderBuffers(),this.lastPostProcessEffect=n}_resizeRenderBuffers(){const{renderBuffers:t}=this;0===t.length&&t.push(new ea(this.gl),new ea(this.gl));for(const e of t)e.resize()}_postRender(t,e){const{renderBuffers:n}=this,r={inputBuffer:n[0],swapBuffer:n[1],target:null};for(const i of t)if(i.postRender){if(i===this.lastPostProcessEffect){r.target=e.target,i.postRender(this.gl,r);break}const t=i.postRender(this.gl,r);r.inputBuffer=t,r.swapBuffer=t===n[0]?n[1]:n[0]}}}const vu={pickedColor:null,pickedObjectIndex:-1};function yu({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:r,deviceRadius:i,deviceRect:s}){const{x:o,y:a,width:l,height:u}=s;let c=i*i,h=-1,d=0;for(let e=0;e<u;e++){const i=e+a-r,s=i*i;if(s>c)d+=4*l;else for(let e=0;e<l;e++){if(t[d+3]-1>=0){const t=e+o-n,r=t*t+s;r<=c&&(c=r,h=d)}d+=4}}if(h>=0){const n=t.slice(h,h+4),r=e(n);if(r){const t=Math.floor(h/4/l),e=h/4-t*l;return{...r,pickedColor:n,pickedX:o+e,pickedY:a+t}}de.error("Picked non-existent layer. Is picking buffer corrupt?")()}return vu}function bu({pickInfo:t,viewports:e,pixelRatio:n,x:r,y:i,z:s}){let o,a=e[0];if(e.length>1&&(a=function(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}((null==t?void 0:t.pickedViewports)||e,{x:r,y:i})),a){const t=[r-a.x,i-a.y];void 0!==s&&(t[2]=s),o=a.unproject(t)}return{color:null,layer:null,viewport:a,index:-1,picked:!1,x:r,y:i,pixel:[r,i],coordinate:o,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function _u(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:i}=t,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,l=o?[o]:[];if("hover"===r){const t=n.index,e=n.layerId,r=o?o.props.id:null;if(r!==e||a!==t){if(r!==e){const t=i.find((t=>t.props.id===e));t&&l.unshift(t)}n.layerId=r,n.index=a,n.info=null}}const u=bu(t),c=new Map;return c.set(null,u),l.forEach((t=>{let e={...u};t===o&&(e.color=s,e.index=a,e.picked=!0),e=wu({layer:t,info:e,mode:r});const i=e.layer;t===o&&"hover"===r&&(n.info=e),c.set(i.id,e),"hover"===r&&i.updateAutoHighlight(e)})),c}function wu({layer:t,info:e,mode:n}){for(;t&&e;){const r=e.layer||null;e.sourceLayer=r,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:r}),t=t.parent}return e}class xu{constructor(t){Rt(this,"gl",void 0),Rt(this,"pickingFBO",void 0),Rt(this,"depthFBO",void 0),Rt(this,"pickLayersPass",void 0),Rt(this,"layerFilter",void 0),Rt(this,"lastPickedInfo",void 0),Rt(this,"_pickable",!0),this.gl=t,this.pickLayersPass=new pu(t),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(t){return this._pickClosestObject(t)}pickObjects(t){return this._pickVisibleObjects(t)}getLastPickedObject({x:t,y:e,layers:n,viewports:r},i=this.lastPickedInfo.info){const s=i&&i.layer&&i.layer.id,o=i&&i.viewport&&i.viewport.id,a=s?n.find((t=>t.id===s)):null,l=o&&r.find((t=>t.id===o))||r[0],u=l&&l.unproject([t-l.x,e-l.y]),c={x:t,y:e,viewport:l,coordinate:u,layer:a};return{...i,...c}}_resizeBuffer(){var t,e;const{gl:n}=this;if(!this.pickingFBO&&(this.pickingFBO=new ea(n),ea.isSupported(n,{colorBufferFloat:!0}))){const t=new ea(n);t.attach({36064:new Ao(n,{format:ts(n)?34836:6408,type:5126})}),this.depthFBO=t}null===(t=this.pickingFBO)||void 0===t||t.resize({width:n.canvas.width,height:n.canvas.height}),null===(e=this.depthFBO)||void 0===e||e.resize({width:n.canvas.width,height:n.canvas.height})}_getPickable(t){if(!1===this._pickable)return null;const e=t.filter((t=>t.isPickable()&&!t.isComposite));return e.length?e:null}_pickClosestObject({layers:t,views:e,viewports:n,x:r,y:i,radius:s=0,depth:o=1,mode:a="query",unproject3D:l,onViewportActive:u,effects:c}){const h=this._getPickable(t),d=Fs(this.gl);if(!h)return{result:[],emptyInfo:bu({viewports:n,x:r,y:i,pixelRatio:d})};this._resizeBuffer();const f=Ns(this.gl,[r,i],!0),p=[f.x+Math.floor(f.width/2),f.y+Math.floor(f.height/2)],g=Math.round(s*d),{width:m,height:v}=this.pickingFBO,y=this._getPickingRect({deviceX:p[0],deviceY:p[1],deviceRadius:g,deviceWidth:m,deviceHeight:v}),b={x:r-s,y:i-s,width:2*s+1,height:2*s+1};let _;const w=[],x=new Set;for(let t=0;t<o;t++){let s,f;s=y?yu({...this._drawAndSample({layers:h,views:e,viewports:n,onViewportActive:u,deviceRect:y,cullRect:b,effects:c,pass:"picking:".concat(a)}),deviceX:p[0],deviceY:p[1],deviceRadius:g,deviceRect:y}):{pickedColor:null,pickedObjectIndex:-1},s.pickedLayer&&l&&this.depthFBO&&(f=this._drawAndSample({layers:[s.pickedLayer],views:e,viewports:n,onViewportActive:u,deviceRect:{x:s.pickedX,y:s.pickedY,width:1,height:1},cullRect:b,effects:c,pass:"picking:".concat(a,":z")},!0).pickedColors[0]),s.pickedLayer&&t+1<o&&(x.add(s.pickedLayer),s.pickedLayer.disablePickingIndex(s.pickedObjectIndex)),_=_u({pickInfo:s,lastPickedInfo:this.lastPickedInfo,mode:a,layers:h,viewports:n,x:r,y:i,z:f,pixelRatio:d});for(const t of _.values())t.layer&&w.push(t);if(!s.pickedColor)break}for(const t of x)t.restorePickingColors();return{result:w,emptyInfo:_.get(null)}}_pickVisibleObjects({layers:t,views:e,viewports:n,x:r,y:i,width:s=1,height:o=1,mode:a="query",maxObjects:l=null,onViewportActive:u,effects:c}){const h=this._getPickable(t);if(!h)return[];this._resizeBuffer();const d=Fs(this.gl),f=Ns(this.gl,[r,i],!0),p=f.x,g=f.y+f.height,m=Ns(this.gl,[r+s,i+o],!0),v=m.x+m.width,y=m.y,b={x:p,y,width:v-p,height:g-y},_=function({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t)for(let r=0;r<t.length;r+=4)if(t[r+3]-1>=0){const i=t.slice(r,r+4),s=i.join(",");if(!n.has(s)){const t=e(i);t?n.set(s,{...t,color:i}):de.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(n.values())}(this._drawAndSample({layers:h,views:e,viewports:n,onViewportActive:u,deviceRect:b,cullRect:{x:r,y:i,width:s,height:o},effects:c,pass:"picking:".concat(a)})),w=new Map,x=Number.isFinite(l);for(let t=0;t<_.length&&!(x&&l&&w.size>=l);t++){const e=_[t];let n={color:e.pickedColor,layer:null,index:e.pickedObjectIndex,picked:!0,x:r,y:i,pixelRatio:d};n=wu({layer:e.pickedLayer,info:n,mode:a}),w.has(n.object)||w.set(n.object,n)}return Array.from(w.values())}_drawAndSample({layers:t,views:e,viewports:n,onViewportActive:r,deviceRect:i,cullRect:s,effects:o,pass:a},l=!1){const u=l?this.depthFBO:this.pickingFBO,{decodePickingColor:c}=this.pickLayersPass.render({layers:t,layerFilter:this.layerFilter,views:e,viewports:n,onViewportActive:r,pickingFBO:u,deviceRect:i,cullRect:s,effects:o,pass:a,pickZ:l}),{x:h,y:d,width:f,height:p}=i,g=new(l?Float32Array:Uint8Array)(f*p*4);return Ho(u,{sourceX:h,sourceY:d,sourceWidth:f,sourceHeight:p,target:g}),{pickedColors:g,decodePickingColor:c}}_getPickingRect({deviceX:t,deviceY:e,deviceRadius:n,deviceWidth:r,deviceHeight:i}){const s=Math.max(0,t-n),o=Math.max(0,e-n),a=Math.min(r,t+n+1)-s,l=Math.min(i,e+n+1)-o;return a<=0||l<=0?null:{x:s,y:o,width:a,height:l}}}const Mu={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class Su{constructor(t){Rt(this,"el",null),Rt(this,"isVisible",!1);const e=t.parentElement;e&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,Mu),e.appendChild(this.el))}setTooltip(t,e,n){const r=this.el;if(r){if("string"==typeof t)r.innerText=t;else{if(!t)return this.isVisible=!1,void(r.style.display="none");t.text&&(r.innerText=t.text),t.html&&(r.innerHTML=t.html),t.className&&(r.className=t.className),Object.assign(r.style,t.style)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(e,"px, ").concat(n,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}const{_parseImageNode:Pu}=globalThis,Eu="undefined"!=typeof Image,Cu="undefined"!=typeof ImageBitmap,ku=Boolean(Pu),Tu=!!Ge||ku;function Au(t){const e=function(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&t instanceof Image?"image":t&&"object"==typeof t&&t.data&&t.width&&t.height?"data":null}(t);if(!e)throw new Error("Not an image");return e}const Lu=/^data:image\/svg\+xml/,Ou=/\.svg((\?|#).*)?$/;function Iu(t){return t&&(Lu.test(t)||Ou.test(t))}function Ru(t,e){if(Iu(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function zu(t,e,n){const r=function(t,e){if(Iu(e)){let e=(new TextDecoder).decode(t);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(e=unescape(encodeURIComponent(e)))}catch(t){throw new Error(t.message)}return"data:image/svg+xml;base64,".concat(btoa(e))}return Ru(t,e)}(t,n),i=self.URL||self.webkitURL,s="string"!=typeof r&&i.createObjectURL(r);try{return await async function(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise(((e,r)=>{try{n.onload=()=>e(n),n.onerror=e=>r(new Error("Could not load image ".concat(t,": ").concat(e)))}catch(t){r(t)}}))}(s||r,e)}finally{s&&i.revokeObjectURL(s)}}const Fu={};let Nu=!0;const ju=!1,Du=!0;function Bu(t){const e=Uu(t);return function(t){const e=Uu(t);return e.byteLength>=24&&2303741511===e.getUint32(0,ju)?{mimeType:"image/png",width:e.getUint32(16,ju),height:e.getUint32(20,ju)}:null}(e)||function(t){const e=Uu(t);if(!(e.byteLength>=3&&65496===e.getUint16(0,ju)&&255===e.getUint8(2)))return null;const{tableMarkers:n,sofMarkers:r}=function(){const t=new Set([65499,65476,65484,65501,65534]);for(let e=65504;e<65520;++e)t.add(e);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let i=2;for(;i+9<e.byteLength;){const t=e.getUint16(i,ju);if(r.has(t))return{mimeType:"image/jpeg",height:e.getUint16(i+5,ju),width:e.getUint16(i+7,ju)};if(!n.has(t))return null;i+=2,i+=e.getUint16(i,ju)}return null}(e)||function(t){const e=Uu(t);return e.byteLength>=10&&1195984440===e.getUint32(0,ju)?{mimeType:"image/gif",width:e.getUint16(6,Du),height:e.getUint16(8,Du)}:null}(e)||function(t){const e=Uu(t);return e.byteLength>=14&&16973===e.getUint16(0,ju)&&e.getUint32(2,Du)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,Du),height:e.getUint32(22,Du)}:null}(e)}function Uu(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}const Vu={id:"image",module:"images",name:"Images",version:"3.2.5",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:async function(t,e,n){const r=((e=e||{}).image||{}).type||"auto",{url:i}=n||{};let s;switch(function(t){switch(t){case"auto":case"data":return function(){if(Cu)return"imagebitmap";if(Eu)return"image";if(Tu)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(t){switch(t){case"auto":return Cu||Eu||Tu;case"imagebitmap":return Cu;case"image":return Eu;case"data":return Tu;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}(r)){case"imagebitmap":s=await async function(t,e,n){let r;r=Iu(n)?await zu(t,e,n):Ru(t,n);const i=e&&e.imagebitmap;return await async function(t,e=null){if(!function(t){for(const e in t||Fu)return!1;return!0}(e)&&Nu||(e=null),e)try{return await createImageBitmap(t,e)}catch(t){console.warn(t),Nu=!1}return await createImageBitmap(t)}(r,i)}(t,e,i);break;case"image":s=await zu(t,e,i);break;case"data":s=await async function(t,e){const{mimeType:n}=Bu(t)||{},r=globalThis._parseImageNode;return ke(r),await r(t,n)}(t);break;default:ke(!1)}return"data"===r&&(s=function(t){switch(Au(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}(s)),s},tests:[t=>Boolean(Bu(new DataView(t)))],options:{image:{type:"auto",decode:!0}}},Wu={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(t){const e=t[0],n=t[t.length-1];return"{"===e&&"}"===n||"["===e&&"]"===n},parseTextSync:JSON.parse},Gu="8.8.4",Hu=globalThis.deck&&globalThis.deck.VERSION;if(Hu&&Hu!==Gu)throw new Error("deck.gl - multiple versions detected: ".concat(Hu," vs ").concat(Gu));Hu||(de.log(1,"deck.gl ".concat(Gu))(),globalThis.deck={...globalThis.deck,VERSION:Gu,version:Gu,log:de,_registerLoggers:function(t){fe=t}},function(t){const e=Cn();t=Array.isArray(t)?t:[t];for(const n of t){const t=Ae(n);e.find((e=>t===e))||e.unshift(t)}}([Wu,[Vu,{imagebitmap:{premultiplyAlpha:"none"}}]]));const qu=globalThis.deck,Xu=globalThis;function Zu(t){if(!t&&!Ht())return"Node";if(Wt(t))return"Electron";const e="undefined"!=typeof navigator?navigator:{},n=t||e.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i?"IE":Xu.chrome?"Chrome":Xu.safari?"Safari":Xu.mozInnerScreenX?"Firefox":"Unknown"}class Yu extends co{get[Symbol.toStringTag](){return"Query"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=ts(t),r=Ko(t,Yo);let i=n||r;for(const t of e)switch(t){case"queries":i=i&&n;break;case"timers":i=i&&r;break;default:eo(!1)}return i}constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(t?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(t){return this._queryPending||(this.target=t,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const t=this.gl2.getQueryParameter(this.handle,34919);return t&&(this._queryPending=!1),t}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let e=0;return this._pollingPromise=new Promise(((n,r)=>{const i=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):e++>t?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(i)};requestAnimationFrame(i)})),this._pollingPromise}_createHandle(){return Yu.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const $u=Ht()&&"undefined"!=typeof document;let Qu=0;class Ku{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:e=(t=>Hs(t)),onAddHTML:n=null,onInitialize:r=(()=>{}),onRender:i=(()=>{}),onFinalize:s=(()=>{}),onError:o,gl:a=null,glOptions:l={},debug:u=!1,createFramebuffer:c=!1,autoResizeViewport:h=!0,autoResizeDrawingBuffer:d=!0,stats:f=to.get("animation-loop-".concat(Qu++))}=t;let{useDevicePixels:p=!0}=t;"useDevicePixelRatio"in t&&(Qi.deprecated("useDevicePixelRatio","useDevicePixels")(),p=t.useDevicePixelRatio),this.props={onCreateContext:e,onAddHTML:n,onInitialize:r,onRender:i,onFinalize:s,onError:o,gl:a,glOptions:l,debug:u,createFramebuffer:c},this.gl=a,this.needsRedraw=null,this.timeline=null,this.stats=f,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:h,autoResizeDrawingBuffer:d,useDevicePixels:p}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(t){return eo("string"==typeof t),this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}start(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const e=this._getPageLoadPromise().then((()=>!this._running||this._initialized?null:(this._createWebGLContext(t),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=Yu.isSupported(this.gl,["timers"])?new Yu(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps)))).then((t=>{this._running&&(this._addCallbackData(t||{}),!1!==t&&this._startLoop())}));return this.props.onError&&e.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((t=>{this._resolveNextFrame=t}))),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=document.getElementById(t);return n?Number(n.value):e}setViewParameters(){return Qi.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const t=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(t))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(t)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=$u?new Promise(((t,e)=>{$u&&"complete"===document.readyState?t(document):window.addEventListener("load",(()=>{t(document)}))})):Promise.resolve({})),this._pageLoadPromise}_setDisplay(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_cancelAnimationFrame(t){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(t):(e=t,"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e));var e}_requestAnimationFrame(t){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(t):(e=t,"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60));var e}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:t,height:e,aspect:n}=this._getSizeAndAspect();t===this.animationProps.width&&e===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=e,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(t){"object"==typeof t&&null!==t&&(this.animationProps=Object.assign({},this.animationProps,t))}_createWebGLContext(t){if(this.offScreen=t.canvas&&"undefined"!=typeof OffscreenCanvas&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?qs(this.props.gl,t):this.onCreateContext(t),!Ji(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Rs(this.gl,gs),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";const e=document.createElement("div");e.style.position="absolute",e.style.left="10px",e.style.bottom="10px",e.style.width="300px",e.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(e);const n=this.props.onAddHTML(e);n&&(e.innerHTML=n)}}_getSizeAndAspect(){const t=this.gl.drawingBufferWidth,e=this.gl.drawingBufferHeight;let n=1;const{canvas:r}=this.gl;return r&&r.clientHeight?n=r.clientWidth/r.clientHeight:t>0&&e>0&&(n=t/e),{width:t,height:e,aspect:n}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas)return void Qs(t,js(e.useDevicePixels),e);const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new ea(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:t}=this.gl;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}_onMouseleave(t){this.animationProps._mousePosition=null}}var Ju=o(797),tc=o.n(Ju);const ec={mousedown:1,mousemove:2,mouseup:4};!function(t){const e=t.prototype.handler;t.prototype.handler=function(t){const n=this.store;t.button>0&&"pointerdown"===t.type&&(function(e,n){for(let n=0;n<e.length;n++)if(e[n].pointerId===t.pointerId)return!0;return!1}(n)||n.push(t)),e.call(this,t)}}(tc().PointerEventInput),tc().MouseInput.prototype.handler=function(t){let e=ec[t.type];1&e&&t.button>=0&&(this.pressed=!0),2&e&&0===t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))};const nc=tc().Manager,rc=tc();class ic{constructor(t,e,n){this.element=t,this.callback=e,this.options={enable:!0,...n}}}const sc=rc?[[rc.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[rc.Rotate,{enable:!1}],[rc.Pinch,{enable:!1}],[rc.Swipe,{enable:!1}],[rc.Pan,{threshold:0,enable:!1}],[rc.Press,{enable:!1}],[rc.Tap,{event:"doubletap",taps:2,enable:!1}],[rc.Tap,{event:"anytap",enable:!1}],[rc.Tap,{enable:!1}]]:null,oc={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},ac={doubletap:["tap"]},lc={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},uc={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},cc={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},hc={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},dc="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",fc="undefined"!=typeof window?window:o.g;void 0!==o.g?o.g:window,"undefined"!=typeof document&&document;let pc=!1;try{const t={get passive(){return pc=!0,!0}};fc.addEventListener("test",null,t),fc.removeEventListener("test",null)}catch(t){pc=!1}const gc=-1!==dc.indexOf("firefox"),{WHEEL_EVENTS:mc}=uc,vc="wheel",yc=4.000244140625;class bc extends ic{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{if(!this.options.enable)return;let e=t.deltaY;fc.WheelEvent&&(gc&&t.deltaMode===fc.WheelEvent.DOM_DELTA_PIXEL&&(e/=fc.devicePixelRatio),t.deltaMode===fc.WheelEvent.DOM_DELTA_LINE&&(e*=40)),0!==e&&e%yc==0&&(e=Math.floor(e/yc)),t.shiftKey&&e&&(e*=.25),this.callback({type:vc,center:{x:t.clientX,y:t.clientY},delta:-e,srcEvent:t,pointerType:"mouse",target:t.target})},this.events=(this.options.events||[]).concat(mc),this.events.forEach((e=>t.addEventListener(e,this.handleEvent,!!pc&&{passive:!1})))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===vc&&(this.options.enable=e)}}const{MOUSE_EVENTS:_c}=uc,wc="pointermove",xc="pointerover",Mc="pointerout",Sc="pointerenter",Pc="pointerleave";class Ec extends ic{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{this.handleOverEvent(t),this.handleOutEvent(t),this.handleEnterEvent(t),this.handleLeaveEvent(t),this.handleMoveEvent(t)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,this.events=(this.options.events||[]).concat(_c),this.events.forEach((e=>t.addEventListener(e,this.handleEvent)))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===wc&&(this.enableMoveEvent=e),t===xc&&(this.enableOverEvent=e),t===Mc&&(this.enableOutEvent=e),t===Sc&&(this.enableEnterEvent=e),t===Pc&&(this.enableLeaveEvent=e)}handleOverEvent(t){this.enableOverEvent&&"mouseover"===t.type&&this._emit(xc,t)}handleOutEvent(t){this.enableOutEvent&&"mouseout"===t.type&&this._emit(Mc,t)}handleEnterEvent(t){this.enableEnterEvent&&"mouseenter"===t.type&&this._emit(Sc,t)}handleLeaveEvent(t){this.enableLeaveEvent&&"mouseleave"===t.type&&this._emit(Pc,t)}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":0===t.which&&(this.pressed=!1),this.pressed||this._emit(wc,t);break;case"mouseup":this.pressed=!1}}_emit(t,e){this.callback({type:t,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}const{KEY_EVENTS:Cc}=uc,kc="keydown",Tc="keyup";class Ac extends ic{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{const e=t.target||t.srcElement;"INPUT"===e.tagName&&"text"===e.type||"TEXTAREA"===e.tagName||(this.enableDownEvent&&"keydown"===t.type&&this.callback({type:kc,srcEvent:t,key:t.key,target:t.target}),this.enableUpEvent&&"keyup"===t.type&&this.callback({type:Tc,srcEvent:t,key:t.key,target:t.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(Cc),t.tabIndex=this.options.tabIndex||0,t.style.outline="none",this.events.forEach((e=>t.addEventListener(e,this.handleEvent)))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===kc&&(this.enableDownEvent=e),t===Tc&&(this.enableUpEvent=e)}}const Lc="contextmenu";class Oc extends ic{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{this.options.enable&&this.callback({type:Lc,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})},t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,e){t===Lc&&(this.options.enable=e)}}const Ic={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function Rc(t){const e=Ic[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r,which:i}=t.srcEvent;let s=!1,o=!1,a=!1;return 4===e||2===e&&!Number.isFinite(n)?(s=1===i,o=2===i,a=3===i):2===e?(s=Boolean(1&n),o=Boolean(4&n),a=Boolean(2&n)):1===e&&(s=0===r,o=1===r,a=2===r),{leftButton:s,middleButton:o,rightButton:a}}function zc(t,e){const n=t.center;if(!n)return null;const r=e.getBoundingClientRect(),i=r.width/e.offsetWidth||1,s=r.height/e.offsetHeight||1;return{center:n,offsetCenter:{x:(n.x-r.left-e.clientLeft)/i,y:(n.y-r.top-e.clientTop)/s}}}const Fc={srcElement:"root",priority:0};class Nc{constructor(t){this.handleEvent=t=>{if(this.isEmpty())return;const e=this._normalizeEvent(t);let n=t.srcEvent.target;for(;n&&n!==e.rootElement;){if(this._emit(e,n),e.handled)return;n=n.parentNode}this._emit(e,"root")},this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(t,e,n,r=!1,i=!1){const{handlers:s,handlersByElement:o}=this;let a=Fc;"string"==typeof n||n&&n.addEventListener?a={...Fc,srcElement:n}:n&&(a={...Fc,...n});let l=o.get(a.srcElement);l||(l=[],o.set(a.srcElement,l));const u={type:t,handler:e,srcElement:a.srcElement,priority:a.priority};r&&(u.once=!0),i&&(u.passive=!0),s.push(u),this._active=this._active||!u.passive;let c=l.length-1;for(;c>=0&&!(l[c].priority>=u.priority);)c--;l.splice(c+1,0,u)}remove(t,e){const{handlers:n,handlersByElement:r}=this;for(let i=n.length-1;i>=0;i--){const s=n[i];if(s.type===t&&s.handler===e){n.splice(i,1);const t=r.get(s.srcElement);t.splice(t.indexOf(s),1),0===t.length&&r.delete(s.srcElement)}}this._active=n.some((t=>!t.passive))}_emit(t,e){const n=this.handlersByElement.get(e);if(n){let e=!1;const r=()=>{t.handled=!0},i=()=>{t.handled=!0,e=!0},s=[];for(let o=0;o<n.length;o++){const{type:a,handler:l,once:u}=n[o];if(l({...t,type:a,stopPropagation:r,stopImmediatePropagation:i}),u&&s.push(n[o]),e)break}for(let t=0;t<s.length;t++){const{type:e,handler:n}=s[t];this.remove(e,n)}}}_normalizeEvent(t){const e=this.eventManager.getElement();return{...t,...Rc(t),...zc(t,e),preventDefault:()=>{t.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:e}}}const jc={events:null,recognizers:null,recognizerOptions:{},Manager:nc,touchAction:"none",tabIndex:0};class Dc{constructor(t=null,e){this._onBasicInput=t=>{const{srcEvent:e}=t,n=lc[e.type];n&&this.manager.emit(n,t)},this._onOtherEvent=t=>{this.manager.emit(t.type,t)},this.options={...jc,...e},this.events=new Map,this.setElement(t);const{events:n}=this.options;n&&this.on(n)}getElement(){return this.element}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;const{options:e}=this,n=e.Manager;this.manager=new n(t,{touchAction:e.touchAction,recognizers:e.recognizers||sc}).on("hammer.input",this._onBasicInput),e.recognizers||Object.keys(oc).forEach((t=>{const e=this.manager.get(t);e&&oc[t].forEach((t=>{e.recognizeWith(t)}))}));for(const t in e.recognizerOptions){const n=this.manager.get(t);if(n){const r=e.recognizerOptions[t];delete r.enable,n.set(r)}}this.wheelInput=new bc(t,this._onOtherEvent,{enable:!1}),this.moveInput=new Ec(t,this._onOtherEvent,{enable:!1}),this.keyInput=new Ac(t,this._onOtherEvent,{enable:!1,tabIndex:e.tabIndex}),this.contextmenuInput=new Oc(t,this._onOtherEvent,{enable:!1});for(const[t,e]of this.events)e.isEmpty()||(this._toggleRecognizer(e.recognizerName,!0),this.manager.on(t,e.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,e,n){this._addEventHandler(t,e,n,!1)}once(t,e,n){this._addEventHandler(t,e,n,!0)}watch(t,e,n){this._addEventHandler(t,e,n,!1,!0)}off(t,e){this._removeEventHandler(t,e)}_toggleRecognizer(t,e){const{manager:n}=this;if(!n)return;const r=n.get(t);if(r&&r.options.enable!==e){r.set({enable:e});const i=ac[t];i&&!this.options.recognizers&&i.forEach((i=>{const s=n.get(i);e?(s.requireFailure(t),r.dropRequireFailure(i)):s.dropRequireFailure(t)}))}this.wheelInput.enableEventType(t,e),this.moveInput.enableEventType(t,e),this.keyInput.enableEventType(t,e),this.contextmenuInput.enableEventType(t,e)}_addEventHandler(t,e,n,r,i){if("string"!=typeof t){n=e;for(const e in t)this._addEventHandler(e,t[e],n,r,i);return}const{manager:s,events:o}=this,a=hc[t]||t;let l=o.get(a);l||(l=new Nc(this),o.set(a,l),l.recognizerName=cc[a]||a,s&&s.on(a,l.handleEvent)),l.add(t,e,n,r,i),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(t,e){if("string"!=typeof t){for(const e in t)this._removeEventHandler(e,t[e]);return}const{events:n}=this,r=hc[t]||t,i=n.get(r);if(i&&(i.remove(t,e),i.isEmpty())){const{recognizerName:t}=i;let e=!1;for(const r of n.values())if(r.recognizerName===t&&!r.isEmpty()){e=!0;break}e||this._toggleRecognizer(t,!1)}}}function Bc(){}const Uc={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Bc,onResize:Bc,onViewStateChange:Bc,onInteractionStateChange:Bc,onBeforeRender:Bc,onAfterRender:Bc,onLoad:Bc,onError:t=>de.error(t.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:({isDragging:t})=>t?"grabbing":"grab",getTooltip:null,debug:!1,drawPickingColors:!1};class Vc{constructor(t){Rt(this,"props",void 0),Rt(this,"width",0),Rt(this,"height",0),Rt(this,"userData",{}),Rt(this,"canvas",null),Rt(this,"viewManager",null),Rt(this,"layerManager",null),Rt(this,"effectManager",null),Rt(this,"deckRenderer",null),Rt(this,"deckPicker",null),Rt(this,"eventManager",null),Rt(this,"tooltip",null),Rt(this,"metrics",void 0),Rt(this,"animationLoop",void 0),Rt(this,"stats",void 0),Rt(this,"viewState",void 0),Rt(this,"cursorState",void 0),Rt(this,"_needsRedraw",void 0),Rt(this,"_pickRequest",void 0),Rt(this,"_lastPointerDownInfo",null),Rt(this,"_metricsCounter",void 0),Rt(this,"_onPointerMove",(t=>{const{_pickRequest:e}=this;if("pointerleave"===t.type)e.x=-1,e.y=-1,e.radius=0;else{if(t.leftButton||t.rightButton)return;{const n=t.offsetCenter;if(!n)return;e.x=n.x,e.y=n.y,e.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:e.x,y:e.y}),e.event=t})),Rt(this,"_onEvent",(t=>{const e=si[t.type],n=t.offsetCenter;if(!e||!n||!this.layerManager)return;const r=this.layerManager.getLayers(),i=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:r,viewports:this.getViewports(n)},this._lastPointerDownInfo),{layer:s}=i,o=s&&(s[e.handler]||s.props[e.handler]),a=this.props[e.handler];let l=!1;o&&(l=o.call(s,i,t)),!l&&a&&a(i,t)})),Rt(this,"_onPointerDown",(t=>{const e=t.offsetCenter,n=this._pick("pickObject","pickObject Time",{x:e.x,y:e.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=n.result[0]||n.emptyInfo})),this.props={...Uc,...t},t=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},t.viewState&&t.initialViewState&&de.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===Zu()&&de.warn("IE 11 is not supported")(),this.viewState=t.initialViewState,t.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new we({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),t._typedArrayManagerProps&&Un.setOptions(t._typedArrayManagerProps),this.animationLoop.start()}finalize(){var t,e,n,r,i,s,o,a;this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(t=this.layerManager)||void 0===t||t.finalize(),this.layerManager=null,null===(e=this.viewManager)||void 0===e||e.finalize(),this.viewManager=null,null===(n=this.effectManager)||void 0===n||n.finalize(),this.effectManager=null,null===(r=this.deckRenderer)||void 0===r||r.finalize(),this.deckRenderer=null,null===(i=this.deckPicker)||void 0===i||i.finalize(),this.deckPicker=null,null===(s=this.eventManager)||void 0===s||s.destroy(),this.eventManager=null,null===(o=this.tooltip)||void 0===o||o.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas||(null===(a=this.canvas.parentElement)||void 0===a||a.removeChild(this.canvas),this.canvas=null)}setProps(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&de.removed("onLayerHover","onHover")(),"onLayerClick"in t&&de.removed("onLayerClick","onClick")(),t.initialViewState&&!rl(this.props.initialViewState,t.initialViewState)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);const e=Object.create(this.props);Object.assign(e,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(e),this.layerManager&&(this.viewManager.setProps(e),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(e),this.effectManager.setProps(e),this.deckRenderer.setProps(e),this.deckPicker.setProps(e)),this.stats.get("setProps Time").timeEnd()}needsRedraw(t={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(t),r=this.layerManager.needsRedraw(t),i=this.effectManager.needsRedraw(t),s=this.deckRenderer.needsRedraw(t);return e=e||n||r||i||s,e}redraw(t){if(!this.layerManager)return;let e=this.needsRedraw({clearRedrawFlags:!0});e=t||e,e&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(e):this._drawLayers(e))}get isInitialized(){return null!==this.viewManager}getViews(){return ll(this.viewManager),this.viewManager.views}getViewports(t){return ll(this.viewManager),this.viewManager.getViewports(t)}pickObject(t){const e=this._pick("pickObject","pickObject Time",t).result;return e.length?e[0]:null}pickMultipleObjects(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}pickObjects(t){return this._pick("pickObjects","pickObjects Time",t)}_addResources(t,e=!1){for(const n in t)this.layerManager.resourceManager.add({resourceId:n,data:t[n],forceUpdate:e})}_removeResources(t){for(const e of t)this.layerManager.resourceManager.remove(e)}_pick(t,e,n){ll(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(e).timeStart();const i=this.deckPicker[t]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return r.get(e).timeEnd(),i}_createCanvas(t){let e=t.canvas;return"string"==typeof e&&(e=document.getElementById(e),ll(e)),e||(e=document.createElement("canvas"),e.id=t.id||"deckgl-overlay",(t.parent||document.body).appendChild(e)),Object.assign(e.style,t.style),e}_setCanvasSize(t){if(!this.canvas)return;const{width:e,height:n}=t;if(e||0===e){const t=Number.isFinite(e)?"".concat(e,"px"):e;this.canvas.style.width=t}if(n||0===n){var r;const e=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.position=(null===(r=t.style)||void 0===r?void 0:r.position)||"absolute",this.canvas.style.height=e}}_updateCanvasSize(){const{canvas:t}=this;if(!t)return;const e=t.clientWidth||t.width,n=t.clientHeight||t.height;var r;e===this.width&&n===this.height||(this.width=e,this.height=n,null===(r=this.viewManager)||void 0===r||r.setProps({width:e,height:n}),this.props.onResize({width:e,height:n}))}_createAnimationLoop(t){const{width:e,height:n,gl:r,glOptions:i,debug:s,onError:o,onBeforeRender:a,onAfterRender:l,useDevicePixels:u}=t;return new Ku({width:e,height:n,useDevicePixels:u,autoResizeViewport:!1,gl:r,onCreateContext:t=>Hs({...i,...t,canvas:this.canvas,debug:s,onContextLost:()=>this._onContextLost()}),onInitialize:t=>this._setGLContext(t.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:a,onAfterRender:l,onError:o})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let t=this.props.views||[new Il({id:"default-view"})];return t=Array.isArray(t)?t:[t],t.length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}_onContextLost(){const{onError:t}=this.props;this.animationLoop&&t&&t(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:t}=this;if(t.event){const{result:n,emptyInfo:r}=this._pick("pickObject","pickObject Time",t);this.cursorState.isHovering=n.length>0;let i=r,s=!1;for(const r of n){var e;i=r,s=(null===(e=r.layer)||void 0===e?void 0:e.onHover(r,t.event))||s}if(!s&&this.props.onHover&&this.props.onHover(i,t.event),this.props.getTooltip&&this.tooltip){const t=this.props.getTooltip(i);this.tooltip.setTooltip(t,i.x,i.y)}t.event=null}}_updateCursor(){const t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(t){if(this.layerManager)return;this.canvas||(this.canvas=t.canvas,qs(t,{enable:!0,copyState:!0})),this.tooltip=new Su(this.canvas),Rs(t,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(t);const e=new Nt;e.play(),this.animationLoop.attachTimeline(e),this.eventManager=new Dc(this.props.parent||t.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const t in si)this.eventManager.on(t,this._onEvent);this.viewManager=new il({timeline:e,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new nl(t,{deck:this,stats:this.stats,viewport:n,timeline:e}),this.effectManager=new hu,this.deckRenderer=new mu(t),this.deckPicker=new xu(t),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(t,e){const{gl:n}=this.layerManager.context;Rs(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:t,effects:this.effectManager.getEffects(),...e}),this.props.onAfterRender({gl:n})}_onRenderFrame(t){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),de.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(t){const e=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState={...this.viewState,[t.viewId]:e},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(t){this.cursorState.isDragging=t.isDragging||!1,this.props.onInteractionStateChange(t)}_getFrameStats(){const{stats:t}=this;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();const e=this.animationLoop.stats;t.get("GPU Time").addTime(e.get("GPU Time").lastTiming),t.get("CPU Time").addTime(e.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:t,stats:e}=this;t.fps=e.get("frameRate").getHz(),t.setPropsTime=e.get("setProps Time").time,t.updateAttributesTime=e.get("Update Attributes").time,t.framesRedrawn=e.get("Redraw Count").count,t.pickTime=e.get("pickObject Time").time+e.get("pickMultipleObjects Time").time+e.get("pickObjects Time").time,t.pickCount=e.get("Pick Count").count,t.gpuTime=e.get("GPU Time").time,t.cpuTime=e.get("CPU Time").time,t.gpuTimePerFrame=e.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=e.get("CPU Time").getAverageTime();const n=to.get("Memory Usage");t.bufferMemory=n.get("Buffer Memory").count,t.textureMemory=n.get("Texture Memory").count,t.renderbufferMemory=n.get("Renderbuffer Memory").count,t.gpuMemory=n.get("GPU Memory").count}}function Wc(t){const{lng:e,lat:n}=t.getCenter();return{longitude:(e+540)%360-180,latitude:n,zoom:t.getZoom(),bearing:t.getBearing(),pitch:t.getPitch(),padding:t.getPadding(),repeat:t.getRenderWorldCopies()}}function Gc(t,e,n=!0){const{mapboxVersion:r}=t.userData;return new dl(Object.assign({id:"mapbox",x:0,y:0,width:t.width,height:t.height},Wc(e),n?{nearZMultiplier:1===r.major&&r.minor>=3||r.major>=2?.02:1/(t.height||1)}:{nearZMultiplier:.1}))}function Hc(t){if(t.userData.isExternal)return;const e=[];let n=0;t.userData.mapboxLayers.forEach((t=>{const r=new(0,t.props.type)(t.props,{_offset:n++});e.push(r)})),t.setProps({layers:e})}Rt(Vc,"defaultProps",Uc),Rt(Vc,"VERSION",qu.VERSION);class qc{constructor(t){if(Rt(this,"id",void 0),Rt(this,"type",void 0),Rt(this,"renderingMode",void 0),Rt(this,"map",void 0),Rt(this,"deck",void 0),Rt(this,"props",void 0),!t.id)throw new Error("Layer must have an unique id");this.id=t.id,this.type="custom",this.renderingMode=t.renderingMode||"3d",this.map=null,this.deck=null,this.props=t}onAdd(t,e){var n;this.map=t,this.deck=function({map:t,gl:e,deck:n}){if(t.__deck)return t.__deck;const r=null==n?void 0:n.props._customRender,i={useDevicePixels:!0,_customRender:e=>{t.triggerRepaint(),null==r||r(e)},parameters:{depthMask:!0,depthTest:!0,blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthFunc:515,blendEquation:32774},views:n&&n.props.views||[new Il({id:"mapbox"})]};let s;return n&&n.props.gl!==e||(Object.assign(i,{gl:e,width:null,height:null,touchAction:"unset",viewState:Wc(t)}),t.on("move",(()=>function(t,e){t.setProps({viewState:Wc(e)}),t.needsRedraw({clearRedrawFlags:!0})}(s,t)))),n?(s=n,n.setProps(i),n.userData.isExternal=!0):(s=new Vc(i),t.on("remove",(()=>{s.finalize(),t.__deck=null}))),s.userData.mapboxLayers=new Set,s.userData.mapboxVersion=function(t){let e=0,n=0;const r=t.version;return r&&([e,n]=r.split(".").slice(0,2).map(Number)),{major:e,minor:n}}(t),t.__deck=s,t.on("render",(()=>{s.isInitialized&&function(t,e){const{mapboxLayers:n,isExternal:r}=t.userData;if(r){const r=Array.from(n,(t=>t.id)),i=ge(t.props.layers,Boolean).some((t=>t&&!r.includes(t.id)));let s=t.getViewports();const o=s.findIndex((t=>"mapbox"===t.id)),a=s.length>1||o<0;(i||a)&&(o>=0&&(s=s.slice(),s[o]=Gc(t,e,!1)),t._drawLayers("mapbox-repaint",{viewports:s,layerFilter:e=>(!t.props.layerFilter||t.props.layerFilter(e))&&("mapbox"!==e.viewport.id||!r.includes(e.layer.id)),clearCanvas:!1}))}t.userData.currentViewport=null}(s,t)})),s}({map:t,gl:e,deck:this.props.deck}),(n=this.deck).userData.mapboxLayers.add(this),Hc(n)}onRemove(){var t;this.deck&&(this,(t=this.deck).userData.mapboxLayers.delete(this),Hc(t))}setProps(t){Object.assign(this.props,t,{id:this.id}),this.deck&&Hc(this.deck)}render(){!function(t,e,n){let{currentViewport:r}=t.userData;r||(r=Gc(t,e,!0),t.userData.currentViewport=r),t.isInitialized&&t._drawLayers("mapbox-repaint",{viewports:[r],layerFilter:({layer:t})=>n.id===t.id,clearCanvas:!1})}(this.deck,this.map,this)}}const Xc="__UNDEFINED__";function Zc(t,e,n,r){if(!(t&&e&&t.style&&t.style._loaded))return;const i=ge(r,Boolean);if(n!==r){const e=ge(n,Boolean),r=new Set(e.map((t=>t.id)));for(const t of i)r.delete(t.id);for(const e of r)t.getLayer(e)&&t.removeLayer(e)}for(const n of i)t.getLayer(n.id)||t.addLayer(new qc({id:n.id,deck:e}),n.props.beforeId);const s=t.style._order,o={};for(const t of i){let{beforeId:e}=t.props;e&&s.includes(e)||(e=Xc),o[e]=o[e]||[],o[e].push(t.id)}for(const e in o){const n=o[e];let r=e===Xc?s.length:s.indexOf(e),i=e===Xc?void 0:e;for(let e=n.length-1;e>=0;e--){const o=n[e],a=s.indexOf(o);a!==r-1&&(t.moveLayer(o,i),a>r&&r++),r--,i=o}}}class Yc{constructor(t){Rt(this,"_props",void 0),Rt(this,"_deck",void 0),Rt(this,"_map",void 0),Rt(this,"_container",void 0),Rt(this,"_interleaved",void 0),Rt(this,"_handleStyleChange",(()=>{Zc(this._map,this._deck,this._props.layers,this._props.layers)})),Rt(this,"_updateContainerSize",(()=>{if(this._map&&this._container){const{clientWidth:t,clientHeight:e}=this._map.getContainer();Object.assign(this._container.style,{width:"".concat(t,"px"),height:"".concat(e,"px")})}})),Rt(this,"_updateViewState",(()=>{const t=this._deck;t&&(t.setProps({viewState:Wc(this._map)}),t.redraw())})),Rt(this,"_handleMouseEvent",(t=>{const e=this._deck;if(!e)return;const n={type:t.type,offsetCenter:t.point,srcEvent:t};switch(t.type){case"click":n.tapCount=1,e._onPointerDown(n),e._onEvent(n);break;case"dblclick":n.type="click",n.tapCount=2,e._onEvent(n);break;case"mousemove":n.type="pointermove",e._onPointerMove(n);break;case"mouseout":n.type="pointerleave",e._onPointerMove(n);break;default:return}}));const{interleaved:e=!1,...n}=t;this._interleaved=e,this._props=n}setProps(t){this._interleaved&&t.layers&&Zc(this._map,this._deck,this._props.layers,t.layers),Object.assign(this._props,t),this._deck&&this._deck.setProps(this._props)}onAdd(t){return this._map=t,this._interleaved?this._onAddInterleaved(t):this._onAddOverlaid(t)}_onAddOverlaid(t){const e=document.createElement("div");return Object.assign(e.style,{position:"absolute",left:0,top:0,pointerEvents:"none"}),this._container=e,this._deck=new Vc({...this._props,parent:e,viewState:Wc(t)}),t.on("resize",this._updateContainerSize),t.on("render",this._updateViewState),t.on("mousemove",this._handleMouseEvent),t.on("mouseout",this._handleMouseEvent),t.on("click",this._handleMouseEvent),t.on("dblclick",this._handleMouseEvent),this._updateContainerSize(),e}_onAddInterleaved(t){return this._deck=new Vc({...this._props,gl:t.painter.context.gl}),t.on("styledata",this._handleStyleChange),Zc(t,this._deck,[],this._props.layers),document.createElement("div")}onRemove(){var t;const e=this._map;e&&(this._interleaved?this._onRemoveInterleaved(e):this._onRemoveOverlaid(e)),null===(t=this._deck)||void 0===t||t.finalize(),this._deck=void 0,this._map=void 0,this._container=void 0}_onRemoveOverlaid(t){t.off("resize",this._updateContainerSize),t.off("render",this._updateViewState),t.off("mousemove",this._handleMouseEvent),t.off("mouseout",this._handleMouseEvent),t.off("click",this._handleMouseEvent),t.off("dblclick",this._handleMouseEvent)}_onRemoveInterleaved(t){t.off("styledata",this._handleStyleChange),Zc(t,this._deck,this._props.layers,[])}getDefaultPosition(){return"top-left"}pickObject(t){return ll(this._deck),this._deck.pickObject(t)}pickMultipleObjects(t){return ll(this._deck),this._deck.pickMultipleObjects(t)}pickObjects(t){return ll(this._deck),this._deck.pickObjects(t)}finalize(){this._map&&this._map.removeControl(this)}}class $c{constructor(t,e){Rt(this,"opts",void 0),Rt(this,"source",void 0),this.opts=e,this.source=t}get value(){return this.source.value}getValue(){const t=this.source.getBuffer(),e=this.getAccessor();if(t)return[t,e];const{value:n}=this.source,{size:r}=e;let i=n;if(n&&n.length!==r){i=new Float32Array(r);const t=e.elementOffset||0;for(let e=0;e<r;++e)i[e]=n[t+e]}return i}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function Qc(t){return t.stride||t.size*t.bytesPerElement}function Kc(t,e){e.offset&&de.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=Qc(t),r=(void 0!==e.vertexOffset?e.vertexOffset:t.vertexOffset||0)*n+(e.elementOffset||0)*t.bytesPerElement+(t.offset||0);return{...e,offset:r,stride:n}}const Jc=[],th=[];function eh(t,e=0,n=1/0){let r=Jc;const i={index:-1,data:t,target:[]};return t?"function"==typeof t[Symbol.iterator]?r=t:t.length>0&&(th.length=t.length,r=th):r=Jc,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),i.index=e-1),{iterable:r,objectInfo:i}}function nh(t){return t&&t[Symbol.asyncIterator]}function rh(t,e){const{size:n,stride:r,offset:i,startIndices:s,nested:o}=e,a=t.BYTES_PER_ELEMENT,l=r?r/a:n,u=i?i/a:0,c=Math.floor((t.length-u)/l);return(e,{index:r,target:i})=>{if(!s){const e=r*l+u;for(let r=0;r<n;r++)i[r]=t[e+r];return i}const a=s[r],h=s[r+1]||c;let d;if(o){d=new Array(h-a);for(let e=a;e<h;e++){const r=e*l+u;i=new Array(n);for(let e=0;e<n;e++)i[e]=t[r+e];d[e-a]=i}}else if(l===n)d=t.subarray(a*n+u,h*n+u);else{d=new t.constructor((h-a)*n);let e=0;for(let r=a;r<h;r++){const i=r*l+u;for(let r=0;r<n;r++)d[e++]=t[i+r]}}return d}}const ih=[],sh=[[0,1/0]];function oh(t){const{source:e,target:n,start:r=0,size:i,getData:s}=t,o=t.end||n.length,a=e.length,l=o-r;if(a>l)return void n.set(e.subarray(0,l),r);if(n.set(e,r),!s)return;let u=a;for(;u<l;){const t=s(u,e);for(let e=0;e<i;e++)n[r+u]=t[e]||0,u++}}const ah={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function lh(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...ah[n],...e,...t,type:n}}function uh(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function ch(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function hh(t){t.push(t.shift())}function dh(t,e){const{doublePrecision:n,settings:r,value:i,size:s}=t,o=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*s)*o}function fh({buffer:t,numInstances:e,attribute:n,fromLength:r,fromStartIndices:i,getData:s=(t=>t)}){const o=n.doublePrecision&&n.value instanceof Float64Array?2:1,a=n.size*o,l=n.byteOffset,u=n.startIndices,c=i&&u,h=dh(n,e),d=n.isConstant;if(!c&&r>=h)return;const f=d?n.value:n.getBuffer().getData({srcByteOffset:l});if(n.settings.normalized&&!d){const t=s;s=(e,r)=>n.normalizeConstant(t(e,r))}const p=d?(t,e)=>s(f,e):(t,e)=>s(f.subarray(t,t+a),e),g=t.getData({length:r}),m=new Float32Array(h);!function({source:t,target:e,size:n,getData:r,sourceStartIndices:i,targetStartIndices:s}){if(!Array.isArray(s))return oh({source:t,target:e,size:n,getData:r}),e;let o=0,a=0;const l=r&&((t,e)=>r(t+a,e)),u=Math.min(i.length,s.length);for(let r=1;r<u;r++){const u=i[r]*n,c=s[r]*n;oh({source:t.subarray(o,u),target:e,start:a,end:c,size:n,getData:l}),o=u,a=c}a<e.length&&oh({source:[],target:e,start:a,size:n,getData:l})}({source:g,target:m,sourceStartIndices:i,targetStartIndices:u,size:a,getData:p}),t.byteLength<m.byteLength+l&&t.reallocate(m.byteLength+l),t.subData({data:m,offset:l})}class ph extends class{constructor(t,e,n){Rt(this,"gl",void 0),Rt(this,"id",void 0),Rt(this,"size",void 0),Rt(this,"settings",void 0),Rt(this,"value",void 0),Rt(this,"doublePrecision",void 0),Rt(this,"_buffer",void 0),Rt(this,"state",void 0),this.gl=t,this.id=e.id||"",this.size=e.size||1;const r=e.logicalType||e.type,i=5130===r;let s,{defaultValue:o}=e;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0),s=i?5126:!r&&e.isIndexed?t&&function(t,e){return Ko(t,"ELEMENT_INDEX_UINT32")}(t)?5125:5123:r||5126;let a=function(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||s||5126);this.doublePrecision=i,i&&!1===e.fp64&&(a=Float32Array),this.value=null,this.settings={...e,defaultType:a,defaultValue:o,logicalType:r,type:s,size:this.size,bytesPerElement:a.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:t,type:e}=this.settings;this._buffer=new Mo(this.gl,{id:this.id,target:t?34963:34962,accessor:{type:e}})}return this._buffer}get byteOffset(){const t=this.getAccessor();return t.vertexOffset?t.vertexOffset*Qc(t):0}get numInstances(){return this.state.numInstances}set numInstances(t){this.state.numInstances=t}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Un.release(this.state.allocatedValue)}getShaderAttributes(t,e){if(this.doublePrecision){const n={},r=this.value instanceof Float64Array,i=function(t,e){const n=Kc(t,e);return{high:n,low:{...n,offset:n.offset+4*t.size}}}(this.getAccessor(),e||{});return n[t]=new $c(this,i.high),n["".concat(t,"64Low")]=r?new $c(this,i.low):new Float32Array(this.size),n}if(e){const n=Kc(this.getAccessor(),e);return{[t]:new $c(this,n)}}return{[t]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let t=null;if(this.state.constant&&this.value){const e=Array.from(this.value);t=[e,e]}else{const{value:e,numInstances:n,size:r}=this,i=n*r;if(e&&i&&e.length>=i){const n=new Array(r).fill(1/0),s=new Array(r).fill(-1/0);for(let t=0;t<i;)for(let i=0;i<r;i++){const r=e[t++];r<n[i]&&(n[i]=r),r>s[i]&&(s[i]=r)}t=[n,s]}}return this.state.bounds=t,t}setData(t){const{state:e}=this;let n;n=ArrayBuffer.isView(t)?{value:t}:t instanceof Mo?{buffer:t}:t;const r={...this.settings,...n};if(e.bufferAccessor=r,e.bounds=null,n.constant){let t=n.value;if(t=this._normalizeValue(t,[],0),this.settings.normalized&&(t=this.normalizeConstant(t)),e.constant&&this._areValuesEqual(t,this.value))return!1;e.externalBuffer=null,e.constant=!0,this.value=t}else if(n.buffer){const t=n.buffer;e.externalBuffer=t,e.constant=!1,this.value=n.value||null;const i=n.value instanceof Float64Array;r.type=n.type||t.accessor.type,r.bytesPerElement=t.accessor.BYTES_PER_ELEMENT*(i?2:1),r.stride=Qc(r)}else if(n.value){this._checkExternalBuffer(n);let t=n.value;e.externalBuffer=null,e.constant=!1,this.value=t,r.bytesPerElement=t.BYTES_PER_ELEMENT,r.stride=Qc(r);const{buffer:i,byteOffset:s}=this;this.doublePrecision&&t instanceof Float64Array&&(t=hr(t,r));const o=t.byteLength+s+2*r.stride;i.byteLength<o&&i.reallocate(o),i.setAccessor(null),i.subData({data:t,offset:s}),r.type=n.type||i.accessor.type}return!0}updateSubBuffer(t={}){this.state.bounds=null;const e=this.value,{startOffset:n=0,endOffset:r}=t;this.buffer.subData({data:this.doublePrecision&&e instanceof Float64Array?hr(e,{size:this.size,startIndex:n,endIndex:r}):e.subarray(n,r),offset:n*e.BYTES_PER_ELEMENT+this.byteOffset})}allocate(t,e=!1){const{state:n}=this,r=n.allocatedValue,i=Un.allocate(r,t+1,{size:this.size,type:this.settings.defaultType,copy:e});this.value=i;const{buffer:s,byteOffset:o}=this;return s.byteLength<i.byteLength+o&&(s.reallocate(i.byteLength+o),e&&r&&s.subData({data:r instanceof Float64Array?hr(r,this):r,offset:o})),n.allocatedValue=i,n.constant=!1,n.externalBuffer=null,n.bufferAccessor=this.settings,!0}_checkExternalBuffer(t){const{value:e}=t;if(!ArrayBuffer.isView(e))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const n=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=e.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(e.constructor.name));e instanceof n||!this.settings.normalized||"normalized"in t||de.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(t){switch(this.settings.type){case 5120:return new Float32Array(t).map((t=>(t+128)/255*2-1));case 5122:return new Float32Array(t).map((t=>(t+32768)/65535*2-1));case 5121:return new Float32Array(t).map((t=>t/255));case 5123:return new Float32Array(t).map((t=>t/65535));default:return t}}_normalizeValue(t,e,n){const{defaultValue:r,size:i}=this.settings;if(Number.isFinite(t))return e[n]=t,e;if(!t)return e[n]=r[0],e;switch(i){case 4:e[n+3]=Number.isFinite(t[3])?t[3]:r[3];case 3:e[n+2]=Number.isFinite(t[2])?t[2]:r[2];case 2:e[n+1]=Number.isFinite(t[1])?t[1]:r[1];case 1:e[n+0]=Number.isFinite(t[0])?t[0]:r[0];break;default:let s=i;for(;--s>=0;)e[n+s]=Number.isFinite(t[s])?t[s]:r[s]}return e}_areValuesEqual(t,e){if(!t||!e)return!1;const{size:n}=this;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}}{constructor(t,e){super(t,e,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:sh}),Rt(this,"constant",!1),this.settings.update=e.update||(e.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(t){this.state.startIndices=t}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:t=!1}={}){const e=this.state.needsRedraw;return this.state.needsRedraw=e&&!t,e}getUpdateTriggers(){const{accessor:t}=this.settings;return[this.id].concat("function"!=typeof t&&t||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(t){if(!t||!this.supportsTransition())return null;const{accessor:e}=this.settings,n=this.settings.transition,r=Array.isArray(e)?t[e.find((e=>t[e]))]:t[e];return lh(r,n)}setNeedsUpdate(t=this.id,e){if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),e){const{startRow:t=0,endRow:n=1/0}=e;this.state.updateRanges=function(t,e){if(t===sh)return t;if(e[0]<0&&(e[0]=0),e[0]>=e[1])return t;const n=[],r=t.length;let i=0;for(let s=0;s<r;s++){const r=t[s];r[1]<e[0]?(n.push(r),i=s+1):r[0]>e[1]?n.push(r):e=[Math.min(r[0],e[0]),Math.max(r[1],e[1])]}return n.splice(i,0,e),n}(this.state.updateRanges,[t,n])}else this.state.updateRanges=sh}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=ih}setNeedsRedraw(t=this.id){this.state.needsRedraw=this.state.needsRedraw||t}allocate(t){const{state:e,settings:n}=this;return!n.noAlloc&&!!n.update&&(super.allocate(t,e.updateRanges!==sh),!0)}updateBuffer({numInstances:t,data:e,props:n,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:i},settings:{update:s,noAlloc:o}}=this;let a=!0;if(s){for(const[o,a]of i)s.call(r,this,{data:e,startRow:o,endRow:a,props:n,numInstances:t});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[e,n]of i){const r=Number.isFinite(e)?this.getVertexOffset(e):0,i=Number.isFinite(n)?this.getVertexOffset(n):o||!Number.isFinite(t)?this.value.length:t*this.size;super.updateSubBuffer({startOffset:r,endOffset:i})}this._checkAttributeArray()}else a=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),a}setConstantValue(t){return void 0!==t&&"function"!=typeof t&&(this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(t){const{state:e}=this;return t?(this.clearNeedsUpdate(),e.lastExternalBuffer===t||(e.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t)),!0):(e.lastExternalBuffer=null,!1)}setBinaryValue(t,e=null){const{state:n,settings:r}=this;if(!t)return n.binaryValue=null,n.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(n.binaryValue===t)return this.clearNeedsUpdate(),!0;if(n.binaryValue=t,this.setNeedsRedraw(),r.transform||e!==this.startIndices){ArrayBuffer.isView(t)&&(t={value:t});const i=t;ll(ArrayBuffer.isView(i.value),"invalid ".concat(r.accessor));const s=Boolean(i.size)&&i.size!==this.size;return n.binaryAccessor=rh(i.value,{size:i.size||this.size,stride:i.stride,offset:i.offset,startIndices:e,nested:s}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}getVertexOffset(t){const{startIndices:e}=this;return(e?e[t]:t)*this.size}getShaderAttributes(){const t=this.settings.shaderAttributes||{[this.id]:null},e={};for(const n in t)Object.assign(e,super.getShaderAttributes(n,t[n]));return e}_autoUpdater(t,{data:e,startRow:n,endRow:r,props:i,numInstances:s}){if(t.constant)return;const{settings:o,state:a,value:l,size:u,startIndices:c}=t,{accessor:h,transform:d}=o,f=a.binaryAccessor||("function"==typeof h?h:i[h]);ll("function"==typeof f,'accessor "'.concat(h,'" is not a function'));let p=t.getVertexOffset(n);const{iterable:g,objectInfo:m}=eh(e,n,r);for(const e of g){m.index++;let n=f(e,m);if(d&&(n=d.call(this,n)),c){const e=(m.index<c.length-1?c[m.index+1]:s)-c[m.index];if(n&&Array.isArray(n[0])){let e=p;for(const r of n)t._normalizeValue(r,l,e),e+=u}else n&&n.length>u?l.set(n,p):(t._normalizeValue(n,m.target,0),ve({target:l,source:m.target,start:p,count:e}));p+=e*u}else t._normalizeValue(n,l,p),p+=u}}_validateAttributeUpdaters(){const{settings:t}=this;if(!t.noAlloc&&"function"!=typeof t.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:t}=this,e=Math.min(4,this.size);if(t&&t.length>=e){let n=!0;switch(e){case 4:n=n&&Number.isFinite(t[3]);case 3:n=n&&Number.isFinite(t[2]);case 2:n=n&&Number.isFinite(t[1]);case 1:n=n&&Number.isFinite(t[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}}const gh="void main() {gl_FragColor = vec4(0);}",mh="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",vh="#version 300 es\n".concat(mh);function yh(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[r,i,s]=n;return e.includes(r)&&i&&s?{qualifier:r,type:i,name:s.split(";")[0]}:null}function bh(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:e=100,input:n,inputType:r,output:i}=t;if(!n)return 300===e?vh:e>300?"#version ".concat(e,"\n").concat(mh):gh;const s=_h(n,r);return e>=300?"#version ".concat(e," ").concat(300===e?"es":"","\nin ").concat(r," ").concat(n,";\nout vec4 ").concat(i,";\nvoid main() {\n  ").concat(i," = ").concat(s,";\n}"):"varying ".concat(r," ").concat(n,";\nvoid main() {\n  gl_FragColor = ").concat(s,";\n}")}function _h(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return gi(!1),null}}class wh extends co{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(t){return ts(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ns(t),super(t,e),this.initialize(e),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,ao(this.buffers)||this.bind((()=>this._unbindBuffers())),this.setProps(t),this}setProps(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}setBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind((()=>{for(const e in t)this.setBuffer(e,t[e])})),this}setBuffer(t,e){const n=this._getVaryingIndex(t),{buffer:r,byteSize:i,byteOffset:s}=this._getBufferParams(e);return n<0?(this.unused[t]=r,Qi.warn("".concat(this.id," unused varying buffer ").concat(t))(),this):(this.buffers[n]=e,this.bindOnUse||this._bindBuffer(n,r,s,i),this)}begin(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(t){let e,n,r;return t instanceof Mo==0?(r=t.buffer,n=t.byteSize,e=t.byteOffset):r=t,void 0===e&&void 0===n||(e=e||0,n=n||r.byteLength-e),{buffer:r,byteOffset:e,byteSize:n}}_getVaryingInfo(t){return this.configuration&&this.configuration.getVaryingInfo(t)}_getVaryingIndex(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;const e=Number(t);return Number.isFinite(e)?e:-1}_bindBuffers(){if(this.bindOnUse)for(const t in this.buffers){const{buffer:e,byteSize:n,byteOffset:r}=this._getBufferParams(this.buffers[t]);this._bindBuffer(t,e,r,n)}}_unbindBuffers(){if(this.bindOnUse)for(const t in this.buffers)this._bindBuffer(t,null)}_bindBuffer(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;const i=e&&e.handle;return i&&void 0!==r?this.gl.bindBufferRange(35982,t,i,n,r):this.gl.bindBufferBase(35982,t,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(t){this.gl.bindTransformFeedback(36386,this.handle)}}class xh{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(e),Object.seal(this)}setupResources(t){for(const e of this.bindings)this._setupTransformFeedback(e,t)}updateModelProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:e}=this;return e.length>0&&(t=Object.assign({},t,{varyings:e})),t}getDrawOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this.bindings[this.currentIndex],{sourceBuffers:n,transformFeedback:r}=e;return{attributes:Object.assign({},n,t.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t)}getBuffer(t){const{feedbackBuffers:e}=this.bindings[this.currentIndex],n=t?e[t]:null;return n?n instanceof Mo?n:n.buffer:null}getData(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:e}=t,n=this.getBuffer(e);return n?n.getData():null}delete(){for(const t in this.resources)this.resources[t].delete()}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&eo(ts(this.gl))}_getFeedbackBuffers(t){const{sourceBuffers:e={}}=t,n={};if(this.bindings[this.currentIndex]&&Object.assign(n,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const t in this.feedbackMap){const r=this.feedbackMap[t];t in e&&(n[r]=t)}Object.assign(n,t.feedbackBuffers);for(const t in n){const r=n[t];if("string"==typeof r){const i=e[r],{byteLength:s,usage:o,accessor:a}=i;n[t]=this._createNewBuffer(t,{byteLength:s,usage:o,accessor:a})}}return n}_setupBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e=null}=t;Object.assign(this.feedbackMap,t.feedbackMap);const n=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:e,feedbackBuffers:n})}_setupTransformFeedback(t,e){let{model:n}=e;const{program:r}=n;t.transformFeedback=new wh(this.gl,{program:r,buffers:t.feedbackBuffers})}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){const{sourceBuffers:t,feedbackBuffers:e}=this._swapBuffers(this.bindings[this.currentIndex]),n=this._getNextIndex();this.bindings[n]=this._updateBinding(this.bindings[n],{sourceBuffers:t,feedbackBuffers:e})}}_updateBinding(t,e){return t?(Object.assign(t.sourceBuffers,e.sourceBuffers),Object.assign(t.feedbackBuffers,e.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},e.sourceBuffers),feedbackBuffers:Object.assign({},e.feedbackBuffers)}}_swapBuffers(t){if(!this.feedbackMap)return null;const e=Object.assign({},t.sourceBuffers),n=Object.assign({},t.feedbackBuffers);for(const r in this.feedbackMap){const i=this.feedbackMap[r];e[r]=t.feedbackBuffers[i],n[i]=t.sourceBuffers[r],eo(n[i]instanceof Mo)}return{sourceBuffers:e,feedbackBuffers:n}}_createNewBuffer(t,e){const n=new Mo(this.gl,e);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=n,n}_getNextIndex(){return(this.currentIndex+1)%2}}function Mh(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){const t=parseInt(n[1],10);Number.isFinite(t)&&(e=t)}return e}const Sh={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},Ph="transform_uSize_",Eh="transform_position";const Ch={10241:9728,10240:9728,10242:33071,10243:33071};class kh{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(e),Object.seal(this)}updateModelProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this._processVertexShader(t);return Object.assign({},t,e)}getDrawOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e,sourceTextures:n,framebuffer:r,targetTexture:i}=this.bindings[this.currentIndex],s=Object.assign({},e,t.attributes),o=Object.assign({},t.uniforms),a=Object.assign({},t.parameters);let l=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){s.transform_elementID=this.elementIDBuffer;for(const t in this.samplerTextureMap){const e=this.samplerTextureMap[t];o[t]=n[e]}this._setSourceTextureParameters();const t=function(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:r}=t;const i={};let s,o;n&&(({width:s,height:o}=r),i["".concat(Ph).concat(n)]=[s,o]);for(const t in e)({width:s,height:o}=e[t]),i["".concat(Ph).concat(t)]=[s,o];return i}({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:i});Object.assign(o,t)}return this.hasTargetTexture&&(l=!1,a.viewport=[0,0,r.width,r.height]),{attributes:s,framebuffer:r,uniforms:o,discard:l,parameters:a}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(t)}getTargetTexture(){const{targetTexture:t}=this.bindings[this.currentIndex];return t}getData(){let{packed:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:e}=this.bindings[this.currentIndex],n=Ho(e);if(!t)return n;const r=n.constructor,i=function(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return gi(!1),null}}(this.targetTextureType),s=new r(n.length*i/4);let o=0;for(let t=0;t<n.length;t+=4)for(let e=0;e<i;e++)s[o++]=n[t+e];return s}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:e,_swapTexture:n}=t;this._swapTexture=n,this.targetTextureVarying=e,this.hasTargetTexture=e,this._setupTextures(t)}_createTargetTexture(t){const{sourceTextures:e,textureOrReference:n}=t;if(n instanceof Ao)return n;const r=e[n];return r?(this._targetRefTexName=n,this._createNewTexture(r)):null}_setupTextures(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e,_sourceTextures:n={},_targetTexture:r}=t,i=this._createTargetTexture({sourceTextures:n,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceBuffers:e,sourceTextures:n,targetTexture:i}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}_updateElementIDBuffer(t){if("number"!=typeof t||this.elementCount>=t)return;const e=new Float32Array(t);e.forEach(((t,e,n)=>{n[e]=e})),this.elementIDBuffer?this.elementIDBuffer.setData({data:e}):this.elementIDBuffer=new Mo(this.gl,{data:e,accessor:{size:1}}),this.elementCount=t}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){const{sourceTextures:t,targetTexture:e}=this._swapTextures(this.bindings[this.currentIndex]),n=this._getNextIndex();this.bindings[n]=this._updateBinding(this.bindings[n],{sourceTextures:t,targetTexture:e})}}_updateBinding(t,e){const{sourceBuffers:n,sourceTextures:r,targetTexture:i}=e;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,r),Object.assign(t.sourceBuffers,n),i){t.targetTexture=i;const{width:e,height:n}=i,{framebuffer:r}=t;r?(r.update({attachments:{36064:i},resizeAttachments:!1}),r.resize({width:e,height:n})):t.framebuffer=new ea(this.gl,{id:"transform-framebuffer",width:e,height:n,attachments:{36064:i}})}return t}_setSourceTextureParameters(){const t=this.currentIndex,{sourceTextures:e}=this.bindings[t];for(const t in e)e[t].setParameters(Ch)}_swapTextures(t){if(!this._swapTexture)return null;const e=Object.assign({},t.sourceTextures);return e[this._swapTexture]=t.targetTexture,{sourceTextures:e,targetTexture:t.sourceTextures[this._swapTexture]}}_createNewTexture(t){const e=Wo(t,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=e,e}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:e,targetTexture:n}=this.bindings[this.currentIndex],{vs:r,uniforms:i,targetTextureType:s,inject:o,samplerTextureMap:a}=function(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:r,targetTexture:i}=t,s=Object.keys(n).length,o=null;const a={};let l=e,u={};if(s>0||r){const t=l.split("\n"),e=t.slice();if(t.forEach(((t,i,l)=>{if(s>0){const r=function(t,e){const n={},r=function(t){return yh(t,["attribute","in"])}(t);if(!r)return null;const{type:i,name:s}=r;if(s&&e[s]){const e="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:r,sizeName:o,uniformDeclerations:a}=function(t){const e="".concat("transform_uSampler_").concat(t),n="".concat(Ph).concat(t);return{samplerName:e,sizeName:n,uniformDeclerations:"  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(n,";")}}(s),l=function(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return gi(!1),null}}(i),u="  ".concat(i," ").concat(s," = transform_getInput(").concat(r,", ").concat(o,").").concat(l,";\n");return n[r]=s,{updatedLine:e,inject:{"vs:#decl":a,"vs:#main-start":u},samplerTextureMap:n}}return null}(t,n);if(r){const{updatedLine:t,inject:n}=r;e[i]=t,u=zi([u,n]),Object.assign(a,r.samplerTextureMap),s--}}r&&!o&&(o=function(t,e){const n=yh(t,["varying","out"]);return n&&n.name===e?n.type:null}(t,r))})),r){eo(i);const t="".concat(Ph).concat(r),e="uniform vec2 ".concat(t,";\n"),n="     vec2 ".concat(Eh," = transform_getPos(").concat(t,");\n     gl_Position = vec4(").concat(Eh,", 0, 1.);\n");u=zi([u,{"vs:#decl":e,"vs:#main-start":n}])}l=e.join("\n")}return{vs:l,targetTextureType:o,inject:u,samplerTextureMap:a}}({vs:t.vs,sourceTextureMap:e,targetTextureVarying:this.targetTextureVarying,targetTexture:n}),l=zi([t.inject||{},o]);return this.targetTextureType=s,this.samplerTextureMap=a,{vs:r,fs:t._fs||bh({version:Mh(r),input:this.targetTextureVarying,inputType:s,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[Sh].concat(t.modules||[]):t.modules,uniforms:i,inject:l}}}let Th=null;class Ah extends co{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(t){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||ts(t)||"Chrome"===Zu()}static getDefaultArray(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new Ah(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}static getMaxAttributes(t){return Ah.MAX_ATTRIBUTES=Ah.MAX_ATTRIBUTES||t.getParameter(34921),Ah.MAX_ATTRIBUTES}static setConstant(t,e,n){switch(n.constructor){case Float32Array:Ah._setConstantFloatArray(t,e,n);break;case Int32Array:Ah._setConstantIntArray(t,e,n);break;case Uint32Array:Ah._setConstantUintArray(t,e,n);break;default:eo(!1)}}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.id||e.program&&e.program.id;super(t,Object.assign({},e,{id:n})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=e.isDefaultArray||!1,this.gl2=t,this.initialize(e),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Ah.getMaxAttributes(this.gl)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(t)}setProps(t){return this}setElementBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return eo(!t||34963===t.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind((()=>{this.gl.bindBuffer(34963,t?t.handle:null)})),this}setBuffer(t,e,n){if(34963===e.target)return this.setElementBuffer(e,n);const{size:r,type:i,stride:s,offset:o,normalized:a,integer:l,divisor:u}=n,{gl:c,gl2:h}=this;return t=Number(t),this.bind((()=>{c.bindBuffer(34962,e.handle),l?(eo(ts(c)),h.vertexAttribIPointer(t,r,i,s,o)):c.vertexAttribPointer(t,r,i,a,s,o),c.enableVertexAttribArray(t),h.vertexAttribDivisor(t,u||0)})),this}enable(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!e&&0===t&&!Ah.isSupported(this.gl,{constantAttributeZero:!0})||(t=Number(t),this.bind((()=>e?this.gl.enableVertexAttribArray(t):this.gl.disableVertexAttribArray(t)))),this}getConstantBuffer(t,e){const n=this._normalizeConstantArrayValue(e),r=n.byteLength*t,i=n.length*t;let s=!this.buffer;if(this.buffer=this.buffer||new Mo(this.gl,r),s=s||this.buffer.reallocate(r),s=s||!this._compareConstantArrayValues(n,this.bufferValue),s){const t=function(t,e){var n;return new t((n=t.BYTES_PER_ELEMENT*e,(!Th||Th.byteLength<n)&&(Th=new ArrayBuffer(n)),Th),0,e)}(e.constructor,i);!function(t){let{target:e,source:n,start:r=0,count:i=1}=t;const s=n.length,o=i*s;let a=0;for(let t=r;a<s;a++)e[t++]=n[a];for(;a<o;)a<o-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+o-a),a=o)}({target:t,source:n,start:0,count:i}),this.buffer.subData(t),this.bufferValue=e}return this.buffer}_normalizeConstantArrayValue(t){return Array.isArray(t)?new Float32Array(t):t}_compareConstantArrayValues(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}static _setConstantFloatArray(t,e,n){switch(n.length){case 1:t.vertexAttrib1fv(e,n);break;case 2:t.vertexAttrib2fv(e,n);break;case 3:t.vertexAttrib3fv(e,n);break;case 4:t.vertexAttrib4fv(e,n);break;default:eo(!1)}}static _setConstantIntArray(t,e,n){switch(eo(ts(t)),n.length){case 1:t.vertexAttribI1iv(e,n);break;case 2:t.vertexAttribI2iv(e,n);break;case 3:t.vertexAttribI3iv(e,n);break;case 4:t.vertexAttribI4iv(e,n);break;default:eo(!1)}}static _setConstantUintArray(t,e,n){switch(eo(ts(t)),n.length){case 1:t.vertexAttribI1uiv(e,n);break;case 2:t.vertexAttribI2uiv(e,n);break;case 3:t.vertexAttribI3uiv(e,n);break;case 4:t.vertexAttribI4uiv(e,n);break;default:eo(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(t){return this.gl2.deleteVertexArray(t),[this.elements]}_bindHandle(t){this.gl2.bindVertexArray(t)}_getParameter(t,e){let{location:n}=e;return eo(Number.isFinite(n)),this.bind((()=>34373===t?this.gl.getVertexAttribOffset(n,t):this.gl.getVertexAttrib(n,t)))}}const Lh=/^(.+)__LOCATION_([0-9]+)$/,Oh=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class Ih{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.id||e.program&&e.program.id;this.id=n,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Ah(t),lo(this,"VertexArray","v6.0",Oh),this.initialize(e),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:t}=this.vertexArrayObject;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}setProps(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(t){return Object.assign(this.attributes,t),this.vertexArrayObject.bind((()=>{for(const e in t){const n=t[e];this._setAttribute(e,n)}this.gl.bindBuffer(34962,null)})),this}setElementBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=t,this.elementsAccessor=e,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,e),this}setBuffer(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===e.target)return this.setElementBuffer(e,n);const{location:r,accessor:i}=this._resolveLocationAndAccessor(t,e,e.accessor,n);return r>=0&&(this.values[r]=e,this.accessors[r]=i,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,e,i)),this}setConstant(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:r,accessor:i}=this._resolveLocationAndAccessor(t,e,Object.assign({size:e.length},n));return r>=0&&(e=this.vertexArrayObject._normalizeConstantArrayValue(e),this.values[r]=e,this.accessors[r]=i,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind((()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Mo(this.gl,{accessor:{size:4}});for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this.values[t]instanceof Mo&&(this.gl.disableVertexAttribArray(t),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(t,1,5126,!1,0,0))})),this}bindBuffers(){return this.vertexArrayObject.bind((()=>{this.elements&&this.setElementBuffer(this.elements);for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++){const e=this.values[t];e instanceof Mo&&this.setBuffer(t,e)}})),this}bindForDraw(t,e,n){let r;return this.vertexArrayObject.bind((()=>{this._setConstantAttributes(t,e),r=n()})),r}_resolveLocationAndAccessor(t,e,n,r){const i={location:-1,accessor:null},{location:s,name:o}=this._getAttributeIndex(t);if(!Number.isFinite(s)||s<0)return this.unused[t]=e,Qi.once(3,(()=>"unused value ".concat(t," in ").concat(this.id)))(),i;const a=this._getAttributeInfo(o||s);if(!a)return i;const l=this.accessors[s]||{},u=bo.resolve(a.accessor,l,n,r),{size:c,type:h}=u;return eo(Number.isFinite(c)&&Number.isFinite(h)),{location:s,accessor:u}}_getAttributeInfo(t){return this.configuration&&this.configuration.getAttributeInfo(t)}_getAttributeIndex(t){const e=Number(t);if(Number.isFinite(e))return{location:e};const n=Lh.exec(t),r=n?n[1]:t,i=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+i,name:r}:{location:-1}}_setAttribute(t,e){if(e instanceof Mo)this.setBuffer(t,e);else if(Array.isArray(e)&&e.length&&e[0]instanceof Mo){const n=e[0],r=e[1];this.setBuffer(t,n,r)}else if(ArrayBuffer.isView(e)||Array.isArray(e)){const n=e;this.setConstant(t,n)}else{if(!(e.buffer instanceof Mo))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");{const n=e;this.setBuffer(t,n.buffer,n)}}}_setConstantAttributes(t,e){const n=Math.max(0|t,0|e);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,n);for(let t=1;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)r=this.values[t],ArrayBuffer.isView(r)&&this._setConstantAttribute(t,r)}_setConstantAttributeZero(t,e){if(Ah.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,t);const n=this.vertexArrayObject.getConstantBuffer(e,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}_setConstantAttribute(t,e){Ah.setConstant(this.gl,t,e)}_updateDrawParams(){const t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this._updateDrawParamsForLocation(t,e);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}_updateDrawParamsForLocation(t,e){const n=this.values[e],r=this.accessors[e];if(!n)return;const{divisor:i}=r,s=i>0;if(t.isInstanced=t.isInstanced||s,n instanceof Mo){const e=n;if(s){const n=e.getVertexCount(r);t.instanceCount=Math.min(t.instanceCount,n)}else{const n=e.getVertexCount(r);t.vertexCount=Math.min(t.vertexCount,n)}}}setElements(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Qi.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,e)}}function Rh(t,e){const{maxElts:n=16,size:r=1}=e;let i="[";for(let s=0;s<t.length&&s<n;++s)s>0&&(i+=",".concat(s%r==0?" ":"")),i+=zh(t[s],e);const s=t.length>n?"...":"]";return"".concat(i).concat(s)}function zh(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=1e-16,{isInteger:r=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return Rh(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<n)return r?"0":"0.";if(r)return t.toFixed(0);if(Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const i=t.toPrecision(2),s=i.indexOf(".0");return s===i.length-2?i.slice(0,-1):i}function Fh(t,e,n,r){const{gl:i}=t;if(!e)return{[r]:"null","Format ":"N/A"};let s,o,a,l="NOT PROVIDED",u=1,c=0,h=0;if(n&&(l=n.type,u=n.size,l=String(l).replace("Array",""),s=-1!==l.indexOf("nt")),e instanceof Mo){const t=e,{data:d,changed:f}=t.getDebugData();let p;if(o=f?"*":"",a=d,h=t.byteLength,c=h/d.BYTES_PER_ELEMENT/u,n){const t=n.divisor>0;p="".concat(t?"I ":"P "," ").concat(c," (x").concat(u,"=").concat(h," bytes ").concat(ro(i,l),")")}else s=!0,p="".concat(h," bytes");return{[r]:"".concat(o).concat(zh(a,{size:u,isInteger:s})),"Format ":p}}return a=e,u=e.length,l=String(e.constructor.name).replace("Array",""),s=-1!==l.indexOf("nt"),{[r]:"".concat(zh(a,{size:u,isInteger:s})," (constant)"),"Format ":"".concat(u,"x").concat(l," (constant)")}}function Nh(t,e){const{type:n,size:r}=e,i=Aa(n,r);return i?"".concat(t," (").concat(i.name,")"):t}function jh(t){let{header:e="Uniforms",program:n,uniforms:r,undefinedOnly:i=!1}=t;eo(n);const s=".*Matrix",o=n._uniformSetters,a={},l=Object.keys(o).sort();let u=0;for(const t of l)t.match(".*_.*")||t.match(s)||Dh({table:a,header:e,uniforms:r,uniformName:t,undefinedOnly:i})&&u++;for(const t of l)t.match(s)&&Dh({table:a,header:e,uniforms:r,uniformName:t,undefinedOnly:i})&&u++;for(const t of l)a[t]||Dh({table:a,header:e,uniforms:r,uniformName:t,undefinedOnly:i})&&u++;let c=0;const h={};if(!i)for(const t in r){const n=r[t];a[t]||(c++,h[t]={Type:"NOT USED: ".concat(n),[e]:zh(n)})}return{table:a,count:u,unusedTable:h,unusedCount:c}}function Dh(t){let{table:e,header:n,uniforms:r,uniformName:i,undefinedOnly:s}=t;const o=r[i],a=function(t){return null!=t}(o);return!(s&&a||(e[i]={[n]:a?zh(o):"N/A","Uniform Type":a?o:"NOT PROVIDED"},0))}function Bh(t){const{type:e,size:n}=t.accessor,r=Aa(e,n);return r?"".concat(r.name," ").concat(t.name):t.name}const Uh={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function Vh(t,e){const{attributeMap:n=Uh}=e||{};return n&&n[t]||t}function Wh(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}eo(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const Gh=()=>{},Hh={};class qh{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:n=so("model")}=e;eo(Ji(t)),this.id=n,this.gl=t,this.id=e.id||so("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(e)}initialize(t){this.props={},this.programManager=t.programManager||za.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:e=null,vs:n,fs:r,modules:i,defines:s,inject:o,varyings:a,bufferMode:l,transpileToGLSL100:u}=t;this.programProps={program:e,vs:n,fs:r,modules:i,defines:s,inject:o,varyings:a,bufferMode:l,transpileToGLSL100:u},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings))),this.drawMode=void 0!==t.drawMode?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced||t.instanceCount>0,this._setModelProps(t),this.geometry={},eo(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(t){this._setModelProps(t)}delete(){for(const t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(t){const{program:e,vs:n,fs:r,modules:i,defines:s,inject:o,varyings:a,bufferMode:l,transpileToGLSL100:u}=t;this.programProps={program:e,vs:n,fs:r,modules:i,defines:s,inject:o,varyings:a,bufferMode:l,transpileToGLSL100:u},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(t){return this.drawMode=t,this}setVertexCount(t){return eo(Number.isFinite(t)),this.vertexCount=t,this}setInstanceCount(t){return eo(Number.isFinite(t)),this.instanceCount=t,this}setGeometry(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(t,e,n){const r={};let i=e.indices;for(const n in e.attributes){const s=e.attributes[n],o=Vh(n,undefined);if("indices"===n)i=s;else if(s.constant)r[o]=s.value;else{const e=s.value,i={...s};delete i.value,r[o]=[new Mo(t,e),i],Wh(n,i)}}if(i){const e=i.value||i;eo(e instanceof Uint16Array||e instanceof Uint32Array,'attribute array for "indices" must be of integer type');const n={size:1,isIndexed:void 0===i.isIndexed||i.isIndexed};r.indices=[new Mo(t,{data:e,target:34963}),n]}return r}(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(ao(t))return this;const e={};for(const n in t){const r=t[n];e[n]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(e),this}setUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.uniforms,t),this}getModuleUniforms(t){this._checkProgram();const e=this.programManager.getUniforms(this.program);return e?e(t):{}}updateModuleSettings(t){const e=this.getModuleUniforms(t||{});return this.setUniforms(e)}clear(t){return Do(this.program.gl,t),this}draw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:e=null,framebuffer:n,uniforms:r={},attributes:i={},transformFeedback:s=this.transformFeedback,parameters:o={},vertexArray:a=this.vertexArray}=t;let l;this.setAttributes(i),this.updateModuleSettings(e),this.setUniforms(r),Qi.priority>=2&&(l=this._logDrawCallStart(2));const u=this.vertexArray.getDrawParams(),{isIndexed:c=u.isIndexed,indexType:h=u.indexType,indexOffset:d=u.indexOffset,vertexArrayInstanced:f=u.isInstanced}=this.props;f&&!this.isInstanced&&Qi.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:p,instanceCount:g}=this,{onBeforeRender:m=Gh,onAfterRender:v=Gh}=this.props;m(),this.program.setUniforms(this.uniforms);const y=this.program.draw(Object.assign(Hh,t,{logPriority:l,uniforms:null,framebuffer:n,parameters:o,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:a,transformFeedback:s,isIndexed:c,indexType:h,isInstanced:p,instanceCount:g,offset:c?d:0}));return v(),Qi.priority>=2&&this._logDrawCallEnd(l,a,n),y}transform(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:e=!0,feedbackBuffers:n,unbindModels:r=[]}=t;let{parameters:i}=t;n&&this._setFeedbackBuffers(n),e&&(i=Object.assign({},i,{35977:e})),r.forEach((t=>t.vertexArray.unbindBuffers()));try{this.draw(Object.assign({},t,{parameters:i}))}finally{r.forEach((t=>t.vertexArray.bindBuffers()))}return this}render(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Qi.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}_setModelProps(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:t}=this.programProps;if(t)this._managedProgram=!1;else{const{vs:e,fs:n,modules:r,inject:i,defines:s,varyings:o,bufferMode:a,transpileToGLSL100:l}=this.programProps;t=this.programManager.get({vs:e,fs:n,modules:r,inject:i,defines:s,varyings:o,bufferMode:a,transpileToGLSL100:l}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}eo(t instanceof Ra,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new Ih(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const t in this.geometryBuffers){const e=this.geometryBuffers[t][0]||this.geometryBuffers[t];e instanceof Mo&&e.delete()}}_setAnimationProps(t){this.animated&&eo(t,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(ao(t))return this;const{gl:e}=this.program;return this.transformFeedback=this.transformFeedback||new wh(e,{program:this.program}),this.transformFeedback.setBuffers(t),this}_logDrawCallStart(t){const e=t>3?0:1e4;if(!(Date.now()-this.lastLogTime<e))return this.lastLogTime=Date.now(),Qi.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:Qi.level<=2})(),t}_logDrawCallEnd(t,e,n,r){if(void 0===t)return;const i=function(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const r={};e.elements&&(r.ELEMENT_ARRAY_BUFFER=Fh(e,e.elements,null,n));const i=e.values;for(const t in i){const s=e._getAttributeInfo(t);if(s){let o="".concat(t,": ").concat(s.name);const a=e.accessors[s.location];a&&(o="".concat(t,": ").concat(Nh(s.name,a))),r[o]=Fh(e,i[t],a,n)}}return r}({vertexArray:e,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:s,unusedTable:o,unusedCount:a}=jh({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),{table:l,count:u}=jh({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0});u>0&&Qi.log("MISSING UNIFORMS",Object.keys(l))(),a>0&&Qi.log("UNUSED UNIFORMS",Object.keys(o))();const c=function(t){const e={},n="Accessors for ".concat(t.id);for(const r of t.attributeInfos)if(r){const t=Bh(r);e["in ".concat(t)]={[n]:JSON.stringify(r.accessor)}}for(const r of t.varyingInfos)if(r){const t=Bh(r);e["out ".concat(t)]={[n]:JSON.stringify(r.accessor)}}return e}(this.vertexArray.configuration);Qi.table(t,i)(),Qi.table(t,s)(),Qi.table(t+1,c)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),Qi.groupEnd(2)()}}class Xh{static isSupported(t){return ts(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(e),Object.seal(this)}delete(){const{model:t,bufferTransform:e,textureTransform:n}=this;t&&t.delete(),e&&e.delete(),n&&n.delete()}run(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:e=!0}=t,n=this._updateDrawOptions(t);e&&n.framebuffer&&n.framebuffer.clear({color:!0}),this.model.transform(n)}swap(){let t=!1;const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of e)t=t||n.swap();eo(t,"Nothing to swap")}getBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}getData(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of e){const e=n.getData(t);if(e)return e}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in t&&this.model.setVertexCount(t.elementCount);const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of e)n.update(t)}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:e}=this;this._buildResourceTransforms(e,t),t=this._updateModelProps(t),this.model=new qh(e,Object.assign({},t,{fs:t.fs||bh({version:Mh(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(t){let e=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const t of n)e=t.updateModelProps(e);return e}_buildResourceTransforms(t,e){(function(t){return!(ao(t.feedbackBuffers)&&ao(t.feedbackMap)&&!(t.varyings&&t.varyings.length>0))})(e)&&(this.bufferTransform=new xh(t,e)),function(t){return!(ao(t._sourceTextures)&&!t._targetTexture&&!t._targetTextureVarying)}(e)&&(this.textureTransform=new kh(t,e)),eo(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(t){let e=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const t of n)e=Object.assign(e,t.getDrawOptions(e));return e}}const Zh={interpolation:class{constructor({gl:t,attribute:e,timeline:n}){Rt(this,"gl",void 0),Rt(this,"type","interpolation"),Rt(this,"attributeInTransition",void 0),Rt(this,"settings",void 0),Rt(this,"attribute",void 0),Rt(this,"transition",void 0),Rt(this,"currentStartIndices",void 0),Rt(this,"currentLength",void 0),Rt(this,"transform",void 0),Rt(this,"buffers",void 0),this.gl=t,this.transition=new fl(n),this.attribute=e,this.attributeInTransition=new ph(t,e.settings),this.currentStartIndices=e.startIndices,this.currentLength=0,this.transform=function(t,e){const n=ch(e.size);return new Xh(t,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(t,e);const r={byteLength:0,usage:35050};this.buffers=[new Mo(t,r),new Mo(t,r)]}get inProgress(){return this.transition.inProgress}start(t,e){if(t.duration<=0)return void this.transition.cancel();this.settings=t;const{gl:n,buffers:r,attribute:i}=this;hh(r);const s={numInstances:e,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const t of r)fh({buffer:t,...s});this.currentStartIndices=i.startIndices,this.currentLength=dh(i,e),this.attributeInTransition.setData({buffer:r[1],value:i.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aFrom:r[0],aTo:uh(0,i)},feedbackBuffers:{vCurrent:r[1]}})}update(){const t=this.transition.update();if(t){const{duration:t,easing:e}=this.settings,{time:n}=this.transition;let r=n/t;e&&(r=e(r)),this.transform.run({uniforms:{time:r}})}return t}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0}},spring:class{constructor({gl:t,attribute:e,timeline:n}){Rt(this,"gl",void 0),Rt(this,"type","spring"),Rt(this,"attributeInTransition",void 0),Rt(this,"settings",void 0),Rt(this,"attribute",void 0),Rt(this,"transition",void 0),Rt(this,"currentStartIndices",void 0),Rt(this,"currentLength",void 0),Rt(this,"texture",void 0),Rt(this,"framebuffer",void 0),Rt(this,"transform",void 0),Rt(this,"buffers",void 0),this.gl=t,this.type="spring",this.transition=new fl(n),this.attribute=e,this.attributeInTransition=new ph(t,{...e.settings,normalized:!1}),this.currentStartIndices=e.startIndices,this.currentLength=0,this.texture=function(t){return new Ao(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(t),this.framebuffer=function(t,e){return new ea(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(t,this.texture),this.transform=function(t,e,n){const r=ch(e.size);return new Xh(t,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}(t,e,this.framebuffer);const r={byteLength:0,usage:35050};this.buffers=[new Mo(t,r),new Mo(t,r),new Mo(t,r)]}get inProgress(){return this.transition.inProgress}start(t,e){const{gl:n,buffers:r,attribute:i}=this,s={numInstances:e,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const t of r)fh({buffer:t,...s});this.settings=t,this.currentStartIndices=i.startIndices,this.currentLength=dh(i,e),this.attributeInTransition.setData({buffer:r[1],value:i.value}),this.transition.start({...t,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aTo:uh(0,i)}})}update(){const{buffers:t,transform:e,framebuffer:n,transition:r}=this;if(!r.update())return!1;const i=this.settings;return e.update({sourceBuffers:{aPrev:t[0],aCur:t[1]},feedbackBuffers:{vNext:t[2]}}),e.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:i.stiffness,damping:i.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),hh(t),this.attributeInTransition.setData({buffer:t[1],value:this.attribute.value}),Ho(n)[0]>0||r.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class Yh{constructor(t,{id:e,timeline:n}){Rt(this,"id",void 0),Rt(this,"isSupported",void 0),Rt(this,"gl",void 0),Rt(this,"timeline",void 0),Rt(this,"transitions",void 0),Rt(this,"needsRedraw",void 0),Rt(this,"numInstances",void 0),this.id=e,this.gl=t,this.timeline=n,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=Xh.isSupported(t)}finalize(){for(const t in this.transitions)this._removeTransition(t)}update({attributes:t,transitions:e,numInstances:n}){this.numInstances=n||1;for(const n in t){const r=t[n],i=r.getTransitionSetting(e);i&&this._updateAttribute(n,r,i)}for(const n in this.transitions){const r=t[n];r&&r.getTransitionSetting(e)||this._removeTransition(n)}}hasAttribute(t){const e=this.transitions[t];return e&&e.inProgress}getAttributes(){const t={};for(const e in this.transitions){const n=this.transitions[e];n.inProgress&&(t[e]=n.attributeInTransition)}return t}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const t in this.transitions)this.transitions[t].update()&&(this.needsRedraw=!0);const t=this.needsRedraw;return this.needsRedraw=!1,t}_removeTransition(t){this.transitions[t].cancel(),delete this.transitions[t]}_updateAttribute(t,e,n){const r=this.transitions[t];let i=!r||r.type!==n.type;if(i){if(!this.isSupported)return void de.warn("WebGL2 not supported by this browser. Transition for ".concat(t," is disabled."))();r&&this._removeTransition(t);const s=Zh[n.type];s?this.transitions[t]=new s({attribute:e,timeline:this.timeline,gl:this.gl}):(de.error("unsupported transition type '".concat(n.type,"'"))(),i=!1)}(i||e.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(n,this.numInstances))}}const $h="attributeManager.invalidate";class Qh{constructor(t,{id:e="attribute-manager",stats:n,timeline:r}={}){Rt(this,"id",void 0),Rt(this,"gl",void 0),Rt(this,"attributes",void 0),Rt(this,"updateTriggers",void 0),Rt(this,"needsRedraw",void 0),Rt(this,"userData",void 0),Rt(this,"stats",void 0),Rt(this,"attributeTransitionManager",void 0),this.id=e,this.gl=t,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new Yh(t,{id:"".concat(e,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(t={clearRedrawFlags:!1}){const e=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,e&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(t){this._add(t)}addInstanced(t){this._add(t,{instanced:1})}remove(t){for(const e of t)void 0!==this.attributes[e]&&(this.attributes[e].delete(),delete this.attributes[e])}invalidate(t,e){const n=this._invalidateTrigger(t,e);pe($h,this,t,n)}invalidateAll(t){for(const e in this.attributes)this.attributes[e].setNeedsUpdate(e,t);pe($h,this,"all")}update({data:t,numInstances:e,startIndices:n=null,transitions:r,props:i={},buffers:s={},context:o={}}){let a=!1;pe("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const r in this.attributes){const l=this.attributes[r],u=l.settings.accessor;l.startIndices=n,l.numInstances=e,i[r]&&de.removed("props.".concat(r),"data.attributes.".concat(r))(),l.setExternalBuffer(s[r])||l.setBinaryValue("string"==typeof u?s[u]:void 0,t.startIndices)||"string"==typeof u&&!s[u]&&l.setConstantValue(i[u])||l.needsUpdate()&&(a=!0,this._updateAttribute({attribute:l,numInstances:e,data:t,props:i,context:o})),this.needsRedraw=this.needsRedraw||l.needsRedraw()}a&&pe("attributeManager.updateEnd",this,e),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:e,transitions:r})}updateTransition(){const{attributeTransitionManager:t}=this,e=t.run();return this.needsRedraw=this.needsRedraw||e,e}getAttributes(){return this.attributes}getChangedAttributes(t={clearChangedFlags:!1}){const{attributes:e,attributeTransitionManager:n}=this,r={...n.getAttributes()};for(const i in e){const s=e[i];s.needsRedraw(t)&&!n.hasAttribute(i)&&(r[i]=s)}return r}getShaderAttributes(t,e={}){t||(t=this.getAttributes());const n={};for(const r in t)e[r]||Object.assign(n,t[r].getShaderAttributes());return n}_add(t,e={}){for(const n in t){const r=t[n];this.attributes[n]=this._createAttribute(n,r,e)}this._mapUpdateTriggersToAttributes()}_createAttribute(t,e,n){const r={...e,id:t,size:(e.isIndexed?1:e.size)||1,divisor:n.instanced?1:e.divisor||0};return new ph(this.gl,r)}_mapUpdateTriggersToAttributes(){const t={};for(const e in this.attributes)this.attributes[e].getUpdateTriggers().forEach((n=>{t[n]||(t[n]=[]),t[n].push(e)}));this.updateTriggers=t}_invalidateTrigger(t,e){const{attributes:n,updateTriggers:r}=this,i=r[t];return i&&i.forEach((t=>{const r=n[t];r&&r.setNeedsUpdate(r.id,e)})),i}_updateAttribute(t){const{attribute:e,numInstances:n}=t;pe("attribute.updateStart",e),e.constant?e.setConstantValue(e.value):(e.allocate(n)&&pe("attribute.allocate",e,n),e.updateBuffer(t)&&(this.needsRedraw=!0,pe("attribute.updateEnd",e,n)))}}const Kh=1e-5;function Jh(t,e,n,r,i){const s=e-t;return(n-e)*i+-s*r+s+e}function td(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}const ed={interpolation:class extends fl{get value(){return this._value}_onUpdate(){const{time:t,settings:{fromValue:e,toValue:n,duration:r,easing:i}}=this,s=i(t/r);this._value=qn(e,n,s)}},spring:class extends fl{get value(){return this._currValue}_onUpdate(){const{fromValue:t,toValue:e,damping:n,stiffness:r}=this.settings,{_prevValue:i=t,_currValue:s=t}=this;let o=function(t,e,n,r,i){if(Array.isArray(n)){const s=[];for(let o=0;o<n.length;o++)s[o]=Jh(t[o],e[o],n[o],r,i);return s}return Jh(t,e,n,r,i)}(i,s,e,n,r);const a=td(o,e),l=td(o,s);a<Kh&&l<Kh&&(o=e,this.end()),this._prevValue=s,this._currValue=o}}};class nd{constructor(t){this.transitions=new Map,this.timeline=t}get active(){return this.transitions.size>0}add(t,e,n,r){const{transitions:i}=this;if(i.has(t)){const n=i.get(t),{value:r=n.settings.fromValue}=n;e=r,this.remove(t)}if(!(r=lh(r)))return;const s=ed[r.type];if(!s)return void de.error("unsupported transition type '".concat(r.type,"'"))();const o=new s(this.timeline);o.start({...r,fromValue:e,toValue:n}),i.set(t,o)}remove(t){const{transitions:e}=this;e.has(t)&&(e.get(t).cancel(),e.delete(t))}update(){const t={};for(const[e,n]of this.transitions)n.update(),t[e]=n.value,n.inProgress||this.remove(e);return t}clear(){for(const t of this.transitions.keys())this.remove(t)}}function rd(t,e){if(!t.transitions)return!1;const n={},r=ld(t);let i=!1;for(const s in t.transitions){const o=r[s],a=o&&o.type;("number"===a||"color"===a||"array"===a)&&sd(t[s],e[s],o)&&(n[s]=!0,i=!0)}return!!i&&n}function id({newProps:t,oldProps:e,ignoreProps:n={},propTypes:r={},triggerName:i="props"}){if(e===t)return!1;if("object"!=typeof t||null===t)return"".concat(i," changed shallowly");if("object"!=typeof e||null===e)return"".concat(i," changed shallowly");for(const s of Object.keys(t))if(!(s in n)){if(!(s in e))return"".concat(i,".").concat(s," added");const n=sd(t[s],e[s],r[s]);if(n)return"".concat(i,".").concat(s," ").concat(n)}for(const s of Object.keys(e))if(!(s in n)){if(!(s in t))return"".concat(i,".").concat(s," dropped");if(!Object.hasOwnProperty.call(t,s)){const n=sd(t[s],e[s],r[s]);if(n)return"".concat(i,".").concat(s," ").concat(n)}}return!1}function sd(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)?"changed deeply":r||(r=t&&e&&t.equals,!r||r.call(t,e))?r||e===t?null:"changed shallowly":"changed deeply"}function od(t,e){if(null===e)return!0;const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r)return!0;if(r.length!==n.length)return!0;for(let t=0;t<r.length;t++)if(!r[t].equals(n[t]))return!0;return!1}function ad(t,e,n){let r=t.updateTriggers[n];r=null==r?{}:r;let i=e.updateTriggers[n];return i=null==i?{}:i,id({oldProps:i,newProps:r,triggerName:n})}function ld(t){const e=t[jt],n=e&&e.constructor;return n?n._propTypes:{}}function ud(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some((t=>"project64"===t.name)))){const t=n.modules.findIndex((t=>"project32"===t.name));t>=0&&n.modules.splice(t,1)}if("inject"in e)if(t.inject){const r={...t.inject};for(const t in e.inject)r[t]=(r[t]||"")+e.inject[t];n.inject=r}else n.inject=e.inject;return n}function cd(t,e,n=!1){const r=e.projectPosition(t);if(n&&e instanceof dl){const[n,i,s=0]=t,o=e.getDistanceScales([n,i]);r[2]=s*o.unitsPerMeter[2]}return r}function hd(t,{viewport:e,modelMatrix:n,coordinateSystem:r,coordinateOrigin:i,offsetMode:s}){let[o,a,l=0]=t;switch(n&&([o,a,l]=Mr([],[o,a,l,1],n)),r){case ni.LNGLAT:return cd([o,a,l],e,s);case ni.LNGLAT_OFFSETS:return cd([o+i[0],a+i[1],l+(i[2]||0)],e,s);case ni.METER_OFFSETS:return cd(Zr(i,[o,a,l]),e,s);default:return e.isGeospatial?[o+i[0],a+i[1],l+i[2]]:e.projectPosition([o,a,l])}}const dd={10241:9987,10240:9729,10242:33071,10243:33071},fd={},pd={boolean:{validate:(t,e)=>!0,equal:(t,e,n)=>Boolean(t)===Boolean(e)},number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},color:{validate:(t,e)=>e.optional&&!t||yd(t)&&(3===t.length||4===t.length),equal:(t,e,n)=>gd(t,e)},accessor:{validate(t,e){const n=bd(t);return"function"===n||n===bd(e.value)},equal:(t,e,n)=>"function"==typeof e||gd(t,e)},array:{validate:(t,e)=>e.optional&&!t||yd(t),equal:(t,e,n)=>n.compare?gd(t,e):t===e},object:{equal:(t,e,n)=>n.compare?rl(t,e):t===e},function:{validate:(t,e)=>e.optional&&!t||"function"==typeof t,equal:(t,e,n)=>!n.compare||t===e},data:{transform:(t,e,n)=>{const{dataTransform:r}=n.props;return r&&t?r(t):t}},image:{transform:(t,e,n)=>function(t,e){const n=t.context&&t.context.gl;if(!n||!e)return null;if(e instanceof Ao)return e;e.constructor&&"Object"!==e.constructor.name&&(e={data:e});let r=null;e.compressed&&(r={10241:e.data.length>1?9985:9729});const i=new Ao(n,{...e,parameters:{...dd,...r,...t.props.textureParameters}});return fd[i.id]=!0,i}(n,t),release:t=>{var e;(e=t)&&e instanceof Ao&&fd[e.id]&&(e.delete(),delete fd[e.id])}}};function gd(t,e){if(t===e)return!0;if(!yd(t)||!yd(e))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function md(t,e){switch(bd(e)){case"object":return vd(t,e);case"array":return vd(t,{type:"array",value:e,compare:!1});case"boolean":return vd(t,{type:"boolean",value:e});case"number":return vd(t,{type:"number",value:e});case"function":return vd(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function vd(t,e){return"type"in e?{name:t,...pd[e.type],...e}:"value"in e?{name:t,type:bd(e.value),...e}:{name:t,type:"object",value:e}}function yd(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function bd(t){return yd(t)?"array":null===t?"null":typeof t}function _d(t){return Md(t,"_mergedDefaultProps")||(function(t){if(!t.prototype)return;const e=Object.getPrototypeOf(t),n=_d(e),r=function(t){const e={},n={},r={};for(const[i,s]of Object.entries(t)){const t=null==s?void 0:s.deprecatedFor;if(t)r[i]=Array.isArray(t)?t:[t];else{const t=md(i,s);e[i]=t,n[i]=t.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}(Md(t,"defaultProps")||{}),i=function(t,e,n){const r=Object.create(null);Object.assign(r,e,t);const i=function(t){const e=Md(t,"layerName")||Md(t,"componentName");return e||de.once(0,"".concat(t.name,".componentName not specified"))(),e||t.name}(n);return delete t.id,Object.defineProperties(r,{id:{writable:!0,value:i}}),r}(r.defaultProps,n,t),s={...e._propTypes,...r.propTypes};!function(t,e){const n={},r={};for(const t in e){const i=e[t],{name:s,value:o}=i;i.async&&(n[s]=o,r[s]=wd(s))}t[Dt]=n,t[Bt]={},Object.defineProperties(t,r)}(i,s);const o={...e._deprecatedProps,...r.deprecatedProps};(function(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(t){const r="".concat(this.id,": ").concat(n);for(const r of e[n])xd(this,r)||(this[r]=t);de.deprecated(r,e[n].join("/"))()}})})(i,o),t._mergedDefaultProps=i,t._propTypes=s,t._deprecatedProps=o}(t),t._mergedDefaultProps)}function wd(t){return{enumerable:!0,set(e){"string"==typeof e||e instanceof Promise||nh(e)?this[Bt][t]=e:this[Ut][t]=e},get(){if(this[Ut]){if(t in this[Ut])return this[Ut][t]||this[Dt][t];if(t in this[Bt]){const e=this[jt]&&this[jt].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[Dt][t]}}return this[Dt][t]}}}function xd(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Md(t,e){return xd(t,e)&&t[e]}let Sd=0;class Pd{constructor(...t){Rt(this,"id",void 0),Rt(this,"props",void 0),Rt(this,"count",void 0),this.props=function(t,e){const n=_d(t.constructor),r=Object.create(n);r[jt]=t,r[Bt]={},r[Ut]={};for(let t=0;t<e.length;++t){const n=e[t];for(const t in n)r[t]=n[t]}return Object.freeze(r),r}(this,t),this.id=this.props.id,this.count=Sd++}clone(t){const{props:e}=this,n={};for(const t in e[Dt])t in e[Ut]?n[t]=e[Ut][t]:t in e[Bt]&&(n[t]=e[Bt][t]);return new this.constructor({...e,...n,...t})}}Rt(Pd,"componentName","Component"),Rt(Pd,"defaultProps",{});const Ed=Object.freeze({});class Cd extends class{constructor(t){Rt(this,"component",void 0),Rt(this,"onAsyncPropUpdated",void 0),Rt(this,"asyncProps",void 0),Rt(this,"oldProps",void 0),Rt(this,"oldAsyncProps",void 0),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const t in this.asyncProps){const e=this.asyncProps[t];e&&e.type&&e.type.release&&e.type.release(e.resolvedValue,e.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||Ed}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(t){return t in this.asyncProps}getAsyncProp(t){const e=this.asyncProps[t];return e&&e.resolvedValue}isAsyncPropLoading(t){if(t){const e=this.asyncProps[t];return Boolean(e&&e.pendingLoadCount>0&&e.pendingLoadCount!==e.resolvedLoadCount)}for(const t in this.asyncProps)if(this.isAsyncPropLoading(t))return!0;return!1}reloadAsyncProp(t,e){this._watchPromise(t,Promise.resolve(e))}setAsyncProps(t){const e=t[Ut]||{},n=t[Bt]||t,r=t[Dt]||{};for(const t in e){const n=e[t];this._createAsyncPropData(t,r[t]),this._updateAsyncProp(t,n),e[t]=this.getAsyncProp(t)}for(const t in n){const e=n[t];this._createAsyncPropData(t,r[t]),this._updateAsyncProp(t,e)}}_fetch(t,e){return null}_onResolve(t,e){}_onError(t,e){}_updateAsyncProp(t,e){this._didAsyncInputValueChange(t,e)&&("string"==typeof e&&(e=this._fetch(t,e)),e instanceof Promise?this._watchPromise(t,e):nh(e)?this._resolveAsyncIterable(t,e):this._setPropValue(t,e))}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const t in this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}}_didAsyncInputValueChange(t,e){const n=this.asyncProps[t];return e!==n.resolvedValue&&e!==n.lastValue&&(n.lastValue=e,!0)}_setPropValue(t,e){this._freezeAsyncOldProps();const n=this.asyncProps[t];n&&(e=this._postProcessValue(n,e),n.resolvedValue=e,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(t,e,n){const r=this.asyncProps[t];r&&n>=r.resolvedLoadCount&&void 0!==e&&(this._freezeAsyncOldProps(),r.resolvedValue=e,r.resolvedLoadCount=n,this.onAsyncPropUpdated(t,e))}_watchPromise(t,e){const n=this.asyncProps[t];if(n){n.pendingLoadCount++;const r=n.pendingLoadCount;e.then((e=>{e=this._postProcessValue(n,e),this._setAsyncPropValue(t,e,r),this._onResolve(t,e)})).catch((e=>{this._onError(t,e)}))}}async _resolveAsyncIterable(t,e){if("data"!==t)return void this._setPropValue(t,e);const n=this.asyncProps[t];if(!n)return;n.pendingLoadCount++;const r=n.pendingLoadCount;let i=[],s=0;for await(const n of e){const{dataTransform:e}=this.component.props;i=e?e(n,i):i.concat(n),Object.defineProperty(i,"__diff",{enumerable:!1,value:[{startRow:s,endRow:i.length}]}),s=i.length,this._setAsyncPropValue(t,i,r)}this._onResolve(t,i)}_postProcessValue(t,e){const n=t.type;return n&&(n.release&&n.release(t.resolvedValue,n,this.component),n.transform)?n.transform(e,n,this.component):e}_createAsyncPropData(t,e){if(!this.asyncProps[t]){const n=this.component&&this.component.constructor._propTypes;this.asyncProps[t]={type:n&&n[t],lastValue:null,resolvedValue:e,pendingLoadCount:0,resolvedLoadCount:0}}}}{constructor({attributeManager:t,layer:e}){super(e),Rt(this,"attributeManager",void 0),Rt(this,"needsRedraw",void 0),Rt(this,"needsUpdate",void 0),Rt(this,"subLayers",void 0),Rt(this,"usesPickingColorCache",void 0),Rt(this,"changeFlags",void 0),Rt(this,"viewport",void 0),Rt(this,"uniformTransitions",void 0),Rt(this,"propsInTransition",void 0),this.attributeManager=t,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(t){this.component=t}_fetch(t,e){const n=this.component.props.fetch;return n?n(e,{propName:t,layer:this.layer}):super._fetch(t,e)}_onResolve(t,e){const n=this.component.props.onDataLoad;"data"===t&&n&&n(e,{propName:t,layer:this.layer})}_onError(t,e){this.layer.raiseError(e,"loading ".concat(t," of ").concat(this.layer))}}const kd=2**24-1,Td=Object.freeze([]),Ad=Wa((({oldViewport:t,viewport:e})=>t.equals(e)));let Ld=new Uint8ClampedArray(0);const Od={data:{type:"data",value:Td,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:r,loadOptions:i,signal:s})=>{const{resourceManager:o}=n.context;var a;i=i||n.getLoadOptions(),r=r||n.props.loaders,s&&(i={...i,fetch:{...null===(a=i)||void 0===a?void 0:a.fetch,signal:s}});let l=o.contains(t);return l||i||(o.add({resourceId:t,data:jn(t,r),persistent:!1}),l=!0),l?o.subscribe({resourceId:t,onChange:t=>{var r;return null===(r=n.internalState)||void 0===r?void 0:r.reloadAsyncProp(e,t)},consumerId:n.id,requestId:e}):jn(t,r,i)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:oi,onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:ni.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,100*-t],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Id extends Pd{constructor(...t){super(...t),Rt(this,"internalState",null),Rt(this,"lifecycle","Awaiting state"),Rt(this,"context",void 0),Rt(this,"state",void 0),Rt(this,"parent",null)}get root(){let t=this;for(;t.parent;)t=t.parent;return t}toString(){const t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}project(t){ll(this.internalState);const e=this.internalState.viewport||this.context.viewport,n=hd(t,{viewport:e,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,i,s]=Qr(n,e.pixelProjectionMatrix);return 2===t.length?[r,i]:[r,i,s]}unproject(t){return ll(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(t)}projectPosition(t,e){return ll(this.internalState),function(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=function(t){const{viewport:e,modelMatrix:n,coordinateOrigin:r}=t;let{coordinateSystem:i,fromCoordinateSystem:s,fromCoordinateOrigin:o}=t;return i===ni.DEFAULT&&(i=e.isGeospatial?ni.LNGLAT:ni.CARTESIAN),void 0===s&&(s=i),void 0===o&&(o=r),{viewport:e,coordinateSystem:i,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:s,fromCoordinateOrigin:o}}(e),{geospatialOrigin:l,shaderCoordinateOrigin:u,offsetMode:c}=$a(n,r,i),h=hd(t,{viewport:n,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:c});c&&function(t,e,n){t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2]}(h,h,n.projectPosition(l||u));return h}(t,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...e})}get isComposite(){return!1}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(t){for(const e of this.getModels())e.updateModuleSettings(t)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:t}=this.props;return t===ni.DEFAULT||t===ni.LNGLAT||t===ni.CARTESIAN}onHover(t,e){return this.props.onHover&&this.props.onHover(t,e)||!1}onClick(t,e){return this.props.onClick&&this.props.onClick(t,e)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(t,e=[]){return e[0]=t+1&255,e[1]=t+1>>8&255,e[2]=t+1>>8>>8&255,e}decodePickingColor(t){ll(t instanceof Uint8Array);const[e,n,r]=t;return e+256*n+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:function(t){if(null===(e=t)||"object"!=typeof e)throw new Error("count(): argument not an object");var e;if("function"==typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(function(t){return null!==t&&"object"==typeof t&&t.constructor===Object}(t))return Object.keys(t).length;throw new Error("count(): argument not a container")}(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var t;const e=this.getAttributeManager();if(!e)return null;const{positions:n,instancePositions:r}=e.attributes;return null===(t=n||r)||void 0===t?void 0:t.getBounds()}getShaders(t){for(const e of this.props.extensions)t=ud(t,e.getShaders.call(this,e));return t}shouldUpdateState(t){return t.changeFlags.propsOrDataChanged}updateState(t){const e=this.getAttributeManager(),{dataChanged:n}=t.changeFlags;if(n&&e)if(Array.isArray(n))for(const t of n)e.invalidateAll(t);else e.invalidateAll();const{props:r,oldProps:i}=t,s=Number.isInteger(i.highlightedObjectIndex)||i.pickable,o=Number.isInteger(r.highlightedObjectIndex)||r.pickable;if(s!==o&&e){const{pickingColors:t,instancePickingColors:n}=e.attributes,r=t||n;r&&(o&&r.constant&&(r.constant=!1,e.invalidate(r.id)),r.value||o||(r.constant=!0,r.value=[0,0,0]))}}finalizeState(t){for(const t of this.getModels())t.delete();const e=this.getAttributeManager();e&&e.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(t){for(const e of this.getModels())e.draw(t)}getPickingInfo({info:t,mode:e,sourceLayer:n}){const{index:r}=t;return r>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[r]),t}raiseError(t,e){var n,r,i,s;e&&(t.message="".concat(e,": ").concat(t.message)),null!==(n=(r=this.props).onError)&&void 0!==n&&n.call(r,t)||null===(i=this.context)||void 0===i||null===(s=i.onError)||void 0===s||s.call(i,t,this)}getNeedsRedraw(t={clearRedrawFlags:!1}){return this._getNeedsRedraw(t)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var t;return(null===(t=this.internalState)||void 0===t?void 0:t.uniformTransitions.active)||!1}activateViewport(t){if(!this.internalState)return;const e=this.internalState.viewport;this.internalState.viewport=t,e&&Ad({oldViewport:e,viewport:t})||(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(t="all"){const e=this.getAttributeManager();e&&("all"===t?e.invalidateAll():e.invalidate(t))}updateAttributes(t){for(const e of this.getModels())this._setModelAttributes(e,t)}_updateAttributes(){const t=this.getAttributeManager();if(!t)return;const e=this.props,n=this.getNumInstances(),r=this.getStartIndices();t.update({data:e.data,numInstances:n,startIndices:r,props:e,transitions:e.transitions,buffers:e.data.attributes,context:this});const i=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(i)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const e=t.update(),n=Object.create(this.props);for(const t in e)Object.defineProperty(n,t,{value:e[t]});return n}return this.props}calculateInstancePickingColors(t,{numInstances:e}){if(t.constant)return;const n=Math.floor(Ld.length/3);if(this.internalState.usesPickingColorCache=!0,n<e){e>kd&&de.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Ld=Un.allocate(Ld,e,{size:3,copy:!0,maxCount:Math.max(e,kd)});const t=Math.floor(Ld.length/3),r=[];for(let e=n;e<t;e++)this.encodePickingColor(e,r),Ld[3*e+0]=r[0],Ld[3*e+1]=r[1],Ld[3*e+2]=r[2]}t.value=Ld.subarray(0,3*e)}_setModelAttributes(t,e){const n=this.getAttributeManager(),r=t.userData.excludeAttributes||{},i=n.getShaderAttributes(e,r);t.setAttributes(i)}disablePickingIndex(t){this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;if(!r)return;const i=r.getVertexOffset(t),s=r.getVertexOffset(t+1);r.buffer.subData({data:new Uint8Array(s-i),offset:i})}restorePickingColors(){const{pickingColors:t,instancePickingColors:e}=this.getAttributeManager().attributes,n=t||e;n&&(this.internalState.usesPickingColorCache&&n.value.buffer!==Ld.buffer&&(n.value=Ld.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){ll(!this.internalState),ll(Number.isFinite(this.props.coordinateSystem)),pe("layer.initialize",this);const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new Cd({attributeManager:t,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(de.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),t)}),this.internalState.layer=this,this.internalState.uniformTransitions=new nd(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const t of this.props.extensions)t.initializeState.call(this,this.context,t);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(t){pe("layer.matched",this,this===t);const{state:e,internalState:n}=t;this!==t&&(this.internalState=n,this.internalState.layer=this,this.state=e,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const t=this.needsUpdate();if(pe("layer.update",this,t),!t)return;const e=this.props,n=this.context,r=this.internalState,i=n.viewport,s=this._updateUniformTransition();r.propsInTransition=s,n.viewport=r.viewport||i,this.props=s;try{const t=this._getUpdateParams(),s=this.getModels();if(n.gl)this.updateState(t);else try{this.updateState(t)}catch(t){}for(const e of this.props.extensions)e.updateState.call(this,t,e);const o=this.getModels()[0]!==s[0];this._postUpdate(t,o)}finally{n.viewport=i,this.props=e,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){pe("layer.finalize",this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,t)}_drawLayer({moduleParameters:t=null,uniforms:e={},parameters:n={}}){this._updateAttributeTransition();const r=this.props,i=this.context;this.props=this.internalState.propsInTransition||r;const s=this.props.opacity;e.opacity=Math.pow(s,1/2.2);try{t&&this.setModuleParameters(t);const{getPolygonOffset:s}=this.props,o=s&&s(e)||[0,0];Rs(i.gl,{polygonOffset:o}),zs(i.gl,n,(()=>{const r={moduleParameters:t,uniforms:e,parameters:n,context:i};for(const t of this.props.extensions)t.draw.call(this,r,t);this.draw(r)}))}finally{this.props=r}}getChangeFlags(){var t;return null===(t=this.internalState)||void 0===t?void 0:t.changeFlags}setChangeFlags(t){if(!this.internalState)return;const{changeFlags:e}=this.internalState;for(const n in t)if(t[n]){let r=!1;if("dataChanged"===n){const i=t[n],s=e[n];i&&Array.isArray(s)&&(e.dataChanged=Array.isArray(i)?s.concat(i):i,r=!0)}e[n]||(e[n]=t[n],r=!0),r&&pe("layer.changeFlag",this,n,t)}const n=Boolean(e.dataChanged||e.updateTriggersChanged||e.propsChanged||e.extensionsChanged);e.propsOrDataChanged=n,e.somethingChanged=n||e.viewportChanged||e.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(t,e){const n=function(t,e){const n=id({newProps:t,oldProps:e,propTypes:ld(t),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=function(t,e){if(null===e)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:i}=t;return r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&i&&(n=i(t.data,e.data)||n),n}(t,e);let i=!1;return r||(i=function(t,e){if(null===e)return{all:!0};if("all"in t.updateTriggers&&ad(t,e,"all"))return{all:!0};const n={};let r=!1;for(const i in t.updateTriggers)"all"!==i&&ad(t,e,i)&&(n[i]=!0,r=!0);return!!r&&n}(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:od(t,e),transitionsChanged:rd(t,e)}}(t,e);if(n.updateTriggersChanged)for(const t in n.updateTriggersChanged)n.updateTriggersChanged[t]&&this.invalidateAttribute(t);if(n.transitionsChanged)for(const i in n.transitionsChanged){var r;this.internalState.uniformTransitions.add(i,e[i],t[i],null===(r=t.transitions)||void 0===r?void 0:r[i])}return this.setChangeFlags(n)}validateProps(){!function(t){const e=ld(t);for(const n in e){const r=e[n],{validate:i}=r;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}(this.props)}updateAutoHighlight(t){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const e={pickingSelectedColor:t.picked?t.color:null},{highlightColor:n}=this.props;t.picked&&"function"==typeof n&&(e.pickingHighlightColor=n(t)),this.setModuleParameters(e),this.setNeedsRedraw()}_getAttributeManager(){const t=this.context;return new Qh(t.gl,{id:this.props.id,stats:t.stats,timeline:t.timeline})}_postUpdate(t,e){const{props:n,oldProps:r}=t;this.setNeedsRedraw(),this._updateAttributes();const{model:i}=this.state;null==i||i.setInstanceCount(this.getNumInstances());const{autoHighlight:s,highlightedObjectIndex:o,highlightColor:a}=n;if(e||r.autoHighlight!==s||r.highlightedObjectIndex!==o||r.highlightColor!==a){const t={};s||(t.pickingSelectedColor=null),Array.isArray(a)&&(t.pickingHighlightColor=a),Number.isInteger(o)&&(t.pickingSelectedColor=Number.isFinite(o)&&o>=0?this.encodePickingColor(o):null),this.setModuleParameters(t)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let e=!1;e=e||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags;const n=this.getAttributeManager(),r=!!n&&n.getNeedsRedraw(t);return e=e||r,e}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}Rt(Id,"defaultProps",Od),Rt(Id,"layerName","Layer");class Rd extends Id{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every((t=>t.isLoaded))}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(t){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo({info:t}){const{object:e}=t;return e&&e.__source&&e.__source.parent&&e.__source.parent.id===this.id?(t.object=e.__source.object,t.index=e.__source.index,t):t}filterSubLayer(t){return!0}shouldRenderSubLayer(t,e){return e&&e.length}getSubLayerClass(t,e){const{_subLayerProps:n}=this.props;return n&&n[t]&&n[t].type||e}getSubLayerRow(t,e,n){return t.__source={parent:this,object:e,index:n},t}getSubLayerAccessor(t){if("function"==typeof t){const e={index:-1,data:this.props.data,target:[]};return(n,r)=>n&&n.__source?(e.index=n.__source.index,t(n.__source.object,e)):t(n,r)}return t}getSubLayerProps(t={}){var e;const{opacity:n,pickable:r,visible:i,parameters:s,getPolygonOffset:o,highlightedObjectIndex:a,autoHighlight:l,highlightColor:u,coordinateSystem:c,coordinateOrigin:h,wrapLongitude:d,positionFormat:f,modelMatrix:p,extensions:g,fetch:m,operation:v,_subLayerProps:y}=this.props,b={id:"",updateTriggers:{},opacity:n,pickable:r,visible:i,parameters:s,getPolygonOffset:o,highlightedObjectIndex:a,autoHighlight:l,highlightColor:u,coordinateSystem:c,coordinateOrigin:h,wrapLongitude:d,positionFormat:f,modelMatrix:p,extensions:g,fetch:m,operation:v},_=y&&t.id&&y[t.id],w=_&&_.updateTriggers,x=t.id||"sublayer";if(_){const e=this.constructor._propTypes,n=t.type?t.type._propTypes:{};for(const t in _){const r=n[t]||e[t];r&&"accessor"===r.type&&(_[t]=this.getSubLayerAccessor(_[t]))}}Object.assign(b,t,_),b.id="".concat(this.props.id,"-").concat(x),b.updateTriggers={all:null===(e=this.props.updateTriggers)||void 0===e?void 0:e.all,...t.updateTriggers,...w};for(const t of g){const e=t.getSubLayerProps.call(this,t);e&&Object.assign(b,e,{updateTriggers:Object.assign(b.updateTriggers,e.updateTriggers)})}return b}_updateAutoHighlight(t){for(const e of this.getSubLayers())e.updateAutoHighlight(t)}_getAttributeManager(){return null}_postUpdate(t,e){let n=this.internalState.subLayers;const r=!n||this.needsUpdate();r&&(n=ge(this.renderLayers(),Boolean),this.internalState.subLayers=n),pe("compositeLayer.renderLayers",this,r,n);for(const t of n)t.parent=this}}function zd({data:t,getIndex:e,dataRange:n,replace:r}){const{startRow:i=0,endRow:s=1/0}=n,o=t.length;let a=o,l=o;for(let n=0;n<o;n++){const r=e(t[n]);if(a>n&&r>=i&&(a=n),r>=s){l=n;break}}let u=a;const c=l-a!==r.length?t.slice(l):void 0;for(let e=0;e<r.length;e++)t[u++]=r[e];if(c){for(let e=0;e<c.length;e++)t[u++]=c[e];t.length=u}return{startRow:a,endRow:a+r.length}}Rt(Rd,"layerName","CompositeLayer");const Fd={name:"project32",dependencies:[Ka],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},Nd={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},jd={name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nd;const e={};if(void 0!==t.pickingSelectedColor)if(t.pickingSelectedColor){const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}else e.picking_uSelectedColorValid=0;if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,(t=>t/255));Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return void 0!==t.pickingActive&&(e.picking_uActive=Boolean(t.pickingActive),e.picking_uAttribute=Boolean(t.pickingAttribute)),e}},Dd={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},...jd},Bd={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class Ud{static get DRAW_MODE(){return Bd}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:e=so("geometry"),drawMode:n=Bd.TRIANGLES,attributes:r={},indices:i=null,vertexCount:s=null}=t;this.id=e,this.drawMode=0|n,this.attributes={},this.userData={},this._setAttributes(r,i),this.vertexCount=s||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(t){return"Geometry ".concat(this.id," attribute ").concat(t)}_setAttributes(t,e){e&&(this.indices=ArrayBuffer.isView(e)?{value:e,size:1}:e);for(const e in t){let n=t[e];n=ArrayBuffer.isView(n)?{value:n}:n,eo(ArrayBuffer.isView(n.value),"".concat(this._print(e),": must be typed array or object with value as typed array")),"POSITION"!==e&&"positions"!==e||n.size||(n.size=3),"indices"===e?(eo(!this.indices),this.indices=n):this.attributes[e]=n}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(t,e){if(e)return e.value.length;let n=1/0;for(const e in t){const r=t[e],{value:i,size:s,constant:o}=r;!o&&i&&s>=1&&(n=Math.min(n,i.length/s))}return eo(Number.isFinite(n)),n}}const Vd=()=>{},Wd={10241:9987,10240:9729,10242:33071,10243:33071};function Gd(t,e,n,r){return n===e.width&&r===e.height?e:(t.canvas.height=r,t.canvas.width=n,t.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawImage(e,0,0,e.width,e.height,0,0,n,r),t.canvas)}function Hd(t){return t&&(t.id||t.url)}function qd(t,e,n){for(let r=0;r<e.length;r++){const{icon:i,xOffset:s}=e[r];t[Hd(i)]={...i,x:s,y:n}}}class Xd{constructor(t,{onUpdate:e=Vd,onError:n=Vd}){Rt(this,"gl",void 0),Rt(this,"onUpdate",void 0),Rt(this,"onError",void 0),Rt(this,"_loadOptions",null),Rt(this,"_texture",null),Rt(this,"_externalTexture",null),Rt(this,"_mapping",{}),Rt(this,"_pendingCount",0),Rt(this,"_autoPacking",!1),Rt(this,"_xOffset",0),Rt(this,"_yOffset",0),Rt(this,"_rowHeight",0),Rt(this,"_buffer",4),Rt(this,"_canvasWidth",1024),Rt(this,"_canvasHeight",0),Rt(this,"_canvas",null),this.gl=t,this.onUpdate=e,this.onError=n}finalize(){var t;null===(t=this._texture)||void 0===t||t.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(t){const e=this._autoPacking?Hd(t):t;return this._mapping[e]||{}}setProps({loadOptions:t,autoPacking:e,iconAtlas:n,iconMapping:r}){var i;t&&(this._loadOptions=t),void 0!==e&&(this._autoPacking=e),r&&(this._mapping=r),n&&(null===(i=this._texture)||void 0===i||i.delete(),this._texture=null,this._externalTexture=n)}get isLoaded(){return 0===this._pendingCount}packIcons(t,e){if(!this._autoPacking||"undefined"==typeof document)return;const n=Object.values(function(t,e,n){if(!t||!e)return null;n=n||{};const r={},{iterable:i,objectInfo:s}=eh(t);for(const t of i){s.index++;const i=e(t,s),o=Hd(i);if(!i)throw new Error("Icon is missing.");if(!i.url)throw new Error("Icon url is missing.");r[o]||n[o]&&i.url===n[o].url||(r[o]={...i,source:t,sourceIndex:s.index})}return r}(t,e,this._mapping)||{});if(n.length>0){const{mapping:t,xOffset:e,yOffset:r,rowHeight:i,canvasHeight:s}=function({icons:t,buffer:e,mapping:n={},xOffset:r=0,yOffset:i=0,rowHeight:s=0,canvasWidth:o}){let a=[];for(let l=0;l<t.length;l++){const u=t[l];if(!n[Hd(u)]){const{height:t,width:l}=u;r+l+e>o&&(qd(n,a,i),r=0,i=s+i+e,s=0,a=[]),a.push({icon:u,xOffset:r}),r=r+l+e,s=Math.max(s,t)}}return a.length>0&&qd(n,a,i),{mapping:n,rowHeight:s,xOffset:r,yOffset:i,canvasWidth:o,canvasHeight:(l=s+i+e,Math.pow(2,Math.ceil(Math.log2(l))))};var l}({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=i,this._mapping=t,this._xOffset=e,this._yOffset=r,this._canvasHeight=s,this._texture||(this._texture=new Ao(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:Wd})),this._texture.height!==this._canvasHeight&&(this._texture=function(t,e,n){const r=t.width,i=t.height,s=Wo(t,{width:e,height:n});return function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:r=0,sourceY:i=0,targetMipmaplevel:s=0,targetInternalFormat:o=6408}=n;let{targetX:a,targetY:l,targetZ:u,width:c,height:h}=n;const{framebuffer:d,deleteFramebuffer:f}=Xo(t);eo(d);const{gl:p,handle:g}=d,m=void 0!==a||void 0!==l||void 0!==u;a=a||0,l=l||0,u=u||0;const v=p.bindFramebuffer(36160,g);eo(e);let y=null;if(e instanceof To&&(y=e,c=Number.isFinite(c)?c:y.width,h=Number.isFinite(h)?h:y.height,y.bind(0),e=y.target),m)switch(e){case 3553:case 34067:p.copyTexSubImage2D(e,s,a,l,r,i,c,h);break;case 35866:case 32879:ns(p).copyTexSubImage3D(e,s,a,l,u,r,i,c,h)}else p.copyTexImage2D(e,s,o,r,i,c,h,0);y&&y.unbind(),p.bindFramebuffer(36160,v||null),f&&d.delete()}(t,s,{targetY:0,width:r,height:i}),t.delete(),s}(this._texture,this._canvasWidth,this._canvasHeight)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(n)}}_loadIcons(t){const e=this._canvas.getContext("2d");for(const n of t)this._pendingCount++,jn(n.url,Vu,this._loadOptions).then((t=>{const r=Hd(n),{x:i,y:s,width:o,height:a}=this._mapping[r],l=Gd(e,t,o,a);this._texture.setSubImageData({data:l,x:i,y:s,width:o,height:a}),this._texture.generateMipmap(),this.onUpdate()})).catch((t=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:t})})).finally((()=>{this._pendingCount--}))}}const Zd=[0,0,0,255],Yd={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:Zd},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class $d extends Id{constructor(...t){super(...t),Rt(this,"state",void 0)}getShaders(){return super.getShaders({vs:'#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  // convert size in meters to pixels, then scaled and clamp\n \n  // project meters to pixels and clamp to limits \n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n\n  // scale icon height to match instanceSize\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n\n  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n',fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n\n  // if colorMode == 0, use pixel color from the texture\n  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  // Take the global opacity and the alpha from vColor into account for the alpha component\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[Fd,Dd]})}initializeState(){this.state={iconManager:new Xd(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:Zd},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(t){super.updateState(t);const{props:e,oldProps:n,changeFlags:r}=t,i=this.getAttributeManager(),{iconAtlas:s,iconMapping:o,data:a,getIcon:l}=e,{iconManager:u}=this.state,c=s||this.internalState.isAsyncPropLoading("iconAtlas");if(u.setProps({loadOptions:e.loadOptions,autoPacking:!c,iconAtlas:s,iconMapping:c?o:null}),c?n.iconMapping!==e.iconMapping&&i.invalidate("getIcon"):(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&u.packIcons(a,l),r.extensionsChanged){var h;const{gl:t}=this.context;null===(h=this.state.model)||void 0===h||h.delete(),this.state.model=this._getModel(t),i.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(t){super.finalizeState(t),this.state.iconManager.finalize()}draw({uniforms:t}){const{sizeScale:e,sizeMinPixels:n,sizeMaxPixels:r,sizeUnits:i,billboard:s,alphaCutoff:o}=this.props,{iconManager:a}=this.state,l=a.getTexture();l&&this.state.model.setUniforms(t).setUniforms({iconsTexture:l,iconsTextureDim:[l.width,l.height],sizeUnits:ii[i],sizeScale:e,sizeMinPixels:n,sizeMaxPixels:r,billboard:s,alphaCutoff:o}).draw()}_getModel(t){return new qh(t,{...this.getShaders(),id:this.props.id,geometry:new Ud({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(t){var e;const n=null===(e=this.getCurrentLayer())||void 0===e?void 0:e.props.onIconError;n?n(t):de.error(t.error.message)()}getInstanceOffset(t){const{width:e,height:n,anchorX:r=e/2,anchorY:i=n/2}=this.state.iconManager.getIconMapping(t);return[e/2-r,n/2-i]}getInstanceColorMode(t){return this.state.iconManager.getIconMapping(t).mask?1:0}getInstanceIconFrame(t){const{x:e,y:n,width:r,height:i}=this.state.iconManager.getIconMapping(t);return[e,n,r,i]}}Rt($d,"defaultProps",Yd),Rt($d,"layerName","IconLayer");const Qd=[0,0,0,255],Kd={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:Qd},getLineColor:{type:"accessor",value:Qd},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class Jd extends Id{getShaders(){return super.getShaders({vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\nuniform bool antialiasing;\nuniform bool billboard;\nuniform int radiusUnits;\nuniform int lineWidthUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n\n  // Multiply out radius and clamp to limits\n  outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),\n    radiusMinPixels, radiusMaxPixels\n  );\n  \n  // Multiply out line width and clamp to limits\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n\n  // outer radius needs to offset by half stroke width\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n\n  // Expand geometry to accomodate edge smoothing\n  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;\n\n  // position on the containing square in [-1, 1] space\n  unitPosition = edgePadding * positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  if (billboard) {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = edgePadding * positions * outerRadiusPixels;\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\n  }\n\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  // Apply opacity to instance color, or return instance picking color\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\nuniform float stroked;\nuniform bool antialiasing;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition) * outerRadiusPixels;\n  float inCircle = antialiasing ? \n    smoothedge(distToCenter, outerRadiusPixels) : \n    step(distToCenter, outerRadiusPixels);\n\n  if (inCircle == 0.0) {\n    discard;\n  }\n\n  if (stroked > 0.5) {\n    float isLine = antialiasing ? \n      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :\n      step(innerUnitRadius * outerRadiusPixels, distToCenter);\n\n    if (filled) {\n      gl_FragColor = mix(vFillColor, vLineColor, isLine);\n    } else {\n      if (isLine == 0.0) {\n        discard;\n      }\n      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n    }\n  } else if (filled) {\n    gl_FragColor = vFillColor;\n  } else {\n    discard;\n  }\n\n  gl_FragColor.a *= inCircle;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[Fd,Dd]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var e;const{gl:t}=this.context;null===(e=this.state.model)||void 0===e||e.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{radiusUnits:e,radiusScale:n,radiusMinPixels:r,radiusMaxPixels:i,stroked:s,filled:o,billboard:a,antialiasing:l,lineWidthUnits:u,lineWidthScale:c,lineWidthMinPixels:h,lineWidthMaxPixels:d}=this.props;this.state.model.setUniforms(t).setUniforms({stroked:s?1:0,filled:o,billboard:a,antialiasing:l,radiusUnits:ii[e],radiusScale:n,radiusMinPixels:r,radiusMaxPixels:i,lineWidthUnits:ii[u],lineWidthScale:c,lineWidthMinPixels:h,lineWidthMaxPixels:d}).draw()}_getModel(t){return new qh(t,{...this.getShaders(),id:this.props.id,geometry:new Ud({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}}}),isInstanced:!0})}}Rt(Jd,"defaultProps",Kd),Rt(Jd,"layerName","ScatterplotLayer");const tf=[];class ef extends $d{constructor(...t){super(...t),Rt(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float buffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n\n    // if enable sdf (signed distance fields)\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n\n    // Take the global opacity and the alpha from color into account for the alpha component\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(t,{index:e,target:n})=>this.encodePickingColor(e,n)}})}updateState(t){super.updateState(t);const{props:e,oldProps:n}=t;let{outlineColor:r}=e;r!==n.outlineColor&&(r=r.map((t=>t/255)),r[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!e.sdf&&e.outlineWidth&&de.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(t){const{sdf:e,smoothing:n,outlineWidth:r}=this.props,{outlineColor:i}=this.state;t.uniforms={...t.uniforms,buffer:.75,outlineBuffer:r?Math.max(n,.75*(1-r)):-1,gamma:n,sdf:Boolean(e),outlineColor:i},super.draw(t)}getInstanceOffset(t){return t?Array.from(t).flatMap((t=>super.getInstanceOffset(t))):tf}getInstanceColorMode(t){return 1}getInstanceIconFrame(t){return t?Array.from(t).flatMap((t=>super.getInstanceIconFrame(t))):tf}}Rt(ef,"defaultProps",{getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}}),Rt(ef,"layerName","MultiIconLayer");var nf=o(94),rf=o.n(nf);const sf=[];function of(t,e,n,r){let i=0;for(let o=e;o<n;o++){var s;i+=(null===(s=r[t[o]])||void 0===s?void 0:s.width)||0}return i}function af(t,e,n,r,i,s){let o=e,a=0;for(let l=e;l<n;l++){const e=of(t,l,l+1,i);a+e>r&&(o<l&&s.push(l),o=l,a=0),a+=e}return a}function lf(t,e,n,r,i=0,s){void 0===s&&(s=t.length);const o=[];return"break-all"===e?af(t,i,s,n,r,o):function(t,e,n,r,i,s){let o=e,a=e,l=e,u=0;for(let c=e;c<n;c++)if(" "===t[c]?l=c+1:" "!==t[c+1]&&c+1!==n||(l=c+1),l>a){let e=of(t,a,l,i);u+e>r&&(o<a&&(s.push(a),o=a,u=0),e>r&&(e=af(t,a,l,r,i,s),o=s[s.length-1])),a=l,u+=e}}(t,i,s,n,r,o),o}function uf(t,e,n,r,i,s){let o=0,a=0;for(let s=e;s<n;s++){const e=t[s],n=r[e];n?(a||(a=n.height),i[s]=o+n.width/2,o+=n.width):(de.warn("Missing character: ".concat(e," (").concat(e.codePointAt(0),")"))(),i[s]=o,o+=32)}s[0]=o,s[1]=a}function cf(t,e,n,r,i){const s=Array.from(t),o=s.length,a=new Array(o),l=new Array(o),u=new Array(o),c=("break-word"===n||"break-all"===n)&&isFinite(r)&&r>0,h=[0,0],d=[0,0];let f=0,p=0,g=0;for(let t=0;t<=o;t++){const m=s[t];if("\n"!==m&&t!==o||(g=t),g>p){const t=c?lf(s,n,r,i,p,g):sf;for(let n=0;n<=t.length;n++){const r=0===n?p:t[n-1],o=n<t.length?t[n]:g;uf(s,r,o,i,a,d);for(let t=r;t<o;t++)l[t]=f+d[1]/2,u[t]=d[0];f+=d[1]*e,h[0]=Math.max(h[0],d[0])}p=g}"\n"===m&&(a[p]=0,l[p]=0,u[p]=0,p++)}return h[1]=f,{x:a,y:l,rowWidth:u,size:h}}class hf{constructor(t=5){Rt(this,"limit",void 0),Rt(this,"_cache",{}),Rt(this,"_order",[]),this.limit=t}get(t){const e=this._cache[t];return e&&(this._deleteOrder(t),this._appendOrder(t)),e}set(t,e){this._cache[t]?(this.delete(t),this._cache[t]=e,this._appendOrder(t)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=e,this._appendOrder(t))}delete(t){this._cache[t]&&(delete this._cache[t],this._deleteOrder(t))}_deleteOrder(t){const e=this._order.indexOf(t);e>=0&&this._order.splice(e,1)}_appendOrder(t){this._order.push(t)}}const df={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let ff=new hf(3);function pf(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function gf(t,e,n,r){t.font="".concat(r," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}class mf{constructor(){Rt(this,"props",{...df}),Rt(this,"_key",void 0),Rt(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return 1.2}setProps(t={}){Object.assign(this.props,t);const e=this._key;this._key=this._getKey();const n=function(t,e){let n;n="string"==typeof e?new Set(Array.from(e)):new Set(e);const r=ff.get(t);if(!r)return n;for(const t in r.mapping)n.has(t)&&n.delete(t);return n}(this._key,this.props.characterSet),r=ff.get(this._key);if(r&&0===n.size)return void(this._key!==e&&(this._atlas=r));const i=this._generateFontAtlas(this._key,n,r);this._atlas=i,ff.set(this._key,i)}_generateFontAtlas(t,e,n){const{fontFamily:r,fontWeight:i,fontSize:s,buffer:o,sdf:a,radius:l,cutoff:u}=this.props;let c=n&&n.data;c||(c=document.createElement("canvas"),c.width=1024);const h=c.getContext("2d");gf(h,r,s,i);const{mapping:d,canvasHeight:f,xOffset:p,yOffset:g}=function({characterSet:t,getFontWidth:e,fontHeight:n,buffer:r,maxCanvasWidth:i,mapping:s={},xOffset:o=0,yOffset:a=0}){let l=0,u=o;for(const o of t)if(!s[o]){const t=e(o);u+t+2*r>i&&(u=0,l++),s[o]={x:u+r,y:a+l*(n+2*r)+r,width:t,height:n},u+=t+2*r}const c=n+2*r;return{mapping:s,xOffset:u,yOffset:a+l*c,canvasHeight:(h=a+(l+1)*c,Math.pow(2,Math.ceil(Math.log2(h))))};var h}({getFontWidth:t=>h.measureText(t).width,fontHeight:1.2*s,buffer:o,characterSet:e,maxCanvasWidth:1024,...n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset}});if(c.height!==f){const t=h.getImageData(0,0,c.width,c.height);c.height=f,h.putImageData(t,0,0)}if(gf(h,r,s,i),a){const t=new(rf())(s,o,l,u,r,i),n=h.getImageData(0,0,t.size,t.size);for(const r of e)pf(t.draw(r),n),h.putImageData(n,d[r].x-o,d[r].y+o)}else for(const t of e)h.fillText(t,d[t].x,d[t].y+.9*s);return{xOffset:p,yOffset:g,mapping:d,data:c,width:c.width,height:c.height}}_getKey(){const{fontFamily:t,fontWeight:e,fontSize:n,buffer:r,sdf:i,radius:s,cutoff:o}=this.props;return i?"".concat(t," ").concat(e," ").concat(n," ").concat(r," ").concat(s," ").concat(o):"".concat(t," ").concat(e," ").concat(n," ").concat(r)}}const vf={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class yf extends Id{constructor(...t){super(...t),Rt(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n\n  // convert size in meters to pixels, then scaled and clamp\n\n  // project meters to pixels and clamp to limits\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  // Apply opacity to instance color, or return instance picking color\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[Fd,Dd]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){super.updateState(t);const{changeFlags:e}=t;if(e.extensionsChanged){var n;const{gl:t}=this.context;null===(n=this.state.model)||void 0===n||n.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{billboard:e,sizeScale:n,sizeUnits:r,sizeMinPixels:i,sizeMaxPixels:s,getLineWidth:o}=this.props;let{padding:a}=this.props;a.length<4&&(a=[a[0],a[1],a[0],a[1]]),this.state.model.setUniforms(t).setUniforms({billboard:e,stroked:Boolean(o),padding:a,sizeUnits:ii[r],sizeScale:n,sizeMinPixels:i,sizeMaxPixels:s}).draw()}_getModel(t){return new qh(t,{...this.getShaders(),id:this.props.id,geometry:new Ud({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}Rt(yf,"defaultProps",vf),Rt(yf,"layerName","TextBackgroundLayer");const bf={start:1,middle:0,end:-1},_f={top:1,center:0,bottom:-1},wf=[0,0,0,255],xf={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:wf},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:df.characterSet},fontFamily:df.fontFamily,fontWeight:df.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:wf},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:wf},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class Mf extends Rd{constructor(...t){super(...t),Rt(this,"state",void 0),Rt(this,"getBoundingRect",((t,e)=>{const n=this.state.fontAtlasManager.mapping,r=this.state.getText,{wordBreak:i,maxWidth:s,lineHeight:o,getTextAnchor:a,getAlignmentBaseline:l}=this.props,u=r(t,e)||"",{size:[c,h]}=cf(u,o,i,s,n);return[(bf["function"==typeof a?a(t,e):a]-1)*c/2,(_f["function"==typeof l?l(t,e):l]-1)*h/2,c,h]})),Rt(this,"getIconOffsets",((t,e)=>{const n=this.state.fontAtlasManager.mapping,r=this.state.getText,{wordBreak:i,maxWidth:s,lineHeight:o,getTextAnchor:a,getAlignmentBaseline:l}=this.props,u=r(t,e)||"",{x:c,y:h,rowWidth:d,size:[f,p]}=cf(u,o,i,s,n),g=bf["function"==typeof a?a(t,e):a],m=_f["function"==typeof l?l(t,e):l],v=c.length,y=new Array(2*v);let b=0;for(let t=0;t<v;t++){const e=(1-g)*(f-d[t])/2;y[b++]=(g-1)*f/2+e+c[t],y[b++]=(m-1)*p/2+h[t]}return y}))}initializeState(){this.state={styleVersion:0,fontAtlasManager:new mf}}updateState(t){const{props:e,oldProps:n,changeFlags:r}=t;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||e.lineHeight!==n.lineHeight||e.wordBreak!==n.wordBreak||e.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:t}){return t.object=t.index>=0?this.props.data[t.index]:null,t}_updateFontAtlas(){const{fontSettings:t,fontFamily:e,fontWeight:n}=this.props,{fontAtlasManager:r,characterSet:i}=this.state,s={...t,characterSet:i,fontFamily:e,fontWeight:n};if(!r.mapping)return r.setProps(s),!0;for(const t in s)if(s[t]!==r.props[t])return r.setProps(s),!0;return!1}_updateText(){var t;const{data:e,characterSet:n}=this.props,r=null===(t=e.attributes)||void 0===t?void 0:t.getText;let i,{getText:s}=this.props,o=e.startIndices;const a="auto"===n&&new Set;if(r&&o){const{texts:t,characterCount:n}=function({value:t,length:e,stride:n,offset:r,startIndices:i,characterSet:s}){const o=t.BYTES_PER_ELEMENT,a=n?n/o:1,l=r?r/o:0,u=i[e]||Math.ceil((t.length-l)/a),c=s&&new Set,h=new Array(e);let d=t;if(a>1||l>0){d=new(0,t.constructor)(u);for(let e=0;e<u;e++)d[e]=t[e*a+l]}for(let t=0;t<e;t++){const e=i[t],n=i[t+1]||u,r=d.subarray(e,n);h[t]=String.fromCodePoint.apply(null,r),c&&r.forEach(c.add,c)}if(c)for(const t of c)s.add(String.fromCodePoint(t));return{texts:h,characterCount:u}}({...ArrayBuffer.isView(r)?{value:r}:r,length:e.length,startIndices:o,characterSet:a});i=n,s=(e,{index:n})=>t[n]}else{const{iterable:t,objectInfo:n}=eh(e);o=[0],i=0;for(const e of t){n.index++;const t=Array.from(s(e,n)||"");a&&t.forEach(a.add,a),i+=t.length,o.push(i)}}this.setState({getText:s,startIndices:o,numInstances:i,characterSet:a||n})}renderLayers(){const{startIndices:t,numInstances:e,getText:n,fontAtlasManager:{scale:r,texture:i,mapping:s},styleVersion:o}=this.state,{data:a,_dataDiff:l,getPosition:u,getColor:c,getSize:h,getAngle:d,getPixelOffset:f,getBackgroundColor:p,getBorderColor:g,getBorderWidth:m,backgroundPadding:v,background:y,billboard:b,fontSettings:_,outlineWidth:w,outlineColor:x,sizeScale:M,sizeUnits:S,sizeMinPixels:P,sizeMaxPixels:E,transitions:C,updateTriggers:k}=this.props,T=this.getSubLayerClass("characters",ef),A=this.getSubLayerClass("background",yf);return[y&&new A({getFillColor:p,getLineColor:g,getLineWidth:m,padding:v,getPosition:u,getSize:h,getAngle:d,getPixelOffset:f,billboard:b,sizeScale:M/this.state.fontAtlasManager.props.fontSize,sizeUnits:S,sizeMinPixels:P,sizeMaxPixels:E,transitions:C&&{getPosition:C.getPosition,getAngle:C.getAngle,getSize:C.getSize,getFillColor:C.getBackgroundColor,getLineColor:C.getBorderColor,getLineWidth:C.getBorderWidth,getPixelOffset:C.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:k.getPosition,getAngle:k.getAngle,getSize:k.getSize,getFillColor:k.getBackgroundColor,getLineColor:k.getBorderColor,getLineWidth:k.getBorderWidth,getPixelOffset:k.getPixelOffset,getBoundingRect:{getText:k.getText,getTextAnchor:k.getTextAnchor,getAlignmentBaseline:k.getAlignmentBaseline,styleVersion:o}}}),{data:a.attributes&&a.attributes.background?{length:a.length,attributes:a.attributes.background}:a,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new T({sdf:_.sdf,smoothing:Number.isFinite(_.smoothing)?_.smoothing:df.smoothing,outlineWidth:w,outlineColor:x,iconAtlas:i,iconMapping:s,getPosition:u,getColor:c,getSize:h,getAngle:d,getPixelOffset:f,billboard:b,sizeScale:M*r,sizeUnits:S,sizeMinPixels:P*r,sizeMaxPixels:E*r,transitions:C&&{getPosition:C.getPosition,getAngle:C.getAngle,getColor:C.getColor,getSize:C.getSize,getPixelOffset:C.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:k.getText,getPosition:k.getPosition,getAngle:k.getAngle,getColor:k.getColor,getSize:k.getSize,getPixelOffset:k.getPixelOffset,getIconOffsets:{getText:k.getText,getTextAnchor:k.getTextAnchor,getAlignmentBaseline:k.getAlignmentBaseline,styleVersion:o}}}),{data:a,_dataDiff:l,startIndices:t,numInstances:e,getIconOffsets:this.getIconOffsets,getIcon:n})]}static set fontAtlasCacheLimit(t){!function(t){de.assert(Number.isFinite(t)&&t>=3,"Invalid cache limit"),ff=new hf(t)}(t)}}Rt(Mf,"defaultProps",xf),Rt(Mf,"layerName","TextLayer");class Sf{constructor(t){Rt(this,"opts",void 0),Rt(this,"typedArrayManager",void 0),Rt(this,"indexStarts",[0]),Rt(this,"vertexStarts",[0]),Rt(this,"vertexCount",0),Rt(this,"instanceCount",0),Rt(this,"attributes",void 0),Rt(this,"_attributeDefs",void 0),Rt(this,"data",void 0),Rt(this,"getGeometry",void 0),Rt(this,"geometryBuffer",void 0),Rt(this,"buffers",void 0),Rt(this,"positionSize",void 0),Rt(this,"normalize",void 0);const{attributes:e={}}=t;this.typedArrayManager=Un,this.attributes={},this._attributeDefs=e,this.opts=t,this.updateGeometry(t)}updateGeometry(t){Object.assign(this.opts,t);const{data:e,buffers:n={},getGeometry:r,geometryBuffer:i,positionFormat:s,dataChanged:o,normalize:a=!0}=this.opts;if(this.data=e,this.getGeometry=r,this.positionSize=i&&i.size||("XY"===s?2:3),this.buffers=n,this.normalize=a,i&&(ll(e.startIndices),this.getGeometry=this.getGeometryFromBuffer(i),a||(n.positions=i)),this.geometryBuffer=n.positions,Array.isArray(o))for(const t of o)this._rebuildGeometry(t);else this._rebuildGeometry()}updatePartialGeometry({startRow:t,endRow:e}){this._rebuildGeometry({startRow:t,endRow:e})}getGeometryFromBuffer(t){const e=t.value||t;return ArrayBuffer.isView(e)?rh(e,{size:this.positionSize,offset:t.offset,stride:t.stride,startIndices:this.data.startIndices}):null}_allocate(t,e){const{attributes:n,buffers:r,_attributeDefs:i,typedArrayManager:s}=this;for(const o in i)if(o in r)s.release(n[o]),n[o]=null;else{const r=i[o];r.copy=e,n[o]=s.allocate(n[o],t,r)}}_forEachGeometry(t,e,n){const{data:r,getGeometry:i}=this,{iterable:s,objectInfo:o}=eh(r,e,n);for(const e of s)o.index++,t(i?i(e,o):null,o.index)}_rebuildGeometry(t){if(!this.data)return;let{indexStarts:e,vertexStarts:n,instanceCount:r}=this;const{data:i,geometryBuffer:s}=this,{startRow:o=0,endRow:a=1/0}=t||{},l={};if(t||(e=[0],n=[0]),this.normalize||!s)this._forEachGeometry(((t,e)=>{const r=t&&this.normalizeGeometry(t);l[e]=r,n[e+1]=n[e]+(r?this.getGeometrySize(r):0)}),o,a),r=n[n.length-1];else if(n=i.startIndices,r=n[i.length]||0,ArrayBuffer.isView(s))r=r||s.length/this.positionSize;else if(s instanceof Mo){const t=s.accessor.stride||4*this.positionSize;r=r||s.byteLength/t}else if(s.buffer){const t=s.stride||4*this.positionSize;r=r||s.buffer.byteLength/t}else if(s.value){const t=s.value,e=s.stride/t.BYTES_PER_ELEMENT||this.positionSize;r=r||t.length/e}this._allocate(r,Boolean(t)),this.indexStarts=e,this.vertexStarts=n,this.instanceCount=r;const u={};this._forEachGeometry(((t,i)=>{const s=l[i]||t;u.vertexStart=n[i],u.indexStart=e[i];const o=i<n.length-1?n[i+1]:r;u.geometrySize=o-n[i],u.geometryIndex=i,this.updateGeometryAttributes(s,u)}),o,a),this.vertexCount=e[e.length-1]}}function Pf(t,e,n={}){const r=function(t,e={}){return Math.sign(function(t,e={}){const{start:n=0,end:r=t.length}=e,i=e.size||2;let s=0;for(let e=n,o=r-i;e<r;e+=i)s+=(t[e]-t[o])*(t[e+1]+t[o+1]),o=e;return s/2}(t,e))}(t,n);return r!==e&&(function(t,e){const{start:n=0,end:r=t.length,size:i=2}=e,s=(r-n)/i,o=Math.floor(s/2);for(let e=0;e<o;++e){const r=n+e*i,o=n+(s-1-e)*i;for(let e=0;e<i;++e){const n=t[r+e];t[r+e]=t[o+e],t[o+e]=n}}}(t,n),!0)}function Ef(t,e,n,r,i=[]){let s,o;if(8&n)s=(r[3]-t[1])/(e[1]-t[1]),o=3;else if(4&n)s=(r[1]-t[1])/(e[1]-t[1]),o=1;else if(2&n)s=(r[2]-t[0])/(e[0]-t[0]),o=2;else{if(!(1&n))return null;s=(r[0]-t[0])/(e[0]-t[0]),o=0}for(let n=0;n<t.length;n++)i[n]=(1&o)===n?r[o]:s*(e[n]-t[n])+t[n];return i}function Cf(t,e){let n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function kf(t,e){const n=e.length,r=t.length;if(r>0){let i=!0;for(let s=0;s<n;s++)if(t[r-n+s]!==e[s]){i=!1;break}if(i)return!1}for(let i=0;i<n;i++)t[r+i]=e[i];return!0}function Tf(t,e){const n=e.length;for(let r=0;r<n;r++)t[r]=e[r]}function Af(t,e,n,r,i=[]){const s=r+e*n;for(let e=0;e<n;e++)i[e]=t[s+e];return i}function Lf(t,e){const{size:n=2,broken:r=!1,gridResolution:i=10,gridOffset:s=[0,0],startIndex:o=0,endIndex:a=t.length}=e||{},l=(a-o)/n;let u=[];const c=[u],h=Af(t,0,n,o);let d,f;const p=zf(h,i,s,[]),g=[];kf(u,h);for(let e=1;e<l;e++){for(d=Af(t,e,n,o,d),f=Cf(d,p);f;){Ef(h,d,f,p,g);const t=Cf(g,p);t&&(Ef(h,g,t,p,g),f=t),kf(u,g),Tf(h,g),Ff(p,i,f),r&&u.length>n&&(u=[],c.push(u),kf(u,h)),f=Cf(d,p)}kf(u,d),Tf(h,d)}return r?c:c[0]}function Of(t,e){for(let n=0;n<e.length;n++)t.push(e[n]);return t}function If(t,e=null,n){if(!t.length)return[];const{size:r=2,gridResolution:i=10,gridOffset:s=[0,0],edgeTypes:o=!1}=n||{},a=[],l=[{pos:t,types:o?new Array(t.length/r).fill(1):null,holes:e||[]}],u=[[],[]];let c=[];for(;l.length;){const{pos:t,types:e,holes:n}=l.shift();Nf(t,r,n[0]||t.length,u),c=zf(u[0],i,s,c);const h=Cf(u[1],c);if(h){let i=Rf(t,e,r,0,n[0]||t.length,c,h);const s={pos:i[0].pos,types:i[0].types,holes:[]},a={pos:i[1].pos,types:i[1].types,holes:[]};l.push(s,a);for(let l=0;l<n.length;l++)i=Rf(t,e,r,n[l],n[l+1]||t.length,c,h),i[0]&&(s.holes.push(s.pos.length),s.pos=Of(s.pos,i[0].pos),o&&(s.types=Of(s.types,i[0].types))),i[1]&&(a.holes.push(a.pos.length),a.pos=Of(a.pos,i[1].pos),o&&(a.types=Of(a.types,i[1].types)))}else{const r={positions:t};o&&(r.edgeTypes=e),n.length&&(r.holeIndices=n),a.push(r)}}return a}function Rf(t,e,n,r,i,s,o){const a=(i-r)/n,l=[],u=[],c=[],h=[],d=[];let f,p,g;const m=Af(t,a-1,n,r);let v=Math.sign(8&o?m[1]-s[3]:m[0]-s[2]),y=e&&e[a-1],b=0,_=0;for(let i=0;i<a;i++)f=Af(t,i,n,r,f),p=Math.sign(8&o?f[1]-s[3]:f[0]-s[2]),g=e&&e[r/n+i],p&&v&&v!==p&&(Ef(m,f,o,s,d),kf(l,d)&&c.push(y),kf(u,d)&&h.push(y)),p<=0?(kf(l,f)&&c.push(g),b-=p):c.length&&(c[c.length-1]=0),p>=0?(kf(u,f)&&h.push(g),_+=p):h.length&&(h[h.length-1]=0),Tf(m,f),v=p,y=g;return[b?{pos:l,types:e&&c}:null,_?{pos:u,types:e&&h}:null]}function zf(t,e,n,r){const i=Math.floor((t[0]-n[0])/e)*e+n[0],s=Math.floor((t[1]-n[1])/e)*e+n[1];return r[0]=i,r[1]=s,r[2]=i+e,r[3]=s+e,r}function Ff(t,e,n){8&n?(t[1]+=e,t[3]+=e):4&n?(t[1]-=e,t[3]-=e):2&n?(t[0]+=e,t[2]+=e):1&n&&(t[0]-=e,t[2]-=e)}function Nf(t,e,n,r){let i=1/0,s=-1/0,o=1/0,a=-1/0;for(let r=0;r<n;r+=e){const e=t[r],n=t[r+1];i=e<i?e:i,s=e>s?e:s,o=n<o?n:o,a=n>a?n:a}return r[0][0]=i,r[0][1]=o,r[1][0]=s,r[1][1]=a,r}function jf(t,e,n,r){let i=-1,s=-1;for(let o=n+1;o<r;o+=e){const e=Math.abs(t[o]);e>i&&(i=e,s=o-1)}return s}function Df(t,e,n,r,i=85.051129){const s=t[n],o=t[r-e];if(Math.abs(s-o)>180){const r=Af(t,0,e,n);r[0]+=360*Math.round((o-s)/360),kf(t,r),r[1]=Math.sign(r[1])*i,kf(t,r),r[0]=s,kf(t,r)}}function Bf(t,e,n,r){let i,s=t[0];for(let o=n;o<r;o+=e){i=t[o];const e=i-s;(e>180||e<-180)&&(i-=360*Math.round(e/360)),t[o]=s=i}}function Uf(t,e){let n;const r=t.length/e;for(let i=0;i<r&&(n=t[i*e],(n+180)%360==0);i++);const i=360*-Math.round(n/360);if(0!==i)for(let n=0;n<r;n++)t[n*e]+=i}class Vf extends Sf{constructor(t){super({...t,attributes:{positions:{size:3,padding:18,initialize:!0,type:t.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(t){return this.attributes[t]}getGeometryFromBuffer(t){return this.normalize?super.getGeometryFromBuffer(t):null}normalizeGeometry(t){return this.normalize?function(t,e,n,r){let i;if(Array.isArray(t[0])){const n=t.length*e;i=new Array(n);for(let n=0;n<t.length;n++)for(let r=0;r<e;r++)i[n*e+r]=t[n][r]||0}else i=t;return n?Lf(i,{size:e,gridResolution:n}):r?function(t,e){const{size:n=2,startIndex:r=0,endIndex:i=t.length,normalize:s=!0}=e||{},o=t.slice(r,i);Bf(o,n,0,i-r);const a=Lf(o,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(s)for(const t of a)Uf(t,n);return a}(i,{size:e}):i}(t,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):t}getGeometrySize(t){if(Wf(t)){let e=0;for(const n of t)e+=this.getGeometrySize(n);return e}const e=this.getPathLength(t);return e<2?0:this.isClosed(t)?e<3?0:e+2:e}updateGeometryAttributes(t,e){if(0!==e.geometrySize)if(t&&Wf(t))for(const n of t){const t=this.getGeometrySize(n);e.geometrySize=t,this.updateGeometryAttributes(n,e),e.vertexStart+=t}else this._updateSegmentTypes(t,e),this._updatePositions(t,e)}_updateSegmentTypes(t,e){const n=this.attributes.segmentTypes,r=!!t&&this.isClosed(t),{vertexStart:i,geometrySize:s}=e;n.fill(0,i,i+s),r?(n[i]=4,n[i+s-2]=4):(n[i]+=1,n[i+s-2]+=2),n[i+s-1]=4}_updatePositions(t,e){const{positions:n}=this.attributes;if(!n||!t)return;const{vertexStart:r,geometrySize:i}=e,s=new Array(3);for(let e=r,o=0;o<i;e++,o++)this.getPointOnPath(t,o,s),n[3*e]=s[0],n[3*e+1]=s[1],n[3*e+2]=s[2]}getPathLength(t){return t.length/this.positionSize}getPointOnPath(t,e,n=[]){const{positionSize:r}=this;e*r>=t.length&&(e+=1-t.length/r);const i=e*r;return n[0]=t[i],n[1]=t[i+1],n[2]=3===r&&t[i+2]||0,n}isClosed(t){if(!this.normalize)return Boolean(this.opts.loop);const{positionSize:e}=this,n=t.length-e;return t[0]===t[n]&&t[1]===t[n+1]&&(2===e||t[2]===t[n+2])}}function Wf(t){return Array.isArray(t[0])}const Gf=[0,0,0,255],Hf={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:Gf},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},qf={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class Xf extends Id{constructor(...t){super(...t),Rt(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute float instanceTypes;\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec3 instanceLeftPositions;\nattribute vec3 instanceRightPositions;\nattribute vec3 instanceLeftPositions64Low;\nattribute vec3 instanceStartPositions64Low;\nattribute vec3 instanceEndPositions64Low;\nattribute vec3 instanceRightPositions64Low;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float capType;\nuniform float miterLimit;\nuniform bool billboard;\nuniform int widthUnits;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\n\n// calculate line join positions\nvec3 lineJoin(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  vec2 width\n) {\n  bool isEnd = positions.x > 0.0;\n  // side of the segment - -1: left, 0: center, 1: right\n  float sideOfPath = positions.y;\n  float isJoint = float(sideOfPath == 0.0);\n\n  vec3 deltaA3 = (currPoint - prevPoint);\n  vec3 deltaB3 = (nextPoint - currPoint);\n\n  mat3 rotationMatrix;\n  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);\n  if (needsRotation) {\n    deltaA3 = deltaA3 * rotationMatrix;\n    deltaB3 = deltaB3 * rotationMatrix;\n  }\n  vec2 deltaA = deltaA3.xy / width;\n  vec2 deltaB = deltaB3.xy / width;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n\n  // tangent of the corner\n  vec2 tangent = dirA + dirB;\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  // direction of the corner\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  // direction of the segment\n  vec2 dir = isEnd ? dirA : dirB;\n  // direction of the extrusion\n  vec2 perp = isEnd ? perpA : perpB;\n  // length of the segment\n  float L = isEnd ? lenA : lenB;\n\n  // A = angle of the corner\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n\n  // -1: right, 1: left\n  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\n\n  // relative position to the corner:\n  // -1: inside (smaller side of the angle)\n  // 0: center\n  // 1: outside (bigger side of the angle)\n  float cornerPosition = sideOfPath * turnDirection;\n\n  float miterSize = 1.0 / max(sinHalfA, EPSILON);\n  // trim if inside corner extends further than the line segment\n  miterSize = mix(\n    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\n    miterSize,\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n    * (sideOfPath + isJoint * turnDirection);\n\n  // special treatment for start cap and end cap\n  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\n  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\n  bool isCap = isStartCap || isEndCap;\n\n  // extend out a triangle to envelope the round cap\n  if (isCap) {\n    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);\n    vJointType = capType;\n  } else {\n    vJointType = jointType;\n  }\n\n  // Generate variables for fragment shader\n  vPathLength = L;\n  vCornerOffset = offsetVec;\n  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);\n  vMiterLength = isCap ? isJoint : vMiterLength;\n\n  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\n  vPathPosition = vec2(\n    dot(offsetFromStartOfPath, perp),\n    dot(offsetFromStartOfPath, dir)\n  );\n  geometry.uv = vPathPosition;\n\n  float isValid = step(instanceTypes, 3.5);\n  vec3 offset = vec3(offsetVec * width * isValid, 0.0);\n\n  if (needsRotation) {\n    offset = rotationMatrix * offset;\n  }\n  return currPoint + offset;\n}\n\n// In clipspace extrusion, if a line extends behind the camera, clip it to avoid visual artifacts\nvoid clipLine(inout vec4 position, vec4 refPosition) {\n  if (position.w < EPSILON) {\n    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\n    position = refPosition + (position - refPosition) * r;\n  }\n}\n\nvoid main() {\n  geometry.pickingColor = instancePickingColors;\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\n  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\n\n  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\n  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\n\n  geometry.worldPosition = currPosition;\n  vec2 widthPixels = vec2(clamp(\n    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),\n    widthMinPixels, widthMaxPixels) / 2.0);\n  vec3 width;\n\n  if (billboard) {\n    // Extrude in clipspace\n    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\n    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\n    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\n\n    clipLine(prevPositionScreen, currPositionScreen);\n    clipLine(nextPositionScreen, currPositionScreen);\n    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\n\n    width = vec3(widthPixels, 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec3 pos = lineJoin(\n      prevPositionScreen.xyz / prevPositionScreen.w,\n      currPositionScreen.xyz / currPositionScreen.w,\n      nextPositionScreen.xyz / nextPositionScreen.w,\n      project_pixel_size_to_clipspace(width.xy)\n    );\n\n    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);\n  } else {\n    // Extrude in commonspace\n    prevPosition = project_position(prevPosition, prevPosition64Low);\n    currPosition = project_position(currPosition, currPosition64Low);\n    nextPosition = project_position(nextPosition, nextPosition64Low);\n\n    width = vec3(project_pixel_size(widthPixels), 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec4 pos = vec4(\n      lineJoin(prevPosition, currPosition, nextPosition, width.xy),\n      1.0);\n    geometry.position = pos;\n    gl_Position = project_common_position_to_clipspace(pos);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float miterLimit;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\n/*\n * vPathPosition represents the relative coordinates of the current fragment on the path segment.\n * vPathPosition.x - position along the width of the path, between [-1, 1]. 0 is the center line.\n * vPathPosition.y - position along the length of the path, between [0, L / width].\n */\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nvoid main(void) {\n  geometry.uv = vPathPosition;\n\n  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\n    // if joint is rounded, test distance from the corner\n    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {\n      discard;\n    }\n    // trim miter\n    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {\n      discard;\n    }\n  }\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[Fd,Dd]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:qf,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:qf,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:qf,defaultValue:Gf},instancePickingColors:{size:3,type:5121,accessor:(t,{index:e,target:n})=>this.encodePickingColor(t&&t.__source?t.__source.index:e,n)}}),this.setState({pathTesselator:new Vf({fp64:this.use64bitPositions()})})}updateState(t){super.updateState(t);const{props:e,changeFlags:n}=t,r=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){const{pathTesselator:t}=this.state,i=e.data.attributes||{};t.updateGeometry({data:e.data,geometryBuffer:i.getPath,buffers:i,normalize:!e._pathType,loop:"loop"===e._pathType,getGeometry:e.getPath,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:t.instanceCount,startIndices:t.vertexStarts}),n.dataChanged||r.invalidateAll()}if(n.extensionsChanged){var i;const{gl:t}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(t),r.invalidateAll()}}getPickingInfo(t){const e=super.getPickingInfo(t),{index:n}=e,{data:r}=this.props;return r[0]&&r[0].__source&&(e.object=r.find((t=>t.__source.index===n))),e}disablePickingIndex(t){const{data:e}=this.props;if(e[0]&&e[0].__source)for(let n=0;n<e.length;n++)e[n].__source.index===t&&this._disablePickingIndex(n);else this._disablePickingIndex(t)}draw({uniforms:t}){const{jointRounded:e,capRounded:n,billboard:r,miterLimit:i,widthUnits:s,widthScale:o,widthMinPixels:a,widthMaxPixels:l}=this.props;this.state.model.setUniforms(t).setUniforms({jointType:Number(e),capType:Number(n),billboard:r,widthUnits:ii[s],widthScale:o,miterLimit:i,widthMinPixels:a,widthMaxPixels:l}).draw()}_getModel(t){return new qh(t,{...this.getShaders(),id:this.props.id,geometry:new Ud({drawMode:4,attributes:{indices:new Uint16Array([0,1,2,1,4,2,1,3,4,3,5,4]),positions:{value:new Float32Array([0,0,0,-1,0,1,1,-1,1,1,1,0]),size:2}}}),isInstanced:!0})}calculatePositions(t){const{pathTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("positions")}calculateSegmentTypes(t){const{pathTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("segmentTypes")}}Rt(Xf,"defaultProps",Hf),Rt(Xf,"layerName","PathLayer");const Zf="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",Yf={lightSources:{}};function $f(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.map((t=>t*e/255))}function Qf(t){let{ambientLight:e,pointLights:n=[],directionalLights:r=[]}=t;const i={};return i["lighting_uAmbientLight.color"]=e?$f(e):[0,0,0],n.forEach(((t,e)=>{i["lighting_uPointLight[".concat(e,"].color")]=$f(t),i["lighting_uPointLight[".concat(e,"].position")]=t.position,i["lighting_uPointLight[".concat(e,"].attenuation")]=t.attenuation||[1,0,0]})),i.lighting_uPointLightCount=n.length,r.forEach(((t,e)=>{i["lighting_uDirectionalLight[".concat(e,"].color")]=$f(t),i["lighting_uDirectionalLight[".concat(e,"].direction")]=t.direction})),i.lighting_uDirectionalLightCount=r.length,i}const Kf={};function Jf(t){const{ambient:e=.35,diffuse:n=.6,shininess:r=32,specularColor:i=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:r,lighting_uSpecularColor:i.map((t=>t/255))}}const tp={name:"gouraud-lighting",dependencies:[{name:"lights",vs:Zf,fs:Zf,getUniforms:function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yf;if("lightSources"in e){const{ambientLight:t,pointLights:n,directionalLights:r}=e.lightSources||{};return t||n&&n.length>0||r&&r.length>0?Object.assign({},Qf({ambientLight:t,pointLights:n,directionalLights:r}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in e){const n={pointLights:[],directionalLights:[]};for(const t of e.lights||[])switch(t.type){case"ambient":n.ambientLight=t;break;case"directional":n.directionalLights.push(t);break;case"point":n.pointLights.push(t)}return t({lightSources:n})}return{}},defines:{MAX_LIGHTS:3}}],vs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_VERTEX:1},getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kf;if(!("material"in t))return{};const{material:e}=t;return e?Jf(e):{lighting_uEnabled:!1}}};var ep=o(187),np=o.n(ep);const rp={isClosed:!0};function ip(t){return"positions"in t?t.positions:t}function sp(t){return"holeIndices"in t?t.holeIndices:null}function op(t,e,n,r,i){let s=e;const o=n.length;for(let e=0;e<o;e++)for(let i=0;i<r;i++)t[s++]=n[e][i]||0;if(!function(t){const e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}(n))for(let e=0;e<r;e++)t[s++]=n[0][e]||0;return rp.start=e,rp.end=s,rp.size=r,Pf(t,i,rp),s}function ap(t,e,n,r,i=0,s,o){const a=(s=s||n.length)-i;if(a<=0)return e;let l=e;for(let e=0;e<a;e++)t[l++]=n[i+e];if(!function(t,e,n,r){for(let i=0;i<e;i++)if(t[n+i]!==t[r-e+i])return!1;return!0}(n,r,i,s))for(let e=0;e<r;e++)t[l++]=n[i+e];return rp.start=e,rp.end=l,rp.size=r,Pf(t,o,rp),l}function lp(t,e){!function(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}(t);const n=[],r=[];if("positions"in t){const{positions:i,holeIndices:s}=t;if(s){let t=0;for(let o=0;o<=s.length;o++)t=ap(n,t,i,e,s[o-1],s[o],0===o?1:-1),r.push(t);return r.pop(),{positions:n,holeIndices:r}}t=i}if(!function(t){return Array.isArray(t[0])}(t))return ap(n,0,t,e,0,n.length,1),n;if(!function(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}(t)){let i=0;for(const[s,o]of t.entries())i=op(n,i,o,e,0===s?1:-1),r.push(i);return r.pop(),{positions:n,holeIndices:r}}return op(n,0,t,e,1),n}class up extends Sf{constructor(t){const{fp64:e,IndexType:n=Uint32Array}=t;super({...t,attributes:{positions:{size:3,type:e?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:n,size:1}}})}get(t){const{attributes:e}=this;return"indices"===t?e.indices&&e.indices.subarray(0,this.vertexCount):e[t]}updateGeometry(t){super.updateGeometry(t);const e=this.buffers.indices;if(e)this.vertexCount=(e.value||e).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(t){if(this.normalize){const e=lp(t,this.positionSize);return this.opts.resolution?If(ip(e),sp(e),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?function(t,e=null,n){const{size:r=2,normalize:i=!0,edgeTypes:s=!1}=n||{};e=e||[];const o=[],a=[];let l=0,u=0;for(let i=0;i<=e.length;i++){const s=e[i]||t.length,c=u,h=jf(t,r,l,s);for(let e=h;e<s;e++)o[u++]=t[e];for(let e=l;e<h;e++)o[u++]=t[e];Bf(o,r,c,u),Df(o,r,c,u,null==n?void 0:n.maxLatitude),l=s,a[i]=u}a.pop();const c=If(o,a,{size:r,gridResolution:360,gridOffset:[-180,-180],edgeTypes:s});if(i)for(const t of c)Uf(t.positions,r);return c}(ip(e),sp(e),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):e}return t}getGeometrySize(t){if(cp(t)){let e=0;for(const n of t)e+=this.getGeometrySize(n);return e}return ip(t).length/this.positionSize}getGeometryFromBuffer(t){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(t):null}updateGeometryAttributes(t,e){if(t&&cp(t))for(const n of t){const t=this.getGeometrySize(n);e.geometrySize=t,this.updateGeometryAttributes(n,e),e.vertexStart+=t,e.indexStart=this.indexStarts[e.geometryIndex+1]}else this._updateIndices(t,e),this._updatePositions(t,e),this._updateVertexValid(t,e)}_updateIndices(t,{geometryIndex:e,vertexStart:n,indexStart:r}){const{attributes:i,indexStarts:s,typedArrayManager:o}=this;let a=i.indices;if(!a||!t)return;let l=r;const u=function(t,e,n){let r=sp(t);r&&(r=r.map((t=>t/e)));let i=ip(t);if(n){const t=i.length;i=i.slice();const r=[];for(let s=0;s<t;s+=e){r[0]=i[s],r[1]=i[s+1];const t=n(r);i[s]=t[0],i[s+1]=t[1]}}return np()(i,r,e)}(t,this.positionSize,this.opts.preproject);a=o.allocate(a,r+u.length,{copy:!0});for(let t=0;t<u.length;t++)a[l++]=u[t]+n;s[e+1]=r+u.length,i.indices=a}_updatePositions(t,{vertexStart:e,geometrySize:n}){const{attributes:{positions:r},positionSize:i}=this;if(!r||!t)return;const s=ip(t);for(let t=e,o=0;o<n;t++,o++){const e=s[o*i],n=s[o*i+1],a=i>2?s[o*i+2]:0;r[3*t]=e,r[3*t+1]=n,r[3*t+2]=a}}_updateVertexValid(t,{vertexStart:e,geometrySize:n}){const{positionSize:r}=this,i=this.attributes.vertexValid,s=t&&sp(t);if(t&&t.edgeTypes?i.set(t.edgeTypes,e):i.fill(1,e,e+n),s)for(let t=0;t<s.length;t++)i[e+s[t]/r-1]=0;i[e+n-1]=0}}function cp(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}const hp="\nattribute vec2 vertexPositions;\nattribute float vertexValid;\n\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nstruct PolygonProps {\n  vec4 fillColors;\n  vec4 lineColors;\n  vec3 positions;\n  vec3 nextPositions;\n  vec3 pickingColors;\n  vec3 positions64Low;\n  vec3 nextPositions64Low;\n  float elevations;\n};\n\nvec3 project_offset_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    // normals generated by the polygon tesselator are in lnglat offsets instead of meters\n    return normalize(vector * project_uCommonUnitsPerWorldUnit);\n  }\n  return project_normal(vector);\n}\n\nvoid calculatePosition(PolygonProps props) {\n#ifdef IS_SIDE_VERTEX\n  if(vertexValid < 0.5){\n    gl_Position = vec4(0.);\n    return;\n  }\n#endif\n\n  vec3 pos;\n  vec3 pos64Low;\n  vec3 normal;\n  vec4 colors = isWireframe ? props.lineColors : props.fillColors;\n\n  geometry.worldPosition = props.positions;\n  geometry.worldPositionAlt = props.nextPositions;\n  geometry.pickingColor = props.pickingColors;\n\n#ifdef IS_SIDE_VERTEX\n  pos = mix(props.positions, props.nextPositions, vertexPositions.x);\n  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);\n#else\n  pos = props.positions;\n  pos64Low = props.positions64Low;\n#endif\n\n  if (extruded) {\n    pos.z += props.elevations * vertexPositions.y * elevationScale;\n  }\n  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\n\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  if (extruded) {\n  #ifdef IS_SIDE_VERTEX\n    normal = vec3(\n      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),\n      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),\n      0.0);\n    normal = project_offset_normal(normal);\n  #else\n    normal = project_normal(vec3(0.0, 0.0, 1.0));\n  #endif\n    geometry.normal = normal;\n    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);\n    vColor = vec4(lightColor, colors.a * opacity);\n  } else {\n    vColor = vec4(colors.rgb, colors.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",dp="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 positions64Low;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\n".concat(hp,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = positions;\n  props.positions64Low = positions64Low;\n  props.elevations = elevations;\n  props.fillColors = fillColors;\n  props.lineColors = lineColors;\n  props.pickingColors = pickingColors;\n\n  calculatePosition(props);\n}\n"),fp="#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\n\n\nattribute vec3 instancePositions;\nattribute vec3 nextPositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 nextPositions64Low;\nattribute float instanceElevations;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\n".concat(hp,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  #if RING_WINDING_ORDER_CW == 1\n    props.positions = instancePositions;\n    props.positions64Low = instancePositions64Low;\n    props.nextPositions = nextPositions;\n    props.nextPositions64Low = nextPositions64Low;\n  #else\n    props.positions = nextPositions;\n    props.positions64Low = nextPositions64Low;\n    props.nextPositions = instancePositions;\n    props.nextPositions64Low = instancePositions64Low;\n  #endif\n  props.elevations = instanceElevations;\n  props.fillColors = instanceFillColors;\n  props.lineColors = instanceLineColors;\n  props.pickingColors = instancePickingColors;\n\n  calculatePosition(props);\n}\n"),pp=[0,0,0,255],gp={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:pp},getLineColor:{type:"accessor",value:pp},material:!0},mp={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class vp extends Id{constructor(...t){super(...t),Rt(this,"state",void 0)}getShaders(t){return super.getShaders({vs:"top"===t?dp:fp,fs:"#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",defines:{RING_WINDING_ORDER_CW:this.props._normalize||"CCW"!==this.props._windingOrder?1:0},modules:[Fd,tp,Dd]})}get wrapLongitude(){return!1}initializeState(){const{gl:t,viewport:e}=this.context;let{coordinateSystem:n}=this.props;e.isGeospatial&&n===ni.DEFAULT&&(n=ni.LNGLAT),this.setState({numInstances:0,polygonTesselator:new up({preproject:n===ni.LNGLAT&&e.projectFlat.bind(e),fp64:this.use64bitPositions(),IndexType:!t||Ko(t,$o)?Uint32Array:Uint16Array})});const r=this.getAttributeManager(),i=!0;r.remove(["instancePickingColors"]),r.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:i},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:mp,accessor:"getPolygon",update:this.calculatePositions,noAlloc:i,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:i},elevations:{size:1,transition:mp,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:mp,accessor:"getFillColor",defaultValue:pp,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:mp,accessor:"getLineColor",defaultValue:pp,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(t,{index:e,target:n})=>this.encodePickingColor(t&&t.__source?t.__source.index:e,n),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(t){const e=super.getPickingInfo(t),{index:n}=e,{data:r}=this.props;return r[0]&&r[0].__source&&(e.object=r.find((t=>t.__source.index===n))),e}disablePickingIndex(t){const{data:e}=this.props;if(e[0]&&e[0].__source)for(let n=0;n<e.length;n++)e[n].__source.index===t&&this._disablePickingIndex(n);else this._disablePickingIndex(t)}draw({uniforms:t}){const{extruded:e,filled:n,wireframe:r,elevationScale:i}=this.props,{topModel:s,sideModel:o,polygonTesselator:a}=this.state,l={...t,extruded:Boolean(e),elevationScale:i};o&&(o.setInstanceCount(a.instanceCount-1),o.setUniforms(l),r&&(o.setDrawMode(3),o.setUniforms({isWireframe:!0}).draw()),n&&(o.setDrawMode(6),o.setUniforms({isWireframe:!1}).draw())),s&&(s.setVertexCount(a.vertexCount),s.setUniforms(l).draw())}updateState(t){super.updateState(t),this.updateGeometry(t);const{props:e,oldProps:n,changeFlags:r}=t,i=this.getAttributeManager();var s;(r.extensionsChanged||e.filled!==n.filled||e.extruded!==n.extruded)&&(null===(s=this.state.models)||void 0===s||s.forEach((t=>t.delete())),this.setState(this._getModels(this.context.gl)),i.invalidateAll())}updateGeometry({props:t,oldProps:e,changeFlags:n}){if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){const{polygonTesselator:e}=this.state,r=t.data.attributes||{};e.updateGeometry({data:t.data,normalize:t._normalize,geometryBuffer:r.getPolygon,buffers:r,getGeometry:t.getPolygon,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged}),this.setState({numInstances:e.instanceCount,startIndices:e.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(t){const{id:e,filled:n,extruded:r}=this.props;let i,s;if(n){const n=this.getShaders("top");n.defines.NON_INSTANCED_MODEL=1,i=new qh(t,{...n,id:"".concat(e,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return r&&(s=new qh(t,{...this.getShaders("side"),id:"".concat(e,"-side"),geometry:new Ud({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),s.userData.excludeAttributes={indices:!0}),{models:[s,i].filter(Boolean),topModel:i,sideModel:s}}calculateIndices(t){const{polygonTesselator:e}=this.state;t.startIndices=e.indexStarts,t.value=e.get("indices")}calculatePositions(t){const{polygonTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("positions")}calculateVertexValid(t){t.value=this.state.polygonTesselator.get("vertexValid")}}Rt(vp,"defaultProps",gp),Rt(vp,"layerName","SolidPolygonLayer");const yp={circle:{type:Jd,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:$d,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:Mf,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},bp={type:Xf,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},_p={type:vp,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function wp({type:t,props:e}){const n={};for(const r in e)n[r]=t.defaultProps[e[r]];return n}function xp(t,e){const{transitions:n,updateTriggers:r}=t.props,i={updateTriggers:{},transitions:n&&{getPosition:n.geometry}};for(const s in e){const o=e[s];let a=t.props[s];s.startsWith("get")&&(a=t.getSubLayerAccessor(a),i.updateTriggers[o]=r[s],n&&(i.transitions[o]=n[s])),i[o]=a}return i}function Mp(t,e,n={}){const r={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:s=t.length}=n;for(let n=i;n<s;n++){const i=t[n];de.assert(i&&i.geometry,"GeoJSON does not have geometry");const{geometry:s}=i;if("GeometryCollection"===s.type){de.assert(Array.isArray(s.geometries),"GeoJSON does not have geometries array");const{geometries:t}=s;for(let s=0;s<t.length;s++)Sp(t[s],r,e,i,n)}else Sp(s,r,e,i,n)}return r}function Sp(t,e,n,r,i){const{type:s,coordinates:o}=t,{pointFeatures:a,lineFeatures:l,polygonFeatures:u,polygonOutlineFeatures:c}=e;if(function(t,e){let n=Pp[t];for(de.assert(n,"Unknown GeoJSON type ".concat(t));e&&--n>0;)e=e[0];return e&&Number.isFinite(e[0])}(s,o))switch(s){case"Point":a.push(n({geometry:t},r,i));break;case"MultiPoint":o.forEach((t=>{a.push(n({geometry:{type:"Point",coordinates:t}},r,i))}));break;case"LineString":l.push(n({geometry:t},r,i));break;case"MultiLineString":o.forEach((t=>{l.push(n({geometry:{type:"LineString",coordinates:t}},r,i))}));break;case"Polygon":u.push(n({geometry:t},r,i)),o.forEach((t=>{c.push(n({geometry:{type:"LineString",coordinates:t}},r,i))}));break;case"MultiPolygon":o.forEach((t=>{u.push(n({geometry:{type:"Polygon",coordinates:t}},r,i)),t.forEach((t=>{c.push(n({geometry:{type:"LineString",coordinates:t}},r,i))}))}))}else de.warn("".concat(s," coordinates are malformed"))()}const Pp={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function Ep(t){return t.geometry.coordinates}const Cp=["points","linestrings","polygons"],kp={...wp(yp.circle),...wp(yp.icon),...wp(yp.text),...wp(bp),...wp(_p),stroked:!0,filled:!0,extruded:!1,wireframe:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:t=>t.properties.icon},getText:{type:"accessor",value:t=>t.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class Tp extends Rd{initializeState(){this.state={layerProps:{},features:{}}}updateState({props:t,changeFlags:e}){if(!e.dataChanged)return;const{data:n}=this.props,r=n&&"points"in n&&"polygons"in n&&"lines"in n;this.setState({binary:r}),r?this._updateStateBinary({props:t,changeFlags:e}):this._updateStateJSON({props:t,changeFlags:e})}_updateStateBinary({props:t,changeFlags:e}){const n=function(t,e){const n={points:{},lines:{},polygons:{},polygonsOutline:{}},{points:r,lines:i,polygons:s}=t,o=function(t,e){const n={points:null,lines:null,polygons:null};for(const r in n){const i=t[r].globalFeatureIds.value;n[r]=new Uint8ClampedArray(3*i.length);const s=[];for(let t=0;t<i.length;t++)e(i[t],s),n[r][3*t+0]=s[0],n[r][3*t+1]=s[1],n[r][3*t+2]=s[2]}return n}(t,e);return n.points.data={length:r.positions.value.length/r.positions.size,attributes:{...r.attributes,getPosition:r.positions,instancePickingColors:{size:3,value:o.points}},properties:r.properties,numericProps:r.numericProps,featureIds:r.featureIds},n.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{...i.attributes,getPath:i.positions,instancePickingColors:{size:3,value:o.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},n.lines._pathType="open",n.polygons.data={length:s.polygonIndices.value.length-1,startIndices:s.polygonIndices.value,attributes:{...s.attributes,getPolygon:s.positions,pickingColors:{size:3,value:o.polygons}},properties:s.properties,numericProps:s.numericProps,featureIds:s.featureIds},n.polygons._normalize=!1,s.triangles&&(n.polygons.data.attributes.indices=s.triangles.value),n.polygonsOutline.data={length:s.primitivePolygonIndices.value.length-1,startIndices:s.primitivePolygonIndices.value,attributes:{...s.attributes,getPath:s.positions,instancePickingColors:{size:3,value:o.polygons}},properties:s.properties,numericProps:s.numericProps,featureIds:s.featureIds},n.polygonsOutline._pathType="open",n}(t.data,this.encodePickingColor);this.setState({layerProps:n})}_updateStateJSON({props:t,changeFlags:e}){const n=function(t){if(Array.isArray(t))return t;switch(de.assert(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return de.assert(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}(t.data),r=this.getSubLayerRow.bind(this);let i={};const s={};if(Array.isArray(e.dataChanged)){const t=this.state.features;for(const e in t)i[e]=t[e].slice(),s[e]=[];for(const o of e.dataChanged){const e=Mp(n,r,o);for(const n in t)s[n].push(zd({data:i[n],getIndex:t=>t.__source.index,dataRange:o,replace:e[n]}))}}else i=Mp(n,r);const o=function(t,e){const n={points:{},lines:{},polygons:{},polygonsOutline:{}},{pointFeatures:r,lineFeatures:i,polygonFeatures:s,polygonOutlineFeatures:o}=t;return n.points.data=r,n.points._dataDiff=e.pointFeatures&&(()=>e.pointFeatures),n.points.getPosition=Ep,n.lines.data=i,n.lines._dataDiff=e.lineFeatures&&(()=>e.lineFeatures),n.lines.getPath=Ep,n.polygons.data=s,n.polygons._dataDiff=e.polygonFeatures&&(()=>e.polygonFeatures),n.polygons.getPolygon=Ep,n.polygonsOutline.data=o,n.polygonsOutline._dataDiff=e.polygonOutlineFeatures&&(()=>e.polygonOutlineFeatures),n.polygonsOutline.getPath=Ep,n}(i,s);this.setState({features:i,featuresDiff:s,layerProps:o})}getPickingInfo(t){const e=super.getPickingInfo(t),{index:n,sourceLayer:r}=e;return e.featureType=Cp.find((t=>r.id.startsWith("".concat(this.id,"-").concat(t,"-")))),n>=0&&r.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(e.index=this.props.data.points.globalFeatureIds.value[n]),e}_updateAutoHighlight(t){const e="".concat(this.id,"-points-"),n="points"===t.featureType;for(const r of this.getSubLayers())r.id.startsWith(e)===n&&r.updateAutoHighlight(t)}_renderPolygonLayer(){const{extruded:t,wireframe:e}=this.props,{layerProps:n}=this.state,r="polygons-fill",i=this.shouldRenderSubLayer(r,n.polygons.data)&&this.getSubLayerClass(r,_p.type);if(i){const s=xp(this,_p.props),o=t&&e;return o||delete s.getLineColor,s.updateTriggers.lineColors=o,new i(s,this.getSubLayerProps({id:r,updateTriggers:s.updateTriggers}),n.polygons)}return null}_renderLineLayers(){const{extruded:t,stroked:e}=this.props,{layerProps:n}=this.state,r="polygons-stroke",i="linestrings",s=!t&&e&&this.shouldRenderSubLayer(r,n.polygonsOutline.data)&&this.getSubLayerClass(r,bp.type),o=this.shouldRenderSubLayer(i,n.lines.data)&&this.getSubLayerClass(i,bp.type);if(s||o){const t=xp(this,bp.props);return[s&&new s(t,this.getSubLayerProps({id:r,updateTriggers:t.updateTriggers}),n.polygonsOutline),o&&new o(t,this.getSubLayerProps({id:i,updateTriggers:t.updateTriggers}),n.lines)]}return null}_renderPointLayers(){const{pointType:t}=this.props,{layerProps:e,binary:n}=this.state;let{highlightedObjectIndex:r}=this.props;!n&&Number.isFinite(r)&&(r=e.points.data.findIndex((t=>t.__source.index===r)));const i=new Set(t.split("+")),s=[];for(const t of i){const i="points-".concat(t),o=yp[t],a=o&&this.shouldRenderSubLayer(i,e.points.data)&&this.getSubLayerClass(i,o.type);if(a){const l=xp(this,o.props);let u=e.points;if("text"===t&&n){const{instancePickingColors:t,...e}=u.data.attributes;u={...u,data:{...u.data,attributes:e}}}s.push(new a(l,this.getSubLayerProps({id:i,updateTriggers:l.updateTriggers,highlightedObjectIndex:r}),u))}}return s}renderLayers(){const{extruded:t}=this.props,e=this._renderPolygonLayer();return[!t&&e,this._renderLineLayers(),this._renderPointLayers(),t&&e]}getSubLayerAccessor(t){const{binary:e}=this.state;return e&&"function"==typeof t?(e,n)=>{const{data:r,index:i}=n,s=function(t,e){if(!t)return null;const n="startIndices"in t?t.startIndices[e]:e,r=t.featureIds.value[n];return-1!==n?function(t,e,n){const r={properties:{...t.properties[e]}};for(const e in t.numericProps)r.properties[e]=t.numericProps[e].value[n];return r}(t,r,n):null}(r,i);return t(s,n)}:super.getSubLayerAccessor(t)}}Rt(Tp,"layerName","GeoJsonLayer"),Rt(Tp,"defaultProps",kp);const Ap=[0,0,0,255],Lp={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,_windingOrder:"CW",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:t=>t.polygon},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:Ap},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};class Op extends Rd{initializeState(){this.state={paths:[]},this.props.getLineDashArray&&de.removed("getLineDashArray","PathStyleExtension")()}updateState({changeFlags:t}){const e=t.dataChanged||t.updateTriggersChanged&&(t.updateTriggersChanged.all||t.updateTriggersChanged.getPolygon);if(e&&Array.isArray(t.dataChanged)){const e=this.state.paths.slice(),n=t.dataChanged.map((t=>zd({data:e,getIndex:t=>t.__source.index,dataRange:t,replace:this._getPaths(t)})));this.setState({paths:e,pathsDiff:n})}else e&&this.setState({paths:this._getPaths(),pathsDiff:null})}_getPaths(t={}){const{data:e,getPolygon:n,positionFormat:r,_normalize:i}=this.props,s=[],o="XY"===r?2:3,{startRow:a,endRow:l}=t,{iterable:u,objectInfo:c}=eh(e,a,l);for(const t of u){c.index++;let e=n(t,c);i&&(e=lp(e,o));const{holeIndices:r}=e,a=e.positions||e;if(r)for(let e=0;e<=r.length;e++){const n=a.slice(r[e-1]||0,r[e]||a.length);s.push(this.getSubLayerRow({path:n},t,c.index))}else s.push(this.getSubLayerRow({path:a},t,c.index))}return s}renderLayers(){const{data:t,_dataDiff:e,stroked:n,filled:r,extruded:i,wireframe:s,_normalize:o,_windingOrder:a,elevationScale:l,transitions:u,positionFormat:c}=this.props,{lineWidthUnits:h,lineWidthScale:d,lineWidthMinPixels:f,lineWidthMaxPixels:p,lineJointRounded:g,lineMiterLimit:m,lineDashJustified:v}=this.props,{getFillColor:y,getLineColor:b,getLineWidth:_,getLineDashArray:w,getElevation:x,getPolygon:M,updateTriggers:S,material:P}=this.props,{paths:E,pathsDiff:C}=this.state,k=this.getSubLayerClass("fill",vp),T=this.getSubLayerClass("stroke",Xf),A=this.shouldRenderSubLayer("fill",E)&&new k({_dataDiff:e,extruded:i,elevationScale:l,filled:r,wireframe:s,_normalize:o,_windingOrder:a,getElevation:x,getFillColor:y,getLineColor:i&&s?b:Ap,material:P,transitions:u},this.getSubLayerProps({id:"fill",updateTriggers:S&&{getPolygon:S.getPolygon,getElevation:S.getElevation,getFillColor:S.getFillColor,lineColors:i&&s,getLineColor:S.getLineColor}}),{data:t,positionFormat:c,getPolygon:M}),L=!i&&n&&this.shouldRenderSubLayer("stroke",E)&&new T({_dataDiff:C&&(()=>C),widthUnits:h,widthScale:d,widthMinPixels:f,widthMaxPixels:p,jointRounded:g,miterLimit:m,dashJustified:v,_pathType:"loop",transitions:u&&{getWidth:u.getLineWidth,getColor:u.getLineColor,getPath:u.getPolygon},getColor:this.getSubLayerAccessor(b),getWidth:this.getSubLayerAccessor(_),getDashArray:this.getSubLayerAccessor(w)},this.getSubLayerProps({id:"stroke",updateTriggers:S&&{getWidth:S.getLineWidth,getColor:S.getLineColor,getDashArray:S.getLineDashArray}}),{data:E,positionFormat:c,getPath:t=>t.path});return[!i&&A,L,i&&A]}}Rt(Op,"layerName","PolygonLayer"),Rt(Op,"defaultProps",Lp);const Ip=new Uint16Array([0,2,1,0,3,2]),Rp=new Float32Array([0,1,0,0,1,0,1,1]);function zp(t,e,n){return qn(qn(t[0],t[1],n),qn(t[3],t[2],n),e)}const Fp="\n#define SHADER_NAME bitmap-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D bitmapTexture;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexPos;\n\nuniform float desaturate;\nuniform vec4 transparentColor;\nuniform vec3 tintColor;\nuniform float opacity;\n\nuniform float coordinateConversion;\nuniform vec4 bounds;\n\n/* projection utils */\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / PI / 2.0;\n\n// from degrees to Web Mercator\nvec2 lnglat_to_mercator(vec2 lnglat) {\n  float x = lnglat.x;\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\n// from Web Mercator to degrees\nvec2 mercator_to_lnglat(vec2 xy) {\n  xy /= WORLD_SCALE;\n  return degrees(vec2(\n    xy.x - PI,\n    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5\n  ));\n}\n/* End projection utils */\n\n// apply desaturation\nvec3 color_desaturate(vec3 color) {\n  float luminance = (color.r + color.g + color.b) * 0.333333333;\n  return mix(color, vec3(luminance), desaturate);\n}\n\n// apply tint\nvec3 color_tint(vec3 color) {\n  return color * tintColor;\n}\n\n// blend with background color\nvec4 apply_opacity(vec3 color, float alpha) {\n  return mix(transparentColor, vec4(color, 1.0), alpha);\n}\n\nvec2 getUV(vec2 pos) {\n  return vec2(\n    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),\n    (pos.y - bounds[3]) / (bounds[1] - bounds[3])\n  );\n}\n\n".concat("\nvec3 packUVsIntoRGB(vec2 uv) {\n  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction\n  vec2 uv8bit = floor(uv * 256.);\n\n  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits\n  // Scale and clamp to 0-1 range\n  vec2 uvFraction = fract(uv * 256.);\n  vec2 uvFraction4bit = floor(uvFraction * 16.);\n\n  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates\n  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;\n\n  return vec3(uv8bit, fractions) / 255.;\n}\n","\n\nvoid main(void) {\n  vec2 uv = vTexCoord;\n  if (coordinateConversion < -0.5) {\n    vec2 lnglat = mercator_to_lnglat(vTexPos);\n    uv = getUV(lnglat);\n  } else if (coordinateConversion > 0.5) {\n    vec2 commonPos = lnglat_to_mercator(vTexPos);\n    uv = getUV(commonPos);\n  }\n  vec4 bitmapColor = texture2D(bitmapTexture, uv);\n\n  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);\n\n  geometry.uv = uv;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n\n  if (picking_uActive) {\n    // Since instance information is not used, we can use picking color for pixel index\n    gl_FragColor.rgb = packUVsIntoRGB(uv);\n  }\n}\n"),Np={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:ni.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]}};class jp extends Id{constructor(...t){super(...t),Rt(this,"state",void 0)}getShaders(){return super.getShaders({vs:"\n#define SHADER_NAME bitmap-layer-vertex-shader\n\nattribute vec2 texCoords;\nattribute vec3 positions;\nattribute vec3 positions64Low;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexPos;\n\nuniform float coordinateConversion;\n\nconst vec3 pickingColor = vec3(1.0, 0.0, 0.0);\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = pickingColor;\n\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTexCoord = texCoords;\n\n  if (coordinateConversion < -0.5) {\n    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;\n  } else if (coordinateConversion > 0.5) {\n    vTexPos = geometry.worldPosition.xy;\n  }\n\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n",fs:Fp,modules:[Fd,Dd]})}initializeState(){const t=this.getAttributeManager();t.remove(["instancePickingColors"]);const e=!0;t.add({indices:{size:1,isIndexed:!0,update:t=>t.value=this.state.mesh.indices,noAlloc:e},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:t=>t.value=this.state.mesh.positions,noAlloc:e},texCoords:{size:2,update:t=>t.value=this.state.mesh.texCoords,noAlloc:e}})}updateState({props:t,oldProps:e,changeFlags:n}){const r=this.getAttributeManager();if(n.extensionsChanged){var i;const{gl:t}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(t),r.invalidateAll()}if(t.bounds!==e.bounds){const t=this.state.mesh,e=this._createMesh();this.state.model.setVertexCount(e.vertexCount);for(const n in e)t&&t[n]!==e[n]&&r.invalidate(n);this.setState({mesh:e,...this._getCoordinateUniforms()})}else t._imageCoordinateSystem!==e._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(t){const{image:e}=this.props,n=t.info;if(!n.color||!e)return n.bitmap=null,n;const{width:r,height:i}=e;n.index=0;const s=function(t){const[e,n,r]=t;return[(e+(15&r)/16)/256,(n+(240&r)/256)/256]}(n.color),o=[Math.floor(s[0]*r),Math.floor(s[1]*i)];return n.bitmap={size:{width:r,height:i},uv:s,pixel:o},n}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(t){super._updateAutoHighlight({...t,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:t}=this.props;let e=t;return Dp(t)&&(e=[[t[0],t[1]],[t[0],t[3]],[t[2],t[3]],[t[2],t[1]]]),function(t,e){if(!e)return function(t){const e=new Float64Array(12);for(let n=0;n<t.length;n++)e[3*n+0]=t[n][0],e[3*n+1]=t[n][1],e[3*n+2]=t[n][2]||0;return{vertexCount:6,positions:e,indices:Ip,texCoords:Rp}}(t);const n=Math.max(Math.abs(t[0][0]-t[3][0]),Math.abs(t[1][0]-t[2][0])),r=Math.max(Math.abs(t[1][1]-t[0][1]),Math.abs(t[2][1]-t[3][1])),i=Math.ceil(n/e)+1,s=Math.ceil(r/e)+1,o=(i-1)*(s-1)*6,a=new Uint32Array(o),l=new Float32Array(i*s*2),u=new Float64Array(i*s*3);let c=0,h=0;for(let e=0;e<i;e++){const n=e/(i-1);for(let r=0;r<s;r++){const i=r/(s-1),o=zp(t,n,i);u[3*c+0]=o[0],u[3*c+1]=o[1],u[3*c+2]=o[2]||0,l[2*c+0]=n,l[2*c+1]=1-i,e>0&&r>0&&(a[h++]=c-s,a[h++]=c-s-1,a[h++]=c-1,a[h++]=c-s,a[h++]=c-1,a[h++]=c),c++}}return{vertexCount:o,positions:u,indices:a,texCoords:l}}(e,this.context.viewport.resolution)}_getModel(t){return t?new qh(t,{...this.getShaders(),id:this.props.id,geometry:new Ud({drawMode:4,vertexCount:6}),isInstanced:!1}):null}draw(t){const{uniforms:e,moduleParameters:n}=t,{model:r,coordinateConversion:i,bounds:s,disablePicking:o}=this.state,{image:a,desaturate:l,transparentColor:u,tintColor:c}=this.props;n.pickingActive&&o||a&&r&&r.setUniforms(e).setUniforms({bitmapTexture:a,desaturate:l,transparentColor:u.map((t=>t/255)),tintColor:c.slice(0,3).map((t=>t/255)),coordinateConversion:i,bounds:s}).draw()}_getCoordinateUniforms(){const{LNGLAT:t,CARTESIAN:e,DEFAULT:n}=ni;let{_imageCoordinateSystem:r}=this.props;if(r!==n){const{bounds:n}=this.props;if(!Dp(n))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const i=this.context.viewport.resolution?t:e;if(r=r===t?t:e,r===t&&i===e)return{coordinateConversion:-1,bounds:n};if(r===e&&i===t){const t=Hr([n[0],n[1]]),e=Hr([n[2],n[3]]);return{coordinateConversion:1,bounds:[t[0],t[1],e[0],e[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}function Dp(t){return Number.isFinite(t[0])}Rt(jp,"layerName","BitmapLayer"),Rt(jp,"defaultProps",Np);var Bp=o(671),Up=o.n(Bp),Vp="twttr",Wp=!("undefined"==typeof window||!window.document||!window.document.createElement);function Gp(){Up().isDefined(Vp)||Up()("https://platform.twitter.com/widgets.js",Vp)}function Hp(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}function qp(t){var n=(0,e.useRef)();return function(t,e){if(Hp(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!Hp(t[n[i]],e[n[i]]))return!1;return!0}(t,n.current)||(n.current=t),n.current}function Xp(t){return"object"==typeof t?Object.assign({},t):t}var Zp="twdiv";var Yp=function(t){var n=t.tweetId,r=t.options,i=t.onLoad,s=t.renderError,o=function(t,n,r,i){var s=(0,e.useState)(null),o=s[0],a=s[1],l=(0,e.useRef)(null);if(!Wp)return{ref:l,error:o};var u=[t,qp(n),qp(r)];return(0,e.useEffect)((function(){a(null);var e,s=!1;if(l.current){if((e=l.current)&&e.querySelectorAll("*").forEach((function(t){t.hasAttribute("twdiv")&&t.remove()})),!l||!l.current)return;var o=document.createElement("div");o.setAttribute(Zp,"yes"),l.current.appendChild(o),new Promise((function(t,e){var n=function(){return e(new Error("Could not load remote twitter widgets js"))};Gp(),Up().ready(Vp,{success:function(){var e=window.twttr;e&&e.widgets||n(),t(e.widgets)},error:n})})).then((function(e){return e[t](Xp(n),o,Xp(r))})).then((function(t){if(!t&&!s)throw new Error("Twitter could not create widget. If it is a Timeline or Tweet, ensure the screenName/tweetId exists.");l&&l.current&&(s?o&&o.remove():i&&i())})).catch((function(t){console.error(t),a(t)}))}return function(){s=!0}}),u),{ref:l,error:o}}("createTweet",n,r,i),a=o.ref,l=o.error;return e.createElement("div",{ref:a},l&&s&&s(l))};function $p(t,e,n){return t+e/60+n/3600}function Qp(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Kp(t){return!!t&&!!t[jg]}function Jp(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Dg}(t)||Array.isArray(t)||!!t[Ng]||!!t.constructor[Ng]||sg(t)||og(t))}function tg(t,e,n){void 0===n&&(n=!1),0===eg(t)?(n?Object.keys:Bg)(t).forEach((function(r){n&&"symbol"==typeof r||e(r,t[r],t)})):t.forEach((function(n,r){return e(r,n,t)}))}function eg(t){var e=t[jg];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:sg(t)?2:og(t)?3:0}function ng(t,e){return 2===eg(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function rg(t,e,n){var r=eg(t);2===r?t.set(e,n):3===r?(t.delete(e),t.add(n)):t[e]=n}function ig(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function sg(t){return Ig&&t instanceof Map}function og(t){return Rg&&t instanceof Set}function ag(t){return t.o||t.t}function lg(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=Ug(t);delete e[jg];for(var n=Bg(e),r=0;r<n.length;r++){var i=n[r],s=e[i];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function ug(t,e){return void 0===e&&(e=!1),hg(t)||Kp(t)||!Jp(t)||(eg(t)>1&&(t.set=t.add=t.clear=t.delete=cg),Object.freeze(t),e&&tg(t,(function(t,e){return ug(e,!0)}),!0)),t}function cg(){Qp(2)}function hg(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function dg(t){var e=Vg[t];return e||Qp(18,t),e}function fg(){return Lg}function pg(t,e){e&&(dg("Patches"),t.u=[],t.s=[],t.v=e)}function gg(t){mg(t),t.p.forEach(yg),t.p=null}function mg(t){t===Lg&&(Lg=t.l)}function vg(t){return Lg={p:[],l:Lg,h:t,m:!0,_:0}}function yg(t){var e=t[jg];0===e.i||1===e.i?e.j():e.O=!0}function bg(t,e){e._=e.p.length;var n=e.p[0],r=void 0!==t&&t!==n;return e.h.g||dg("ES5").S(e,t,r),r?(n[jg].P&&(gg(e),Qp(4)),Jp(t)&&(t=_g(e,t),e.l||xg(e,t)),e.u&&dg("Patches").M(n[jg].t,t,e.u,e.s)):t=_g(e,n,[]),gg(e),e.u&&e.v(e.u,e.s),t!==Fg?t:void 0}function _g(t,e,n){if(hg(e))return e;var r=e[jg];if(!r)return tg(e,(function(i,s){return wg(t,r,e,i,s,n)}),!0),e;if(r.A!==t)return e;if(!r.P)return xg(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=lg(r.k):r.o;tg(3===r.i?new Set(i):i,(function(e,s){return wg(t,r,i,e,s,n)})),xg(t,i,!1),n&&t.u&&dg("Patches").R(r,n,t.u,t.s)}return r.o}function wg(t,e,n,r,i,s){if(Kp(i)){var o=_g(t,i,s&&e&&3!==e.i&&!ng(e.D,r)?s.concat(r):void 0);if(rg(n,r,o),!Kp(o))return;t.m=!1}if(Jp(i)&&!hg(i)){if(!t.h.F&&t._<1)return;_g(t,i),e&&e.A.l||xg(t,i)}}function xg(t,e,n){void 0===n&&(n=!1),t.h.F&&t.m&&ug(e,n)}function Mg(t,e){var n=t[jg];return(n?ag(n):t)[e]}function Sg(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function Pg(t){t.P||(t.P=!0,t.l&&Pg(t.l))}function Eg(t){t.o||(t.o=lg(t.t))}function Cg(t,e,n){var r=sg(e)?dg("MapSet").N(e,n):og(e)?dg("MapSet").T(e,n):t.g?function(t,e){var n=Array.isArray(t),r={i:n?1:0,A:e?e.A:fg(),P:!1,I:!1,D:{},l:e,t,k:null,o:null,j:null,C:!1},i=r,s=Wg;n&&(i=[r],s=Gg);var o=Proxy.revocable(i,s),a=o.revoke,l=o.proxy;return r.k=l,r.j=a,l}(e,n):dg("ES5").J(e,n);return(n?n.A:fg()).p.push(r),r}function kg(t){return Kp(t)||Qp(22,t),function t(e){if(!Jp(e))return e;var n,r=e[jg],i=eg(e);if(r){if(!r.P&&(r.i<4||!dg("ES5").K(r)))return r.t;r.I=!0,n=Tg(e,i),r.I=!1}else n=Tg(e,i);return tg(n,(function(e,i){r&&function(t,e){return 2===eg(t)?t.get(e):t[e]}(r.t,e)===i||rg(n,e,t(i))})),3===i?new Set(n):n}(t)}function Tg(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return lg(t)}var Ag,Lg,Og="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Ig="undefined"!=typeof Map,Rg="undefined"!=typeof Set,zg="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Fg=Og?Symbol.for("immer-nothing"):((Ag={})["immer-nothing"]=!0,Ag),Ng=Og?Symbol.for("immer-draftable"):"__$immer_draftable",jg=Og?Symbol.for("immer-state"):"__$immer_state",Dg=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Bg="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,Ug=Object.getOwnPropertyDescriptors||function(t){var e={};return Bg(t).forEach((function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)})),e},Vg={},Wg={get:function(t,e){if(e===jg)return t;var n=ag(t);if(!ng(n,e))return function(t,e,n){var r,i=Sg(e,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(t.k):void 0}(t,n,e);var r=n[e];return t.I||!Jp(r)?r:r===Mg(t.t,e)?(Eg(t),t.o[e]=Cg(t.A.h,r,t)):r},has:function(t,e){return e in ag(t)},ownKeys:function(t){return Reflect.ownKeys(ag(t))},set:function(t,e,n){var r=Sg(ag(t),e);if(null==r?void 0:r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=Mg(ag(t),e),s=null==i?void 0:i[jg];if(s&&s.t===n)return t.o[e]=n,t.D[e]=!1,!0;if(ig(n,i)&&(void 0!==n||ng(t.t,e)))return!0;Eg(t),Pg(t)}return t.o[e]===n&&"number"!=typeof n&&(void 0!==n||e in t.o)||(t.o[e]=n,t.D[e]=!0,!0)},deleteProperty:function(t,e){return void 0!==Mg(t.t,e)||e in t.t?(t.D[e]=!1,Eg(t),Pg(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=ag(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r?{writable:!0,configurable:1!==t.i||"length"!==e,enumerable:r.enumerable,value:n[e]}:r},defineProperty:function(){Qp(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Qp(12)}},Gg={};tg(Wg,(function(t,e){Gg[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),Gg.deleteProperty=function(t,e){return Gg.set.call(this,t,e,void 0)},Gg.set=function(t,e,n){return Wg.set.call(this,t[0],e,n,t[0])};var Hg=function(){function t(t){var e=this;this.g=zg,this.F=!0,this.produce=function(t,n,r){if("function"==typeof t&&"function"!=typeof n){var i=n;n=t;var s=e;return function(t){var e=this;void 0===t&&(t=i);for(var r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return s.produce(t,(function(t){var r;return(r=n).call.apply(r,[e,t].concat(o))}))}}var o;if("function"!=typeof n&&Qp(6),void 0!==r&&"function"!=typeof r&&Qp(7),Jp(t)){var a=vg(e),l=Cg(e,t,void 0),u=!0;try{o=n(l),u=!1}finally{u?gg(a):mg(a)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(t){return pg(a,r),bg(t,a)}),(function(t){throw gg(a),t})):(pg(a,r),bg(o,a))}if(!t||"object"!=typeof t){if(void 0===(o=n(t))&&(o=t),o===Fg&&(o=void 0),e.F&&ug(o,!0),r){var c=[],h=[];dg("Patches").M(t,o,c,h),r(c,h)}return o}Qp(21,t)},this.produceWithPatches=function(t,n){if("function"==typeof t)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return e.produceWithPatches(n,(function(e){return t.apply(void 0,[e].concat(i))}))};var r,i,s=e.produce(t,n,(function(t,e){r=t,i=e}));return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(t){return[t,r,i]})):[s,r,i]},"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze)}var e=t.prototype;return e.createDraft=function(t){Jp(t)||Qp(8),Kp(t)&&(t=kg(t));var e=vg(this),n=Cg(this,t,void 0);return n[jg].C=!0,mg(e),n},e.finishDraft=function(t,e){var n=(t&&t[jg]).A;return pg(n,e),bg(void 0,n)},e.setAutoFreeze=function(t){this.F=t},e.setUseProxies=function(t){t&&!zg&&Qp(20),this.g=t},e.applyPatches=function(t,e){var n;for(n=e.length-1;n>=0;n--){var r=e[n];if(0===r.path.length&&"replace"===r.op){t=r.value;break}}n>-1&&(e=e.slice(n+1));var i=dg("Patches").$;return Kp(t)?i(t,e):this.produce(t,(function(t){return i(t,e)}))},t}(),qg=new Hg,Xg=qg.produce;qg.produceWithPatches.bind(qg),qg.setAutoFreeze.bind(qg),qg.setUseProxies.bind(qg),qg.applyPatches.bind(qg),qg.createDraft.bind(qg),qg.finishDraft.bind(qg);const Zg=Xg;function Yg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Yg(Object(n),!0).forEach((function(e){Rt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yg(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qg(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Kg="function"==typeof Symbol&&Symbol.observable||"@@observable",Jg=function(){return Math.random().toString(36).substring(7).split("").join(".")},tm={INIT:"@@redux/INIT"+Jg(),REPLACE:"@@redux/REPLACE"+Jg(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Jg()}};function em(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function nm(t,e,n){var r;if("function"==typeof e&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(Qg(0));if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw new Error(Qg(1));return n(nm)(t,e)}if("function"!=typeof t)throw new Error(Qg(2));var i=t,s=e,o=[],a=o,l=!1;function u(){a===o&&(a=o.slice())}function c(){if(l)throw new Error(Qg(3));return s}function h(t){if("function"!=typeof t)throw new Error(Qg(4));if(l)throw new Error(Qg(5));var e=!0;return u(),a.push(t),function(){if(e){if(l)throw new Error(Qg(6));e=!1,u();var n=a.indexOf(t);a.splice(n,1),o=null}}}function d(t){if(!em(t))throw new Error(Qg(7));if(void 0===t.type)throw new Error(Qg(8));if(l)throw new Error(Qg(9));try{l=!0,s=i(s,t)}finally{l=!1}for(var e=o=a,n=0;n<e.length;n++)(0,e[n])();return t}function f(t){if("function"!=typeof t)throw new Error(Qg(10));i=t,d({type:tm.REPLACE})}function p(){var t,e=h;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new Error(Qg(11));function n(){t.next&&t.next(c())}return n(),{unsubscribe:e(n)}}})[Kg]=function(){return this},t}return d({type:tm.INIT}),(r={dispatch:d,subscribe:h,getState:c,replaceReducer:f})[Kg]=p,r}function rm(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}function im(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){var n=t.apply(void 0,arguments),r=function(){throw new Error(Qg(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},s=e.map((function(t){return t(i)}));return r=rm.apply(void 0,s)(n.dispatch),$g($g({},n),{},{dispatch:r})}}}function sm(t){return function(e){var n=e.dispatch,r=e.getState;return function(e){return function(i){return"function"==typeof i?i(n,r,t):e(i)}}}}var om=sm();om.withExtraArgument=sm;const am=om;o(155);var lm,um=(lm=function(t,e){return lm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},lm(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}lm(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),cm=function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},hm=Object.defineProperty,dm=(Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols),fm=Object.prototype.hasOwnProperty,pm=Object.prototype.propertyIsEnumerable,gm=function(t,e,n){return e in t?hm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},mm=function(t,e){for(var n in e||(e={}))fm.call(e,n)&&gm(t,n,e[n]);if(dm)for(var r=0,i=dm(e);r<i.length;r++)n=i[r],pm.call(e,n)&&gm(t,n,e[n]);return t},vm="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?rm:rm.apply(null,arguments)};"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var ym=function(t){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return um(e,t),Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.prototype.concat.apply(this,e)},e.prototype.prepend=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 1===t.length&&Array.isArray(t[0])?new(e.bind.apply(e,cm([void 0],t[0].concat(this)))):new(e.bind.apply(e,cm([void 0],t.concat(this))))},e}(Array);function bm(t){return Jp(t)?Zg(t,(function(){})):t}function _m(t,e){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(e){var i=e.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return mm(mm({type:t,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:t,payload:n[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(e){return e.type===t},n}function wm(t){var e,n={},r=[],i={addCase:function(t,e){var r="string"==typeof t?t:t.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=e,i},addMatcher:function(t,e){return r.push({matcher:t,reducer:e}),i},addDefaultCase:function(t){return e=t,i}};return t(i),[n,r,e]}function xm(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof t.initialState?t.initialState:bm(t.initialState),i=t.reducers||{},s=Object.keys(i),o={},a={},l={};function u(){var e="function"==typeof t.extraReducers?wm(t.extraReducers):[t.extraReducers],n=e[0],i=void 0===n?{}:n,s=e[1],o=void 0===s?[]:s,l=e[2],u=void 0===l?void 0:l,c=mm(mm({},i),a);return function(t,e,n,r){void 0===n&&(n=[]);var i,s="function"==typeof e?wm(e):[e,n,r],o=s[0],a=s[1],l=s[2];if(function(t){return"function"==typeof t}(t))i=function(){return bm(t())};else{var u=bm(t);i=function(){return u}}function c(t,e){void 0===t&&(t=i());var n=cm([o[e.type]],a.filter((function(t){return(0,t.matcher)(e)})).map((function(t){return t.reducer})));return 0===n.filter((function(t){return!!t})).length&&(n=[l]),n.reduce((function(t,n){if(n){var r;if(Kp(t))return void 0===(r=n(t,e))?t:r;if(Jp(t))return Zg(t,(function(t){return n(t,e)}));if(void 0===(r=n(t,e))){if(null===t)return t;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return t}),t)}return c.getInitialState=i,c}(r,c,o,u)}return s.forEach((function(t){var n,r,s=i[t],u=function(t,e){return t+"/"+e}(e,t);"reducer"in s?(n=s.reducer,r=s.prepare):n=s,o[t]=n,a[u]=n,l[t]=r?_m(u,r):_m(u)})),{name:e,reducer:function(t,e){return n||(n=u()),n(t,e)},actions:l,caseReducers:o,getInitialState:function(){return n||(n=u()),n.getInitialState()}}}Object.assign;var Mm="listenerMiddleware";_m(Mm+"/add"),_m(Mm+"/removeAll"),_m(Mm+"/remove"),function(){function t(t,e){var n=i[t];return n?n.enumerable=e:i[t]=n={configurable:!0,enumerable:e,get:function(){var e=this[jg];return Wg.get(e,t)},set:function(e){var n=this[jg];Wg.set(n,t,e)}},n}function e(t){for(var e=t.length-1;e>=0;e--){var i=t[e][jg];if(!i.P)switch(i.i){case 5:r(i)&&Pg(i);break;case 4:n(i)&&Pg(i)}}}function n(t){for(var e=t.t,n=t.k,r=Bg(n),i=r.length-1;i>=0;i--){var s=r[i];if(s!==jg){var o=e[s];if(void 0===o&&!ng(e,s))return!0;var a=n[s],l=a&&a[jg];if(l?l.t!==o:!ig(a,o))return!0}}var u=!!e[jg];return r.length!==Bg(e).length+(u?0:1)}function r(t){var e=t.k;if(e.length!==t.t.length)return!0;var n=Object.getOwnPropertyDescriptor(e,e.length-1);if(n&&!n.get)return!0;for(var r=0;r<e.length;r++)if(!e.hasOwnProperty(r))return!0;return!1}var i={};!function(t,e){Vg[t]||(Vg[t]=e)}("ES5",{J:function(e,n){var r=Array.isArray(e),i=function(e,n){if(e){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,t(i,!0));return r}var s=Ug(n);delete s[jg];for(var o=Bg(s),a=0;a<o.length;a++){var l=o[a];s[l]=t(l,e||!!s[l].enumerable)}return Object.create(Object.getPrototypeOf(n),s)}(r,e),s={i:r?5:4,A:n?n.A:fg(),P:!1,I:!1,D:{},l:n,t:e,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,jg,{value:s,writable:!0}),i},S:function(t,n,i){i?Kp(n)&&n[jg].A===t&&e(t.p):(t.u&&function t(e){if(e&&"object"==typeof e){var n=e[jg];if(n){var i=n.t,s=n.k,o=n.D,a=n.i;if(4===a)tg(s,(function(e){e!==jg&&(void 0!==i[e]||ng(i,e)?o[e]||t(s[e]):(o[e]=!0,Pg(n)))})),tg(i,(function(t){void 0!==s[t]||ng(s,t)||(o[t]=!1,Pg(n))}));else if(5===a){if(r(n)&&(Pg(n),o.length=!0),s.length<i.length)for(var l=s.length;l<i.length;l++)o[l]=!1;else for(var u=i.length;u<s.length;u++)o[u]=!0;for(var c=Math.min(s.length,i.length),h=0;h<c;h++)s.hasOwnProperty(h)||(o[h]=!0),void 0===o[h]&&t(s[h])}}}}(t.p[0]),e(t.p))},K:function(t){return 4===t.i?n(t):r(t)}})}();var Sm=6378137,Pm=.0066943799901413165,Em=484813681109536e-20,Cm=Math.PI/2,km=1e-10,Tm=.017453292519943295,Am=57.29577951308232,Lm=Math.PI/4,Om=2*Math.PI,Im=3.14159265359,Rm={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const zm={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var Fm=/[\s_\-\/\(\)]/g;function Nm(t,e){if(t[e])return t[e];for(var n,r=Object.keys(t),i=e.toLowerCase().replace(Fm,""),s=-1;++s<r.length;)if((n=r[s]).toLowerCase().replace(Fm,"")===i)return t[n]}function jm(t){var e,n,r,i={},s=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t}),{}),o={proj:"projName",datum:"datumCode",rf:function(t){i.rf=parseFloat(t)},lat_0:function(t){i.lat0=t*Tm},lat_1:function(t){i.lat1=t*Tm},lat_2:function(t){i.lat2=t*Tm},lat_ts:function(t){i.lat_ts=t*Tm},lon_0:function(t){i.long0=t*Tm},lon_1:function(t){i.long1=t*Tm},lon_2:function(t){i.long2=t*Tm},alpha:function(t){i.alpha=parseFloat(t)*Tm},gamma:function(t){i.rectified_grid_angle=parseFloat(t)},lonc:function(t){i.longc=t*Tm},x_0:function(t){i.x0=parseFloat(t)},y_0:function(t){i.y0=parseFloat(t)},k_0:function(t){i.k0=parseFloat(t)},k:function(t){i.k0=parseFloat(t)},a:function(t){i.a=parseFloat(t)},b:function(t){i.b=parseFloat(t)},r_a:function(){i.R_A=!0},zone:function(t){i.zone=parseInt(t,10)},south:function(){i.utmSouth=!0},towgs84:function(t){i.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){i.to_meter=parseFloat(t)},units:function(t){i.units=t;var e=Nm(zm,t);e&&(i.to_meter=e.to_meter)},from_greenwich:function(t){i.from_greenwich=t*Tm},pm:function(t){var e=Nm(Rm,t);i.from_greenwich=(e||parseFloat(t))*Tm},nadgrids:function(t){"@null"===t?i.datumCode="none":i.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(i.axis=t)},approx:function(){i.approx=!0}};for(e in s)n=s[e],e in o?"function"==typeof(r=o[e])?r(n):i[r]=n:i[e]=n;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i}var Dm=/\s/,Bm=/[A-Za-z]/,Um=/[A-Za-z84_]/,Vm=/[,\]]/,Wm=/[\d\.E\-\+]/;function Gm(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function Hm(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce((function(t,e){return qm(e,t),t}),r);e&&(t[e]=i)}function qm(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void qm(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){if("AXIS"===n)return n in e||(e[n]=[]),void e[n].push(t);var r;switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&qm(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&qm(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void Hm(e,n,t);default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return qm(t,e[n]);return Hm(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}function Xm(t){return.017453292519943295*t}function Zm(t){var e=new Gm(t).output(),n=e.shift(),r=e.shift();e.unshift(["name",r]),e.unshift(["type",n]);var i={};return qm(e,i),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,r=t.AXIS.length;n<r;++n){var i=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];-1!==i[0].indexOf("north")||("y"===i[0]||"lat"===i[0])&&"north"===i[1]?e+="n":-1!==i[0].indexOf("south")||("y"===i[0]||"lat"===i[0])&&"south"===i[1]?e+="s":-1!==i[0].indexOf("east")||("x"===i[0]||"lon"===i[0])&&"east"===i[1]?e+="e":-1===i[0].indexOf("west")&&("x"!==i[0]&&"lon"!==i[0]||"west"!==i[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var s=t.GEOGCS;function o(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(s=t),s&&(s.DATUM?t.datumCode=s.DATUM.name.toLowerCase():t.datumCode=s.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(t.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=s.DATUM.SPHEROID.a,t.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(t.datum_params=s.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Xm],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Xm],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",Xm],["lat0","latitude_of_origin",Xm],["lat0","standard_parallel_1",Xm],["lat1","standard_parallel_1",Xm],["lat2","standard_parallel_2",Xm],["azimuth","Azimuth"],["alpha","azimuth",Xm],["srsCode","name"]].forEach((function(e){return function(t,e){var n=e[0],r=e[1];!(n in t)&&r in t&&(t[n]=t[r],3===e.length&&(t[n]=e[2](t[n])))}(t,e)})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=Xm(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(i),i}function Ym(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?Ym[t]=jm(arguments[1]):Ym[t]=Zm(arguments[1]):Ym[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?Ym.apply(e,t):Ym(t)}));if("string"==typeof t){if(t in Ym)return Ym[t]}else"EPSG"in t?Ym["EPSG:"+t.EPSG]=t:"ESRI"in t?Ym["ESRI:"+t.ESRI]=t:"IAU2000"in t?Ym["IAU2000:"+t.IAU2000]=t:console.log(t);return}}Gm.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;Dm.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},Gm.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(Vm.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},Gm.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},Gm.prototype.number=function(t){if(!Wm.test(t)){if(Vm.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},Gm.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},Gm.prototype.keyword=function(t){if(Um.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=1)}if(!Vm.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},Gm.prototype.neutral=function(t){if(Bm.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(Wm.test(t))return this.word=t,void(this.state=3);if(!Vm.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},Gm.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)},function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(Ym);const $m=Ym;var Qm=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],Km=["3857","900913","3785","102113"];function Jm(t,e){var n,r;if(t=t||{},!e)return t;for(r in e)void 0!==(n=e[r])&&(t[r]=n);return t}function tv(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)}function ev(t){return t<0?-1:1}function nv(t){return Math.abs(t)<=Im?t:t-ev(t)*Om}function rv(t,e,n){var r=t*n,i=.5*t;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(Cm-e))/r}function iv(t,e){for(var n,r,i=.5*t,s=Cm-2*Math.atan(e),o=0;o<=15;o++)if(n=t*Math.sin(s),s+=r=Cm-2*Math.atan(e*Math.pow((1-n)/(1+n),i))-s,Math.abs(r)<=1e-10)return s;return-9999}const sv={init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=tv(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,r=t.x,i=t.y;if(i*Am>90&&i*Am<-90&&r*Am>180&&r*Am<-180)return null;if(Math.abs(Math.abs(i)-Cm)<=km)return null;if(this.sphere)e=this.x0+this.a*this.k0*nv(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(Lm+.5*i));else{var s=Math.sin(i),o=rv(this.e,i,s);e=this.x0+this.a*this.k0*nv(r-this.long0),n=this.y0-this.a*this.k0*Math.log(o)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r=t.x-this.x0,i=t.y-this.y0;if(this.sphere)n=Cm-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var s=Math.exp(-i/(this.a*this.k0));if(-9999===(n=iv(this.e,s)))return null}return e=nv(this.long0+r/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]};function ov(t){return t}var av=[sv,{init:function(){},forward:ov,inverse:ov,names:["longlat","identity"]}],lv={},uv=[];function cv(t,e){var n=uv.length;return t.names?(uv[n]=t,t.names.forEach((function(t){lv[t.toLowerCase()]=n})),this):(console.log(e),!0)}const hv={start:function(){av.forEach(cv)},add:cv,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==lv[e]&&uv[lv[e]]?uv[lv[e]]:void 0}};var dv={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},fv=dv.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};dv.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var pv={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};var gv={};function mv(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:gv[t]||null,isNull:!1}}function vv(t){return t/3600*Math.PI/180}function yv(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function bv(t){return t.map((function(t){return[vv(t.longitudeShift),vv(t.latitudeShift)]}))}function _v(t,e,n){return{name:yv(t,e+8,e+16).trim(),parent:yv(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function wv(t,e,n,r){for(var i=e+176,s=[],o=0;o<n.gridNodeCount;o++){var a={latitudeShift:t.getFloat32(i+16*o,r),longitudeShift:t.getFloat32(i+16*o+4,r),latitudeAccuracy:t.getFloat32(i+16*o+8,r),longitudeAccuracy:t.getFloat32(i+16*o+12,r)};s.push(a)}return s}function xv(t,e){if(!(this instanceof xv))return new xv(t);e=e||function(t){if(t)throw t};var n=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in $m}(t))return $m[t];if(function(t){return Qm.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=Zm(t);if(function(t){var e=Nm(t,"authority");if(e){var n=Nm(e,"epsg");return n&&Km.indexOf(n)>-1}}(e))return $m["EPSG:3857"];var n=function(t){var e=Nm(t,"extension");if(e)return Nm(e,"proj4")}(e);return n?jm(n):e}return function(t){return"+"===t[0]}(t)?jm(t):void 0}(t);if("object"==typeof n){var r=xv.projections.get(n.projName);if(r){if(n.datumCode&&"none"!==n.datumCode){var i=Nm(pv,n.datumCode);i&&(n.datum_params=n.datum_params||(i.towgs84?i.towgs84.split(","):null),n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var s=function(t,e,n,r,i){if(!t){var s=Nm(dv,r);s||(s=fv),t=s.a,e=s.b,n=s.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<km)&&(i=!0,e=t),{a:t,b:e,rf:n,sphere:i}}(n.a,n.b,n.rf,n.ellps,n.sphere),o=function(t,e,n,r){var i=t*t,s=e*e,o=(i-s)/i,a=0;return r?(i=(t*=1-o*(.16666666666666666+o*(.04722222222222222+.022156084656084655*o)))*t,o=0):a=Math.sqrt(o),{es:o,e:a,ep2:(i-s)/s}}(s.a,s.b,s.rf,n.R_A),a=function(t){return void 0===t?null:t.split(",").map(mv)}(n.nadgrids),l=n.datum||function(t,e,n,r,i,s,o){var a={};return a.datum_type=void 0===t||"none"===t?5:4,e&&(a.datum_params=e.map(parseFloat),0===a.datum_params[0]&&0===a.datum_params[1]&&0===a.datum_params[2]||(a.datum_type=1),a.datum_params.length>3&&(0===a.datum_params[3]&&0===a.datum_params[4]&&0===a.datum_params[5]&&0===a.datum_params[6]||(a.datum_type=2,a.datum_params[3]*=Em,a.datum_params[4]*=Em,a.datum_params[5]*=Em,a.datum_params[6]=a.datum_params[6]/1e6+1))),o&&(a.datum_type=3,a.grids=o),a.a=n,a.b=r,a.es=i,a.ep2=s,a}(n.datumCode,n.datum_params,s.a,s.b,o.es,o.ep2,a);Jm(this,n),Jm(this,r),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,this.init(),e(null,this)}else e(t)}else e(t)}xv.projections=hv,xv.projections.start();const Mv=xv;function Sv(t,e,n){var r,i,s,o,a=t.x,l=t.y,u=t.z?t.z:0;if(l<-Cm&&l>-1.001*Cm)l=-Cm;else if(l>Cm&&l<1.001*Cm)l=Cm;else{if(l<-Cm)return{x:-1/0,y:-1/0,z:t.z};if(l>Cm)return{x:1/0,y:1/0,z:t.z}}return a>Math.PI&&(a-=2*Math.PI),i=Math.sin(l),o=Math.cos(l),s=i*i,{x:((r=n/Math.sqrt(1-e*s))+u)*o*Math.cos(a),y:(r+u)*o*Math.sin(a),z:(r*(1-e)+u)*i}}function Pv(t,e,n,r){var i,s,o,a,l,u,c,h,d,f,p,g,m,v,y,b=t.x,_=t.y,w=t.z?t.z:0;if(i=Math.sqrt(b*b+_*_),s=Math.sqrt(b*b+_*_+w*w),i/n<1e-12){if(v=0,s/n<1e-12)return y=-r,{x:t.x,y:t.y,z:t.z}}else v=Math.atan2(_,b);o=w/s,h=(a=i/s)*(1-e)*(l=1/Math.sqrt(1-e*(2-e)*a*a)),d=o*l,m=0;do{m++,u=e*(c=n/Math.sqrt(1-e*d*d))/(c+(y=i*h+w*d-c*(1-e*d*d))),g=(p=o*(l=1/Math.sqrt(1-u*(2-u)*a*a)))*h-(f=a*(1-u)*l)*d,h=f,d=p}while(g*g>1e-24&&m<30);return{x:v,y:Math.atan(p/Math.abs(f)),z:y}}function Ev(t){return 1===t||2===t}function Cv(t,e,n){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var r={x:-n.x,y:n.y},i={x:Number.NaN,y:Number.NaN},s=[],o=0;o<t.grids.length;o++){var a=t.grids[o];if(s.push(a.name),a.isNull){i=r;break}if(a.mandatory,null!==a.grid){var l=a.grid.subgrids[0],u=(Math.abs(l.del[1])+Math.abs(l.del[0]))/1e4,c=l.ll[0]-u,h=l.ll[1]-u,d=l.ll[0]+(l.lim[0]-1)*l.del[0]+u,f=l.ll[1]+(l.lim[1]-1)*l.del[1]+u;if(!(h>r.y||c>r.x||f<r.y||d<r.x||(i=kv(r,e,l),isNaN(i.x))))break}else if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*Am+" "+r.y*Am+" tried: '"+s+"'"),-1):(n.x=-i.x,n.y=i.y,0)}function kv(t,e,n){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var i={x:t.x,y:t.y};i.x-=n.ll[0],i.y-=n.ll[1],i.x=nv(i.x-Math.PI)+Math.PI;var s=Tv(i,n);if(e){if(isNaN(s.x))return r;s.x=i.x-s.x,s.y=i.y-s.y;var o,a,l=9;do{if(a=Tv(s,n),isNaN(a.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}o={x:i.x-(a.x+s.x),y:i.y-(a.y+s.y)},s.x+=o.x,s.y+=o.y}while(l--&&Math.abs(o.x)>1e-12&&Math.abs(o.y)>1e-12);if(l<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=nv(s.x+n.ll[0]),r.y=s.y+n.ll[1]}else isNaN(s.x)||(r.x=t.x+s.x,r.y=t.y+s.y);return r}function Tv(t,e){var n,r={x:t.x/e.del[0],y:t.y/e.del[1]},i=Math.floor(r.x),s=Math.floor(r.y),o=r.x-1*i,a=r.y-1*s,l={x:Number.NaN,y:Number.NaN};if(i<0||i>=e.lim[0])return l;if(s<0||s>=e.lim[1])return l;n=s*e.lim[0]+i;var u=e.cvs[n][0],c=e.cvs[n][1];n++;var h=e.cvs[n][0],d=e.cvs[n][1];n+=e.lim[0];var f=e.cvs[n][0],p=e.cvs[n][1];n--;var g=e.cvs[n][0],m=e.cvs[n][1],v=o*a,y=o*(1-a),b=(1-o)*(1-a),_=(1-o)*a;return l.x=b*u+y*h+_*g+v*f,l.y=b*c+y*d+_*m+v*p,l}function Av(t,e,n){var r,i,s,o=n.x,a=n.y,l=n.z||0,u={};for(s=0;s<3;s++)if(!e||2!==s||void 0!==n.z)switch(0===s?(r=o,i=-1!=="ew".indexOf(t.axis[s])?"x":"y"):1===s?(r=a,i=-1!=="ns".indexOf(t.axis[s])?"y":"x"):(r=l,i="z"),t.axis[s]){case"e":case"n":u[i]=r;break;case"w":case"s":u[i]=-r;break;case"u":void 0!==n[i]&&(u.z=r);break;case"d":void 0!==n[i]&&(u.z=-r);break;default:return null}return u}function Lv(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function Ov(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Iv(t,e,n,r){var i;if(Array.isArray(n)&&(n=Lv(n)),function(t){Ov(t.x),Ov(t.y)}(n),t.datum&&e.datum&&function(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode||(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode}(t,e)&&(n=Iv(t,i=new Mv("WGS84"),n,r),t=i),r&&"enu"!==t.axis&&(n=Av(t,!1,n)),"longlat"===t.projName)n={x:n.x*Tm,y:n.y*Tm,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),!(n=t.inverse(n)))return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=function(t,e,n){if(function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:2!==t.datum_type||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e))return n;if(5===t.datum_type||5===e.datum_type)return n;var r=t.a,i=t.es;if(3===t.datum_type){if(0!==Cv(t,!1,n))return;r=Sm,i=Pm}var s=e.a,o=e.b,a=e.es;return 3===e.datum_type&&(s=Sm,o=6356752.314,a=Pm),i!==a||r!==s||Ev(t.datum_type)||Ev(e.datum_type)?(n=Sv(n,i,r),Ev(t.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(2===e){var r=n[0],i=n[1],s=n[2],o=n[3],a=n[4],l=n[5],u=n[6];return{x:u*(t.x-l*t.y+a*t.z)+r,y:u*(l*t.x+t.y-o*t.z)+i,z:u*(-a*t.x+o*t.y+t.z)+s}}}(n,t.datum_type,t.datum_params)),Ev(e.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(2===e){var r=n[0],i=n[1],s=n[2],o=n[3],a=n[4],l=n[5],u=n[6],c=(t.x-r)/u,h=(t.y-i)/u,d=(t.z-s)/u;return{x:c+l*h-a*d,y:-l*c+h+o*d,z:a*c-o*h+d}}}(n,e.datum_type,e.datum_params)),n=Pv(n,a,s,o),3!==e.datum_type||0===Cv(e,!0,n)?n:void 0):n}(t.datum,e.datum,n))return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*Am,y:n.y*Am,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),r&&"enu"!==e.axis?Av(e,!0,n):n}var Rv=Mv("WGS84");function zv(t,e,n,r){var i,s,o;return Array.isArray(n)?(i=Iv(t,e,n,r)||{x:NaN,y:NaN},n.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof i.z?[i.x,i.y,i.z].concat(n.splice(3)):[i.x,i.y,n[2]].concat(n.splice(3)):[i.x,i.y].concat(n.splice(2)):[i.x,i.y]):(s=Iv(t,e,n,r),2===(o=Object.keys(n)).length||o.forEach((function(r){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;s[r]=n[r]})),s)}function Fv(t){return t instanceof Mv?t:t.oProj?t.oProj:Mv(t)}const Nv=function(t,e,n){t=Fv(t);var r,i=!1;return void 0===e?(e=t,t=Rv,i=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,e=t,t=Rv,i=!0),e=Fv(e),n?zv(t,e,n):(r={forward:function(n,r){return zv(t,e,n,r)},inverse:function(n,r){return zv(e,t,n,r)}},i&&(r.oProj=e),r)};var jv="AJSAJS",Dv="AFAFAF",Bv=65,Uv=73,Vv=79;const Wv={forward:Gv,inverse:function(t){var e=Zv($v(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:Hv};function Gv(t,e){return e=e||5,function(t,e){var n,r,i,s,o,a,l,u,c,h,d,f="00000"+t.easting,p="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(c=t.easting,h=t.northing,d=Yv(t.zoneNumber),n=Math.floor(c/1e5),r=Math.floor(h/1e5)%20,s=jv.charCodeAt(i=d-1),o=Dv.charCodeAt(i),u=!1,(a=s+n-1)>90&&(a=a-90+Bv-1,u=!0),(a===Uv||s<Uv&&a>Uv||(a>Uv||s<Uv)&&u)&&a++,(a===Vv||s<Vv&&a>Vv||(a>Vv||s<Vv)&&u)&&++a===Uv&&a++,a>90&&(a=a-90+Bv-1),(l=o+r)>86?(l=l-86+Bv-1,u=!0):u=!1,(l===Uv||o<Uv&&l>Uv||(l>Uv||o<Uv)&&u)&&l++,(l===Vv||o<Vv&&l>Vv||(l>Vv||o<Vv)&&u)&&++l===Uv&&l++,l>86&&(l=l-86+Bv-1),String.fromCharCode(a)+String.fromCharCode(l))+f.substr(f.length-5,e)+p.substr(p.length-5,e)}(function(t){var e,n,r,i,s,o,a,l=t.lat,u=t.lon,c=6378137,h=.00669438,d=.9996,f=qv(l),p=qv(u);a=Math.floor((u+180)/6)+1,180===u&&(a=60),l>=56&&l<64&&u>=3&&u<12&&(a=32),l>=72&&l<84&&(u>=0&&u<9?a=31:u>=9&&u<21?a=33:u>=21&&u<33?a=35:u>=33&&u<42&&(a=37)),o=qv(6*(a-1)-180+3),e=.006739496752268451,n=c/Math.sqrt(1-h*Math.sin(f)*Math.sin(f)),r=Math.tan(f)*Math.tan(f),i=e*Math.cos(f)*Math.cos(f);var g,m,v=d*n*((s=Math.cos(f)*(p-o))+(1-r+i)*s*s*s/6+(5-18*r+r*r+72*i-58*e)*s*s*s*s*s/120)+5e5,y=d*(c*(.9983242984503243*f-.002514607064228144*Math.sin(2*f)+2639046602129982e-21*Math.sin(4*f)-3.418046101696858e-9*Math.sin(6*f))+n*Math.tan(f)*(s*s/2+(5-r+9*i+4*i*i)*s*s*s*s/24+(61-58*r+r*r+600*i-2.2240339282485886)*s*s*s*s*s*s/720));return l<0&&(y+=1e7),{northing:Math.round(y),easting:Math.round(v),zoneNumber:a,zoneLetter:(g=l,m="Z",84>=g&&g>=72?m="X":72>g&&g>=64?m="W":64>g&&g>=56?m="V":56>g&&g>=48?m="U":48>g&&g>=40?m="T":40>g&&g>=32?m="S":32>g&&g>=24?m="R":24>g&&g>=16?m="Q":16>g&&g>=8?m="P":8>g&&g>=0?m="N":0>g&&g>=-8?m="M":-8>g&&g>=-16?m="L":-16>g&&g>=-24?m="K":-24>g&&g>=-32?m="J":-32>g&&g>=-40?m="H":-40>g&&g>=-48?m="G":-48>g&&g>=-56?m="F":-56>g&&g>=-64?m="E":-64>g&&g>=-72?m="D":-72>g&&g>=-80&&(m="C"),m)}}({lat:t[1],lon:t[0]}),e)}function Hv(t){var e=Zv($v(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function qv(t){return t*(Math.PI/180)}function Xv(t){return t/Math.PI*180}function Zv(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var s,o,a,l,u,c,h,d,f,p=.9996,g=6378137,m=.00669438,v=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),y=n-5e5,b=e;r<"N"&&(b-=1e7),h=6*(i-1)-180+3,s=.006739496752268451,f=(d=b/p/6367449.145945056)+(3*v/2-27*v*v*v/32)*Math.sin(2*d)+(21*v*v/16-55*v*v*v*v/32)*Math.sin(4*d)+151*v*v*v/96*Math.sin(6*d),o=g/Math.sqrt(1-m*Math.sin(f)*Math.sin(f)),a=Math.tan(f)*Math.tan(f),l=s*Math.cos(f)*Math.cos(f),u=.99330562*g/Math.pow(1-m*Math.sin(f)*Math.sin(f),1.5),c=y/(o*p);var _=f-o*Math.tan(f)/u*(c*c/2-(5+3*a+10*l-4*l*l-9*s)*c*c*c*c/24+(61+90*a+298*l+45*a*a-1.6983531815716497-3*l*l)*c*c*c*c*c*c/720);_=Xv(_);var w,x=(c-(1+2*a+l)*c*c*c/6+(5-2*l+28*a-3*l*l+8*s+24*a*a)*c*c*c*c*c/120)/Math.cos(f);if(x=h+Xv(x),t.accuracy){var M=Zv({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});w={top:M.lat,right:M.lon,bottom:_,left:x}}else w={lat:_,lon:x};return w}function Yv(t){var e=t%6;return 0===e&&(e=6),e}function $v(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,r=null,i="",s=0;!/[A-Z]/.test(e=t.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+t;i+=e,s++}var o=parseInt(i,10);if(0===s||s+3>n)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(s++);if(a<="A"||"B"===a||"Y"===a||a>="Z"||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+t;r=t.substring(s,s+=2);for(var l=Yv(o),u=function(t,e){for(var n=jv.charCodeAt(e-1),r=1e5,i=!1;n!==t.charCodeAt(0);){if(++n===Uv&&n++,n===Vv&&n++,n>90){if(i)throw"Bad character: "+t;n=Bv,i=!0}r+=1e5}return r}(r.charAt(0),l),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=Dv.charCodeAt(e-1),r=0,i=!1;n!==t.charCodeAt(0);){if(++n===Uv&&n++,n===Vv&&n++,n>86){if(i)throw"Bad character: "+t;n=Bv,i=!0}r+=1e5}return r}(r.charAt(1),l);c<Qv(a);)c+=2e6;var h=n-s;if(h%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var d,f,p,g=h/2,m=0,v=0;return g>0&&(d=1e5/Math.pow(10,g),f=t.substring(s,s+g),m=parseFloat(f)*d,p=t.substring(s+g),v=parseFloat(p)*d),{easting:m+u,northing:v+c,zoneLetter:a,zoneNumber:o,accuracy:d}}function Qv(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Kv(t,e,n){if(!(this instanceof Kv))return new Kv(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Kv.fromMGRS=function(t){return new Kv(Hv(t))},Kv.prototype.toMGRS=function(t){return Gv([this.x,this.y],t)};const Jv=Kv;var ty=.046875,ey=.01953125,ny=.01068115234375;function ry(t){var e=[];e[0]=1-t*(.25+t*(ty+t*(ey+t*ny))),e[1]=t*(.75-t*(ty+t*(ey+t*ny)));var n=t*t;return e[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,e[3]=n*(.3645833333333333-.005696614583333333*t),e[4]=n*t*.3076171875,e}function iy(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}function sy(t,e,n){for(var r=1/(1-e),i=t,s=20;s;--s){var o=Math.sin(i),a=1-e*o*o;if(i-=a=(iy(i,o,Math.cos(i),n)-t)*(a*Math.sqrt(a))*r,Math.abs(a)<km)return i}return i}const oy={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=ry(this.es),this.ml0=iy(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,r,i=t.x,s=t.y,o=nv(i-this.long0),a=Math.sin(s),l=Math.cos(s);if(this.es){var u=l*o,c=Math.pow(u,2),h=this.ep2*Math.pow(l,2),d=Math.pow(h,2),f=Math.abs(l)>km?Math.tan(s):0,p=Math.pow(f,2),g=Math.pow(p,2);e=1-this.es*Math.pow(a,2),u/=Math.sqrt(e);var m=iy(s,a,l,this.en);n=this.a*(this.k0*u*(1+c/6*(1-p+h+c/20*(5-18*p+g+14*h-58*p*h+c/42*(61+179*g-g*p-479*p)))))+this.x0,r=this.a*(this.k0*(m-this.ml0+a*o*u/2*(1+c/12*(5-p+9*h+4*d+c/30*(61+g-58*p+270*h-330*p*h+c/56*(1385+543*g-g*p-3111*p))))))+this.y0}else{var v=l*Math.sin(o);if(Math.abs(Math.abs(v)-1)<km)return 93;if(n=.5*this.a*this.k0*Math.log((1+v)/(1-v))+this.x0,r=l*Math.cos(o)/Math.sqrt(1-Math.pow(v,2)),(v=Math.abs(r))>=1){if(v-1>km)return 93;r=0}else r=Math.acos(r);s<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return t.x=n,t.y=r,t},inverse:function(t){var e,n,r,i,s=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(n=sy(e=this.ml0+o/this.k0,this.es,this.en),Math.abs(n)<Cm){var a=Math.sin(n),l=Math.cos(n),u=Math.abs(l)>km?Math.tan(n):0,c=this.ep2*Math.pow(l,2),h=Math.pow(c,2),d=Math.pow(u,2),f=Math.pow(d,2);e=1-this.es*Math.pow(a,2);var p=s*Math.sqrt(e)/this.k0,g=Math.pow(p,2);r=n-(e*=u)*g/(1-this.es)*.5*(1-g/12*(5+3*d-9*c*d+c-4*h-g/30*(61+90*d-252*c*d+45*f+46*c-g/56*(1385+3633*d+4095*f+1574*f*d)))),i=nv(this.long0+p*(1-g/6*(1+2*d+c-g/20*(5+28*d+24*f+8*c*d+6*c-g/42*(61+662*d+1320*f+720*f*d))))/l)}else r=Cm*ev(o),i=0;else{var m=Math.exp(s/this.k0),v=.5*(m-1/m),y=this.lat0+o/this.k0,b=Math.cos(y);e=Math.sqrt((1-Math.pow(b,2))/(1+Math.pow(v,2))),r=Math.asin(e),o<0&&(r=-r),i=0===v&&0===b?0:nv(Math.atan2(v,b)+this.long0)}return t.x=i,t.y=r,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function ay(t){var e=Math.exp(t);return(e-1/e)/2}function ly(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))}function uy(t,e){for(var n,r=2*Math.cos(2*e),i=t.length-1,s=t[i],o=0;--i>=0;)n=r*s-o+t[i],o=s,s=n;return e+n*Math.sin(2*e)}function cy(t,e,n){for(var r,i,s=Math.sin(e),o=Math.cos(e),a=ay(n),l=function(t){var e=Math.exp(t);return(e+1/e)/2}(n),u=2*o*l,c=-2*s*a,h=t.length-1,d=t[h],f=0,p=0,g=0;--h>=0;)r=p,i=f,d=u*(p=d)-r-c*(f=g)+t[h],g=c*p-i+u*f;return[(u=s*l)*d-(c=o*a)*g,u*g+c*d]}const hy={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(oy.init.apply(this),this.forward=oy.forward,this.inverse=oy.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=.6650675310896665*n;var r=uy(this.cbg,this.lat0);this.Zb=-this.Qn*(r+function(t,e){for(var n,r=2*Math.cos(e),i=t.length-1,s=t[i],o=0;--i>=0;)n=r*s-o+t[i],o=s,s=n;return Math.sin(e)*n}(this.gtu,2*r))},forward:function(t){var e=nv(t.x-this.long0),n=t.y;n=uy(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),s=Math.sin(e),o=Math.cos(e);n=Math.atan2(r,o*i),e=Math.atan2(s*i,ly(r,i*o)),e=function(t){var e=Math.abs(t);return e=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}(e*(1+e/(ly(1,e)+1))),t<0?-e:e}(Math.tan(e));var a,l,u=cy(this.gtu,2*n,2*e);return n+=u[0],e+=u[1],Math.abs(e)<=2.623395162778?(a=this.a*(this.Qn*e)+this.x0,l=this.a*(this.Qn*n+this.Zb)+this.y0):(a=1/0,l=1/0),t.x=a,t.y=l,t},inverse:function(t){var e,n,r=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var s=cy(this.utg,2*i,2*r);i+=s[0],r+=s[1],r=Math.atan(ay(r));var o=Math.sin(i),a=Math.cos(i),l=Math.sin(r),u=Math.cos(r);i=Math.atan2(o*u,ly(l,u*a)),e=nv((r=Math.atan2(l,u*a))+this.long0),n=uy(this.cgb,i)}else e=1/0,n=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},dy={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(nv(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*Tm,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,hy.init.apply(this),this.forward=hy.forward,this.inverse=hy.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function fy(t,e){return Math.pow((1-t)/(1+t),e)}const py={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Lm)/(Math.pow(Math.tan(.5*this.lat0+Lm),this.C)*fy(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+Lm),this.C)*fy(this.e*Math.sin(n),this.ratexp))-Cm,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,r=Math.pow(Math.tan(.5*n+Lm)/this.K,1/this.C),i=20;i>0&&(n=2*Math.atan(r*fy(this.e*Math.sin(t.y),-.5*this.e))-Cm,!(Math.abs(n-t.y)<1e-14));--i)t.y=n;return i?(t.x=e,t.y=n,t):null},names:["gauss"]},gy={init:function(){py.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,r,i;return t.x=nv(t.x-this.long0),py.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,r,i,s;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,s=Math.sqrt(t.x*t.x+t.y*t.y)){var o=2*Math.atan2(s,this.R2);e=Math.sin(o),n=Math.cos(o),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/s),r=Math.atan2(t.x*e,s*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,py.inverse.apply(this,[t]),t.x=nv(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},my={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=km&&(this.k0=.5*(1+ev(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=km&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=km&&(this.k0=.5*this.cons*tv(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/rv(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=tv(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Cm,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,r,i,s,o,a=t.x,l=t.y,u=Math.sin(l),c=Math.cos(l),h=nv(a-this.long0);return Math.abs(Math.abs(a-this.long0)-Math.PI)<=km&&Math.abs(l+this.lat0)<=km?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*u+this.coslat0*c*Math.cos(h)),t.x=this.a*e*c*Math.sin(h)+this.x0,t.y=this.a*e*(this.coslat0*u-this.sinlat0*c*Math.cos(h))+this.y0,t):(n=2*Math.atan(this.ssfn_(l,u,this.e))-Cm,i=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=km?(s=rv(this.e,l*this.con,this.con*u),o=2*this.a*this.k0*s/this.cons,t.x=this.x0+o*Math.sin(a-this.long0),t.y=this.y0-this.con*o*Math.cos(a-this.long0),t):(Math.abs(this.sinlat0)<km?(e=2*this.a*this.k0/(1+i*Math.cos(h)),t.y=e*r):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*i*Math.cos(h))),t.y=e*(this.cosX0*r-this.sinX0*i*Math.cos(h))+this.y0),t.x=e*i*Math.sin(h)+this.x0,t))},inverse:function(t){var e,n,r,i,s;t.x-=this.x0,t.y-=this.y0;var o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,n=this.lat0,o<=km?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/o),e=Math.abs(this.coslat0)<km?this.lat0>0?nv(this.long0+Math.atan2(t.x,-1*t.y)):nv(this.long0+Math.atan2(t.x,t.y)):nv(this.long0+Math.atan2(t.x*Math.sin(a),o*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=km){if(o<=km)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=o*this.cons/(2*this.a*this.k0),n=this.con*iv(this.e,r),e=this.con*nv(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=km?s=this.X0:(s=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/o),e=nv(this.long0+Math.atan2(t.x*Math.sin(i),o*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),n=-1*iv(this.e,Math.tan(.5*(Cm+s)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(Cm+t))*Math.pow((1-e)/(1+e),.5*n)}},vy={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),s=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),a=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+s*e)/(1-s*e));this.K=o-this.alpha*a+this.alpha*s/2*l},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),s=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(s));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*o+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),o=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),a=this.lambda0+o/this.alpha,l=0,u=s,c=-1e3,h=0;Math.abs(u-c)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=a,t.y=u,t},names:["somerc"]};var yy=1e-7;const by={init:function(){var t,e,n,r,i,s,o,a,l,u,c,h=0,d=0,f=0,p=0,g=0,m=0,v=0;this.no_off=function(t){var e="object"==typeof t.PROJECTION?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(e)}(this),this.no_rot="no_rot"in this;var y=!1;"alpha"in this&&(y=!0);var b=!1;if("rectified_grid_angle"in this&&(b=!0),y&&(v=this.alpha),b&&(h=this.rectified_grid_angle*Tm),y||b)d=this.longc;else if(f=this.long1,g=this.lat1,p=this.long2,m=this.lat2,Math.abs(g-m)<=yy||(t=Math.abs(g))<=yy||Math.abs(t-Cm)<=yy||Math.abs(Math.abs(this.lat0)-Cm)<=yy||Math.abs(Math.abs(m)-Cm)<=yy)throw new Error;var _=1-this.es;e=Math.sqrt(_),Math.abs(this.lat0)>km?(a=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*a*a,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/_),this.A=this.B*this.k0*e/t,(i=(r=this.B*e/(n*Math.sqrt(t)))*r-1)<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(rv(this.e,this.lat0,a),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),y||b?(y?(c=Math.asin(Math.sin(v)/r),b||(h=v)):(c=h,v=Math.asin(r*Math.sin(c))),this.lam0=d-Math.asin(.5*(i-1/i)*Math.tan(c))/this.B):(s=Math.pow(rv(this.e,g,Math.sin(g)),this.B),o=Math.pow(rv(this.e,m,Math.sin(m)),this.B),i=this.E/s,l=(o-s)/(o+s),u=((u=this.E*this.E)-o*s)/(u+o*s),(t=f-p)<-Math.pi?p-=Om:t>Math.pi&&(p+=Om),this.lam0=nv(.5*(f+p)-Math.atan(u*Math.tan(.5*this.B*(f-p))/l)/this.B),c=Math.atan(2*Math.sin(this.B*nv(f-this.lam0))/(i-1/i)),h=v=Math.asin(r*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(h),this.cosrot=Math.cos(h),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(v))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(Lm-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(Lm+i))},forward:function(t){var e,n,r,i,s,o,a,l,u={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-Cm)>km){if(e=.5*((s=this.E/Math.pow(rv(this.e,t.y,Math.sin(t.y)),this.B))-(o=1/s)),n=.5*(s+o),i=Math.sin(this.B*t.x),r=(e*this.singam-i*this.cosgam)/n,Math.abs(Math.abs(r)-1)<km)throw new Error;l=.5*this.ArB*Math.log((1-r)/(1+r)),o=Math.cos(this.B*t.x),a=Math.abs(o)<yy?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+i*this.singam,o)}else l=t.y>0?this.v_pole_n:this.v_pole_s,a=this.ArB*t.y;return this.no_rot?(u.x=a,u.y=l):(a-=this.u_0,u.x=l*this.cosrot+a*this.sinrot,u.y=a*this.cosrot-l*this.sinrot),u.x=this.a*u.x+this.x0,u.y=this.a*u.y+this.y0,u},inverse:function(t){var e,n,r,i,s,o,a,l={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),i=.5*((r=Math.exp(-this.BrA*n))-1/r),s=.5*(r+1/r),a=((o=Math.sin(this.BrA*e))*this.cosgam+i*this.singam)/s,Math.abs(Math.abs(a)-1)<km)l.x=0,l.y=a<0?-Cm:Cm;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=iv(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},_y={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<km)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=tv(this.e,e,n),i=rv(this.e,this.lat1,e),s=Math.sin(this.lat2),o=Math.cos(this.lat2),a=tv(this.e,s,o),l=rv(this.e,this.lat2,s),u=rv(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>km?this.ns=Math.log(r/a)/Math.log(i/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=km&&(n=ev(n)*(Cm-2e-10));var r,i,s=Math.abs(Math.abs(n)-Cm);if(s>km)r=rv(this.e,n,Math.sin(n)),i=this.a*this.f0*Math.pow(r,this.ns);else{if((s=n*this.ns)<=0)return null;i=0}var o=this.ns*nv(e-this.long0);return t.x=this.k0*(i*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(o))+this.y0,t},inverse:function(t){var e,n,r,i,s,o=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+a*a),n=1):(e=-Math.sqrt(o*o+a*a),n=-1);var l=0;if(0!==e&&(l=Math.atan2(n*o,n*a)),0!==e||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),-9999===(i=iv(this.e,r)))return null}else i=-Cm;return s=nv(l/this.ns+this.long0),t.x=s,t.y=i,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},wy={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,r,i,s,o,a,l=t.x,u=t.y,c=nv(l-this.long0);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),r=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),s=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),o=this.n*s,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=a*Math.cos(o)/1,t.x=a*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,r,i,s,o,a,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),s=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,o=e,a=0;var u=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-t.y)<1e-10&&(a=1),o=t.y,u+=1}while(0===a&&u<15);return u>=15?null:t},names:["Krovak","krovak"]};function xy(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)}function My(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function Sy(t){return.375*t*(1+.25*t*(1+.46875*t))}function Py(t){return.05859375*t*t*(1+.75*t)}function Ey(t){return t*t*t*(35/3072)}function Cy(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)}function ky(t){return Math.abs(t)<Cm?t:t-ev(t)*Math.PI}function Ty(t,e,n,r,i){var s,o;s=t/e;for(var a=0;a<15;a++)if(s+=o=(t-(e*s-n*Math.sin(2*s)+r*Math.sin(4*s)-i*Math.sin(6*s)))/(e-2*n*Math.cos(2*s)+4*r*Math.cos(4*s)-6*i*Math.cos(6*s)),Math.abs(o)<=1e-10)return s;return NaN}const Ay={init:function(){this.sphere||(this.e0=My(this.es),this.e1=Sy(this.es),this.e2=Py(this.es),this.e3=Ey(this.es),this.ml0=this.a*xy(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,r=t.x,i=t.y;if(r=nv(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var s=Math.sin(i),o=Math.cos(i),a=Cy(this.a,this.e,s),l=Math.tan(i)*Math.tan(i),u=r*Math.cos(i),c=u*u,h=this.es*o*o/(1-this.es);e=a*u*(1-c*l*(1/6-(8-l+8*h)*c/120)),n=this.a*xy(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+a*s/o*c*(.5+(5-l+6*h)*c/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r=t.x/this.a,i=t.y/this.a;if(this.sphere){var s=i+this.lat0;e=Math.asin(Math.sin(s)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(s))}else{var o=Ty(this.ml0/this.a+i,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-Cm)<=km)return t.x=this.long0,t.y=Cm,i<0&&(t.y*=-1),t;var a=Cy(this.a,this.e,Math.sin(o)),l=a*a*a/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(o),2),c=r*this.a/a,h=c*c;e=o-a*Math.tan(o)/l*c*c*(.5-(1+3*u)*c*c/24),n=c*(1-h*(u/3+(1+3*u)*u*h/15))/Math.cos(o)}return t.x=nv(n+this.long0),t.y=ky(e),t},names:["Cassini","Cassini_Soldner","cass"]};function Ly(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e}const Oy={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-Cm)<km?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<km?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=Ly(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=.3333333333333333*t,e=t*t,n[0]+=.17222222222222222*e,n[1]=.06388888888888888*e,e*=t,n[0]+=.10257936507936508*e,n[1]+=.0664021164021164*e,n[2]=.016415012942191543*e,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Ly(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,r,i,s,o,a,l,u,c,h=t.x,d=t.y;if(h=nv(h-this.long0),this.sphere){if(s=Math.sin(d),c=Math.cos(d),r=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+c*r:1+this.sinph0*s+this.cosph0*c*r)<=km)return null;e=(n=Math.sqrt(2/n))*c*Math.sin(h),n*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*c*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(d+this.lat0)<km)return null;n=Lm-.5*d,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(h),n*=r}}else{switch(a=0,l=0,u=0,r=Math.cos(h),i=Math.sin(h),s=Math.sin(d),o=Ly(this.e,s),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(a=o/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:u=1+this.sinb1*a+this.cosb1*l*r;break;case this.EQUIT:u=1+l*r;break;case this.N_POLE:u=Cm+d,o=this.qp-o;break;case this.S_POLE:u=d-Cm,o=this.qp+o}if(Math.abs(u)<km)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),n=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*a-this.sinb1*l*r):(u=Math.sqrt(2/(1+l*r)))*a*this.ymf,e=this.xmf*u*l*i;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(u=Math.sqrt(o))*i,n=r*(this.mode===this.S_POLE?u:-u)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,s,o,a,l=t.x/this.a,u=t.y/this.a;if(this.sphere){var c,h=0,d=0;if((n=.5*(c=Math.sqrt(l*l+u*u)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(d=Math.sin(n),h=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(c)<=km?0:Math.asin(u*d/c),l*=d,u=h*c;break;case this.OBLIQ:n=Math.abs(c)<=km?this.lat0:Math.asin(h*this.sinph0+u*d*this.cosph0/c),l*=d*this.cosph0,u=(h-Math.sin(n)*this.sinph0)*c;break;case this.N_POLE:u=-u,n=Cm-n;break;case this.S_POLE:n-=Cm}e=0!==u||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,u):0}else{if(a=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,u*=this.dd,(o=Math.sqrt(l*l+u*u))<km)return t.x=this.long0,t.y=this.lat0,t;i=2*Math.asin(.5*o/this.rq),r=Math.cos(i),l*=i=Math.sin(i),this.mode===this.OBLIQ?(a=r*this.sinb1+u*i*this.cosb1/o,s=this.qp*a,u=o*this.cosb1*r-u*this.sinb1*i):(a=u*i/o,s=this.qp*a,u=o*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(u=-u),!(s=l*l+u*u))return t.x=this.long0,t.y=this.lat0,t;a=1-s/this.qp,this.mode===this.S_POLE&&(a=-a)}e=Math.atan2(l,u),n=function(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}(Math.asin(a),this.apa)}return t.x=nv(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function Iy(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}const Ry={init:function(){Math.abs(this.lat1+this.lat2)<km||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=tv(this.e3,this.sin_po,this.cos_po),this.qs1=Ly(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=tv(this.e3,this.sin_po,this.cos_po),this.qs2=Ly(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Ly(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>km?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=Ly(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,s=this.ns0*nv(e-this.long0),o=i*Math.sin(s)+this.x0,a=this.rh-i*Math.cos(s)+this.y0;return t.x=o,t.y=a,t},inverse:function(t){var e,n,r,i,s,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,0!==e&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,o=this.phi1z(this.e3,n)),s=nv(i/this.ns0+this.long0),t.x=s,t.y=o,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,r,i,s,o=Iy(.5*e);if(t<km)return o;for(var a=t*t,l=1;l<=25;l++)if(o+=s=.5*(i=1-(r=t*(n=Math.sin(o)))*r)*i/Math.cos(o)*(e/(1-a)-n/i+.5/t*Math.log((1-r)/(1+r))),Math.abs(s)<=1e-7)return o;return null}},zy={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,r,i,s,o,a,l=t.x,u=t.y;return r=nv(l-this.long0),e=Math.sin(u),n=Math.cos(u),i=Math.cos(r),(s=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(s)<=km?(o=this.x0+1*this.a*n*Math.sin(r)/s,a=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)/s):(o=this.x0+this.infinity_dist*n*Math.sin(r),a=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=o,t.y=a,t},inverse:function(t){var e,n,r,i,s,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),o=Iy((r=Math.cos(i))*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),s=nv(this.long0+s)):(o=this.phic0,s=0),t.x=s,t.y=o,t},names:["gnom"]},Fy={init:function(){this.sphere||(this.k0=tv(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,r=t.x,i=t.y,s=nv(r-this.long0);if(this.sphere)e=this.x0+this.a*s*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var o=Ly(this.e,Math.sin(i));e=this.x0+this.a*this.k0*s,n=this.y0+this.a*o*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=nv(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*Cm:Cm;for(var r,i,s,o,a=Math.asin(.5*e),l=0;l<30;l++)if(i=Math.sin(a),s=Math.cos(a),o=t*i,a+=r=Math.pow(1-o*o,2)/(2*s)*(e/(1-t*t)-i/(1-o*o)+.5/t*Math.log((1-o)/(1+o))),Math.abs(r)<=1e-10)return a;return NaN}(this.e,2*t.y*this.k0/this.a),e=nv(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]},Ny={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,r=nv(e-this.long0),i=ky(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t},inverse:function(t){var e=t.x,n=t.y;return t.x=nv(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=ky(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},jy={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=My(this.es),this.e1=Sy(this.es),this.e2=Py(this.es),this.e3=Ey(this.es),this.ml0=this.a*xy(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,r,i=t.x,s=t.y,o=nv(i-this.long0);if(r=o*Math.sin(s),this.sphere)Math.abs(s)<=km?(e=this.a*o,n=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(s),n=this.a*(ky(s-this.lat0)+(1-Math.cos(r))/Math.tan(s)));else if(Math.abs(s)<=km)e=this.a*o,n=-1*this.ml0;else{var a=Cy(this.a,this.e,Math.sin(s))/Math.tan(s);e=a*Math.sin(r),n=this.a*xy(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+a*(1-Math.cos(r))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,r,i,s,o,a,l,u;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=km)e=nv(r/this.a+this.long0),n=0;else{var c;for(o=this.lat0+i/this.a,a=r*r/this.a/this.a+o*o,l=o,s=20;s;--s)if(l+=u=-1*(o*(l*(c=Math.tan(l))+1)-l-.5*(l*l+a)*c)/((l-o)/c-1),Math.abs(u)<=km){n=l;break}e=nv(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=km)n=0,e=nv(this.long0+r/this.a);else{var h,d,f,p,g;for(o=(this.ml0+i)/this.a,a=r*r/this.a/this.a+o*o,l=o,s=20;s;--s)if(g=this.e*Math.sin(l),h=Math.sqrt(1-g*g)*Math.tan(l),d=this.a*xy(this.e0,this.e1,this.e2,this.e3,l),f=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=u=(o*(h*(p=d/this.a)+1)-p-.5*h*(p*p+a))/(this.es*Math.sin(2*l)*(p*p+a-2*o*p)/(4*h)+(o-p)*(h*f-2/Math.sin(2*l))-f),Math.abs(u)<=km){n=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=nv(this.long0+Math.asin(r*h/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]},Dy={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,r=t.y-this.lat0,i=n-this.long0,s=r/Em*1e-5,o=i,a=1,l=0;for(e=1;e<=10;e++)a*=s,l+=this.A[e]*a;var u,c=l,h=o,d=1,f=0,p=0,g=0;for(e=1;e<=6;e++)u=f*c+d*h,d=d*c-f*h,f=u,p=p+this.B_re[e]*d-this.B_im[e]*f,g=g+this.B_im[e]*d+this.B_re[e]*f;return t.x=g*this.a+this.x0,t.y=p*this.a+this.y0,t},inverse:function(t){var e,n,r=t.x,i=t.y,s=r-this.x0,o=(i-this.y0)/this.a,a=s/this.a,l=1,u=0,c=0,h=0;for(e=1;e<=6;e++)n=u*o+l*a,l=l*o-u*a,u=n,c=c+this.C_re[e]*l-this.C_im[e]*u,h=h+this.C_im[e]*l+this.C_re[e]*u;for(var d=0;d<this.iterations;d++){var f,p=c,g=h,m=o,v=a;for(e=2;e<=6;e++)f=g*c+p*h,p=p*c-g*h,g=f,m+=(e-1)*(this.B_re[e]*p-this.B_im[e]*g),v+=(e-1)*(this.B_im[e]*p+this.B_re[e]*g);p=1,g=0;var y=this.B_re[1],b=this.B_im[1];for(e=2;e<=6;e++)f=g*c+p*h,p=p*c-g*h,g=f,y+=e*(this.B_re[e]*p-this.B_im[e]*g),b+=e*(this.B_im[e]*p+this.B_re[e]*g);var _=y*y+b*b;c=(m*y+v*b)/_,h=(v*y-m*b)/_}var w=c,x=h,M=1,S=0;for(e=1;e<=9;e++)M*=w,S+=this.D[e]*M;var P=this.lat0+S*Em*1e5,E=this.long0+x;return t.x=E,t.y=P,t},names:["New_Zealand_Map_Grid","nzmg"]},By={init:function(){},forward:function(t){var e=t.x,n=t.y,r=nv(e-this.long0),i=this.x0+this.a*r,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=s,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=nv(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]},Uy={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=ry(this.es)},forward:function(t){var e,n,r=t.x,i=t.y;if(r=nv(r-this.long0),this.sphere){if(this.m)for(var s=this.n*Math.sin(i),o=20;o;--o){var a=(this.m*i+Math.sin(i)-s)/(this.m+Math.cos(i));if(i-=a,Math.abs(a)<km)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var l=Math.sin(i),u=Math.cos(i);n=this.a*iy(i,l,u,this.en),e=this.a*r*u/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n/=this.C_x*(this.m+Math.cos(e)),this.m?e=Iy((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=Iy(Math.sin(e)/this.n)),n=nv(n+this.long0),e=ky(e)):(e=sy(t.y/this.a,this.es,this.en),(r=Math.abs(e))<Cm?(r=Math.sin(e),n=nv(this.long0+t.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)))):r-km<Cm&&(n=this.long0)),t.x=n,t.y=e,t},names:["Sinusoidal","sinu"]},Vy={init:function(){},forward:function(t){for(var e=t.x,n=t.y,r=nv(e-this.long0),i=n,s=Math.PI*Math.sin(n);;){var o=-(i+Math.sin(i)-s)/(1+Math.cos(i));if(i+=o,Math.abs(o)<km)break}i/=2,Math.PI/2-Math.abs(n)<km&&(r=0);var a=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=a,t.y=l,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=nv(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t},names:["Mollweide","moll"]},Wy={init:function(){Math.abs(this.lat1+this.lat2)<km||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=My(this.es),this.e1=Sy(this.es),this.e2=Py(this.es),this.e3=Ey(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=tv(this.e,this.sinphi,this.cosphi),this.ml1=xy(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<km?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=tv(this.e,this.sinphi,this.cosphi),this.ml2=xy(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=xy(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var i=xy(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-i)}var s=this.ns*nv(n-this.long0),o=this.x0+e*Math.sin(s),a=this.y0+this.rh-e*Math.cos(s);return t.x=o,t.y=a,t},inverse:function(t){var e,n,r,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var s=0;return 0!==n&&(s=Math.atan2(e*t.x,e*t.y)),this.sphere?(i=nv(this.long0+s/this.ns),r=ky(this.g-n/this.a),t.x=i,t.y=r,t):(r=Ty(this.g-n/this.a,this.e0,this.e1,this.e2,this.e3),i=nv(this.long0+s/this.ns),t.x=i,t.y=r,t)},names:["Equidistant_Conic","eqdc"]},Gy={init:function(){this.R=this.a},forward:function(t){var e,n,r=t.x,i=t.y,s=nv(r-this.long0);Math.abs(i)<=km&&(e=this.x0+this.R*s,n=this.y0);var o=Iy(2*Math.abs(i/Math.PI));(Math.abs(s)<=km||Math.abs(Math.abs(i)-Cm)<=km)&&(e=this.x0,n=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*o):this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/s-s/Math.PI),l=a*a,u=Math.sin(o),c=Math.cos(o),h=c/(u+c-1),d=h*h,f=h*(2/u-1),p=f*f,g=Math.PI*this.R*(a*(h-p)+Math.sqrt(l*(h-p)*(h-p)-(p+l)*(d-p)))/(p+l);s<0&&(g=-g),e=this.x0+g;var m=l+h;return g=Math.PI*this.R*(f*m-a*Math.sqrt((p+l)*(l+1)-m*m))/(p+l),n=i>=0?this.y0+g:this.y0-g,t.x=e,t.y=n,t},inverse:function(t){var e,n,r,i,s,o,a,l,u,c,h,d;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,s=(r=t.x/h)*r+(i=t.y/h)*i,h=3*(i*i/(l=-2*(o=-Math.abs(i)*(1+s))+1+2*i*i+s*s)+(2*(a=o-2*i*i+r*r)*a*a/l/l/l-9*o*a/l/l)/27)/(u=(o-a*a/3/l)/l)/(c=2*Math.sqrt(-u/3)),Math.abs(h)>1&&(h=h>=0?1:-1),d=Math.acos(h)/3,n=t.y>=0?(-c*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI:-(-c*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI,e=Math.abs(r)<km?this.long0:nv(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(r*r-i*i)+s*s))/2/r),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},Hy={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,s,o,a,l,u,c,h,d,f,p,g,m,v,y,b,_,w,x,M=t.x,S=t.y,P=Math.sin(t.y),E=Math.cos(t.y),C=nv(M-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=km?(t.x=this.x0+this.a*(Cm-S)*Math.sin(C),t.y=this.y0-this.a*(Cm-S)*Math.cos(C),t):Math.abs(this.sin_p12+1)<=km?(t.x=this.x0+this.a*(Cm+S)*Math.sin(C),t.y=this.y0+this.a*(Cm+S)*Math.cos(C),t):(y=this.sin_p12*P+this.cos_p12*E*Math.cos(C),v=(m=Math.acos(y))?m/Math.sin(m):1,t.x=this.x0+this.a*v*E*Math.sin(C),t.y=this.y0+this.a*v*(this.cos_p12*P-this.sin_p12*E*Math.cos(C)),t):(e=My(this.es),n=Sy(this.es),r=Py(this.es),i=Ey(this.es),Math.abs(this.sin_p12-1)<=km?(s=this.a*xy(e,n,r,i,Cm),o=this.a*xy(e,n,r,i,S),t.x=this.x0+(s-o)*Math.sin(C),t.y=this.y0-(s-o)*Math.cos(C),t):Math.abs(this.sin_p12+1)<=km?(s=this.a*xy(e,n,r,i,Cm),o=this.a*xy(e,n,r,i,S),t.x=this.x0+(s+o)*Math.sin(C),t.y=this.y0+(s+o)*Math.cos(C),t):(a=P/E,l=Cy(this.a,this.e,this.sin_p12),u=Cy(this.a,this.e,P),c=Math.atan((1-this.es)*a+this.es*l*this.sin_p12/(u*E)),b=0===(h=Math.atan2(Math.sin(C),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(C)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(h)-Math.PI)<=km?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(C)*Math.cos(c)/Math.sin(h)),d=this.e*this.sin_p12/Math.sqrt(1-this.es),m=l*b*(1-(_=b*b)*(g=(f=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es))*f)*(1-g)/6+(w=_*b)/8*(p=d*f)*(1-2*g)+(x=w*b)/120*(g*(4-7*g)-3*d*d*(1-7*g))-x*b/48*p),t.x=this.x0+m*Math.sin(h),t.y=this.y0+m*Math.cos(h),t))},inverse:function(t){var e,n,r,i,s,o,a,l,u,c,h,d,f,p,g,m,v,y,b,_,w,x,M;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*Cm*this.a)return;return n=e/this.a,r=Math.sin(n),i=Math.cos(n),s=this.long0,Math.abs(e)<=km?o=this.lat0:(o=Iy(i*this.sin_p12+t.y*r*this.cos_p12/e),a=Math.abs(this.lat0)-Cm,s=Math.abs(a)<=km?this.lat0>=0?nv(this.long0+Math.atan2(t.x,-t.y)):nv(this.long0-Math.atan2(-t.x,t.y)):nv(this.long0+Math.atan2(t.x*r,e*this.cos_p12*i-t.y*this.sin_p12*r))),t.x=s,t.y=o,t}return l=My(this.es),u=Sy(this.es),c=Py(this.es),h=Ey(this.es),Math.abs(this.sin_p12-1)<=km?(o=Ty(((d=this.a*xy(l,u,c,h,Cm))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,l,u,c,h),s=nv(this.long0+Math.atan2(t.x,-1*t.y)),t.x=s,t.y=o,t):Math.abs(this.sin_p12+1)<=km?(d=this.a*xy(l,u,c,h,Cm),o=Ty(((e=Math.sqrt(t.x*t.x+t.y*t.y))-d)/this.a,l,u,c,h),s=nv(this.long0+Math.atan2(t.x,t.y)),t.x=s,t.y=o,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),g=Math.atan2(t.x,t.y),f=Cy(this.a,this.e,this.sin_p12),m=Math.cos(g),y=-(v=this.e*this.cos_p12*m)*v/(1-this.es),b=3*this.es*(1-y)*this.sin_p12*this.cos_p12*m/(1-this.es),x=1-y*(w=(_=e/f)-y*(1+y)*Math.pow(_,3)/6-b*(1+3*y)*Math.pow(_,4)/24)*w/2-_*w*w*w/6,p=Math.asin(this.sin_p12*Math.cos(w)+this.cos_p12*Math.sin(w)*m),s=nv(this.long0+Math.asin(Math.sin(g)*Math.sin(w)/Math.cos(p))),M=Math.sin(p),o=Math.atan2((M-this.es*x*this.sin_p12)*Math.tan(p),M*(1-this.es)),t.x=s,t.y=o,t)},names:["Azimuthal_Equidistant","aeqd"]},qy={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,s,o,a,l=t.x,u=t.y;return r=nv(l-this.long0),e=Math.sin(u),n=Math.cos(u),i=Math.cos(r),((s=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(s)<=km)&&(o=1*this.a*n*Math.sin(r),a=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)),t.x=o,t.y=a,t},inverse:function(t){var e,n,r,i,s,o,a;return t.x-=this.x0,t.y-=this.y0,n=Iy((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),r=Math.sin(n),i=Math.cos(n),o=this.long0,Math.abs(e)<=km?(a=this.lat0,t.x=o,t.y=a,t):(a=Iy(i*this.sin_p14+t.y*r*this.cos_p14/e),s=Math.abs(this.lat0)-Cm,Math.abs(s)<=km?(o=this.lat0>=0?nv(this.long0+Math.atan2(t.x,-t.y)):nv(this.long0-Math.atan2(-t.x,t.y)),t.x=o,t.y=a,t):(o=nv(this.long0+Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r)),t.x=o,t.y=a,t))},names:["ortho"]};function Xy(t,e,n,r){var i;return t<km?(r.value=1,i=0):(i=Math.atan2(e,n),Math.abs(i)<=Lm?r.value=1:i>Lm&&i<=Cm+Lm?(r.value=2,i-=Cm):i>Cm+Lm||i<=-(Cm+Lm)?(r.value=3,i=i>=0?i-Im:i+Im):(r.value=4,i+=Cm)),i}function Zy(t,e){var n=t+e;return n<-Im?n+=Om:n>+Im&&(n-=Om),n}const Yy={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Cm-Lm/2?this.face=5:this.lat0<=-(Cm-Lm/2)?this.face=6:Math.abs(this.long0)<=Lm?this.face=1:Math.abs(this.long0)<=Cm+Lm?this.face=this.long0>0?2:4:this.face=3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,n,r,i,s,o,a={x:0,y:0},l={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,5===this.face)i=Cm-e,n>=Lm&&n<=Cm+Lm?(l.value=1,r=n-Cm):n>Cm+Lm||n<=-(Cm+Lm)?(l.value=2,r=n>0?n-Im:n+Im):n>-(Cm+Lm)&&n<=-Lm?(l.value=3,r=n+Cm):(l.value=4,r=n);else if(6===this.face)i=Cm+e,n>=Lm&&n<=Cm+Lm?(l.value=1,r=-n+Cm):n<Lm&&n>=-Lm?(l.value=2,r=-n):n<-Lm&&n>=-(Cm+Lm)?(l.value=3,r=-n-Cm):(l.value=4,r=n>0?-n+Im:-n-Im);else{var u,c,h,d,f,p;2===this.face?n=Zy(n,+Cm):3===this.face?n=Zy(n,+Im):4===this.face&&(n=Zy(n,-Cm)),d=Math.sin(e),f=Math.cos(e),p=Math.sin(n),u=f*Math.cos(n),c=f*p,h=d,1===this.face?r=Xy(i=Math.acos(u),h,c,l):2===this.face?r=Xy(i=Math.acos(c),h,-u,l):3===this.face?r=Xy(i=Math.acos(-u),h,-c,l):4===this.face?r=Xy(i=Math.acos(-c),h,u,l):(i=r=0,l.value=1)}return o=Math.atan(12/Im*(r+Math.acos(Math.sin(r)*Math.cos(Lm))-Cm)),s=Math.sqrt((1-Math.cos(i))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(r))))),2===l.value?o+=Cm:3===l.value?o+=Im:4===l.value&&(o+=1.5*Im),a.x=s*Math.cos(o),a.y=s*Math.sin(o),a.x=a.x*this.a+this.x0,a.y=a.y*this.a+this.y0,t.x=a.x,t.y=a.y,t},inverse:function(t){var e,n,r,i,s,o,a,l,u,c,h,d,f={lam:0,phi:0},p={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?p.value=1:t.y>=0&&t.y>=Math.abs(t.x)?(p.value=2,e-=Cm):t.x<0&&-t.x>=Math.abs(t.y)?(p.value=3,e=e<0?e+Im:e-Im):(p.value=4,e+=Cm),u=Im/12*Math.tan(e),s=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),o=Math.atan(s),(a=1-(r=Math.cos(e))*r*(i=Math.tan(n))*i*(1-Math.cos(Math.atan(1/Math.cos(o)))))<-1?a=-1:a>1&&(a=1),5===this.face)l=Math.acos(a),f.phi=Cm-l,1===p.value?f.lam=o+Cm:2===p.value?f.lam=o<0?o+Im:o-Im:3===p.value?f.lam=o-Cm:f.lam=o;else if(6===this.face)l=Math.acos(a),f.phi=l-Cm,1===p.value?f.lam=-o+Cm:2===p.value?f.lam=-o:3===p.value?f.lam=-o-Cm:f.lam=o<0?-o-Im:-o+Im;else{var g,m,v;u=(g=a)*g,m=(u+=(v=u>=1?0:Math.sqrt(1-u)*Math.sin(o))*v)>=1?0:Math.sqrt(1-u),2===p.value?(u=m,m=-v,v=u):3===p.value?(m=-m,v=-v):4===p.value&&(u=m,m=v,v=-u),2===this.face?(u=g,g=-m,m=u):3===this.face?(g=-g,m=-m):4===this.face&&(u=g,g=m,m=-u),f.phi=Math.acos(-v)-Cm,f.lam=Math.atan2(m,g),2===this.face?f.lam=Zy(f.lam,-Cm):3===this.face?f.lam=Zy(f.lam,-Im):4===this.face&&(f.lam=Zy(f.lam,+Cm))}return 0!==this.es&&(c=f.phi<0?1:0,h=Math.tan(f.phi),d=this.b/Math.sqrt(h*h+this.one_minus_f_squared),f.phi=Math.atan(Math.sqrt(this.a*this.a-d*d)/(this.one_minus_f*d)),c&&(f.phi=-f.phi)),f.lam+=this.long0,t.x=f.lam,t.y=f.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var $y=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Qy=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Ky=.8487,Jy=1.3523,tb=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};const eb={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=nv(t.x-this.long0),n=Math.abs(t.y),r=Math.floor(11.459155902616464*n);r<0?r=0:r>=18&&(r=17);var i={x:tb($y[r],n=Am*(n-.08726646259971647*r))*e,y:tb(Qy[r],n)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*Ky+this.x0,i.y=i.y*this.a*Jy+this.y0,i},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*Ky),y:Math.abs(t.y-this.y0)/(this.a*Jy)};if(e.y>=1)e.x/=$y[18][0],e.y=t.y<0?-Cm:Cm;else{var n=Math.floor(18*e.y);for(n<0?n=0:n>=18&&(n=17);;)if(Qy[n][0]>e.y)--n;else{if(!(Qy[n+1][0]<=e.y))break;++n}var r=Qy[n],i=5*(e.y-r[0])/(Qy[n+1][0]-r[0]);i=function(t,e,n,r){for(var i=e;r;--r){var s=t(i);if(i-=s,Math.abs(s)<1e-10)break}return i}((function(t){return(tb(r,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(r,t)}),i,0,100),e.x/=tb($y[n],i),e.y=(5*n+i)*Tm,t.y<0&&(e.y=-e.y)}return e.x=nv(e.x+this.long0),e},names:["Robinson","robin"]},nb={init:function(){this.name="geocent"},forward:function(t){return Sv(t,this.es,this.a)},inverse:function(t){return Pv(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var rb={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const ib={init:function(){if(Object.keys(rb).forEach(function(t){if(void 0===this[t])this[t]=rb[t].def;else{if(rb[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);rb[t].num&&(this[t]=parseFloat(this[t]))}rb[t].degrees&&(this[t]=this[t]*Tm)}.bind(this)),Math.abs(Math.abs(this.lat0)-Cm)<km?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<km?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,n,r,i,s=Math.sin(t.y),o=Math.cos(t.y),a=Math.cos(t.x);switch(this.mode){case 3:n=this.sinph0*s+this.cosph0*o*a;break;case 2:n=o*a;break;case 1:n=-s;break;case 0:n=s}switch(e=(n=this.pn1/(this.p-n))*o*Math.sin(t.x),this.mode){case 3:n*=this.cosph0*s-this.sinph0*o*a;break;case 2:n*=s;break;case 0:n*=-o*a;break;case 1:n*=o*a}return i=1/((r=n*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-n*this.sg)*this.cw*i,n=r*i,t.x=e*this.a,t.y=n*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,n,r,i={x:t.x,y:t.y};r=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*r,n=this.pn1*t.y*this.cw*r,t.x=e*this.cg+n*this.sg,t.y=n*this.cg-e*this.sg;var s=ly(t.x,t.y);if(Math.abs(s)<km)i.x=0,i.y=t.y;else{var o,a;switch(a=1-s*s*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/s+s/this.pn1),o=Math.sqrt(1-a*a),this.mode){case 3:i.y=Math.asin(o*this.sinph0+t.y*a*this.cosph0/s),t.y=(o-this.sinph0*Math.sin(i.y))*s,t.x*=a*this.cosph0;break;case 2:i.y=Math.asin(t.y*a/s),t.y=o*s,t.x*=a;break;case 0:i.y=Math.asin(o),t.y=-t.y;break;case 1:i.y=-Math.asin(o)}i.x=Math.atan2(t.x,t.y)}return t.x=i.x+this.long0,t.y=i.y,t},names:["Tilted_Perspective","tpers"]},sb={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,n,r,i,s=t.x,o=t.y;if(s-=this.long0,"ellipse"===this.shape){o=Math.atan(this.radius_p2*Math.tan(o));var a=this.radius_p/ly(this.radius_p*Math.cos(o),Math.sin(o));if(n=a*Math.cos(s)*Math.cos(o),r=a*Math.sin(s)*Math.cos(o),i=a*Math.sin(o),(this.radius_g-n)*n-r*r-i*i*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/ly(i,e)),t.y=this.radius_g_1*Math.atan(i/e)):(t.x=this.radius_g_1*Math.atan(r/e),t.y=this.radius_g_1*Math.atan(i/ly(r,e)))}else"sphere"===this.shape&&(e=Math.cos(o),n=Math.cos(s)*e,r=Math.sin(s)*e,i=Math.sin(o),e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/ly(i,e)),t.y=this.radius_g_1*Math.atan(i/e)):(t.x=this.radius_g_1*Math.atan(r/e),t.y=this.radius_g_1*Math.atan(i/ly(r,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,n,r,i,s=-1,o=0,a=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),o=Math.tan(t.x/this.radius_g_1)*ly(1,a)):(o=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*ly(1,o));var l=a/this.radius_p;if(e=o*o+l*l+s*s,(r=(n=2*this.radius_g*s)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=(-n-Math.sqrt(r))/(2*e),s=this.radius_g+i*s,o*=i,a*=i,t.x=Math.atan2(o,s),t.y=Math.atan(a*Math.cos(t.x)/s),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),o=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+a*a)):(o=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+o*o)),e=o*o+a*a+s*s,(r=(n=2*this.radius_g*s)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=(-n-Math.sqrt(r))/(2*e),s=this.radius_g+i*s,o*=i,a*=i,t.x=Math.atan2(o,s),t.y=Math.atan(a*Math.cos(t.x)/s)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};var ob;Nv.defaultDatum="WGS84",Nv.Proj=Mv,Nv.WGS84=new Nv.Proj("WGS84"),Nv.Point=Jv,Nv.toPoint=Lv,Nv.defs=$m,Nv.nadgrid=function(t,e){var n=new DataView(e),r=function(t){var e=t.getInt32(8,!1);return 11!==e&&(11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(n),i=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:yv(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(n,r);i.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var s=function(t,e,n){for(var r=[],i=0;i<e.nSubgrids;i++){var s=_v(t,176,n),o=wv(t,176,s,n),a=Math.round(1+(s.upperLongitude-s.lowerLongitude)/s.longitudeInterval),l=Math.round(1+(s.upperLatitude-s.lowerLatitude)/s.latitudeInterval);r.push({ll:[vv(s.lowerLongitude),vv(s.lowerLatitude)],del:[vv(s.longitudeInterval),vv(s.latitudeInterval)],lim:[a,l],count:s.gridNodeCount,cvs:bv(o)})}return r}(n,i,r),o={header:i,subgrids:s};return gv[t]=o,o},Nv.transform=Iv,Nv.mgrs=Wv,Nv.version="__VERSION__",(ob=Nv).Proj.projections.add(oy),ob.Proj.projections.add(hy),ob.Proj.projections.add(dy),ob.Proj.projections.add(gy),ob.Proj.projections.add(my),ob.Proj.projections.add(vy),ob.Proj.projections.add(by),ob.Proj.projections.add(_y),ob.Proj.projections.add(wy),ob.Proj.projections.add(Ay),ob.Proj.projections.add(Oy),ob.Proj.projections.add(Ry),ob.Proj.projections.add(zy),ob.Proj.projections.add(Fy),ob.Proj.projections.add(Ny),ob.Proj.projections.add(jy),ob.Proj.projections.add(Dy),ob.Proj.projections.add(By),ob.Proj.projections.add(Uy),ob.Proj.projections.add(Vy),ob.Proj.projections.add(Wy),ob.Proj.projections.add(Gy),ob.Proj.projections.add(Hy),ob.Proj.projections.add(qy),ob.Proj.projections.add(Yy),ob.Proj.projections.add(eb),ob.Proj.projections.add(nb),ob.Proj.projections.add(ib),ob.Proj.projections.add(sb);const ab=Nv;function lb(t){return t.map((t=>{const e=[t.initial_bounds.slice(0,2),t.initial_bounds.slice(2,4)].map((e=>ab(`+proj=longlat +ellps=bessel +towgs84=${t.towgs84.join(",")} +no_defs +type=crs`,"WGS84",e))),n=t.initial_mapbox_bounds.map((e=>ab(`+proj=longlat +ellps=bessel +towgs84=${t.towgs84.join(",")} +no_defs +type=crs`,"WGS84",e)));return{...t,bounds:e.flat(),mapbox_bounds:n}}))}const ub={data:[],status:"initial",layer:{show_kaek_area:!0,show_forest_area:!1,show_nuts:!1,show_euroregional_area:!1,show_coastline:!1,show_borders:!1,show_hmgs_borders:!1,show_satelite:!1,show_municipalities:!1,show_hmgs_tiles:!1,show_historic_map:!1,c:0,bitmap:{initial:!1,opacity:0}},historic:lb([{id:"00",initial_bounds:[[[25,49,30],[40,43,0]],[[25,59,30],[40,48,0]]],towgs84:[0,0,0]},{id:"01",initial_bounds:[[[26,18,11.9],[41,35,0]],[[26,28,11.9],[41,45,0]]],towgs84:[-50,50,0]},{id:"02",initial_bounds:[[[26,28,11.9],[41,35,0]],[[26,38,11.9],[41,45,0]]],towgs84:[50,-11,0]},{id:"03",initial_bounds:[[[26,30,11.9],[41,25,0]],[[26,40,11.9],[41,35,0]]],towgs84:[130,-40,0]},{id:"04",initial_bounds:[[[26,36,11.9],[41,15,0]],[[26,46,11.9],[41,25,0]]],towgs84:[110,-120,0]},{id:"05",initial_bounds:[[[26,26,11.9],[41,15,0]],[[26,36,11.9],[41,25,0]]],towgs84:[52,-170,0]},{id:"06",initial_bounds:[[[26,16,11.9],[41,10,0]],[[26,26,11.9],[41,20,0]]],towgs84:[27,-177,0]},{id:"07",initial_bounds:[[[26,13,11.9],[41,0,0]],[[26,23,11.9],[41,10,0]]],towgs84:[45,-145,0]},{id:"08",initial_bounds:[[[26,15,11.9],[40,50,0]],[[26,25,11.9],[41,0,0]]],towgs84:[60,-100,0]},{id:"09",initial_bounds:[[[26,5,11.9],[40,50,0]],[[26,15,11.9],[41,0,0]]],towgs84:[105,-60,0]},{id:"10",initial_bounds:[[[26,0,11.9],[40,42,0]],[[26,14,11.9],[40,50,0]]],towgs84:[245,-30,0]}].map((t=>{const e=t.initial_bounds.flat(1).map((t=>$p(...t)));return{...t,initial_bounds:e}})).map((t=>{const e=[[t.initial_bounds[0],t.initial_bounds[3]],[t.initial_bounds[2],t.initial_bounds[3]],[t.initial_bounds[2],t.initial_bounds[1]],[t.initial_bounds[0],t.initial_bounds[1]]];return{...t,initial_mapbox_bounds:e}})))},cb=xm({name:"map",initialState:ub,reducers:{change_layer:(t,e)=>{t.layer;const n=e.payload;t.layer=n},change_historic:(t,e)=>{t.historic=lb(e.payload)}}}),{change_layer:hb}=cb.actions,{change_historic:db}=cb.actions,{change_bounds:fb}=cb.actions,pb=t=>t.map.layer,gb=t=>t.map.historic,mb=cb.reducer;var vb=6371008.8,yb={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*vb,kilometers:6371.0088,kilometres:6371.0088,meters:vb,metres:vb,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:vb/1852,radians:1,yards:6967335.223679999};function bb(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function _b(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!kb(t[0])||!kb(t[1]))throw new Error("coordinates must contain numbers");return bb({type:"Point",coordinates:t},e,n)}function wb(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return bb({type:"LineString",coordinates:t},e,n)}function xb(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function Mb(t,e){void 0===e&&(e="kilometers");var n=yb[e];if(!n)throw new Error(e+" units is invalid");return t*n}function Sb(t,e){void 0===e&&(e="kilometers");var n=yb[e];if(!n)throw new Error(e+" units is invalid");return t/n}function Pb(t){return t%(2*Math.PI)*180/Math.PI}function Eb(t){return t%360*Math.PI/180}function Cb(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return Mb(Sb(t,e),n)}function kb(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function Tb(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Ab(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function Lb(t,e,n){if(null!==t)for(var r,i,s,o,a,l,u,c,h=0,d=0,f=t.type,p="FeatureCollection"===f,g="Feature"===f,m=p?t.features.length:1,v=0;v<m;v++){a=(c=!!(u=p?t.features[v].geometry:g?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var y=0;y<a;y++){var b=0,_=0;if(null!==(o=c?u.geometries[y]:u)){l=o.coordinates;var w=o.type;switch(h=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(l,d,v,b,_))return!1;d++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],d,v,b,_))return!1;d++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],d,v,b,_))return!1;d++}"MultiLineString"===w&&b++,"Polygon"===w&&_++}"Polygon"===w&&b++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(_=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-h;s++){if(!1===e(l[r][i][s],d,v,b,_))return!1;d++}_++}b++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===Lb(o.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ob(t,e){!function(t,e){var n,r,i,s,o,a,l,u,c,h,d=0,f="FeatureCollection"===t.type,p="Feature"===t.type,g=f?t.features.length:1;for(n=0;n<g;n++){for(a=f?t.features[n].geometry:p?t.geometry:t,u=f?t.features[n].properties:p?t.properties:{},c=f?t.features[n].bbox:p?t.bbox:void 0,h=f?t.features[n].id:p?t.id:void 0,o=(l=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<o;i++)if(null!==(s=l?a.geometries[i]:a))switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(s,d,u,c,h))return!1;break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===e(s.geometries[r],d,u,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,d,u,c,h))return!1;d++}}(t,(function(t,n,r,i,s){var o,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(bb(t,r,{bbox:i,id:s}),n,0)&&void 0}switch(a){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}for(var l=0;l<t.coordinates.length;l++){var u=t.coordinates[l];if(!1===e(bb({type:o,coordinates:u},r),n,l))return!1}}))}function Ib(t,e){Ob(t,(function(t,n,r){var i=0;if(t.geometry){var s=t.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var o,a=0,l=0,u=0;return!1!==Lb(t,(function(s,c,h,d,f){if(void 0===o||n>a||d>l||f>u)return o=s,a=n,l=d,u=f,void(i=0);var p=wb([o,s],t.properties);if(!1===e(p,n,r,f,i))return!1;i++,o=s}))&&void 0}}}))}function Rb(t,e){return t[0]*e[0]+t[1]*e[1]}function zb(t,e,n){return"planar"===n.method?function(t,e,n){void 0===n&&(n={});var r=Tb(t),i=Tb(e);i[0]+=i[0]-r[0]>180?-360:r[0]-i[0]>180?360:0;var s=function(t,e,n){var r=n=void 0===n?vb:Number(n),i=t[1]*Math.PI/180,s=e[1]*Math.PI/180,o=s-i,a=Math.abs(e[0]-t[0])*Math.PI/180;a>Math.PI&&(a-=2*Math.PI);var l=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),u=Math.abs(l)>1e-11?o/l:Math.cos(i);return Math.sqrt(o*o+u*u*a*a)*r}(r,i);return Cb(s,"meters",n.units)}(t,e,n):function(t,e,n){void 0===n&&(n={});var r=Tb(t),i=Tb(e),s=Eb(i[1]-r[1]),o=Eb(i[0]-r[0]),a=Eb(r[1]),l=Eb(i[1]),u=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(a)*Math.cos(l);return Mb(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),n.units)}(t,e,n)}function Fb(t,e,n,r){void 0===r&&(r={});var i=Tb(t),s=Eb(i[0]),o=Eb(i[1]),a=Eb(n),l=Sb(e,r.units),u=Math.asin(Math.sin(o)*Math.cos(l)+Math.cos(o)*Math.sin(l)*Math.cos(a));return _b([Pb(s+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(o),Math.cos(l)-Math.sin(o)*Math.sin(u))),Pb(u)],r.properties)}o(787);const Nb="\n  0 703076.222 4571400.519\n  1 703073.971 4571397.624\n  2 703072.555 4571404.175\n  3 703083.729 4571424.394\n  4 703097.031 4571451.353\n  5 703105.012 4571464.3\n  6 703117.428 4571480.086\n  7 703131.262 4571503.143\n  8 703146.87 4571532.408\n  9 703159.64 4571551.385\n  10 703195.112 4571590.583\n  11 703229.875 4571637.229\n  12 703247.434 4571664.72\n  13 703271.378 4571695.936\n  14 703304.722 4571732.295\n  15 703330.795 4571765.107\n  16 703348.354 4571784.795\n  17 703377.973 4571814.237\n  18 703405.464 4571836.762\n  19 703416.283 4571854.321\n  20 703438.276 4571885.004\n  21 703449.095 4571902.741\n  22 703459.028 4571917.994\n  23 703468.783 4571919.058\n  24 703470.024 4571909.126\n  25 703468.251 4571883.94\n  26 703451.046 4571857.513\n  27 703438.099 4571831.263\n  28 703436.503 4571817.607\n  29 703438.215 4571806.866\n  30 703421.874 4571790\n  31 703404.687 4571772\n  32 703387.501 4571754\n  33 703371.086 4571736.811\n  34 703370.312 4571736\n  35 703353 4571718\n  36 703344.224 4571708.776\n  37 703335.875 4571700.001\n  38 703327.847 4571691.028\n  39 703326.237 4571689.229\n  40 703316.412 4571682.245\n  41 703239.952 4571616.62\n  42 703146.778 4571487.521\n  43 703076.222 4571400.519\n".trim().split("\n").map((t=>t.trim().split(/\s+/).slice(1).map(parseFloat))),jb="\n    0 702289.187 4570727\n    1 702272.313 4570708\n    2 702182.465 4570808.985\n    3 702287.661 4570899.638\n    4 702449.768 4571039.332\n    5 702489.999 4571074.001\n    6 702542.999 4571111\n    7 702760.923 4571260.762\n    8 702770 4571267\n    9 702777.999 4571271\n    10 702916.682 4571419.901\n    11 702968 4571475.001\n    12 703043.621 4571563.547\n    13 703085.001 4571612\n    14 703126.124 4571662.284\n    15 703287.001 4571859\n    16 703337.901 4571906.343\n    17 703343.535 4571912.311\n    18 703425.424 4571991.298\n    19 703433.769 4571999.348\n    20 703440.396 4572005.685\n    21 703446.821 4571997.598\n    22 703448.137 4571995.942\n    23 703456.021 4571986.021\n    24 703457.659 4571983.96\n    25 703468.898 4571969.816\n    26 703473.045 4571964.597\n    27 703479.157 4571956.904\n    28 703524.375 4571900\n    29 703515.526 4571889.849\n    30 703507.812 4571881.001\n    31 703490.875 4571863.001\n    32 703473.875 4571845.001\n    33 703456.625 4571826\n    34 703439.313 4571808\n    35 703438.769 4571807.439\n    36 703421.874 4571790\n    37 703404.687 4571772\n    38 703387.5 4571754\n    39 703371.086 4571736.811\n    40 703370.312 4571736\n    41 703353 4571718\n    42 703344.224 4571708.776\n    43 703335.874 4571700.001\n    44 703327.847 4571691.028\n    45 703325.692 4571688.842\n    46 703316.412 4571682.245\n    47 703239.952 4571616.62\n    48 703146.778 4571487.52\n    49 703076.222 4571400.518\n    50 703006.447 4571310.794\n    51 702985.28 4571286.687\n    52 702965.581 4571267.281\n    53 702942.687 4571263\n    54 702925.126 4571246\n    55 702907.375 4571228\n    56 702889.812 4571210\n    57 702872.125 4571193\n    58 702854.375 4571175\n    59 702836.812 4571157\n    60 702819.125 4571139\n    61 702801.813 4571121\n    62 702784.625 4571103\n    63 702767.374 4571085\n    64 702750.126 4571067\n    65 702741.221 4571057.906\n    66 702732.501 4571049.001\n    67 702714.374 4571032\n    68 702704.686 4571023.127\n    69 702695.813 4571015\n    70 702680.814 4571003.536\n    71 702676.187 4571000\n    72 702655.375 4570986\n    73 702633.812 4570974.001\n    74 702611.812 4570962\n    75 702589.688 4570950\n    76 702568 4570937\n    77 702546.999 4570923\n    78 702540.313 4570918.474\n    79 702526.312 4570908.999\n    80 702512.312 4570899.496\n    81 702505.687 4570894.999\n    82 702485.189 4570880.999\n    83 702464.875 4570866\n    84 702450.874 4570856.32\n    85 702444.626 4570852\n    86 702424.375 4570837\n    87 702419.124 4570833.11\n    88 702404.125 4570822\n    89 702395.837 4570816.288\n    90 702383.812 4570808\n    91 702363.625 4570793.001\n    92 702343.875 4570777\n    93 702324.875 4570761.001\n    94 702306.687 4570744\n    95 702289.187 4570727\n    ".trim().split("\n").map((t=>t.trim().split(/\s+/).slice(1).map(parseFloat)));ab.defs("EPSG:2100","+proj=tmerc +lat_0=0 +lon_0=24 +k=0.9996 +x_0=500000 +y_0=0 +ellps=GRS80 +towgs84=-199.87,74.79,246.62,0,0,0,0 +units=m +no_defs +type=crs");const Db=jb.map((t=>ab("EPSG:2100","WGS84",t))),Bb=Nb.map((t=>ab("EPSG:2100","WGS84",t))),Ub="\nnorth 703891.62 4572330.09\nnorth 703426.86 4571795.13\nnorth 703310.00 4571671.36\nclose 703294.23 4571653.73\nsouth 703239.61 4571590.63\nsouth 702980.14 4571270.21\nsouth 702942.69 4571263.00\nsouth 702788.91 4571107.49\n".trim().split("\n").map((t=>t.trim().split(/\s+/).slice(1).map(parseFloat))),Vb="\nnorth 700916.74 4569281.86\nclose 700532.36 4569176.34\nsouth 700238.79 4569110.4\n".trim().split("\n").map((t=>t.trim().split(/\s+/).slice(1).map(parseFloat))),Wb={type:"FeatureCollection",features:[{type:"Feature",properties:{fill_color:[255,0,0,255],line_color:[255,0,0,255],description:"border fragment near the islet"},geometry:{type:"LineString",coordinates:Ub.map((t=>ab("EPSG:2100","WGS84",t)))}},{type:"Feature",properties:{fill_color:[255,0,0,255],line_color:[255,0,0,255]},geometry:{type:"Point",coordinates:ab("EPSG:2100","WGS84",[703321.07,4571636.56])}},{type:"Feature",properties:{fill_color:[255,0,0,255],line_color:[255,0,0,255]},geometry:{type:"LineString",coordinates:Vb.map((t=>ab("EPSG:2100","WGS84",t)))}},{type:"Feature",properties:{fill_color:[255,0,0,255],line_color:[255,0,0,255]},geometry:{type:"Point",coordinates:ab("EPSG:2100","WGS84",[700524.72,4569221.77])}}]},Gb=_b([$p(26,25,45.72),$p(41,16,23.99)]),Hb=_b([$p(26,25,41.5),$p(41,16,21.2)]),qb=function(t,e,n){if(void 0===n&&(n={}),n.method||(n.method="geodesic"),n.units||(n.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=_b(t):"Point"===t.type?t=bb(t):Ab(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=wb(e):"LineString"===e.type?e=bb(e):Ab(e,"LineString","line");var r=1/0,i=t.geometry.coordinates;return Ib(e,(function(t){var e=t.geometry.coordinates[0],s=t.geometry.coordinates[1],o=function(t,e,n,r){var i=[n[0]-e[0],n[1]-e[1]],s=Rb([t[0]-e[0],t[1]-e[1]],i);if(s<=0)return zb(t,e,{method:r.method,units:"degrees"});var o=Rb(i,i);if(o<=s)return zb(t,n,{method:r.method,units:"degrees"});var a=s/o;return zb(t,[e[0]+a*i[0],e[1]+a*i[1]],{method:r.method,units:"degrees"})}(i,e,s,n);o<r&&(r=o)})),Cb(r,"degrees",n.units)}(Hb,wb(Db),{units:"meters"}),Xb=Fb(Hb,qb,-53,{units:"meters"}),Zb=xb([wb([Hb.geometry.coordinates,Xb.geometry.coordinates]),bb({type:"Point",coordinates:Fb(Hb,qb/2,-53,{units:"meters"}).geometry.coordinates},{pointType:"text",text:`${qb.toFixed(2)}m`})]),Yb=xb([Gb,Hb,bb({type:"Point",coordinates:Fb(Hb,qb,-53,{units:"meters"}).geometry.coordinates})]),$b=[$p(26,25,41.5),$p(41,16,21.2)];console.log("map center: ",$b),console.log("data_dir: ","https://raw.githubusercontent.com/endiaferon/evros-isle-refugees/main/data"),Gp();const Qb={longitude:$p(26,25,41.5),latitude:$p(41,16,21.2),zoom:18,minZoom:10,maxZoom:18,pitch:70,bearing:35,maxPitch:80,minPitch:0};function Kb(t){return St((()=>new Yc(t))).setProps(t),null}function Jb(){const t=e.useRef(),[n,r]=(0,e.useState)(!1),[i,s]=(0,e.useState)(!1),[o,a]=(0,e.useState)(!1),[l,u]=(0,e.useState)(!1),[c,h]=(0,e.useState)(!0),d=($(),V(pb)),f=V(gb),{show_kaek_area:p,show_forest_area:g,show_nuts:m,show_euroregional_area:v,show_coastline:y,show_borders:b,show_hmgs_borders:_,show_satelite:w,show_municipalities:x,show_hmgs_tiles:M,show_historic_map:S}=d,P=(t=>t?"mapbox://styles/mapbox/satellite-streets-v11":"mapbox://styles/mapbox/light-v10")(w),E=[new Tp({id:"geojson-layer-1",data:"https://raw.githubusercontent.com/endiaferon/evros-isle-refugees/main/data/nuts.geojson",visible:m,pickable:!0,stroked:!0,filled:!0,extruded:!0,wireframe:!0,lineWidthMinPixels:1,getFillColor:t=>"TR"==t.properties.CNTR_CODE?[180,60,60,50]:[60,60,180,50],getLineColor:t=>"TR"==t.properties.CNTR_CODE?[180,60,60,200]:[60,60,180,200],getPointRadius:100,getLineWidth:1,getElevation:-.6}),new Op({id:"polygon-layer-1",data:[Db],visible:p,getPolygon:t=>t,pickable:!1,extruded:!0,stroked:!0,filled:!0,wireframe:!0,lineWidthMinPixels:2,getFillColor:[100,100,200,50],getLineColor:[100,100,200,200],getElevation:10,getLineWidth:2}),new Op({id:"polygon-layer-2",data:[Bb],visible:g,getPolygon:t=>t,pickable:!1,extruded:!0,stroked:!0,filled:!0,wireframe:!0,lineWidthMinPixels:2,getFillColor:[152,251,152,150],getLineColor:[152,251,152,255],getLineWidth:2,getElevation:-.2}),new Tp({id:"geojson-layer-2",data:Wb,visible:_,pickable:!0,stroked:!0,filled:!0,extruded:!0,wireframe:!0,lineWidthMinPixels:2,getFillColor:t=>t.properties.fill_color,getLineColor:t=>t.properties.line_color,getPointRadius:.5,getLineWidth:1,getElevation:1}),new Tp({id:"geojson-layer-3",data:"https://raw.githubusercontent.com/endiaferon/evros-isle-refugees/main/data/EL511.geojson",visible:v,pickable:!0,stroked:!0,filled:!0,extruded:!0,wireframe:!0,getFillColor:[100,100,200,50],getLineColor:[100,100,200,200],getPointRadius:.5,getLineWidth:2,getElevation:-.3}),new Tp({id:"geojson-layer-4",data:"https://raw.githubusercontent.com/endiaferon/evros-isle-refugees/main/data/hellenic_coastline.geojson",visible:y,pickable:!0,stroked:!0,filled:!0,extruded:!0,wireframe:!0,getFillColor:[100,100,200,50],getLineColor:[100,100,200,200],getPointRadius:.5,getLineWidth:8,lineWidthMinPixels:1,lineWidthMaxPixels:10,getElevation:1}),new Tp({id:"geojson-layer-5",data:"https://raw.githubusercontent.com/endiaferon/evros-isle-refugees/main/data/municipalities.geojson",visible:x,pickable:!0,stroked:!0,filled:!0,extruded:!0,wireframe:!0,getFillColor:[100,200,200,50],getLineColor:[100,200,200,200],getPointRadius:.5,getLineWidth:10,lineWidthMinPixels:2,lineWidthMaxPixels:10,getElevation:1}),new Tp({id:"geojson-layer-text",data:Zb,getLineColor:[100,200,200,200],getPointRadius:.5,getLineWidth:10,lineWidthMinPixels:2,lineWidthMaxPixels:10,pointType:"text",textSizeMinPixels:0,textSizeMaxPixels:16,textSizeScale:.5,textSizeUnits:"meters",getTextPixelOffset:[0,-5],getTextAlignmentBaseline:"bottom"}),new Tp({id:"geojson-layer-circles",data:Yb,getLineColor:[100,200,200,200],getPointRadius:12.5,getLineWidth:1,getFillColor:[100,200,200,10],lineWidthMinPixels:0,lineWidthMaxPixels:3,pointType:"circle"}),f.map((t=>new jp({id:`bitmap-layer-${t.id}`,bounds:t.bounds,image:`https://raw.githubusercontent.com/endiaferon/evros-isle-refugees/main/data/1926/${t.id}_normalized.jpg`,opacity:d.bitmap.opacity,transparentColor:[255,255,255,0]})))],C={id:"gys_tiles",type:"raster",paint:{"raster-opacity":M?1:0},"background-opacity":1};return e.createElement(vt,{ref:t,reuseMaps:!0,mapStyle:P,styleDiffing:!0,initialViewState:Qb,onStyleData:()=>{const e=t.current.getMap();e.getLayer("admin-0-boundary")&&e.getLayer("admin-0-boundary-bg")&&(e.setLayoutProperty("admin-0-boundary","visibility","none"),e.setLayoutProperty("admin-0-boundary-bg","visibility","none"))}},e.createElement(Lt,{id:"gys_tiles",type:"raster",tiles:["https://raw.githubusercontent.com/endiaferon/evros-isle-refugees/main/data/tiles/{z}_{x}_{y}.png"],minzoom:11,maxzoom:17,tileSize:256,attribution:"HMGS",bounds:[25.8,40.7,26.65,41.75]},e.createElement(It,C)),S&&[0,6,5].map((t=>e.createElement(Lt,{key:t,type:"image",url:`https://raw.githubusercontent.com/endiaferon/evros-isle-refugees/main/data/1926/${f[t].id}_normalized.jpg`,coordinates:f[t].mapbox_bounds},e.createElement(It,{id:`img_layer_${t}`,type:"raster",beforeId:"gys_tiles"})))),e.createElement(Kb,{layers:E,interleaved:!0}),e.createElement(wt,{id:"marker-2",longitude:26.395125,latitude:41.252078,onClick:t=>s(!0)}),i&&e.createElement(Mt,{id:"popup",longitude:26.395125,latitude:41.252078,anchor:"bottom",closeButton:!0,closeOnClick:!1,style:{width:300},maxWidth:"300px",onClose:t=>s(!1)},e.createElement(Yp,{tweetId:"1559165985944379393",options:{dnt:!0,conversation:!0}})),e.createElement(wt,{id:"marker-3",longitude:26.43043,latitude:41.27511,onClick:t=>a(!0)}),o&&e.createElement(Mt,{id:"popup",longitude:26.43043,latitude:41.27511,anchor:"bottom",closeButton:!0,closeOnClick:!1,style:{width:300},maxWidth:"300px",onClose:t=>a(!1)},e.createElement(Yp,{tweetId:"1558937001583591425",options:{dnt:!0,conversation:"none"}})),e.createElement(wt,{id:"marker-4",longitude:26.429367,latitude:41.273331,onClick:t=>u(!0)}),l&&e.createElement(Mt,{id:"popup",longitude:$p(26,25,45.72),latitude:$p(41,16,23.99),anchor:"bottom",closeButton:!0,closeOnClick:!1,style:{width:300},maxWidth:"300px",onClose:t=>u(!1)},e.createElement(Yp,{tweetId:"1558936987754700800",options:{dnt:!0,conversation:"none"}})),e.createElement(wt,{id:"marker-1",longitude:$p(26,25,45.4),latitude:$p(41,16,23.2),onClick:t=>r(!0)}),n&&e.createElement(Mt,{id:"popup-1",longitude:$p(26,25,45.4),latitude:$p(41,16,23.2),anchor:"bottom",closeButton:!0,closeOnClick:!1,style:{width:300},maxWidth:"300px",onClose:t=>r(!1)},e.createElement(Yp,{tweetId:"1557000892909510658",options:{dnt:!0,conversation:!0}})),e.createElement(wt,{id:"marker-point-3",longitude:$p(26,25,41.5),latitude:$p(41,16,21.2),onClick:t=>h(!0)}),c&&e.createElement(Mt,{id:"popup-5",longitude:$p(26,25,41.5),latitude:$p(41,16,21.2),anchor:"bottom",closeButton:!0,closeOnClick:!1,style:{width:300},maxWidth:"300px",onClose:t=>h(!1)},e.createElement("p",null,"Distance from 🇬🇷 Cadastre area: ",qb.toFixed(3)," meters.",e.createElement("br",null),"As an example of how a 1mm thick dot on the historic map of 1926 looks like, this circle repressents such a dot. The west circle repressents how a 1mm dot on the border line looks like.")),e.createElement(kt,null),e.createElement(Et,{visualizePitch:!0}))}var t_=o(379),e_=o.n(t_),n_=o(795),r_=o.n(n_),i_=o(569),s_=o.n(i_),o_=o(565),a_=o.n(o_),l_=o(216),u_=o.n(l_),c_=o(589),h_=o.n(c_),d_=o(830),f_={};f_.styleTagTransform=h_(),f_.setAttributes=a_(),f_.insert=s_().bind(null,"head"),f_.domAPI=r_(),f_.insertStyleElement=u_(),e_()(d_.Z,f_),d_.Z&&d_.Z.locals&&d_.Z.locals;var p_=o(632),g_={};function m_(){return m_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m_.apply(this,arguments)}function v_(){const t=$(),n=[...V(gb)],[r,i]=(0,e.useState)(6);return e.createElement(e.Fragment,null,e.createElement("br",null),e.createElement("span",{style:{display:"inline-block",verticalAlign:"top",marginTop:"5px",marginRight:"10px"}},"page ",r),e.createElement("input",{type:"range",min:0,max:10,value:r,step:1,style:{width:"19em"},onChange:t=>i(parseInt(t.target.value))}),e.createElement("br",null),e.createElement("span",{style:{display:"inline-block",verticalAlign:"top",marginTop:"5px",marginRight:"10px"}},"dx ",n[r].towgs84[0]),e.createElement("input",{type:"range",min:-500,max:500,value:n[r].towgs84[0],step:1,style:{width:"19em"},onChange:e=>{var i=[...n[r].towgs84];i[0]=parseInt(e.target.value),console.log(i),n[r]={...n[r],towgs84:i},t(db(n))}}),e.createElement("br",null),e.createElement("span",{style:{display:"inline-block",verticalAlign:"top",marginTop:"5px",marginRight:"10px"}},"dy ",n[r].towgs84[1]),e.createElement("input",{type:"range",min:-500,max:500,value:n[r].towgs84[1],step:1,style:{width:"19em"},onChange:e=>{var i=[...n[r].towgs84];i[1]=parseInt(e.target.value),console.log(i),n[r]={...n[r],towgs84:i},t(db(n))}}))}function y_(){const t=$(),n=V(pb),r=Boolean(function(){let{matches:t}=(0,e.useContext)(p),n=t[t.length-1];return n?n.params:{}}()?.edit_map);return e.createElement(e.Fragment,null,e.createElement("tr",null,e.createElement("td",{style:{verticalAlign:"middle"}},"🇬🇷 1926 historic map"," ",e.createElement("span",{style:{color:"grey"}},"georeferenced to modern",e.createElement("br",null),"coordinates using this ↑ map")),e.createElement("td",null,e.createElement("input",{type:"checkbox",defaultChecked:n.show_historic_map,onChange:e=>{t(hb({...n,show_historic_map:e.target.checked}))}}),r&&e.createElement(v_,null))))}function b_(){const t=$(),n=V(pb);return e.createElement("div",{className:"legend"},e.createElement("div",{style:{maxWidth:"26em",textAlign:"justify",margin:"auto",marginBottom:"5px"}},"Fact Checking (work in progress): On Aug 2022, Greek goverment refused to offer humanitarian aid to 39 stranded refugees on an Evros islet. Their initial claim was that the whole islet belonged to Turkey."," ",e.createElement("a",{href:"https://endiaferon.github.io/evros-islet-refugees/"},"After that claim was debunked"),", they started claiming that they denied them humanitarian aid because they couldn't operate on turkish soil (meaning the east side of the islet) and referenced 3 gps locations of the refugees on the east side.",e.createElement("br",null),e.createElement("br",null),"This visualization aims to illustrate how futile is the reasoning that somehow the refugees were stranded just on the east side of the islet.",e.createElement("br",null),"More importantly, it aims to shed some light on facts regarding the accuracy of the border line that conveniently the 🇬🇷 Ministry of Defense left out of their official report:",e.createElement("br",null),"• The single source of truth regarding the border that both GR & TR have agreed upon, is the 1926 historic map of 1:25000 scale. That means that a line that has 1mm thickness on paper corresponts to a line 25 meters wide on the ground.",e.createElement("br",null),"• The ",e.createElement("abbr",{title:"Coordinate Reference System"},"CRS")," of the historic map can not be accurately migrated to a modern CRS which introduces more imprecission to the accuracy of those coordinates.",e.createElement("br",null)," • The above issues are acknowledged by HMGS which admits having difficulty specifing some parts of the GR/TR border in one of their technical reports. (",e.createElement("a",{href:"https://drive.google.com/file/d/1SAE-Fg7dNP01lmumhChsVZ_tBebLfm3G/view"},"source"),")."),e.createElement("table",{style:{margin:"auto"}},e.createElement("tbody",null,e.createElement("tr",null,e.createElement("td",{style:{minWidth:"23em"}},"🇬🇷 Cadastre ΚΑEK 11035ΕΚ00075 area"),e.createElement("td",null,e.createElement("input",{type:"checkbox",defaultChecked:n.show_kaek_area,onChange:e=>{t(hb({...n,show_kaek_area:e.target.checked}))}}))),e.createElement("tr",null,e.createElement("td",null,"🇬🇷 Military Geographical Service Map"),e.createElement("td",null,e.createElement("input",{type:"checkbox",defaultChecked:n.show_hmgs_tiles,onChange:e=>{t(hb({...n,show_hmgs_tiles:e.target.checked}))}}))),e.createElement(y_,null),e.createElement("tr",null,e.createElement("td",null,"Satelite Imaging"),e.createElement("td",null,e.createElement("input",{type:"checkbox",checked:n.show_satelite,onChange:e=>{t(hb({...n,show_satelite:e.target.checked}))}}))))),e.createElement("span",{style:{color:"grey"}},"Control + drag changes the tilt ",e.createElement("br",null),"Click on a marker to open info"),e.createElement("br",null),e.createElement("span",m_({className:"cc",style:{color:"grey"}},{"xmlns:cc":"http://creativecommons.org/ns#"}),"This work is marked with"," ",e.createElement("a",{href:"http://creativecommons.org/publicdomain/zero/1.0?ref=chooser-v1",target:"_blank",rel:"license noopener noreferrer",style:{display:"inline-block"}},"CC0 1.0",e.createElement("img",{style:{height:"1.2em",marginLeft:"3px",verticalAlign:"text-bottom"},src:"https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"}),e.createElement("img",{style:{height:"1.2em",marginLeft:"3px",verticalAlign:"text-bottom"},src:"https://mirrors.creativecommons.org/presskit/icons/zero.svg?ref=chooser-v1"}))))}function __(){return e.createElement("div",{id:"layout"},e.createElement(Jb,null),e.createElement(b_,null))}function w_(){return e.createElement(__,null)}g_.styleTagTransform=h_(),g_.setAttributes=a_(),g_.insert=s_().bind(null,"head"),g_.domAPI=r_(),g_.insertStyleElement=u_(),e_()(p_.Z,g_),p_.Z&&p_.Z.locals&&p_.Z.locals;const x_=xm({name:"layout",initialState:{window:{width:640,height:480},is_dark:window.matchMedia?window.matchMedia("(prefers-color-scheme: light)").matches?(console.debug("prefers-color-scheme: light"),!1):window.matchMedia("(prefers-color-scheme: dark)").matches?(console.debug("prefers-color-scheme: dark"),!0):(console.debug("prefers-color-scheme: other"),!0):(console.debug("window.matchMedia",window.matchMedia),!0)},reducers:{_set_is_dark:(t,e)=>{t.is_dark=e.payload},update_window:(t,e)=>{console.debug("update_window",e.payload),t.window=e.payload}}}),{_set_is_dark:M_,update_window:S_}=x_.actions,P_=function(t){var e,n=function(t){return function(t){void 0===t&&(t={});var e=t.thunk,n=void 0===e||e,r=(t.immutableCheck,t.serializableCheck,new ym);return n&&(function(t){return"boolean"==typeof t}(n)?r.push(am):r.push(am.withExtraArgument(n.extraArgument))),r}(t)},r=t||{},i=r.reducer,s=void 0===i?void 0:i,o=r.middleware,a=void 0===o?n():o,l=r.devTools,u=void 0===l||l,c=r.preloadedState,h=void 0===c?void 0:c,d=r.enhancers,f=void 0===d?void 0:d;if("function"==typeof s)e=s;else{if(!function(t){if("object"!=typeof t||null===t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;for(var n=e;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return e===n}(s))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');e=function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];"function"==typeof t[i]&&(n[i]=t[i])}var s,o=Object.keys(n);try{!function(t){Object.keys(t).forEach((function(e){var n=t[e];if(void 0===n(void 0,{type:tm.INIT}))throw new Error(Qg(12));if(void 0===n(void 0,{type:tm.PROBE_UNKNOWN_ACTION()}))throw new Error(Qg(13))}))}(n)}catch(t){s=t}return function(t,e){if(void 0===t&&(t={}),s)throw s;for(var r=!1,i={},a=0;a<o.length;a++){var l=o[a],u=n[l],c=t[l],h=u(c,e);if(void 0===h)throw e&&e.type,new Error(Qg(14));i[l]=h,r=r||h!==c}return(r=r||o.length!==Object.keys(t).length)?i:t}}(s)}var p=a;"function"==typeof p&&(p=p(n));var g=im.apply(void 0,p),m=rm;u&&(m=vm(mm({trace:!1},"object"==typeof u&&u)));var v=[g];return Array.isArray(f)?v=cm([g],f):"function"==typeof f&&(v=f(v)),nm(e,h,m.apply(void 0,v))}({reducer:{map:mb,layout:x_.reducer}}),E_=()=>e.createElement(q,{store:P_},e.createElement(w_,null)),C_=()=>e.createElement(T,null,e.createElement(C,{path:"/",element:e.createElement(E_,null)}),e.createElement(C,{path:":edit_map",element:e.createElement(E_,null)}));(0,i.s)(r().body.appendChild(r().createElement("div"))).render(e.createElement(L,null,e.createElement(C_,null)))})()})();